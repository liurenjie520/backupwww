function _defineProperty(c,a,g){return a in c?Object.defineProperty(c,a,{value:g,enumerable:!0,configurable:!0,writable:!0}):c[a]=g,c}var FxAjax=function(c){"use strict";function a(c){var g=P(c);"string"===g?J.push({type:"GET",uri:c}):"object"===g?J.push(c):"array"===g&&c.forEach(a)}function g(c){for(var a=function(c){return"string"===P(c)?c.toUpperCase():"GET"},g=a(c.type),v=c.url.replace(D,""),k=void 0,y=void 0,i=0,l=J.length;l>i;i++)if(k=J[i],g===a(k.type)&&0===v.indexOf(k.uri)){y=k;break}return!!y}function v(){var c=1e3*(C.ApolloConfig&&ApolloConfig.ack_server_expires||600);clearInterval(S),S=setInterval(k,c)}function k(){var a=function(){"undefined"==typeof KgAck&&(C.KgAck={Cookie:{write:T,read:T}})},g=function(){if("undefined"!=typeof KgAck&&KgAck.Cookie&&KgAck.Cookie.write===T)try{delete C.KgAck}catch(e){C.KgAck=void 0}};a(),c({url:B[G],dataType:"jsonp",jsonp:"callback",data:{appid:1,clientver:1234,clienttime:(new Date).getTime(),plats:w().join(",")},timeout:6e4,success:function(c){var a=void 0;c&&1==c.errorCode&&c.data&&(a=y(c.data,!0),localStorage.setItem(U,JSON.stringify(a))),g()},error:g})}function y(c,a){if("object"!==P(c))return c;var g={},v=void 0,k=void 0,y=void 0;for(I in c)v=c[I],v&&"array"===P(v.list)&&(y=v.list.reduce(function(c,a){return c.concat(a)},[]),k=a?_(I,y[0]):y[0],g[k]=y);return g}function _(c,def){var a=Y[G];return a[c]&&a[c].list[0][0]||def}function w(){var c=Y[G],a=void 0,g=[];for(I in c)a=parseInt(I.replace("server_","")),a&&g.push(a);return g}function h(){var c=void 0,a=localStorage.getItem(U);return c=a?JSON.parse(a):y(Y[G])}function b(c){if(!c)return!1;var a=h();return a&&a[c]&&a[c][0]&&a[c][0]!==c?a[c][0]:!1}function E(c){var a=void 0,g=void 0,v="",k=h();if(!k||k.length<=0)return v;for(I in k)if(g=k[I],a=g?g.indexOf(c):-1,a>-1&&a+1<g.length){v=g[a+1];break}return v}function j(c,a){return c&&a?c.replace(D,function(c,g){return g+"//"+a}):c}function A(){var d=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(d+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=(d+16*Math.random())%16|0;return d=Math.floor(d/16),("x"===c?r:3&r|8).toString(16)})}function O(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;return _defineProperty({},c,A())}c=c&&c.hasOwnProperty("default")?c["default"]:c;var I=void 0,S=void 0,C=window,K=Object.prototype.toString,T=function(){},P=function(c){return K.call(c).toLowerCase().slice(8,-1)},D=/^([\w-]+:)?\/\/([^\/]+)/,N="idempotent",J=[],M="test",F="prod",G=/^fx[0-9]+|^ci-|^uiautotest|^kf[a-z]+/.test(location.host)&&!/^fx140/.test(location.host)?M:F,L="fx.ack",R=10,$=2e3,z=1.5,U="fxack_server_domains",Y={prod:{server_10011:{list:[["fanxing.kugou.com"],["sparefx2.kugou.com"]]},server_10014:{list:[["service.fanxing.kugou.com"],["servicefx2.kugou.com"]]},server_10023:{list:[["service1.fanxing.kugou.com"],["service3.fanxing.kugou.com"],["service2.fanxing.kugou.com"],["service4.fanxing.kugou.com"]]},server_10020:{list:[["fx.service.kugou.com"],["fxservice1.kugou.com"],["fxservice2.kugou.com"]]},server_10022:{list:[["fx1.service.kugou.com"],["fxservice3.kugou.com"],["fx2.service.kugou.com"],["fxservice4.kugou.com"]]},server_10028:{list:[["p1.fx.kgimg.com"],["p3fx.service.kugou.com"]]},server_10029:{list:[["p3.fx.kgimg.com"],["p3fx.service.kugou.com"]]},server_10030:{list:[["p3fx.kgimg.com"],["p3fx.service.kugou.com"]]},server_10033:{list:[["s3.fx.kgimg.com"],["s3fx.kgimg.com"]]},server_10034:{list:[["image.fanxing.kugou.com"],["s3fx.kgimg.com"]]}},test:{server_10050:{list:[["video.fxwork.kugou.com"],["video01.fxwork.kugou.com"]]},server_10028:{list:[["s10.fxwork.fanxing.kugou.com"],["s10ack.fxwork.kugou.com","s4fx.kgimg.com"]]},server_10029:{list:[["s10.fxwork.kugou.com"],["s10ack.fxwork.kugou.com","s4fx.kgimg.com"]]},server_10033:{list:[["s3.fx.kgimg.com"],["s3fx.kgimg.com"]]},server_10034:{list:[["image.fanxing.kugou.com"],["s3fx.kgimg.com"]]}}},B={prod:"https://serveraddrweb.kugou.com/",test:"https://kgack.fxwork.kugou.net/"},H=function(a){var v=void 0;return a.ackbackup!==!0?(v=D.test(a.url)&&RegExp.$2,a.originalError=a.error,a.url=j(a.url,b(v)),"undefined"!=typeof a.timeout||g(a)||G!==F||(a.timeout=$)):"number"==typeof a.timeout&&(a.timeout=a.timeout*("number"==typeof a.timeout_rate?a.timeout_rate:z)),a.error=function(v,k,y){var _=void 0,w=void 0;return"function"==typeof a.alwaysError&&a.alwaysError(v,k,y),!g(a)&&(_=D.test(a.url)&&RegExp.$2,!_&&/^\/\w+/.test(a.url)&&(a.url=location.protocol+"//"+location.host+a.url,_=location.host),w=E(_),w&&_!==w)?(a.ackbackup=!0,a.url=j(a.url,w),_===location.host&&a.cors!==!0&&(a.dataType="jsonp"),c(a)):void("function"==typeof a.originalError&&a.originalError(v,k,y))},a};return H.extend=function(c){"object"!==P(c)&&console.error("error type of config");var a=Object.prototype.hasOwnProperty;for(var g in c)if(a.call(Y,g)){var v=c[g],k=Y[g];for(var y in v){if(a.call(k,y))return void console.info("server already exist in list:"+y);k[y]={list:v[y].map(function(c){return[c]})}}}else console.info("env not found:"+g);var _=localStorage.getItem(U),w=_&&""!==_;if(w){_=h();var b=c[G];for(var E in b){var j=b[E],A=j[0];if(A in _)return void console.info("domain already exist in list:"+A);_[A]=j}localStorage.setItem(U,JSON.stringify(_))}},H.push=a,H.IDEMPOTENT_KEY=N,H.getIdempotent=O,H.getAckDomainList=h,H.version="2.0.21",c.pushInterceptors({index:R,name:L,fn:H}),v(),c.ack=H,c}(FxAjax);
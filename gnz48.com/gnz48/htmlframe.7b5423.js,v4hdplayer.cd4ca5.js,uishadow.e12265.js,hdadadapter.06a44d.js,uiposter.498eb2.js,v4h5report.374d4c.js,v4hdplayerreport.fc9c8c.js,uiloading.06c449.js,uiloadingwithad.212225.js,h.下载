/*!
 * Tencent Video Player creative plugins.
 * @Copyright 2021 
 * modify at: 2021-12-23 17:43:32
 * power by Tencent Video FE Team
 */
!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=28)}([function(e,t,i){"use strict";e.exports=function(e){return{log:function(){var t=Array.prototype.slice.call(arguments),i=new Date,r=[i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()].join(":");t.unshift(e?"["+r+" TxpCreativePlayer/"+e+"]":""),function(){window.TxpCreativePlayer&&TxpCreativePlayer.debug&&window.console&&window.console.log&&window.console.log.apply(window.console,arguments)}.apply(null,t)},err:function(){var t=Array.prototype.slice.call(arguments),i=new Date,r=[i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()].join(":");t.unshift(e?"["+r+" TxpCreativePlayer/"+e+"]":""),function(){window.TxpCreativePlayer&&TxpCreativePlayer.debug&&window.console&&window.console.error&&window.console.error.apply(window.console,arguments)}.apply(null,t)}}}},function(e,t,i){"use strict";e.exports={AD_STOP:"innerStopAdEvt",AD_SHOW:"innerShowAdEvt",AD_HIDE:"innerHideAdEvt",REPORT_EVENT:{AD_VIEW:"reportAdView",AD_GET_INFO:"reportAdGetInfo",AD_GET_INFO_ERROR:"reportAdGetInfoError",AD_LOAD_COMPLETE:"reportAdLoadComplete",AD_END:"reportAdEnd",AD_CLICK:"reportAdClick",AD_SCREEN_SHOT:"reportAdScreenShot",AD_DURING:"reportAdDuring",AD_MIND_CZC:"reportCzcMind",AD_DP3_CZC:"reportCzcDp3",AD_POINT_VIEW:"reportPointView",AD_3PARTY_VIEW:"report3PartyView",NEW_DP3:"newDp3",AD_EFFECT_CLICK:"reportAdEffectClick",AD_VIDEO_PLAY_STATUS:"videoPlayStatus"},TXPLAYER_EVENT:{AD_REQUEST_ORDER:"requestOrderEvt",AD_GET_INFO:"getAdInfoEvt",AD_LOAD_START:"loadStartEvt",AD_LOAD_READY:"loadReadyEvt",AD_LOAD_PROGRESS:"loadProgressEvt",AD_LOAD_COMPLETE:"loadCompleteEvt",AD_ENTER_COUNTDOWN:"enterCountdownEvt",AD_ENTER_COUNTDOWN_COMPLETE:"enterCountdownCompleteEvt",AD_PLAY_START:"playStartEvt",AD_PLAY_END:"playEndEvt",AD_PLAY_ERROR:"playErrorEvt",AD_PAUSE:"pauseAdEvt",AD_RESUME:"remuseAdEvt",AD_SHOW:"showAdEvt",AD_STOP:"stopAdEvt",AD_EXIT_WINDOW_FULLSCREEN:"exitWindowFullscreen",AD_EXIT_BROWSER_FULLSCREEN:"exitBrowserFullscreen",AD_MOVE_IN:"moveinAd",AD_MOVE_OUT:"moveoutAd",AD_REPORT:"reportAd"},TXPLAYER_API:{UP_BARRAGE_ZINDEX:"upBarrageZindex",RESET_BARRAGE_ZINDEX:"resetBarrageZindex",GET_PLAYSTATE:"getPlayState",GET_CONTROL_STATUS:"getControlStatus",GET_VOLUME:"getVolume"},UI_EVENT:{VIDEO_SKIP_TEXT:"videoSkipTextClickEvt",VIDEO_CLOSE_BUTTON_CLICK:"videoCloseButtonClickEvt",VIDEO_NO_SKIP_CLOSE_BUTTON_CLICK:"videoNoSkipCloseButtonClickEvt",VIDEO_NO_SKIP_KNOW_BUTTON_CLICK:"videoNoSkipKnowButtonClickEvt",VIDEO_NO_SKIP_BUTTON_CLICK:"videoNoSkipButtonClickEvt",VIDEO_LINK_AREA_CLICK:"videoLinkAreaClickEvt",VIDEO_DETAIL_BUTTON_CLICK:"videoDetailButtonClickEvt",VIDEO_VOLUME_BUTTON_CLICK:"videoVolumeButtonClickEvt",VIDEO_PLAY_ICON_CLICK:"videoPlayIconClick",ZT_VIDEO_CLOSE_CLICK:"ztVideoCloseClick",ZT_VIDEO_MUTE_CLICK:"ztVideoMuteClick",ZT_VIDEO_RETRY_CLICK:"ztVideoRetryClick",ACTIVE_SCAN_DETAIL_BUTTON_CLICK:"activeScanDetailButtonClick",ACTIVE_NORMAL_DETAIL_BUTTON_CLICK:"activeNormalDetailButtonClick",TOGGLE_CENTER_QRCODE:"toggleCenterQrcode",CENTER_QRCODE_CLOSE_BUTTON_CLICK:"centerQrcodeButtonClick"},VPAID_EVENT:{AdLoaded:"AdLoaded",AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdSkippableStateChange:"AdSkippableStateChange",AdSizeChange:"AdSizeChange",AdLinearChange:"AdLinearChange",AdDurationChange:"AdDurationChange",AdExpandedChange:"AdExpandedChange",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdLog:"AdLog",AdError:"AdError",AdPauseTimeCount:"AdPauseTimeCount",AdResumeTimeCount:"AdResumeTimeCount"}}},function(e,t,i){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={getScale:function(e,t,i,r,n){var a,o,s;return a=i/e,o=r/t,s=Math.min(a,o),n&&(n.width=parseInt(n.width*s),n.height=parseInt(n.height*s)),s||1},checkSuffix:function(e,t){if(!e)return!1;e=e.toLowerCase();var i=/\.(\w+)(?:$|\?|\#)/.exec(e);if(!i||!i[1])return!1;if(!t)return i[1];if("string"==typeof t)return i[1]===t;if(t instanceof Array){for(var r=t.length-1;r>=0;r--)if(i[1]===t[r])return!0;return!1}},loadJs:function(e,t,i,r){var n=document.createElement("script");n.type="text/javascript",n.charset="UTF-8",n.src=e.replace(/http(s)?:/,location.protocol);var a=!1;if(n.onerror=function(e){a=!0,t({src:e.target.src,error:{type:"jserror",code:404}})},n.addEventListener?n.addEventListener("load",function(){a=!0,t()},!1):n.attachEvent&&n.attachEvent("onreadystatechange",function(){"loaded"==window.event.srcElement.readyState&&(a=!0,t())}),r){var o=document.createElement("base");o.href=n.src.match(/.+\//)[0],r.getElementsByTagName("head")[0].appendChild(o)}i?i.appendChild(n):document.getElementsByTagName("head")[0].appendChild(n),setTimeout(function(){a||(t&&t({src:e,error:{type:"js timeout",code:502}}),t=function(){})},5e3)},appendParamsToUrl:function(e,t){return"string"==typeof e&&t&&(e+=(-1==e.indexOf("?")?"?":"&")+this.param2url(t)),e},param2url:function(e){if("object"==(void 0===e?"undefined":r(e))){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+"="+e[i]);return t.join("&")}return""},url2Obj:function(e){var t={};if(!e)return t;var i=document.createElement("a");i.href=e;var r=i.search||"";return r?((r=r.replace(/^\?/,"").split("&")).forEach(function(e){var i=e.split("=");t[i[0]]=i[1]}),t):t},refreshUrlParamOrder:function(e){if(!e)return"";var t=document.createElement("a");t.href=e;var i=t.search||"";if(!i)return e;if((i=i.replace(/^\?/,"").split("&")).sort(function(){return.5-Math.random()>0?1:-1}),i[0]&&/^vkey/.test(i[0])&&i.length>1){var r=i[0];i[0]=i[1],i[1]=r}return i=(i=i.join("&")).replace(/sdtfrom=&|[&]?sdtfrom=$/,""),t.href.replace(t.search,"?"+i)},getVideoType:function(){var e="";return window.COVER_INFO&&window.COVER_INFO.typeid?e=+window.COVER_INFO.typeid:window.VIDEO_INFO&&window.VIDEO_INFO.type&&(e=+window.VIDEO_INFO.type),e},getUA:function(e){if(!e)return"unknown";var t=-1,i=(e=e.toLowerCase()).match(/(?:metasr.\d*|qqlive.\d*|qqbrowser.\d*|maxthon.\d*|theworld|lbbrowser|firefox.\d*|opera.\d*|bidubrowser.\d*)/);if(null!==i)return i[0].replace(" ","").replace("/","");if(e.indexOf("android")>-1)return"android";if(e.indexOf("iphone")>-1)return"iphone";if(e.indexOf("ipad")>-1)return"ipad";if((t=e.indexOf("chrome"))>-1)return"chrome"+parseInt(e.substr(t+7,4));if((t=e.indexOf("safari"))>-1)return"safari";var r=e.indexOf("msie");if(r>-1)return"ie"+parseInt(e.substr(r+5,2));if(e.indexOf("trident")>-1){var n=e.indexOf("rv:");if(n>-1)return"ie"+parseInt(e.substr(n+3,2))}return e},cookie:{set:function(e,t,i,r,n){if(n){var a=new Date,o=new Date;o.setTime(a.getTime()+36e5*n)}return document.cookie=e+"="+t+"; "+(n?"expires="+o.toGMTString()+"; ":"")+(r?"path="+r+"; ":"path=/; ")+(i?"domain="+i+";":"domain="+window.location.host+";"),!0},get:function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),i=document.cookie.match(t);return i?i[1]:""},del:function(e,t,i){var r=new Date;r.setTime(r.getTime()-1),document.cookie=e+"=; expires="+r.toGMTString()+";"+(i?"path="+i+"; ":"path=/; ")+(t?"domain="+t+";":"domain="+window.location.host+";")}}}},function(e,t,i){"use strict";e.exports={LD:"LD",HT:"HT",ZC:"ZC",CZC:"CZC",ZT:"ZT",KB:"KB",PSJ:"PSJ",PPB:"PPB",PVL:"PVL",ZI:"ZI",PDF:"PDF",BS:"BS",TP:"TP",VIN:"VIN",PHLS:"PHLS"}},function(e,t,i){"use strict";e.exports={INIT:0,LOADING:1,LOAD_READY:2,PLAYING:3,PAUSED:4,END:-1,WAIT_FOR_STOP:-2}},function(e,t,i){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n="undefined"!=typeof Txplayer&&Txplayer.dataset.hideClass||"txp_none",a={},o=1;e.exports={attr:function(e,t,i){if(!e)return"";if(t){if(void 0!==i)return e.setAttribute(t,i);if("src"!==t)return e.getAttribute(t);e.src=src}return""},removeAttr:function(e,t){e&&t&&("src"===t?delete e.src:e.removeAttribute(t))},css:function(e,t,i){if(!e)return"";if(t){if(void 0===i&&"string"==typeof t){var n={};try{n=document.defaultView.getComputedStyle(e,null)}catch(s){n=e.currentStyle}return n[t]}if(void 0!==i||"object"!==(void 0===t?"undefined":r(t)))"string"!=typeof t||"string"!=typeof i&&"number"!=typeof i||(/width|height|left|right|top|bottom/i.test(t)&&"number"==typeof i&&(i+="px"),e.style[t]=i);else{var a=t;for(var o in a)a.hasOwnProperty(o)&&(/width|height|left|right|top|bottom/.test(o)&&"number"==typeof a[o]&&(a[o]=a[o]+"px"),e.style[o]=a[o])}}},append:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();if(t)for(var i=0,r=e.length;i<r;i++)t.appendChild(e[i])},addClass:function(e,t){if(!this.hasClass(e,t))if(e.className&&0!==e.className.length){var i=e.className.split(" ");i.push(t),e.className=i.join(" ")}else e.className=t},removeClass:function(e,t){if(this.hasClass(e,t)){var i=e.className.split(" "),r=i.indexOf(t);i.splice(r,1),e.className=i.join(" ")}},hasClass:function(e,t){return!!e.className&&e.className.split(" ").indexOf(t)>-1},hide:function(e){this.addClass(e,n)},show:function(e){this.removeClass(e,n)},on:function(){var e,t=Array.prototype.slice.call(arguments),i=t.shift();if(i&&((e=i)._zid||(e._zid=o++),t.length>=2)){var r=function(e,t,i){var r=e._zid,n={evt:t};return a[r]||(a[r]={}),n.cb=function(e){i(e)},a[r][t]||(a[r][t]=[]),a[r][t].push(n),n}(i,t[0],t[1]),n=t[2];void 0!==n&&(n=!1),"function"==typeof i.addEventListener?i.addEventListener(t[0],r.cb,n):"function"==typeof i.attachEvent?i.attachEvent(t[0],r.cb,n):i["on"+t[0]]=r.cb}},_removeListener:function(e,t,i,r){void 0===r&&(r=!1),"function"==typeof e.removeEventListener?e.removeEventListener(t,i,r):"function"==typeof e.detachEvent?e.detachEvent("on"+t,i,r):e["on"+t]=null},off:function(){var e=Array.prototype.slice.call(arguments),t=e.shift(),i=this;if(t){var r=e[2];if(2===arguments.length)((function(e,t){var i=e._zid,r=[];return a[i]&&(r=a[i][t]),r})(t,e[0],e[1])||[]).forEach(function(e){i._removeListener(t,e.evt,e.cb,!1)}),function(e,t,i){var r=e._zid;a[r]&&(t?delete a[r][t]:delete a[r])}(t,e[0],e[1]);else arguments.length>2&&this._removeListener(t,e[0],e[1],r)}},text:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();if(t)if(1===e.length)t.textContent=e[0];else if(0===e.length)return t.textContent},html:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();if(t)return 1!==e.length?t.innerHTML:void(t.innerHTML=e[0])}}},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(4),a=i(3),o=i(1),s=i(0)("base/adBase"),d=i(2),l=i(9),u=0;e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s.log("new AdBase",t),this._name="adBase",this.infos=t.infos,this.info=t.infos&&t.infos[0]?t.infos[0]:null,this.scene=t.scene,this.dataset=t.dataset,this.$dom=t.dom,this.message=t.message,this.adplayer=t.adplayer,this._canPlay=!1,this._isShow=!1,this._state=n.INIT,this._isSmallWindow=!1}return r(e,[{key:"_loadReadyHandler",value:function(e){this._canPlay=!0,this._state=n.loadReady,this._emitEvent(o.TXPLAYER_EVENT.AD_LOAD_READY,e)}},{key:"_emitEvent",value:function(e,t){void 0===t&&(t={adtype:this.adtype,adinfo:this.info,isWholeScene:this.isWholeScene}),this.message&&this.message.emit(e,t)}},{key:"callOuterApi",value:function(e){var t=this.adplayer.getConf();if(t.playerMethod&&"function"==typeof t.playerMethod[e]){var i=Array.prototype.slice.call(arguments);return i.shift(),t.playerMethod[e].apply(null,i)}}},{key:"initUI",value:function(e,t,i){var r=e.layer;if(r){var n=this.template(i);if(!r.innerHTML||-1==r.innerHTML.indexOf(n)){var a=document.createElement("div");a.innerHTML=n,r.appendChild(a.children[0])}for(var o in i)i.hasOwnProperty(o)&&(t["$"+o]=r.querySelector('[data-role="'+i[o]+'"]'))}}},{key:"addEvent",value:function(){}},{key:"removeEvent",value:function(){}},{key:"load",value:function(){if(this._state=n.LOADING,this.info&&this.info.isEmpty&&!this.info.isVideoAd){if(this.adtype==a.PDF)return;this.message.emit(o.REPORT_EVENT.AD_VIEW,{adInfo:this.info})}}},{key:"play",value:function(){if(this._state=n.PLAYING,!this._isStart){this._isStart=!0;var e=this.adtype;e!==a.PDF&&e!==a.PPB&&e!==a.PVL&&this.message.emit(o.TXPLAYER_EVENT.AD_SHOW,{adtype:e})}}},{key:"pause",value:function(){this._state=n.PAUSED}},{key:"resume",value:function(){this._state=n.PLAYING}},{key:"mute",value:function(){}},{key:"unMute",value:function(){}},{key:"setVolume",value:function(){}},{key:"resize",value:function(e){}},{key:"setFullScreen",value:function(){}},{key:"setSmallWindow",value:function(e){this._isSmallWindow=e&&e.isSmallWindow}},{key:"stop",value:function(e){this._isStart=!1,this.removeEvent(),this._state=n.END,this._emitEvent(o.AD_STOP,e),this.adtype!==a.LD&&this.adtype!==a.KB&&this.adtype!==a.HT&&this.adtype!==a.ZC&&this.message.emit(o.TXPLAYER_EVENT.AD_STOP,{adtype:this.adtype})}},{key:"waitForStop",value:function(){this._state=n.WAIT_FOR_STOP}},{key:"show",value:function(){if(!this._isShow){this._isShow=!0;var e=this.adtype;e!==a.LD&&e!==a.KB&&e!==a.HT&&e!==a.ZC&&e!==a.PSJ&&e!==a.PDF&&e!==a.PPB&&e!==a.PVL&&this.message.emit(o.TXPLAYER_EVENT.AD_SHOW,{adtype:e})}this._emitEvent(o.AD_SHOW),this.showTime||(this.showTime=+new Date)}},{key:"hide",value:function(){this._isShow=!1,this._emitEvent(o.AD_HIDE)}},{key:"destroy",value:function(){}},{key:"openLink",value:function(){if(this.info&&this.info.link){var e=(new Date).getTime();if(e-u<300)s.log("click too fast");else{u=e;var t=this.adplayer.getConf();if(!t||!t.forbidLinkJump){var i=t&&t.playerData&&t.playerData.playerPfEx||"",r=d.appendParamsToUrl(this.info.link,{pf_ex:i||"",appversion:l});window.open(r),this._emitEvent(o.REPORT_EVENT.AD_CLICK,{adInfo:this.info,adclick:this.info.order_id,clicktime:+new Date-this.showTime,scene:this.scene})}}}}},{key:"template",value:function(e){return""}},{key:"adtype",get:function(){return this.info?this.info.adtype:""}},{key:"isWholeScene",get:function(){return!!this.scene&&this.scene.isWholeScene}},{key:"canPlay",get:function(){return this._canPlay}},{key:"state",get:function(){return this._state}},{key:"isShow",get:function(){return this._isShow}}]),e}()},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(r){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){(function(r,n){var a;!function(r){var o=r.Promise,s=o&&"resolve"in o&&"reject"in o&&"all"in o&&"race"in o&&function(){var e;return new o(function(t){e=t}),"function"==typeof e}();void 0!==t&&t?(t.Promise=s?o:C,t.Polyfill=C):(a=function(){return s?o:C}.call(t,i,t,e))===undefined||(e.exports=a);var d="pending",l="sealed",u="fulfilled",c="rejected",h=function(){};function f(e){return"[object Array]"===Object.prototype.toString.call(e)}var p,v=void 0!==n?n:setTimeout,y=[];function g(){for(var e=0;e<y.length;e++)y[e][0](y[e][1]);y=[],p=!1}function m(e,t){y.push([e,t]),p||(p=!0,v(g,0))}function A(e){var t=e.owner,i=t.state_,r=t.data_,n=e[i],a=e.then;if("function"==typeof n){i=u;try{r=n(r)}catch(o){b(a,o)}}_(a,r)||(i===u&&E(a,r),i===c&&b(a,r))}function _(e,t){var i;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var r=t.then;if("function"==typeof r)return r.call(t,function(r){i||(i=!0,t!==r?E(e,r):T(e,r))},function(t){i||(i=!0,b(e,t))}),!0}}catch(n){return i||b(e,n),!0}return!1}function E(e,t){e!==t&&_(e,t)||T(e,t)}function T(e,t){e.state_===d&&(e.state_=l,e.data_=t,m(x,e))}function b(e,t){e.state_===d&&(e.state_=l,e.data_=t,m(S,e))}function w(e){var t=e.then_;e.then_=undefined;for(var i=0;i<t.length;i++)A(t[i])}function x(e){e.state_=u,w(e)}function S(e){e.state_=c,w(e)}function C(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof C==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(e,t){function i(e){b(t,e)}try{e(function(e){E(t,e)},i)}catch(r){i(r)}}(e,this)}C.prototype={constructor:C,state_:d,then_:null,data_:undefined,then:function(e,t){var i={owner:this,then:new this.constructor(h),fulfilled:e,rejected:t};return this.state_===u||this.state_===c?m(A,i):this.then_.push(i),i.then},"catch":function(e){return this.then(null,e)}},C.all=function(e){if(!f(e))throw new TypeError("You must pass an array to Promise.all().");return new this(function(t,i){var r=[],n=0;function a(e){return n++,function(i){r[e]=i,--n||t(r)}}for(var o,s=0;s<e.length;s++)(o=e[s])&&"function"==typeof o.then?o.then(a(s),i):r[s]=o;n||t(r)})},C.race=function(e){if(!f(e))throw new TypeError("You must pass an array to Promise.race().");return new this(function(t,i){for(var r,n=0;n<e.length;n++)(r=e[n])&&"function"==typeof r.then?r.then(t,i):t(r)})},C.resolve=function(e){return e&&"object"==typeof e&&e.constructor===this?e:new this(function(t){t(e)})},C.reject=function(e){return new this(function(t,i){i(e)})}}("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this)}).call(t,i(7),i(11).setImmediate)},function(e,t,i){"use strict";e.exports="1.0.171"},function(e,t,i){"use strict";var r=i(20)();e.exports=function(e){return e!==r&&null!==e}},function(e,t,i){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(n.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(n.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i(18),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,i(7))},function(e,t,i){"use strict";e.exports=i(60)},function(e,t,i){"use strict";e.exports=function r(e,t,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e){for(var n in t=t||"",(i=i||{}).autoplay&&(e.autoplay=!0),e.preload="undefined"!=typeof i.preload&&i.preload,t&&(e.src=t),e.style.width="100%",e.style.height="100%",i.style)i.style.hasOwnProperty(n)&&(e.style[n]=i.style[n]);this.video=e}}},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(0)("material/vpaid"),a=i(2),o=i(5),s=i(15),d=i(3),l=i(1).VPAID_EVENT,u=i(22),c={NOT_START:0,READY:1,LOAD_COMPLETE:2,PLAYING:3,PAUSE:4,END:5,STOP:6},h=0,f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instanceCount=h++,n.log("new Vpaid:",this.instanceCount),this.init(t),this.playState=c.NOT_START}return r(e,[{key:"init",value:function(e){this.params=e,this.wrapper=e.container,this.outerEvents=e.events;this.playTimer=new s,this.iframe=document.createElement("iframe"),this.iframe.id="adLoaderIframe"+this.instanceCount,this.iframe.name="adLoaderIframe"+this.instanceCount,this.iframe.frameBorder=0;try{this.iframe.setAttribute("allow","autoplay")}catch(t){n.log('iframe.setAttribute("allow", "autoplay") : ',t)}o.css(this.iframe,{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"none","pointer-events":"auto"}),this.wrapper.appendChild(this.iframe),o.css(this.iframe.contentWindow.document.body,{overflow:"hidden"})}},{key:"loadAd",value:function(e){n.log("load vpaid:",e,this.instanceCount),this.loadParams=e,this.outerEvents=e.events,this.api=e.api,this.info=e.info,this.duration=parseInt(e.adInfo.duration);var t=this;e.adInfo.richRes||(n.log("load vpaid error, richRes is empty."),this.callOuterEvents(l.AdError,this.loadParams),this.stopAd()),setTimeout(function(){var i=a.appendParamsToUrl(e.adInfo.richRes,{t:(new Date).getTime()});n.log("\u5bcc\u5a92\u4f53js\u5f00\u59cb\u52a0\u8f7d\uff1a",i,t.iframe.contentWindow,t.instanceCount),a.loadJs(i,t.onInitAd.bind(t),t.iframe.contentWindow.document.body,t.iframe.contentWindow.document)},100)}},{key:"onInitAd",value:function(e){var t,i=this;if(e&&e.error)return n.log("\u5bcc\u5a92\u4f53js\u52a0\u8f7d\u5931\u8d25\uff1a",e.error,this.instanceCount),this.loadParams.error=e.error,this.callOuterEvents(l.AdError,this.loadParams),void this.stopAd();if(n.log("vpaid params",this.params),this.params&&this.params.adInfo){this.params.adInfo.adtype!=d.ZI&&this.params.adInfo.adtype!==d.LD||(o.on(this.iframe.contentWindow.document.body,"click",function(e){n.log("\u70b9\u51fb\u4e86\u5bcc\u5a92\u4f53iframe"),e.currentTarget!==e.target&&e.target.dataset.click||(clearTimeout(t),t=setTimeout(function(){var e=i.safeCallOuterApi("getPlayState");e===u.PLAYING?i.safeCallOuterApi("userPausePlayer"):e===u.PAUSE&&i.safeCallOuterApi("userPlay")},300))}),o.on(this.iframe.contentWindow.document.body,"dblclick",function(e){clearTimeout(t),i.safeCallOuterApi("toggleWindowFullScreen")})),this.events={AdLoaded:l.AdLoaded,AdStarted:l.AdStarted,AdStopped:l.AdStopped,AdPaused:l.AdPaused,AdPlaying:l.AdPlaying,AdError:l.AdError,AdVideoStart:l.AdVideoStart,AdClickThru:l.AdClickThru,AdVideoComplete:l.AdVideoComplete,AdPauseTimeCount:l.AdPauseTimeCount,AdResumeTimeCount:l.AdResumeTimeCount};var r=this,a=r.iframe.contentWindow.getVPAIDAd;if(a&&"function"==typeof a){for(var s in r.VPAIDCreative=a(),this.events)r.VPAIDCreative.subscribe(r.onSubscribe,s,r);setTimeout(function(){r.VPAIDCreative.initAd(r.params.adWidth||r.params.playerData.playerWidth,r.params.adHeight||r.params.playerData.playerHeight,"normal",0,r.loadParams.adInfo.richData)},10)}}}},{key:"onSubscribe",value:function(e,t){this.events[e]&&this[this.events[e]](t)}},{key:"safeCallOuterApi",value:function(){var e=Array.prototype.slice.call(arguments).shift();if(this.api&&e&&this.api[e])try{return this.api[e]()}catch(t){n.log("call outer api error: ",e,", ",t)}}},{key:"safeCallCreativeMethod",value:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();if(this.VPAIDCreative&&t&&this.VPAIDCreative[t])try{return this.VPAIDCreative[t].apply(this.VPAIDCreative,e)}catch(i){n.log("call vpaid method error: ",t,", ",i)}}},{key:"resize",value:function(e,t){this.safeCallCreativeMethod("resizeAd",e,t)}},{key:"mute",value:function(e){this.safeCallCreativeMethod("mute",e)}},{key:"setVolume",value:function(e){this.safeCallCreativeMethod("setAdVolume",e),!TxpCreativePlayer.fromPcClient&&this.api.getBrowserDisableIframeAutoPlay()&&(0===e?this.mute(!0):this.mute(!1))}},{key:"setPos",value:function(e){this.safeCallCreativeMethod("setPos",e)}},{key:"continueTimeout",value:function(){var e=this;this.duration>0&&this.params.adInfo.adtype!=d.ZT&&this.params.adInfo.adtype!=d.ZI&&this.playTimer.on(this.duration,function(){e.callOuterEvents(l.AdVideoComplete,e.loadParams),e.stopAd(),n.log("rich ad timeout !!!!  ",e.loadParams,e.instanceCount)})}},{key:"play",value:function(){this.VPAIDCreative&&(this.continueTimeout(),this.playState===c.PAUSE?(this.safeCallCreativeMethod("resumeAd"),this.playTimer.go()):this.playState===c.PAUSE&&this.playState===c.STOP&&this.playState===c.END||this.safeCallCreativeMethod("startAd"))}},{key:"pause",value:function(){this.playState!==c.PAUSE&&this.VPAIDCreative&&(this.safeCallCreativeMethod("pauseAd"),this.playTimer.pause())}},{key:"stopAd",value:function(){this.playState!==c.STOP&&(this.playTimer&&this.playTimer.clear(),this.VPAIDCreative&&(this.safeCallCreativeMethod("stopAd"),this.destroy()))}},{key:"callOuterEvents",value:function(e,t){if(n.log("callOuterEvents: ",e,t),this.outerEvents&&"function"==typeof this.outerEvents[e])try{this.outerEvents[e](t)}catch(i){n.log("callOuterEvents error: ",i)}}},{key:"destroy",value:function(){n.log("vpaid destroy.",this.instanceCount),this.playTimer&&this.playTimer.clear(),this.wrapper&&this.iframe&&this.wrapper.contains(this.iframe)&&this.wrapper.removeChild(this.iframe)}}]),e}();for(var p in l)l.hasOwnProperty(p)&&(f.prototype[p]||(f.prototype[p]=function(e){return function(t){var i=this;return e===l.AdPaused&&(this.playState=c.PAUSE),e!==l.AdStarted&&e!==l.AdPlaying||(this.playState=c.PLAYING),e===l.AdLoaded&&(this.playState=c.LOAD_COMPLETE),e!==l.AdStopped&&e!==l.AdError||(this.playState=c.STOP),e!==l.AdStopped&&e!==l.AdError||setTimeout(function(){i.destroy()},100),this.callOuterEvents(e,t)}}(p)));e.exports=f},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timer=null,this.startTime=null,this.during=0,this.remain=-1,this.callback=null}return r(e,[{key:"on",value:function(e,t){var i=this;e<0||"function"==typeof t&&(this.clearTimer(),this.during=e,this.callback=t,this.timer=setTimeout(function(){i.callback&&i.callback(),i.clear()},e),this.startTime=(new Date).getTime())}},{key:"pause",value:function(){var e=(new Date).getTime()-this.startTime;e>this.during||(this.remain=this.during-e,this.clearTimer())}},{key:"go",value:function(){this.remain<0||this.on(this.remain,this.callback)}},{key:"clearTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.startTime=null,this.during=0}},{key:"clear",value:function(){this.clearTimer(),this.callback=null,this.remain=-1}}]),e}();e.exports=n},function(e,t,i){"use strict";var r=i(23),n=Object.prototype.hasOwnProperty;e.exports=function(e){var t,i=arguments[1];if(r(e),i===undefined)n.call(e,"__ee__")&&delete e.__ee__;else{if(!(t=n.call(e,"__ee__")&&e.__ee__))return;t[i]&&delete t[i]}}},function(e,t,i){"use strict";var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},o=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t,i=r.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!a)return!1;for(t in e);return void 0===t||r.call(e,t)};e.exports=function s(){var e,t,i,r,n,d,l=arguments[0],u=1,c=arguments.length,h=!1;for("boolean"==typeof l&&(h=l,l=arguments[1]||{},u=2),(null==l||"object"!=typeof l&&"function"!=typeof l)&&(l={});u<c;++u)if(null!=(e=arguments[u]))for(t in e)i=l[t],l!==(r=e[t])&&(h&&r&&(o(r)||(n=a(r)))?(n?(n=!1,d=i&&a(i)?i:[]):d=i&&o(i)?i:{},l[t]=s(h,d,r)):void 0!==r&&(l[t]=r));return l}},function(e,t,i){(function(e,t){!function(e,i){"use strict";if(!e.setImmediate){var r,n,a,o,s,d=1,l={},u=!1,c=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){p(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){a.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(n=c.documentElement,r=function(e){var t=c.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return l[d]=n,r(d),d++},h.clearImmediate=f}function f(e){delete l[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(i,r)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,i(7),i(19))},function(e,t){var i,r,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var d,l=[],u=!1,c=-1;function h(){u&&d&&(u=!1,d.length?l=d.concat(l):c=-1,l.length&&f())}function f(){if(!u){var e=s(h);u=!0;for(var t=l.length;t;){for(d=l,l=[];++c<t;)d&&d[c].run();c=-1,t=l.length}d=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new p(e,t)),1!==l.length||u||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=v,n.addListener=v,n.once=v,n.off=v,n.removeListener=v,n.removeAllListeners=v,n.emit=v,n.prependListener=v,n.prependOnceListener=v,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,i){"use strict";e.exports=function(){}},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function x(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:x(n,t,i)}if("value"in r)return r.value;var a=r.get;return a===undefined?undefined:a.call(i)};var a=i(6),o=i(13),s=i(14),d=i(15),l=i(71),u=i(5),c=i(2),h=i(0),f=i(16),p=i(1),v=p.VPAID_EVENT,y=i(3),g=i(4),m=i(25),A=i(9),_=i(72),E=i(73),T=i(75),b=!1;function w(){if(!/mobile|mqqbrowser|android|iphone/gi.test(navigator.userAgent))try{var e=window.$;if(!e)return;var t=e('<div class="adsbox txp_ad_center" style="position:absolute;left:-9999px;top:-9999px;width:1px;height:1px;"></div>').appendTo(e(document.body)),i=e('<div class="side_ad txp_ad_center" style="position:absolute;left:-9999px;top:-9999px;width:1px;height:1px;"></div>').appendTo(e(document.body));window.setTimeout(function(){try{b=!0,0!==t[0].offsetHeight&&i.is(":visible")||(TxpCreativePlayer.adBlockEnabled=!0),t.remove(),i.remove()}catch(e){}},100)}catch(r){}}window.document&&document.body?w():window.document.addEventListener&&document.addEventListener("readystatechange",function(){b||"interactive"!=document.readyState&&"complete"!=document.readyState||w()}),e.exports=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.logger=h("base/videoAdBase("+e._name+")"),i.message=e.message,i.adplayer=e.adplayer,i.videoAdUi=i.adplayer.videoAdUi,i.conf=i.adplayer.getConf(),TxpCreativePlayer.fromPcClient||(i.blockScreen=new T(i.conf,i.adplayer.$dom.$videoAd.$videoBlackScreen)),i.reset(),i.initVideo(),i.bindVideoEvent(),i.bindVideoUiEvent(),i.bindBrowserEvent(),i.initOrderResource(e.infos),i.geturls=new E,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a),r(t,[{key:"reset",value:function(){if(this.queue&&this.queue.length>0)for(var e=0,t=this.queue.length;e<t;e++)this._clearAdTimer(this.queue[e]);this.volume=0,this.$videos=[],this.queue=[],this.emptyQueue=[],this.richMediaMap={},this.currentAdIndex=0,this.nextAdIndex=0,this.rollbackAdIndex=0,this.duration=0,this.countdown=0,this.showCountdown=0,this.isLoadComplete=!1,this.prevCurrentTime=-1,this.$currentVideo=null,this.$preloadVideo=null,this.ordertype="",this.isEmpty=!1,this.emptyCount=0,this.errorCount=0,this.firstShowTrueView=!1,this.isTrueView=!1,this.rfid="",this.errorCode="",this.currentPlayAdType="",this.isMute=!1,this.hasReportVideoEnd=!1,this.hasDestroy=!1,this.userCloseOrderId="",this.firstViewTime=0,this.firstLoadingStartTime=0,this.firstLoadingEndTime=0,this.playedTime=0,this.setViewMonitor=!1,this.hasReportPlayStartArr=[],this.hasPlaying=[]}},{key:"load",value:function(){this._state!==g.WAIT_FOR_STOP&&n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this)}},{key:"play",value:function(){if(this.currentPlayAdType=this.ordertype,this.ordertype===y.HT&&this._state===g.WAIT_FOR_STOP)return n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pause",this).call(this),void this.reportVideoEnd();this._state!==g.PLAYING&&((this.$currentVideo||this.richMediaPlayer)&&(this.queue[this.currentAdIndex].status===g.PAUSED||this._pauseWhenVipPanelShow)?(this._pauseWhenVipPanelShow=!1,this.resume()):this.start(this.currentAdIndex))}},{key:"resume",value:function(){var e=this;n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resume",this).call(this);var i=this.queue[this.currentAdIndex];if(i)if(i.isRichMedia&&this.richMediaPlayer)this.richMediaPlayer.play(),this.startCountDown();else if(this.$currentVideo){var r=this.$currentVideo.play();r&&r["catch"](function(t){e.logger.log("resume:",t)}),this.startCountDown()}}},{key:"pause",value:function(){if(this._state!==g.PAUSED){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pause",this).call(this);var e=this.queue[this.currentAdIndex];e&&(e.isRichMedia&&this.richMediaPlayer?(this.richMediaPlayer.pause(),this.stopCountDown()):this.$currentVideo&&(this.$currentVideo.pause(),this.stopCountDown()))}}},{key:"mute",value:function(){this.$videos.forEach(function(e){e.el.muted=!0}),this.richMediaPlayer&&this.richMediaPlayer.mute(!0)}},{key:"unMute",value:function(){this.$videos.forEach(function(e){e.el.muted=!1}),this.richMediaPlayer&&this.richMediaPlayer.mute(!1)}},{key:"setVolume",value:function(e){e=Math.max(0,Math.min(1,e/100)),this.volume=e,this.isMute=0===this.volume,this.$videos.forEach(function(t){t.el.volume=e}),this.richMediaPlayer&&this.richMediaPlayer.setVolume(100*e),this.isMute?this.mute():this.unMute(),this.videoAdUi.updateVideoVolumeBtn({mute:this.isMute})}},{key:"resize",value:function(e){var t=e.width,i=e.height;this.richMediaPlayer&&this.richMediaPlayer.resize(t,i)}},{key:"adjustUI",value:function(e){if(e){var t=(e.top||10)+"px",i=(e.bottom||10)+"px";this.videoAdUi.adjustVideoAdControl({top:t,bottom:i})}}},{key:"stop",value:function(e){this.blockScreen&&this.blockScreen.reset(),this.reportVideoEnd(e)}},{key:"clearVideoDom",value:function(){var e=this;this.logger.log("clearVideoDom");var t=this.adplayer.$dom.$videoAd.$videoAdContainer.querySelectorAll("video");(t=Array.prototype.slice.call(t)).forEach(function(t){if(t)try{u.removeAttr(t,"src"),t.pause(),e.adplayer.$dom.$videoAd.$videoAdContainer.removeChild(t)}catch(i){e.logger.err("clearVideoDom: ",i)}})}},{key:"initVideo",value:function(){this.clearVideoDom(),this.volume=Math.min(1,Math.max(0,this.callOuterApi(p.TXPLAYER_API.GET_VOLUME)/100));for(var e=0;e<2;e++){var t=document.createElement("video");t.crossOrigin="*",u.hide(t),u.attr(t,"data-idx",e),this.$videos.push({el:t,status:m.EMPTY,vindex:-1}),this.adplayer.$dom.$videoAd.$videoAdContainer.appendChild(t),t.volume=Math.min(1,Math.max(0,this.callOuterApi(p.TXPLAYER_API.GET_VOLUME)/100)),new o(this.$videos[e].el,"",{preload:"none",style:{position:"absolute",top:0,left:0}})}this.volume?this.unMute():this.mute()}},{key:"initOrderResource",value:function(e){var t=this,i=e.length>0&&e[0].isAutoPlay,r=0,n=0;e&&e.length||(this.isEmpty=!0),this.ordertype=e.adtype===y.KB?y.LD:e.adtype,this.orderList=e;var a=0,o=0,s=0;e.forEach(function(e,i){if(e.adtype===y.KB?(o++,e.orderIdx=o):(s++,e.orderIdx=s),t.ordertype||(t.ordertype=e.adtype===y.KB?y.LD:e.adtype),t.rfid||(t.rfid=e.rfid),e.isEmpty)r++,t.emptyQueue.push({adtype:e.adtype,_index:i,realDuration:0,duration:0,loadStartTime:0,loadCompleteTime:0,viewTime:0,orderId:e.order_id}),t.message.emit(p.REPORT_EVENT.AD_VIEW,{adInfo:t.orderList[i],scene:t.scene});else{var d=e.creative?e.creative[0].material[0]:{},l=parseInt(e.duration/1e3,10);if(t.duration+=l,d.url&&e.order_id&&(e.adtype!==y.KB&&(t.showCountdown+=l),a++,t.queue.push({tpIndex:a,_index:i,index:n,fileSize:(+d.cs||0)/1024,playStartTime:0,loadStartTime:0,loadCompleteTime:0,viewStartTime:0,viewTime:0,adtype:e.adtype,status:g.INIT,speed:0,loadedPercent:0,url:c.refreshUrlParamOrder(d.url),link:e.link,duration:l,width:d.width,height:d.height,orderId:e.order_id,vid:d.vid||e.vid,adFlag:e.adFlag,isRichMedia:e.isRichMedia||!1,isTrueView:e.isTrueView||!1,isVip:e.userIsVip||!1,canSkip:e.canSkip||!1,displayCode:e.display_code,dspName:e.dsp_name,noClick:e.no_click,hasReportView:!1,hasReportLoadComplete:!1,reportUrlView:e.reportUrlView,closeText:e.skip_title||"",vidType:e.vid_type,btnText:e.actionButtonText})),e.isRichMedia&&(t.queue[n].adInfo=e),e.reportUrl&&e.reportUrl.indexOf("etype=__EXPOSURE_TYPE__")>-1){var u=t.queue[n];u.isActive=!0,u.destPageUrl=e.destPageUrl,u.qrcodeUrl=e.qrcodeUrl,u.isActiveNormal=e.isActiveNormalAd,u.isActiveScan=e.isActiveScanAd,u.activeBannerInfo=e.activeBannerInfo,u.effectUrl=e.effectUrl,u.traceId=e.traceId,u.clickJumpType=e.clickJumpType}n+=1}}),this.countdown=this.duration,this.emptyCount=r,this.isTrueView=("in"===this.conf.playerData.playerPf||"client"===this.conf.playerData.playerPf)&&1===this.queue.length&&this.queue[0].isTrueView,e&&this.emptyCount===e.length&&(this.isEmpty=!0),this.isEmpty?(this.logger.log("\u7a7a\u8ba2\u5355"),this.reportVideoEnd()):(this.logger.log("\u4e00\u5171\u6709["+this.queue.length+"]\u4e2a\u975e\u7a7a\u8ba2\u5355\uff0c\u603b\u65f6\u957f: ",this.duration,"s"),this.lastVideoIndex=this.queue.length-1,i?(this.readyToPlay=!0,this.play()):this.preloadNext(this.currentAdIndex))}},{key:"updateVideoUi",value:function(e){var t=this.videoAdUi;t.resetVideoUi();var i=this.queue[e];if(i){i.viewStartTime=+new Date;var r=!!i.isRichMedia;this.showCloseButton="function"==typeof this.conf.playerMethod.showOpenVIPGuide;if(this.canClickToStopAd=!1,this.showCloseButton=this.showCloseButton||this.canClickToStopAd,this.canSkip=i.canSkip,this.logger.log("\u66f4\u65b0\u89c6\u56fe: \u7b2c",e,"\u4e2a"),t.updateVideoLayer(!0),t.updateVideoAdInner(!0),"VipDisplay"===i.displayCode?t.updateVideoAdControl(!1):t.updateVideoAdControl(!0),r?(t.updateVideoRichMediaAdContainer(r),t.updateVideoAdLayer(!r)):(t.updateVideoAdLayer(!r),t.updateVideoRichMediaAdContainer(r)),t.updateVideoDSP(i.dspName),t.toggleVideoCountDown(this.showCountdown>0),i.isRichMedia||!i.link||"N"!=i.noClick?t.updateLinkArea(!1):t.updateLinkArea(!0),i.link&&"N"==i.noClick?t.updateDetail({show:!0,btnText:i.btnText,isActive:i.isActive,isActiveScan:i.isActiveScan,isActiveNormal:i.isActiveNormal,activeItemName:i.activeBannerInfo&&i.activeBannerInfo.brandName,activeItemImgUrl:i.activeBannerInfo&&i.activeBannerInfo.brandImg,activeItemDesc:i.activeBannerInfo&&i.activeBannerInfo.brandDesc,activeScanBtnTargetUrl:i.qrcodeUrl,activeScanCanOpen:i.destPageUrl&&-1===i.destPageUrl.indexOf("http://")}):t.updateDetail({show:!1}),t.updateVideoVolumeBtn({mute:this.isMute}),!i.canSkip)return t.showVideoForbidSkipAd(i.adFlag),void t.toggleVideoCountDown(!1);if(i.adtype===y.KB){if(!this.showCloseButton)return void t.updateCloseButton({show:!1});t.updateCloseButton({text:"\u5173\u95ed\u8be5\u5e7f\u544a",show:!0})}if(i.isVip&&this.showCloseButton){var n="VipCommand"===i.displayCode,a={showCloseButton:!0,showVipCommand:n,showVipClick:!n,closeText:i.closeText};return n&&t.updateDetail({show:!1}),t.updateSkipTips(a),void t.toggleVideoCountDown(!0)}this.isTrueView&&(this.canClickToStopAd=!0,t.updateTrueview({countdown:this.firstShowTrueView?0:5,showCloseButton:this.showCloseButton,duration:i.duration}),this.firstShowTrueView=!0),t.updateSkipTips({isTrueView:this.isTrueView,showVipClick:!1,showCloseButton:this.showCloseButton,shortVideo:!1,closeText:i.closeText})}}},{key:"startCountDown",value:function(){var e=this;if("running"!==this.countDownStatus){this.countDownStatus="running",this.showCountdown>0&&this.setCountdonw();var t=this.adplayer.getConf(),i=t&&!!t.touchPlayer;this.countDownInterval=setInterval(function(){if(!(i&&e.$currentVideo&&e.$currentVideo.paused))if(e.countdown=e.countdown-1,e.showCountdown=e.showCountdown-1,0===e.countdown&&e.videoAdUi.resetVideoUi(),e.countdown<=0){if(e.stopCountDown(),e.videoAdUi.updateVideoCountDown(""),e.videoAdUi.toggleVideoCountDown(!1),e.queue.length>0){var t=1e3*(e.duration-e.playedTime);setTimeout(function(){if(e.queue.length>0&&!e.hasReportVideoEnd){if(e.logger.log("\u5012\u8ba1\u65f6\u7ed3\u675f\u4e86"),e.$currentVideo&&e.currentAdIndex===e.lastVideoIndex){var t=e.$currentVideo.currentTime/e.$currentVideo.duration;t>=0&&t<.5&&(e.logger.log("\u6700\u540e\u4e00\u4e2avideo\uff0c\u64ad\u653e\u65f6\u95f4\u4e0d\u8db3\u4e00\u534a\uff0c\u8ba4\u4e3a\u5361\u987f\u800c\u7ed3\u675f"),e.errorCode=2201)}else e.currentAdIndex<e.lastVideoIndex&&(e.logger.log("\u6700\u540e\u6709\u5e7f\u544a\u6ca1\u64ad\u653e\uff0c\u8ba4\u4e3a\u5361\u987f\u800c\u7ed3\u675f"),e.errorCode=2201);e.reportVideoEnd()}},t)}}else"running"===e.countDownStatus&&(e.showCountdown>0?(e.playedTime++,e.setCountdonw()):(e.videoAdUi.updateVideoCountDown(""),e.videoAdUi.toggleVideoCountDown(!1)))},1e3)}}},{key:"stopCountDown",value:function(){clearInterval(this.countDownInterval),this.countDownStatus="stop"}},{key:"startRichMedia",value:function(){this.richMediaPlayer&&(this.richMediaPlayer.setVolume(100*this.volume),this.startCountDown(),this.richMediaPlayer.play())}},{key:"start",value:function(e){var t=this.queue[e];if(this.logger.log("\u5f00\u59cb\u64ad\u653e: \u7b2c",e,"\u4e2a"),this.adViewMonitor||(this.adViewMonitor=new l(this.adplayer.$dom.$videoAd.$videoContainer)),t.isRichMedia)t.status===g.INIT?(this.currentAdIndex=e,this.preloadRichMedia(e,!0),this._startAdTimer(14,t),this.updateVideoUi(e)):t.status===g.LOAD_READY&&this.richMediaMap["rich_"+e]&&(this.currentAdIndex=e,this.richMediaPlayer=this.richMediaMap["rich_"+e],this.updateVideoUi(e),t.playStartTime||(t.playStartTime=+new Date),this.startRichMedia(),this.adViewMonitor.start(t),this._startAdTimer(14,t));else if(t&&t.url){this.showCloseButton="function"==typeof this.conf.playerMethod.showOpenVIPGuide;this.canClickToStopAd=!1,this.showCloseButton=this.showCloseButton||this.canClickToStopAd,this.setCountdonw(),this._resetFreeVideo();var i=this._getVideoByIndex(e);i||((i=this._getFreeVideo()).vindex=e);var r=i&&i.el;r&&(this.logger.log("-==>>> start: ",i.vindex,i.status),i.status===m.EMPTY?(i.status=m.PLAYING,this.playUrl(t)):i.status===m.PRELOADING&&(i.status=m.PLAYING,this.playVideo(i)),this.updateVideoUi(e),r.preload="auto",u.show(r),this._hideFreeVideo(),this.currentAdIndex=e,this.$currentVideo=r)}else e<this.lastVideoIndex?this.start(e++):(this.logger.log("\u53ef\u64ad\u7d22\u5f15\u8d85\u51fa\u8303\u56f4"),this.reportVideoEnd())}},{key:"setCountdonw",value:function(){this.showCloseButton?this.videoAdUi.updateVideoCountDown(this.showCountdown):this.videoAdUi.updateVideoCountDownHtml('<span style="color:#fff;">\u5e7f\u544a\u5269\u4f59: </span><span>'+this.showCountdown+'</span><span style="color:#fff;">\u79d2</span>')}},{key:"_clearAdTimer",value:function(e){this.logger.log("--==>>>_clearAdTimer, orderInfo.index: ",e.index),e&&e.adPlayTimer&&e.adPlayTimer.clear()}},{key:"_startAdTimer",value:function(e,t){var i=this;this.logger.log("--==>>>_startAdTimer, orderInfo.index: ",t.index);var r=this._getVideoByIndex(t.index);t.adPlayTimer||(t.adPlayTimer=new d),t.adPlayTimer.clear(),t.adPlayTimer.on(1e3*e,function(){if(i.logger.log("--==>>>\u8ba2\u5355\u8d85\u65f6, orderInfo.index: "+t.index+", vid: "+t.vid),t.isRichMedia||r.status!=m.PLAYING)t.isRichMedia&&i.richMediaPlayer&&(t&&t.status>=g.INIT&&t.status<g.LOAD_READY?(i.countdown+=e,i.logger.log("\u5bcc\u5a92\u4f53\u5361\u987f"+e+"\u79d2\u8d85\u65f6\uff0c\u89e6\u53d1\u5bcc\u5a92\u4f53\u7ed3\u675f\uff0c\u76f4\u63a5\u4e0b\u4e00\u4e2a"),i.errorCode=2201,i.richmediaPlayer.stopAd()):i.logger.log("rich end startAdTimer"));else{var n=t.loadedPercent||i._getVideoBufferPercent(r.el);if(!t||t.isRichMedia||0!=n&&r.el.currentTime)i.logger.log("currentvideo end startAdTimer");else{i.countdown+=e,i.logger.log("\u64ad\u653e\u5361\u987f"+e+"\u79d2\u8d85\u65f6\uff0c\u89e6\u53d1\u5f53\u524d\u89c6\u9891\u64ad\u653e\u5931\u8d25"),i.errorCode=2201;try{r.el.pause(),r.el.src="",r.el.load(),t.detailErrCode=10}catch(o){}}}if(t.isRichMedia||r.status!=m.PRELOADING)i.logger.log("end startAdTimer");else{var a=i._getVideoBufferPercent(r.el);0==a?(i.logger.log("\u9884\u52a0\u8f7d"+e+"\u79d2\u8d85\u65f6\uff0c\u89e6\u53d1\u9519\u8bef\uff0c\u76f4\u63a5\u4e0b\u4e00\u4e2a. \u5df2\u52a0\u8f7d\uff1a",100*a,"%, \u5f53\u524d\u8d44\u6e90url: ",r.el.url),i.errorCode=2201,r.el.src="",r.el.load(),t.detailErrCode=20):i.logger.log("preloadvideo end startAdTimer")}})}},{key:"preloadNext",value:function(e,t){if(!this.queue||0===this.queue.length)return this.logger.log("\u961f\u5217\u4e3a\u7a7a\uff0c\u4e0d\u8fdb\u884c\u9884\u52a0\u8f7d\uff0c\u76f4\u63a5\u8fd4\u56de."),void(this.currentAdIndex>=this.lastVideoIndex&&this.reportVideoEnd(!0));if(e!==this.nextAdIndex||0===e){if(e>this.lastVideoIndex)return this.isLoadComplete=!0,this.logger.log("\u6240\u6709\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210\uff0c\u76f4\u63a5\u8fd4\u56de"),void(this.currentAdIndex>=this.lastVideoIndex&&this.reportVideoEnd(!0));var i=this.nextAdIndex;this.nextAdIndex=e;var r=this.queue[e];if(r.isRichMedia)this.richMediaPlayer?(this.logger.log("\u5f53\u524d\u6b63\u5728\u64ad\u653e\u5bcc\u5a92\u4f53\uff0c\u6ca1\u6709\u529e\u6cd5\u9884\u52a0\u8f7d\u4e0b\u4e00\u4e2a\u5bcc\u5a92\u4f53\uff0c\u53ea\u80fd\u7b49\u64ad\u5b8c\uff0c\u56de\u9000nextAdIndex\u7b49\u5f85\u4e0b\u4e00\u6b21\u9884\u52a0\u8f7d\uff0c\u5148\u8fd9\u6837\u7b80\u5355\u5904\u7406\u5427"),this.nextAdIndex=i):(this.logger.log("[\u5bcc\u5a92\u4f53]\u5f00\u59cb\u9884\u52a0\u8f7d: \u7b2c",this.nextAdIndex,"\u4e2a"),this.preloadRichMedia(e,!!t),this._startAdTimer(14,r));else if(r&&r.url&&r.status===g.INIT){this.logger.log("\u5f00\u59cb\u9884\u52a0\u8f7d: \u7b2c",this.nextAdIndex,"\u4e2a"),r.status=g.LOADING,this._resetFreeVideo();var n=this._getFreeVideo(),a=n&&n.el;this.$preloadVideo=a,a?(n.status=m.PRELOADING,n.vindex=this.nextAdIndex,a.preload="auto",a.src=r.url,r.url||(r.detailErrCode=60),this._startAdTimer(14,r),this.rollbackAdIndex=0):(this.logger.log("\u6ca1\u6709\u7a7a\u95f2\u7684video\u53ef\u4ee5\u7528\u6765\u9884\u52a0\u8f7d\uff0c\u56de\u9000nextAdIndex\uff0c\u91cd\u7f6e\u5f53\u524d\u9884\u52a0\u8f7d\u7684\u89c6\u9891\u52a0\u8f7d\u72b6\u6001\uff0c\u7b49\u5f85\u4e0b\u4e00\u6b21\u9884\u52a0\u8f7d.",i),this.rollbackAdIndex=this.nextAdIndex,this.nextAdIndex=i,r.status=g.INIT)}}else this.currentAdIndex>=this.lastVideoIndex&&(this.logger.log("\u6700\u540e\u4e00\u4e2a\u9884\u52a0\u8f7d\u5b8c\u6210\u7684\u89c6\u9891\u548c\u5f53\u524d\u9884\u52a0\u8f7d\u7684\u89c6\u9891\u662f\u540c\u4e00\u4e2a\uff0c\u6240\u4ee5\u4e0d\u7528\u518d\u9884\u52a0\u8f7d\u4e86\uff0c\u76f4\u63a5\u8fd4\u56de. report"),this.reportVideoEnd(!0))}},{key:"preloadRichMedia",value:function(e,t){var i=this.queue[e];i.status=g.LOADING;var r=new s({adInfo:i.adInfo,playerData:this.conf.playerData,container:this.adplayer.$dom.$videoAd.$videoRichMediaAdContainer,api:this.conf.playerMethod});if(this.richMediaPlayer=this.richMediaMap["rich_"+i.index]=r,this.richMediaPlayer){var n={};n[v.AdLoaded]=this.onVpaidAdLoaded.bind(this,i,t),n[v.AdStarted]=this.onVpaidAdStarted.bind(this),n[v.AdVideoStart]=this.onVpaidAdVideoStart.bind(this),n[v.AdClickThru]=this.onVpaidAdClickThru.bind(this),n[v.AdStopped]=this.onVpaidAdStopped.bind(this,i),n[v.AdVideoComplete]=this.onVpaidAdVideoComplete.bind(this),n[v.AdError]=this.onVpaidAdError.bind(this,i),n[v.AdPlaying]=this.onVpaidAdPlaying.bind(this),n[v.AdPaused]=this.onVpaidAdPaused.bind(this),n[v.AdPauseTimeCount]=this.onVpaidAdPauseTimeCount.bind(this),n[v.AdResumeTimeCount]=this.onVpaidAdResumeTimeCount.bind(this),i.loadStartTime=+new Date,r.loadAd({api:this.conf.playerMethod,index:Object.keys(this.richMediaMap).length,preload:!1,adInfo:i.adInfo,events:n}),this.firstLoadingStartTime||(this.firstLoadingStartTime=+new Date),this.logger.log("6072 loadStart",i.tpIndex),this.message.emit(p.TXPLAYER_EVENT.AD_LOAD_START,{adtype:i.adtype===y.KB?y.LD:i.adtype,duration:1e3*+i.duration,index:i.tpIndex}),i.status=g.LOAD_READY}}},{key:"playNext",value:function(e){if(this.stopCountDown(),this.currentAdIndex>=this.lastVideoIndex||e>this.lastVideoIndex)return this.logger.log("\u5f53\u524d\u64ad\u653e\u7684\u662f\u6700\u540e\u4e00\u4e2a, \u4e0d\u518d\u64ad\u653e\u4e0b\u4e00\u4e2a"),void this.reportVideoEnd();e=e||this.currentAdIndex+1;var t=this.queue[e];if(t){var i=t.status!==g.END;this.logger.log("\u64ad\u653e\u4e0b\u4e00\u4e2a: index: ",e,", \u72b6\u6001\u662f\u5426\u53ef\u64ad: ",i),i?this.start(e):this.playNext(e+1)}}},{key:"destroy",value:function(){if(!this.hasDestroy){var e=this.ordertype;this.pause(),this.videoAdUi.hideAll(),this.$videos.forEach(function(e){if(u.hide(e.el),e.hls){if(e.hlsEvt)for(var t in e.hlsEvt)e.hls.off(t,e.hlsEvt[t]);e.hls.destroy(),e.hls=null}}),this.unbindVideoEvent(),this.unbindBrowserEvent(),this.clearVideoDom(),this.reset(),this.richMediaPlayer&&(this.richMediaPlayer.stopAd(),this.richMediaPlayer=null),this.conf=null,this.blockScreen=null,this.unbindVideoUiEvent(),this.hasDestroy=!0,n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this,{adtype:e,removeType:!0})}}},{key:"reportVideoEnd",value:function(e,t){this.blockScreen&&!e?this.blockScreen.isNeedShow(this.reportVideoEndImpl.bind(this)):this.reportVideoEndImpl(e,t)}},{key:"reportVideoEndImpl",value:function(e,i){var r,a,o=this;if(i)u();else{var s=!1;if(TxpCreativePlayer.fromPcClient&&(this.dataset.playerIsSkipPrelude&&this.dataset.playtime>=this.dataset.playerEndTime||!this.dataset.playerIsSkipPrelude&&this.dataset.playtime>=this.dataset.playerDuration)&&(s=!0),e||this.ordertype!==y.HT||this.currentPlayAdType===y.HT||this._state===g.WAIT_FOR_STOP||s){if(!this.hasReportVideoEnd){this.hasReportVideoEnd=!0,this.logger.log("\u6240\u6709\u5e7f\u544a\u64ad\u653e\u5b8c\u6210"),clearTimeout(this.vpaidPauseTimeCountHandler),this.stopCountDown(),u();var d=0,l=0;r.forEach(function(e){d+=e}),a.forEach(function(e){l+=e}),this.message.emit(p.TXPLAYER_EVENT.AD_STOP,{index:this.currentAdIndex,rfid:this.rfid,adtype:this.ordertype,isAllAdEnd:Math.abs(d-l)<5e3}),this.destroy()}}else n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"waitForStop",this).call(this)}function u(){r=o.isEmpty?[]:o.queue.map(function(e){return 1e3*e.duration}),a=o.isEmpty?[]:o.queue.map(function(e){return"undefined"!=typeof e.realDuration?e.realDuration:e.playStartTime?+new Date-e.playStartTime:0});var e=0;o.isEmpty||o.queue.forEach(function(t,i){t.viewTime?(o.logger.log("viewTime_"+i,t.viewTime),e+=t.viewTime):t.viewStartTime&&(o.logger.log("viewTime_"+i,+new Date-t.viewStartTime),e+=+new Date-t.viewStartTime)}),o.logger.log("report",p.REPORT_EVENT.AD_END),o.message.emit(p.REPORT_EVENT.AD_END,{adInfo:{list:o.orderList,adtype:o.ordertype},rfid:o.rfid,adtype:o.ordertype,errorcode:o.errorCode,adclose:o.userCloseOrderId,closetime:o.userCloseOrderId?1e3*(o.duration-o.countdown):"",adtt:e,adfbt:o.isEmpty?"":o.firstLoadingEndTime&&o.firstLoadingStartTime?Math.abs(o.firstLoadingEndTime-o.firstLoadingStartTime):-1,videopt:r,videott:a,firstview:o.isEmpty?"":o.firstViewTime||-1})}}},{key:"onVideoLoadStart",value:function(e){if(e.src){var t=u.attr(e,"data-idx");this.firstLoadingStartTime||(this.firstLoadingStartTime=+new Date);var i=this._getTargetOrderInfo(t);this.logger.log("loadstart index: ",i.tpIndex),i&&(i.loadStartTime=+new Date,this.logger.log("6072 loadStart",i.tpIndex),this.message.emit(p.TXPLAYER_EVENT.AD_LOAD_START,{adtype:i.adtype===y.KB?y.LD:i.adtype,duration:1e3*+i.duration,index:i.tpIndex}))}}},{key:"onVideoCanPlay",value:function(e){var t=u.attr(e,"data-idx"),i=this._getTargetOrderInfo(t);if(this.logger.log("canplay duration: ",e.duration,", idx: ",t),i){var r=+new Date,n=this._getVideoBufferPercent(e);i.loadedPercent=n,i.speed=n&&i.fileSize/(r-i.loadStartTime)*1e3,1==i.tpIndex&&this.hasReportPlayStartArr&&-1==this.hasReportPlayStartArr.indexOf(i.tpIndex)&&(this.logger.log("6072 playStart",i.tpIndex),this.hasReportPlayStartArr.push(i.tpIndex),this.message.emit(p.TXPLAYER_EVENT.AD_PLAY_START,{adtype:i.adtype===y.KB?y.LD:i.adtype,index:i.tpIndex,vid:i.vid,duration:i.duration,src:i.url})),this.canPlay||this.ordertype===y.ZC?!this.canPlay&&this.ordertype===y.ZC&&i.loadedPercent>=.05&&(this.logger.log(this.ordertype+" is Ready."),this._loadReadyHandler({displayCode:i.displayCode,adtype:i.adtype===y.KB?y.LD:i.adtype,index:i.index,speed:i.speed})):(this.logger.log(this.ordertype+" is Ready."),this._loadReadyHandler({adtype:i.adtype===y.KB?y.LD:i.adtype,index:i.index,speed:i.speed}))}}},{key:"onVideoProgress",value:function(e){var t=this._getTargetOrderInfo(u.attr(e,"data-idx")),i=0,r=!1,n=t?t.index:-1;if(t){var a=+new Date;i=this._getVideoBufferPercent(e),t.loadedPercent=i,r=i>.99,t.speed=i&&t.fileSize/(a-t.loadStartTime)*1e3,this.message.emit(p.TXPLAYER_EVENT.AD_LOAD_PROGRESS,{adtype:t.adtype===y.KB?y.LD:t.adtype,index:t.tpIndex,speed:t.speed}),this.logger.log("progress percent: ",i)}t&&r&&!this.isLoadComplete&&!t.loadCompleteTime&&(this.logger.log("report[video progress]",p.REPORT_EVENT.AD_LOAD_COMPLETE,n),this.logger.log("progress...."),this._handleVideoLoadComplete(t,n,n===this.currentAdIndex)),t&&!this.canPlay&&this.ordertype===y.ZC&&t.loadedPercent>=.05&&(this.logger.log(this.ordertype+" is Ready."),this._loadReadyHandler({displayCode:t.displayCode,adtype:t.adtype===y.KB?y.LD:t.adtype,index:t.index,speed:t.speed}))}},{key:"_handleVideoLoadComplete",value:function(e,t,i){e.loadCompleteTime=+new Date,e.speed=e.fileSize/(e.loadCompleteTime-e.loadStartTime)*1e3,e.status=g.LOAD_READY,e.hasReportLoadComplete||(e.hasReportLoadComplete=!0,this.message.emit(p.REPORT_EVENT.AD_LOAD_COMPLETE,{adInfo:this.orderList[e._index],adload:e.loadCompleteTime-e.loadStartTime,tpindex:e.tpIndex,oid:e.orderId,errorcode:""}),this.message.emit(p.TXPLAYER_EVENT.AD_LOAD_COMPLETE,{adtype:e.adtype===y.KB?y.LD:e.adtype,index:e.tpIndex,isAllEnd:t===this.lastVideoIndex,speed:e.speed})),this._doPreloadNextVideo(e,t,i)}},{key:"_doPreloadNextVideo",value:function(e,t,i){this.isLoadComplete=t>=this.lastVideoIndex,t<this.lastVideoIndex?i?(this.logger.log("[\u5f53\u524d]\u52a0\u8f7d\u5b8c\u6210:",t,"\uff0c\u9884\u52a0\u8f7d\u4e0b\u4e00\u4e2a"),this.preloadNext(this.currentAdIndex+1)):(this.logger.log("[\u9884\u52a0\u8f7d]\u52a0\u8f7d\u5b8c\u6210: ",t,"\uff0c\u9884\u52a0\u8f7d\u4e0b\u4e00\u4e2a"),this.preloadNext(t+1)):this.isLoadComplete&&this.logger.log("\u6240\u6709\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210")}},{key:"onVideoTimeupdate",value:function(e){var t=parseInt(e.currentTime);if(0!==e.currentTime&&(0===e.currentTime||t!==this.prevCurrentTime))if(t>this.prevCurrentTime+1||t<this.prevCurrentTime)e.currentTime=this.prevCurrentTime+.5;else{this.prevCurrentTime=t;var i=this._getVideoBufferPercent(e),r=this._getTargetOrderInfo(u.attr(e,"data-idx")),n=i>.99,a=r?r.index:-1;r&&(r.loadedPercent=i,r.realDuration=parseInt(1e3*e.currentTime,10),r.isActive&&!r.hasUnfoldActiveDetail&&t>=3&&(this.videoAdUi.unfoldActiveDetail(),r.hasUnfoldActiveDetail=!0)),n&&a===this.currentAdIndex&&!this.isLoadComplete&&(r.loadCompleteTime?this.rollbackAdIndex&&this.rollbackAdIndex<=this.lastVideoIndex&&this._getFreeVideo()&&(this.logger.log("\u56de\u9000\u7684\u5143\u7d20\u53ef\u4ee5\u5f00\u59cb\u8fdb\u884c\u52a0\u8f7d\u4e86"),this.preloadNext(this.rollbackAdIndex)):(this.logger.log("\u5f53\u524dvideo\u5df2\u7ecf\u52a0\u8f7d\u5b8c",a),this.logger.log("report[video timeupdate]",p.REPORT_EVENT.AD_LOAD_COMPLETE,a),this._handleVideoLoadComplete(r,a,!0)))}}},{key:"onVideoPlaying",value:function(e){var i=u.attr(e,"data-idx"),r=this._getTargetOrderInfo(i);if(n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this),r){this._clearAdTimer(r),r._tempErrorCode=0,this.blockScreen&&this.blockScreen.onAdPlaying(),r.status=g.PLAYING,this.firstViewTime||(this.firstViewTime=parseInt(window.performance.now(),10)),r.hasReportView||(r.hasReportView=!0,this.logger.log("report",p.REPORT_EVENT.AD_VIEW,r.index),this.message.emit(p.REPORT_EVENT.AD_VIEW,{adInfo:this.orderList[r._index],scene:this.scene})),this.firstViewTime||(this.firstViewTime=parseInt(window.performance.now(),10)),this.firstLoadingEndTime||(this.firstLoadingEndTime=+new Date),this.logger.log("\u7b2c",r.index,"\u4e2a\u5f00\u64ad\u4e86"),this.hasPlaying&&-1==this.hasPlaying.indexOf(r.tpIndex)&&(this.hasPlaying.push(r.tpIndex),this.startCountDown()),1!=r.tpIndex&&this.hasReportPlayStartArr&&-1==this.hasReportPlayStartArr.indexOf(r.tpIndex)&&(this.logger.log("6072 oldPlayStart",r.tpIndex),this.hasReportPlayStartArr.push(r.tpIndex),this.message.emit(p.TXPLAYER_EVENT.AD_PLAY_START,{adtype:r.adtype===y.KB?y.LD:r.adtype,index:r.tpIndex,vid:r.vid,duration:r.duration,src:r.url})),this.queue[this.currentAdIndex].status=g.PLAYING;var a=this.queue[this.currentAdIndex];this.setViewMonitor||(this.setViewMonitor=!0,this._reportScreenShot({video:this.$currentVideo,oid:a.orderId,index:r.index,vid:a.vid,empty:this.info.isEmpty}),this.adViewMonitor.start(a))}}},{key:"onVideoPause",value:function(e){this.pause();var t=u.attr(e,"data-idx"),i=this._getTargetOrderInfo(t);i&&(this.message.emit(p.TXPLAYER_EVENT.AD_PAUSE,{adtype:i.adtype===y.KB?y.LD:i.adtype,index:i.tpIndex}),i.status=g.PAUSED),"touch"===this.adplayer.getConf().playerData.playerType&&this.videoAdUi.updatePlayIcon(!0)}},{key:"onVideoResume",value:function(e){this.resume(),this.videoAdUi.toggleCenterQrcode(!1);var t=u.attr(e,"data-idx");if(e.currentTime>0){t=u.attr(e,"data-idx");var i=this._getTargetOrderInfo(t);i&&(this.message.emit(p.TXPLAYER_EVENT.AD_RESUME,{adtype:i.adtype===y.KB?y.LD:i.adtype,index:i.tpIndex}),i.status=g.PLAYING)}"touch"===this.adplayer.getConf().playerData.playerType&&this.videoAdUi.updatePlayIcon(!1)}},{key:"playVideo",value:function(e){var t=this;if(this.logger.log("-==>>> playVideo: (video.vindex/video.status)",e.vindex,e.status),e.status==m.PLAYING){var i=e.el.play();i&&i["catch"](function(e){t.logger.log("playUrl: ",e)})}}},{key:"playUrl",value:function(e){var t,i=this,r=this._getVideoByIndex(e.index);if(this.logger.log("-==>>> playUrl: (video.vindex/video.status)",r.vindex,r.status),r.bakUrlData)if(0<r.bakUrlData.urls.length)if("hls"==r.bakUrlData.type&&_.isSupported()){if(r.hls){if(r.hlsEvt)for(var n in r.hlsEvt)r.hls.off(n,r.hlsEvt[n]);r.hls.destroy(),r.hls=null}if(!r.hls)for(var n in r.hls=new _,r.hlsEvt={},r.hlsEvt[_.Events.MANIFEST_PARSED]=function(){i.playVideo(r)},r.hlsEvt[_.Events.ERROR]=function(t,n){i.logger.log("-==>>> playUrl, hls error: (orderInfo.index/orderInfo.vid/error)",e.index,e.vid,n),r.el.src="",r.el.load(),e.detailErrCode=30},r.hlsEvt)r.hls.on(n,r.hlsEvt[n]);r.bakUrlData.m3u8?(t=r.bakUrlData.urls.shift(),r.hls.url=t,r.hls.trigger("hlsManifestLoading",{url:t,m3u8:r.bakUrlData.m3u8}),setTimeout(function(){r.hls.coreComponents[0].loadsuccess({data:r.bakUrlData.m3u8,url:t},{loaded:1,retry:1,tfirst:1,tload:1,total:1,trequest:1},{type:"manifest",url:t}),r.bakUrlData.m3u8=void 0},50),this.logger.log("-==>>> playUrl, ZC_m3u8: (orderInfo.index/orderInfo.vid)",e.index,e.vid)):(t=r.bakUrlData.urls.shift(),r.hls.loadSource(t),this.logger.log("-==>>> playUrl, url_m3u8: (orderInfo.index/orderInfo.vid)",e.index,e.vid)),r.hls.attachMedia(r.el),this._startAdTimer(14,e)}else t=r.bakUrlData.urls.shift(),r.el.src=t||"",t||(e.detailErrCode=70),this.playVideo(r),this.logger.log("-==>>> playUrl, mp4: (orderInfo.index/orderInfo.vid)",e.index,e.vid),this._startAdTimer(14,e);else r.el.src="",r.el.load(),r.failAll=!0,e.detailErrCode=40;else r.el.src=e.url||"",e.url||(e.detailErrCode=50),this.playVideo(r),this._startAdTimer(14,e)}},{key:"loadBakUrl",value:function(e){var t=this;this.logger.log("\u5f00\u59cb\u8bf7\u6c42hls\u5730\u5740: \u7b2c",e.index,"\u4e2a, vid: ",e.vid),this.geturls.requestVideoUrlsByVid({vid:e.vid,flowid:this.conf.playerData.playerFlowid,guid:this.conf.playerData.playerGuid,onSucc:function(i){t.loadUrlSucc(e,i)},onFail:function(i){t.loadUrlFail(e,i)}})}},{key:"loadUrlSucc",value:function(e,t){this.logger.log("loadUrlSucc: \u7b2c"+e.index+"\u4e2a, vid: "+e.vid+", \u5907\u4efd\u5730\u5740\u6570\uff1a"+(t&&t.urls?t.urls.length:0));var i=this._getVideoByIndex(e.index);e&&t&&t.urls&&t.urls.length>0?(i.bakUrlData=t,this.playUrl(e)):this.onVideoError(i.el,!0)}},{key:"loadUrlFail",value:function(e,t){this.logger.log("loadUrlFail: \u7b2c",e.index,"\u4e2a, ",t);var i=this._getVideoByIndex(e.index);this.onVideoError(i.el,!0)}},{key:"onVideoError",value:function(e,t){if(!this.isLoadComplete){var i=u.attr(e,"data-idx"),r=this._getTargetOrderInfo(i);if(r){r.loadStartTime-+new Date<500&&TxpCreativePlayer.adBlockEnabled&&(r._tempErrorCode=6);var n=this._getVideoByIndex(r.index);if(this.logger.log("-==>>> onVideoError: (video.vindex/video.status)",n.vindex,n.status,", has adb: ",TxpCreativePlayer.adBlockEnabled),this._clearAdTimer(r),this.logger.log("\u89c6\u9891\u51fa\u9519: \u7b2c",r.index,"\u4e2a, vid: ",r.vid),!t&&!n.failAll)return void(n.bakUrlData?(this.logger.log("-==>>> onVideoError: \u6709\u5907\u4efd\u5730\u5740",n.bakUrlData.urls?n.bakUrlData.urls.length:0),this.playUrl(r)):(this.logger.log("-==>>> onVideoError: \u6ca1\u6709\u5907\u4efd\u5730\u5740"),this.loadBakUrl(r)));this.logger.log("-==>>> onVideoError: \u6700\u7ec8\u7ed3\u675f, \u7b2c",r.index,"\u4e2a, vid: ",r.vid),n.status=m.ERROR,r.viewStartTime&&(r.viewTime=+new Date-r.viewStartTime),r.status=g.END,r.realDuration=parseInt(1e3*e.currentTime,10),this.prevCurrentTime=0,this.errorCount++,r.loadCompleteTime||(r.loadCompleteTime=+new Date),r.hasReportLoadComplete||(r.hasReportLoadComplete=!0,this.logger.log("report[video error]",p.REPORT_EVENT.AD_LOAD_COMPLETE,r._index),this.message.emit(p.REPORT_EVENT.AD_LOAD_COMPLETE,{adInfo:this.orderList[r._index],adload:r.loadCompleteTime-r.loadStartTime,tpindex:r.tpIndex,oid:r.orderId,errMsg:r.url,errorcode:2301}));var a=e.error.message||"",o=e.error.code;a||e.currentSrc==e.src||(a="MEDIA_ELEMENT_ERROR: Empty src attribute"),6==+r._tempErrorCode?(o=r._tempErrorCode,r._tempErrorCode=0,this.blockScreen&&(this.blockScreen.errorByADBlock=!0)):"MEDIA_ELEMENT_ERROR: Empty src attribute"===a&&(o=5),"undefined"!=typeof e.readyState&&(a+=";readyState:"+e.readyState),"undefined"!=typeof e.networkState&&(a+=";networkState:"+e.networkState);var s=e.error&&e.error.constructor&&e.error.constructor.name;this.logger.log("6072 playError: (orderInfo.index/orderInfo.vid/errorCode)",r.index,r.vid,o),this.message.emit(p.TXPLAYER_EVENT.AD_PLAY_ERROR,{adtype:r.adtype===y.KB?y.LD:r.adtype,index:r.tpIndex,vid:r.vid,duration:r.duration,errorCode:o,detailErrCode:r.detailErrCode,errorMessage:a||s||"",preload:r.index!==this.currentAdIndex,src:r.url,isAllEnd:this.currentAdIndex===r.index&&r.index===this.lastVideoIndex}),r.index!==this.currentAdIndex&&r.index===this.lastVideoIndex&&this.message.emit(p.TXPLAYER_EVENT.AD_LOAD_COMPLETE,{adtype:r.adtype===y.KB?y.LD:r.adtype,index:r.tpIndex,errorCode:o,errorMessage:a,isAllEnd:!0}),this.countdown=this.countdown-r.duration,r.adtype!==y.KB&&(this.showCountdown=this.showCountdown-r.duration),r.index===this.currentAdIndex?this.currentPlayAdType?(this.logger.log("\u5f53\u524d\u89c6\u9891\u5931\u8d25\u4e86\uff0c\u5f53\u524d\u5df2\u7ecf\u51c6\u5907\u597d\u4e86\uff0c\u76f4\u63a5\u64ad\u653e\u4e0b\u4e00\u4e2a"),this.playNext()):(this.logger.log("\u5f53\u524d\u89c6\u9891\u5931\u8d25\u4e86\uff0c\u4f46\u662f\u8fd8\u6ca1\u6709\u8c03\u7528\u8fc7play\uff0c\u76f4\u63a5\u9884\u52a0\u8f7d\u4e0b\u4e00\u4e2a."),this.currentAdIndex<=this.lastVideoIndex?(this.currentAdIndex=this.currentAdIndex+1,this.preloadNext(r.index+1)):(this.logger.log("\u6240\u6709\u90fd\u64ad\u5b8c\u4e86"),this.reportVideoEnd())):(this.logger.log("\u9884\u52a0\u8f7d\u52a0\u8f7d\u4e0b\u4e00\u4e2a"),this.preloadNext(r.index+1)),this.setViewMonitor=!1}this.errorCount==this.orderList.length&&(this.errorCode=2201)}}},{key:"onVideoEnded",value:function(e){var t=u.attr(e,"data-idx"),i=this._getTargetOrderInfo(t);i&&(this.logger.log("\u64ad\u653e\u5b8c\u6210: \u7b2c",this.currentAdIndex,"\u4e2a"),this._clearAdTimer(i),this._getVideoByIndex(i.index).status=m.END,i.viewStartTime&&(i.viewTime=+new Date-i.viewStartTime),i.viewTime<1e3&&TxpCreativePlayer.adBlockEnabled&&this.blockScreen&&(this.blockScreen.errorByADBlock=!0,this.blockScreen.setLSValue(this.blockScreen.getLSValue()+2)),i.status=g.END,i.realDuration=parseInt(1e3*e.duration,10),this.message.emit(p.TXPLAYER_EVENT.AD_PLAY_END,{adInfo:this.orderList[i._index],adtype:i.adtype===y.KB?y.LD:i.adtype,index:i.tpIndex,errorcode:0}),this.setViewMonitor=!1),this.playNext(),this.prevCurrentTime=0}},{key:"bindVideoEvent",value:function(){for(var e=0,t=this.$videos.length;e<t;e++)this.dobindVideoEvent(this.$videos[e].el)}},{key:"unbindVideoEvent",value:function(){for(var e=0,t=this.$videos.length;e<t;e++)this.doUnbindVideoEvent(this.$videos[e].el);this._videoEvents={}}},{key:"dobindVideoEvent",value:function(e){var t=this;for(var i in this._videoEvents||(this._videoEvents={loadstart:function(e){t.onVideoLoadStart(e.target)},progress:function(e){t.onVideoProgress(e.target)},canplay:function(e){t.onVideoCanPlay(e.target)},playing:function(e){t.onVideoPlaying(e.target)},play:function(e){t.onVideoResume(e.target)},pause:function(e){t.onVideoPause(e.target)},timeupdate:function(e){t.onVideoTimeupdate(e.target)},error:function(e){t.onVideoError(e.target)},ended:function(e){t.onVideoEnded(e.target)}}),this._videoEvents)this._videoEvents.hasOwnProperty(i)&&u.on(e,i,this._videoEvents[i])}},{key:"doUnbindVideoEvent",value:function(e){if(this._videoEvents)for(var t in this._videoEvents)this._videoEvents.hasOwnProperty(t)&&u.off(e,t,this._videoEvents[t])}},{key:"bindVideoUiEvent",value:function(){var e=this,t=function(){if(e.canClickToStopAd){var t=e.queue[e.currentAdIndex];return t.viewStartTime&&(t.viewTime=+new Date-t.viewStartTime),e.userCloseOrderId=t.orderId,e.logger.log("\u7528\u6237\u70b9\u51fb\u4e86\u5173\u95ed"),void e.reportVideoEnd()}e.showCloseButton&&(e.pause(),e._pauseWhenVipPanelShow=!0,e.conf.playerMethod.showOpenVIPGuide&&e.conf.playerMethod.showOpenVIPGuide())},i=function(t){var i=e.queue[e.currentAdIndex];if(i.isActiveScan&&"1"===i.clickJumpType)return e.pause(),e.videoAdUi.toggleCenterQrcode(!0),i.effectUrl=i.effectUrl.replace("__CLICK_ID__",i.traceId).replace("__ACTION_ID__","323"),e.logger.log("report",p.REPORT_EVENT.AD_EFFECT_CLICK),void e.message.emit(p.REPORT_EVENT.AD_EFFECT_CLICK,i);if(e.resume(),i.isActiveScan&&i.destPageUrl&&i.destPageUrl.indexOf("http://")>-1)e.videoAdUi.showCantOpenToast();else if(i.link&&"N"==i.noClick){e.logger.log("report",p.REPORT_EVENT.AD_CLICK),e.message.emit(p.REPORT_EVENT.AD_CLICK,{adInfo:e.orderList[i._index],adclick:i.link?i.orderId:"",clicktime:1e3*(e.duration-e.countdown),scene:e.scene});var r=function(t,i){var r=e.adplayer.getConf();if(!r||!r.forbidLinkJump){var n=r&&r.playerData&&r.playerData.playerPfEx||"",a=t.link;if(t.isActive&&i&&(a=a.replace("acttype=1014","acttype="+i)),!t.isActiveScan)return c.appendParamsToUrl(a,{pf_ex:n||"",appversion:A});var o=a.replace("http://","https://");return c.appendParamsToUrl("https://active-appmedia.video.qq.com/float-common/jump_page.html?jumpUrl="+encodeURIComponent(o)+"&targetUrl="+encodeURIComponent(t.destPageUrl)+"&brandImg="+encodeURIComponent(t.activeBannerInfo.brandImg)+"&brandName="+encodeURIComponent(t.activeBannerInfo.brandName),{pf_ex:n||"",appversion:A})}}(i,t);r&&window.open(r)}},r=function(t){t?e.pause():e.resume(),e.videoAdUi.updateNoSkipDialog({show:t})};this.message.on(p.UI_EVENT.VIDEO_SKIP_TEXT,function(){e.canSkip?e.videoAdUi.trueViewInterval||t():r(!0)}),this.message.on(p.UI_EVENT.VIDEO_CLOSE_BUTTON_CLICK,function(){t()}),this.message.on(p.UI_EVENT.VIDEO_LINK_AREA_CLICK,function(e){i(e)}),this.message.on(p.UI_EVENT.VIDEO_DETAIL_BUTTON_CLICK,function(e){i(e)}),this.message.on(p.UI_EVENT.VIDEO_NO_SKIP_BUTTON_CLICK,function(){r(!0)}),this.message.on(p.UI_EVENT.VIDEO_NO_SKIP_KNOW_BUTTON_CLICK,function(){r(!1)}),this.message.on(p.UI_EVENT.VIDEO_NO_SKIP_CLOSE_BUTTON_CLICK,function(){r(!1)}),this.message.on(p.UI_EVENT.VIDEO_VOLUME_BUTTON_CLICK,function(){e.isMute=!e.isMute,e.isMute?e.setVolume(0):e.setVolume(Math.min(100,Math.max(0,e.callOuterApi(p.TXPLAYER_API.GET_VOLUME)))),e.videoAdUi.updateVideoVolumeBtn({mute:e.isMute})}),this.message.on(p.UI_EVENT.VIDEO_PLAY_ICON_CLICK,function(){e.resume()}),this.message.on(p.UI_EVENT.ACTIVE_SCAN_DETAIL_BUTTON_CLICK,function(){}),this.message.on(p.UI_EVENT.CENTER_QRCODE_CLOSE_BUTTON_CLICK,function(){e.resume()})}},{key:"unbindVideoUiEvent",value:function(){f(this.message,p.UI_EVENT.VIDEO_SKIP_TEXT),f(this.message,p.UI_EVENT.VIDEO_CLOSE_BUTTON_CLICK),f(this.message,p.UI_EVENT.VIDEO_LINK_AREA_CLICK),f(this.message,p.UI_EVENT.VIDEO_DETAIL_BUTTON_CLICK),f(this.message,p.UI_EVENT.VIDEO_NO_SKIP_BUTTON_CLICK),f(this.message,p.UI_EVENT.VIDEO_NO_SKIP_KNOW_BUTTON_CLICK),f(this.message,p.UI_EVENT.VIDEO_NO_SKIP_CLOSE_BUTTON_CLICK),f(this.message,p.UI_EVENT.VIDEO_VOLUME_BUTTON_CLICK),f(this.message,p.UI_EVENT.VIDEO_PLAY_ICON_CLICK),f(this.message,p.UI_EVENT.ACTIVE_SCAN_DETAIL_BUTTON_CLICK),f(this.message,p.UI_EVENT.CENTER_QRCODE_CLOSE_BUTTON_CLICK)}},{key:"onVpaidAdLoaded",value:function(e,t){this.firstLoadingEndTime||(this.firstLoadingEndTime=+new Date),this.logger.log("[\u5bcc\u5a92\u4f53]\u52a0\u8f7d\u5b8c\u6210: \u7b2c",e.index,"\u4e2a"),this.canPlay||this._loadReadyHandler({adtype:e.adtype===y.KB?y.LD:e.adtype,index:e.index,speed:e.speed}),e.loadCompleteTime=+new Date,e.hasReportLoadComplete||(e.hasReportLoadComplete=!0,this._clearAdTimer(e),this.logger.log("report[rich]",p.REPORT_EVENT.AD_LOAD_COMPLETE),this.message.emit(p.REPORT_EVENT.AD_LOAD_COMPLETE,{adInfo:this.orderList[e._index],adload:e.loadCompleteTime-e.loadStartTime,tpindex:e.tpIndex,oid:e.orderId,errorcode:0})),t&&(e.playStartTime||(e.playStartTime=+new Date),this.startRichMedia())}},{key:"onVpaidAdStarted",value:function(){this.logger.log("[\u5bcc\u5a92\u4f53]\u64ad\u653e\u5f00\u59cb: \u7b2c",this.currentAdIndex,"\u4e2a");var e=this.queue[this.currentAdIndex];e.hasReportView||(e.hasReportView=!0,this.message.emit(p.REPORT_EVENT.AD_VIEW,{adInfo:this.orderList[e._index],scene:this.scene})),this.firstViewTime||(this.firstViewTime=parseInt(window.performance.now(),10)),this.logger.log("6072 playStart",e.tpIndex),this.message.emit(p.TXPLAYER_EVENT.AD_PLAY_START,{adtype:e.adtype===y.KB?y.LD:e.adtype,index:e.tpIndex,vid:e.vid,duration:e.duration,src:e.src});var t=this.queue[this.currentAdIndex+1];t&&!t.isRichMedia&&this.preloadNext(this.currentAdIndex+1)}},{key:"onVpaidAdVideoStart",value:function(){this.logger.log("[\u5bcc\u5a92\u4f53]\u89c6\u9891\u5f00\u59cb\u64ad\u653e: \u7b2c",this.currentAdIndex,"\u4e2a")}},{key:"onVpaidAdPlaying",value:function(){this.logger.log("[\u5bcc\u5a92\u4f53]\u6062\u590d\u64ad\u653e"),this.startCountDown(),n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this)}},{key:"onVpaidAdPaused",value:function(){this.logger.log("[\u5bcc\u5a92\u4f53]\u6682\u505c\u64ad\u653e"),this.stopCountDown()}},{key:"onVpaidAdPauseTimeCount",value:function(){var e=this;this.logger.log("[\u5bcc\u5a92\u4f53]\u6682\u505c\u5012\u8ba1\u65f6"),this.stopCountDown(),clearTimeout(this.vpaidPauseTimeCountHandler),this.vpaidPauseTimeCountHandler=setTimeout(function(){e.startCountDown()},3e3),this.richMediaPlayer&&this.richMediaPlayer.continueTimeout()}},{key:"onVpaidAdResumeTimeCount",value:function(){this.logger.log("[\u5bcc\u5a92\u4f53]\u6062\u590d\u5012\u8ba1\u65f6"),clearTimeout(this.vpaidPauseTimeCountHandler),this.startCountDown()}},{key:"onVpaidAdClickThru",value:function(){this.logger.log("[\u5bcc\u5a92\u4f53]\u70b9\u51fb\u5bcc\u5a92\u4f53: \u7b2c",this.currentAdIndex,"\u4e2a");var e=this.queue[this.currentAdIndex];if(e.link&&"N"==e.noClick){var t=this.adplayer.getConf();if(t&&t.forbidLinkJump)return;var i=t&&t.playerData&&t.playerData.playerPfEx||"",r=c.appendParamsToUrl(e.link,{pf_ex:i||"",appversion:A});window.open(r)}}},{key:"onVpaidAdVideoComplete",value:function(){this.logger.log("[\u5bcc\u5a92\u4f53]\u64ad\u653e\u7ed3\u675f: \u7b2c",this.currentAdIndex,"\u4e2a");var e=this.queue[this.currentAdIndex];e.viewStartTime&&(e.viewTime=+new Date-e.viewStartTime),e.status=g.END,e.realDuration=e.playStartTime?+new Date-e.playStartTime:0,this.richMediaPlayer.destroy();this.queue[this.currentAdIndex+1];this.richMediaPlayer=null,this.playNext()}},{key:"onVpaidAdStopped",value:function(e){this.logger.log("[\u5bcc\u5a92\u4f53]\u5e7f\u544a\u505c\u6b62: \u7b2c",this.currentAdIndex,"\u4e2a"),e.status=g.END}},{key:"onVpaidAdError",value:function(e){this.logger.log("[\u5bcc\u5a92\u4f53]\u52a0\u8f7d\u5931\u8d25"),e.loadCompleteTime||(e.loadCompleteTime=+new Date),e.hasReportLoadComplete||(e.hasReportLoadComplete=!0,this._clearAdTimer(e),this.logger.log("report[rich error]",p.REPORT_EVENT.AD_LOAD_COMPLETE,e.index),e.viewStartTime&&(e.viewTime=+new Date-e.viewStartTime),e.realDuration=e.playStartTime?+new Date-e.playStartTime:0,this._emitEvent(p.REPORT_EVENT.AD_LOAD_COMPLETE,{adInfo:this.orderList[e._index],adload:e.loadCompleteTime-e.loadStartTime,tpindex:e.tpIndex,oid:e.orderId,errorcode:2301})),e.status=g.END;var t=this.queue[this.currentAdIndex];this.logger.log("6072 playError",e.tpIndex),this.message.emit(p.TXPLAYER_EVENT.AD_PLAY_ERROR,{adtype:e.adtype,index:e.tpIndex,vid:e.vid,duration:e.duration,errorCode:404,errorMessage:"richMediaLoadError",preload:e.index!==this.currentAdIndex,src:e.url,isAllEnd:this.currentAdIndex===e.index&&e.index===this.lastVideoIndex}),this.countdown=this.countdown-e.duration,e.adtype!==y.KB&&(this.showCountdown=this.showCountdown-e.duration),t.tpIndex===e.tpIndex?this.playNext():this.preloadNext(this.nextAdIndex+1)}},{key:"bindBrowserEvent",value:function(){var e=this;this.unbindBrowserEvent(),this.logger.log("add:_browserBeforeUnload"),this._browserBeforeUnload=function(){e.unbindBrowserEvent(),e.logger.log("report:_browserBeforeUnload");var t=e.queue[e.currentAdIndex];t&&(t.viewStartTime&&(t.viewTime=+new Date-t.viewStartTime),e.userCloseOrderId=t.orderId,e.rfid="",e.reportVideoEnd(!0,!0))},window.addEventListener("beforeunload",this._browserBeforeUnload)}},{key:"unbindBrowserEvent",value:function(){this.logger.log("remove:_browserBeforeUnload"),window.removeEventListener("beforeunload",this._browserBeforeUnload)}},{key:"_getFreeVideo",value:function(){for(var e=0,t=this.$videos.length;e<t;e++)if(this.$videos[e].status===m.EMPTY)return this.$videos[e];return null}},{key:"_resetFreeVideo",value:function(){for(var e=0,t=this.$videos.length;e<t;e++)this.$videos[e].status>m.PLAYING&&(this.$videos[e].status=m.EMPTY,this.$videos[e].bakUrlData=void 0,this.$videos[e].failAll=!1)}},{key:"_hideFreeVideo",value:function(){for(var e=0,t=this.$videos.length;e<t;e++)this.$videos[e].status!==m.PLAYING&&u.hide(this.$videos[e].el)}},{key:"_getVideoBufferPercent",value:function(e){var t=0;if(e&&e.buffered&&e.buffered.length>0)try{t=(e.buffered.end(0)-e.buffered.start(0))/e.duration}catch(i){}return t}},{key:"_getTargetOrderInfo",value:function(e){for(var t=0,i=this.$videos.length;t<i;t++)if(u.attr(this.$videos[t].el,"data-idx")==e)return this.queue[this.$videos[t].vindex];return null}},{key:"_getVideoByIndex",value:function(e){for(var t=0,i=this.$videos.length;t<i;t++)if(this.$videos[t].vindex===e)return this.$videos[t];return null}},{key:"_reportScreenShot",value:function(e){var t=this,i=1e3*Math.ceil(5*Math.random());e.time=i;var r=setTimeout(function(){t.message.emit(p.REPORT_EVENT.AD_SCREEN_SHOT,e),clearTimeout(r)},i)}}]),t}()},function(e,t,i){"use strict";e.exports={END:0,PLAYING:1,PAUSE:2,LOADING:3}},function(e,t,i){"use strict";var r=i(24);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not an Object");return e}},function(e,t,i){"use strict";var r=i(10),n={"function":!0,object:!0};e.exports=function(e){return r(e)&&n[typeof e]||!1}},function(e,t,i){"use strict";e.exports={EMPTY:0,PRELOADING:1,PLAYING:2,END:3,ERROR:4}},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=0,a=+new Date,o=i(8).Promise;e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.image=null,this.conf=t||{}}return r(e,[{key:"load",value:function(){var e=this;if(this.image)return o.resolve(this.image);var t=this.conf;return new o(function(i,r){var o=new Image;for(var s in o.id="adplayer_image_material_"+a+"_"+n,o.style.width="100%",o.style.height="100%",t.style)t.style.hasOwnProperty(s)&&(o.style[s]=t.style[s]);o.onload=function(){this.image=o,n++,i(this.image)}.bind(e),o.onerror=function(e){r(e)}.bind(e),o.src=t.url})}},{key:"destroy",value:function(){this.image&&(this.image.src="",this.image=null)}}]),e}()},function(e,t,i){"use strict";var r=i(8).Promise;function n(e,t){if("string"!=typeof t)return null;var i=t.split("."),r=i[0],n="";i.length>1&&(n=i[1]);var a=e.store;if(a.hasOwnProperty(r)){if(!n)return a[r];if(a[r].hasOwnProperty(n))return a[r][n]}}function a(){var e=new XMLHttpRequest;return e.open("GET","//dp3.qq.com/dynamic?pf=h5&sdktype=3&chid=-1&appversion=171101&get_type=sdkconfig"),new r(function(t,i){e.onreadystatechange=function(){if("200"==e.status&&4==e.readyState){var i=e.responseText,r={adflag:{}};try{var n=document.createElement("div");n.innerHTML=i,Array.prototype.forEach.call(n.querySelectorAll(".item"),function(e){var t=e.querySelector(".key").innerText,i=e.querySelector(".value").innerText;r.adflag[t]=i}),n=null}catch(a){}if(Object.keys(r.adflag).length)return void t(JSON.stringify(r));t(JSON.stringify({adflag:{PSJ:1,PPB:0,PVL:0,PDF:0}}))}},e.onerror=e.ontimeout=function(){t(JSON.stringify({adflag:{PSJ:0,PPB:0,PVL:0,PDF:0}}))},e.send(null)})}function o(e){var t,i,r={store:e=JSON.parse(e),t:(new Date).getTime()};return t="dp3config",i=JSON.stringify(r),window.localStorage&&window.localStorage.setItem(t,i),r}e.exports=function(e){var t;return t=e?"adflag."+e:"adflag",new r(function(e,i){var r,s=(r="dp3config",window.localStorage?window.localStorage.getItem(r):null);if(s){var d=JSON.parse(s);(new Date).getTime()-d.t>36e5?a().then(function(i){e(n(o(i),t))})["catch"](i):e(n(d,t))}else a().then(function(i){e(n(o(i),t))})["catch"](i)})}},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(9),a=i(29),o=i(30),s=i(31),d=i(35),l=i(1),u=i(3),c=i(4),h=i(0)("index"),f=i(68),p=i(69),v=null,y=null,g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hasLoadEndingAd=!1;new Date;if(h.log("new TxpCreativePlayer",t),!t)throw Error("\u521d\u59cb\u5316\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a!");this._initController(t)}return r(e,[{key:"_initController",value:function(e){this.controllers={},this.controllers.confController=new o(this),this.setConf(e),this.controllers.orderController=new s(this),this.controllers.adController=new d(this)}},{key:"emitToPlayer",value:function(e,t){var i=this.getConf().playerMsg;i&&i.broadcast&&i.broadcast(e,t)}},{key:"destroy",value:function(){this.controllers&&this.controllers.confController&&this.controllers.confController.destroy(),this.controllers=null}},{key:"init",value:function(e){this.controllers.confController.setConf(e),this.controllers.adController.init(e)}},{key:"setOrder",value:function(e){this.controllers.adController.initOrderReport(e),this.controllers.orderController.setOrder(e)}},{key:"checkPSJAction",value:function(e,t,i){var r=t.getStartSec();e>=r-6&&e<r?t.status===a.INIT?(this.loadAd(t.orderList,t).then(function(){t.status=a.LOADING}),h.log("load PSJ")):t.status===a.PLAYING&&(t.status=a.INIT,this.stopAd(t.orderList)):e>=r&&e<=t.getEndSec(i.playerDuration)?(e===r&&t.status===a.PLAYING&&(t.status=a.INIT,this.stopAd(t.orderList)),t.status===a.INIT?(this.loadAd(t.orderList,t).then(function(){t.status=a.LOADING}),h.log("load PSJ")):t.status!==a.LOADING&&t.status!==a.PLAYING||(t.status=a.PLAYING,this.playAd(t.orderList,t),h.log("play PSJ"))):t.status!=a.INIT&&(t.status=a.INIT,this.stopAd(t.orderList),h.log("stop PSJ"))}},{key:"checkPHLSAction",value:function(e,t,i){e>=t.getStartSec()-2&&e<=t.getStartSec()?t.status==a.INIT&&(this.loadAd(t.orderList,t).then(function(){t.status=a.LOADING}),h.log("load PHLS")):e>t.getStartSec()&&e<=t.getEndSec(i.playerDuration)?t.status==a.INIT?(this.loadAd(t.orderList,t).then(function(){t.status=a.LOADING}),h.log("load PHLS")):t.status!=a.LOADING&&t.status!=a.PLAYING||(t.status=a.PLAYING,this.playAd(t.orderList,t),h.log("play PHLS")):t.status!=a.INIT&&(t.status=a.INIT,this.stopAd(t.orderList),h.log("stop PHLS"))}},{key:"setPlaytime",value:function(e){var t=this,i=this.dataset;i.playtime=e,this.hasLoadEndingAd||(!i.playerIsSkipPrelude&&i.playerDuration&&i.playerDuration-e<=10||i.playerIsSkipPrelude&&i.playerEndTime>0&&i.playerEndTime-e<=10||i.playerIsSkipPrelude&&i.playerEndTime>0&&e>i.playerEndTime)&&(this.hasLoadEndingAd=!0,this.emitToPlayer(l.TXPLAYER_EVENT.AD_REQUEST_ORDER,{adtype:u.HT})),!(v=this.controllers.orderController.sceneInfos)||v.length<=0||v.forEach(function(r){var n=r.getStartSec();if(r.orderList&&!(n<0)){var o=r.getEndSec(i.playerDuration);switch(r.orderType){case u.VIN:e>=n&&e<=o?r.status==a.INIT&&(h.log("load VIN"),t.loadAd(r.orderList,r).then(function(){r.status=a.PLAYING,t.playAd(r.orderList,r),h.log("play VIN")})):r.status!=a.INIT&&(r.status=a.INIT,t.stopAd(r.orderList),h.log("stop VIN"));break;case u.ZC:if(!t.hasLoadEndingAd)if(r.status==a.INIT){if(e>=r.getStartSec()-12&&e<=r.getStartSec()+12){r.status=a.LOADING;var s=t.controllers.orderController.getOrdersByType(u.ZC),d=r.orderList;d.adcost=s.adcost,d.errorcode=s.errorcode,t.loadAd(d,r)}}else r.status==a.LOADING?(y=t.controllers.adController.getAd(r.orderList))&&y.canPlay&&(r.status=a.PLAYING):r.status==a.PLAYING&&(y=t.controllers.adController.getAd(r.orderList))&&y.state==c.END&&(r.status=a.END);break;case u.ZI:case u.BS:e==r.getStartSec()?r.status==a.INIT&&(r.status=a.LOADING,t.loadAd(r.orderList,r)):e>r.getStartSec()&&e<=r.getEndSec(i.playerDuration)?r.status==a.LOADING&&(y=t.controllers.adController.getAd(r.orderList))&&y.canPlay&&(r.status=a.PLAYING,t.playAd(r.orderList,r),h.log("play BS")):r.status!=a.INIT&&(r.status=a.INIT,t.stopAd(r.orderList));break;case u.PSJ:var l=r.getIsAbsoluteTime()?+new Date/1e3:e;t.checkPSJAction(l,r,i);break;case u.PHLS:t.checkPHLSAction(e,r,i);break;case u.CZC:e>=r.getStartSec()-2&&e<=r.getStartSec()?r.status==a.INIT&&(t.loadAd(r.orderList,r).then(function(){r.status=a.LOADING}),h.log("load CZC")):e>r.getStartSec()&&e<=r.getEndSec(i.playerDuration)?r.status==a.INIT?(t.loadAd(r.orderList,r).then(function(){r.status=a.LOADING}),h.log("load CZC")):r.status!=a.LOADING&&r.status!=a.PLAYING||(r.status=a.PLAYING,t.playAd(r.orderList,r),h.log("play CZC")):r.status!=a.INIT&&(r.status=a.INIT,t.stopAd(r.orderList),h.log("stop CZC"))}}})}},{key:"dataset",get:function(){return this.getConf().playerData}}]),e}();f.install(g),p.install(g),g.version=n,g.loadNextPart=function(){g.adClass.loadNextPart()},g.EVENT=l,g.AD_TYPE=u,g.Logger=h,g.fromPcClient=!1,g.debug=/debugad=1/.test(location.search||""),window.TxpCreativePlayer||(window.TxpCreativePlayer=g),e.exports=g},function(e,t,i){"use strict";e.exports={INIT:0,LOADING:2,LOAD_READY:4,PLAYING:6,END:-1}},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(17),a=i(0)("controller/confController"),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a.log("new ConfController"),this.defaultConf={playerMsg:null,playerDom:{pvlAdLayer:null,ppbAdLayer:null,pdfAdLayer:null,videoAdLayer:null,interactiveAdLayer:null},playerMethod:{},playerData:{playerWidth:0,playerHeight:0,playerLeft:0,playerTop:0,playtime:0,playerEndTime:0,playerDuration:0,playerFrom:"",playerPlatform:"",playerPf:"",playerPfEx:"",playerVersion:"",playerCid:"",playerVid:"",playerFlowid:"",playerGuid:"",playerPt:"",playerPu:0,playerTrialerMode:!1,playerAdExt:"",playerType:"",playerIsSkipPrelude:!1,playerVptag:""}}}return r(e,[{key:"setConf",value:function(){var e=Array.prototype.slice.call(arguments,0),t=e.length;if(0!==t)if(this.conf){if(1===t){var i=e[0];for(var r in i)i.hasOwnProperty(r)&&(this.conf[r]=n(this.conf[r],i[r]))}else if(2===t&&"string"==typeof e[0]){var a=e[0].split(".");if(1===a.length)this.conf[e[0]]=e[1];else{for(var o=this.conf[a[0]],s=1;s<a.length;s++)o=o[a[s]];o=e[1]}}}else this.conf=n(this.defaultConf,e[0])}},{key:"getConf",value:function(){return this.conf}},{key:"destroy",value:function(){this.conf&&(this.conf.playerDom=null,this.conf.playerMsg=null,this.conf.playerMethod=null),this.conf=null}}]),e}();e.exports=o},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(3),a=i(32),o=i(0)("controller/orderController"),s=[n.ZC,n.BS,n.ZI,n.TP,n.PSJ],d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adplayer=t,this.dataset=this.adplayer.dataset,this.reset()}return r(e,[{key:"reset",value:function(){this.sceneInfos=[],this.adtypeMap={},this.watchbuys=[]}},{key:"setOrder",value:function(e,t){if(o.log("order: ",e),!(e=a.parse(e)))return null;if(e.sceneInfos&&e.sceneInfos.length&&(this.sceneInfos=this.checkScenesConflict(e),this.watchbuys=e.watchbuys,this.setPageWatchBuyData()),e.adtypeMap)for(var i in e.adtypeMap)this.adtypeMap[i]=e.adtypeMap[i];return t&&e.adtypeMap?e.adtypeMap[t]:e.adtypeMap}},{key:"setPageWatchBuyData",value:function(){this.watchbuys&&this.watchbuys.length>0&&"function"==typeof window.__flashplayer_watchAndBuyList&&window.__flashplayer_watchAndBuyList(this.watchbuys)}},{key:"clearPageWatchBuyData",value:function(){this.watchbuys=[]}},{key:"checkScenesConflict",value:function(e){var t=e.sceneInfos,i=e.fields;if(t){if(i&&i[0]&&i[0].videotag&&i[0].videotag[0]&&i[0].videotag[0].ts&&i[0].videotag[0].ts.t){var r=i[0].videotag[0].ts.t[0],a=void 0;r&&r.forEach(function(e){a=parseInt(.001*e.pt),t.forEach(function(e){e.orderType!=n.BS||e.isEmpty||e.isConflictMark||e.getEndSec()<a-10||e.getStartSec()>a+15+10||(e.isConflictMark=!0)})})}var o=void 0,d=void 0,l=t.length,u=void 0,c=void 0;for(o=0;o<l;o++)if((u=t[o])&&!u.isEmpty&&!u.isWholeScene&&!u.isConflictMark)for(d=o+1;d<l;d++)if((c=t[d])&&!c.isEmpty&&!c.isWholeScene&&!c.isConflictMark&&this.isSceneConflict(u,c)){if((u.orderType===n.CZC||u.orderType===n.PHLS)&&c.orderType==n.ZC){c.isConflictMark=!0;break}if(u.orderType==n.ZC&&(c.orderType===n.CZC||c.orderType===n.PHLS)){u.isConflictMark=!0;break}if(u.orderType==n.CZC||c.orderType==n.CZC)break;if(s.indexOf(u.orderType)>s.indexOf(c.orderType)){u.isConflictMark=!0;break}c.isConflictMark=!0}return t=t.filter(function(e){return!e.isConflictMark})}}},{key:"isSceneConflict",value:function(e,t){var i=e.getStartSec(),r=e.getEndSec(),n=t.getStartSec();return!(t.getEndSec()<i-10||n>r+10)}},{key:"getOrdersByType",value:function(e){return this.adtypeMap[e]}},{key:"isOrderEmpty",value:function(e){if(!e)return!0;var t=e instanceof Array?e:this.getOrdersByType(e);return!t||0===t.length||t.every(function(e){return e.isEmpty})}},{key:"getOrderDuration",value:function(e){if(!e)return 0;var t=0,i=e instanceof Array?e:this.getOrdersByType(e);return i&&0!==i.length?(i.forEach(function(e){t+=+e.duration}),t/1e3):0}}]),e}();e.exports=d},function(e,t,i){"use strict";var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,a=undefined;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(d){n=!0,a=d}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=i(33),a=i(34),o=i(3),s=i(2),d={VIDEO:"mp4",PIC:["jpg","png","jpeg"],PSJ:"mp4"},l=["richMediaJs"],u=["richMediaJs","res"],c=["richMediaJs"],h=function(e,t,i){return e+"_"+t+"_"+i},f=function(e){for(var t=e?e.length:0,i=void 0,r=[],n=0;n<t;n+=1)i=e[n],r[n]={index:i.index,url:i.url||"",width:i.width,height:i.height,md5:i.md5,vid:i.vid,cs:i.cs,ds:i.ds};return r},p=function(e){switch(e){case o.LD:case o.HT:case o.ZC:return l;case o.ZI:return u;case o.ZT:return c}return null},v=function(e){var t={};if(!e)return t;var i="";try{i=decodeURIComponent(e)}catch(a){}var n=void 0;return i.split("&").forEach(function(e){if((n=e.split("="))[0]){var i=r(n,2);if(t[n[0]]=i[1],n[1]){var o=void 0;switch(n[0]){case"richdata":case"watch_buy":o=r(n,2)[1];try{o=decodeURIComponent(n[1])}catch(a){o=r(n,2)[1]}try{t[n[0]]=JSON.parse(o)}catch(a){t[n[0]]={}}}}}}),t};e.exports={parse:function(e){if(!e)return null;var t={},i={},r=[],l=[],u=void 0,c=void 0,y=void 0,g=void 0,m=void 0,A=void 0,_=void 0,E=void 0,T=void 0,b=void 0,w=void 0,x=void 0,S=function(e){var t={};if("undefined"!=typeof e.anchor_binding)for(var i=function(i,r){var n=e.anchor_binding[i];n.order_list&&n.order_list.length&&n.order_list.forEach(function(e){var i=e.order_id+"_"+e.cre_id;t[i]||(t[i]=[]),t[i].push(n.time)})},r=0,n=e.anchor_binding.length||0;r<n;r+=1)i(r);return t}(e);if(e.adList&&e.adList.item){c=e.adList.item.length||0;var C=function(){var r=e.adList.item[u],n=[];if(r.creative)for(g=r.creative.length,y=0;y<g;y+=1){m=r.creative[y],n[y]={id:m.id||"0",duration:m.duration||5e3,material:f(m.material)};var l={};m.reportUrlOther&&(l.reportUrlOther=m.reportUrlOther),m.reportUrlSDK&&(l.reportUrlSDK=m.reportUrlSDK),m.clickReportUrlOther&&(l.clickReportUrlOther=m.clickReportUrlOther),n[y].creport=l}else r.image&&(n[0]={id:"0",duration:r.duration,material:f(r.image)});n.forEach(function(l){for(var u=S[r.order_id+"_"+l.id],c=0,f=u?u.length:1;c<f;c++){var y=new a;if(y.order_id=r.order_id,y.adtype=r.type,y.display_code=r.display_code,y.duration=r.duration||0,y.no_click=r.no_click,y.inner_jump=r.inner_jump,y.privacy_url=r.privacy_url,y.privacy_type=r.privacy_type,y.dsp_name=r.dsp_name||"",y.expired_time=r.expired_time,y.link=r.link||"",y.reportTime=r.ReportTime||0,y.reportUrl=r.reportUrl||"",y.reportUrlOther=r.reportUrlOther,y.reportUrlSDK=r.reportUrlSDK,y.clickReportUrlOther=r.clickReportUrlOther,y.reportUrlView=r.reportUrlView,y.extParams=v(r.params),y.video_report_url=r.video_report_url||"",y.skip_title=r.skip_title||"",y.vid_type=r.vid_type,y.isVideoAdSoundOpen=r.video_ad_sound_open||!1,y.actionButton=r.action_button,y.destPageUrl=r.dest_page_url||"",y.qrcodeUrl=r.qrcode_pc,y.activeBannerInfo={brandName:r.brand_name,brandImg:r.brand_img,brandDesc:r.desc},y.clickJumpType=r.click_jump_type,y.effectUrl=r.effect_url||"",y.traceId=r.trace,y.anchorInfo=r.anchor_info,y.creative=n,y.setCurCreative(l.id),y.getCurCreative()&&y.getCurCreative().duration>0&&(y.duration=y.getCurCreative().duration),y.setCurMaterial(0),T=y.getCurMaterial()?y.getCurMaterial().url:"",y.canPlay=s.checkSuffix(T,y.isVideoAd?d.VIDEO:d.PIC),y.adtype==o.PSJ&&(E=y.getCurCreative()?y.getCurCreative().material:null)instanceof Array)for(_=E.length||0,A=0;A<_;A++)if(s.checkSuffix(E[A].url,d.PSJ)){y.setCurMaterial(A),y.canPlay=!0;break}if(x=p(y.adtype),y.isRichMedia&&x)for(w=x.length||0,b=0;b<w;b++)if(y.richData&&y.richData.plugins&&y.richData.plugins[x[b]]){y.richType=x[b],y.richRes=y.richData.plugins[x[b]];break}y.adLoc=e.adLoc,y.adGetv=e.adGetv,0==c&&(i[y.adtype]||(i[y.adtype]=[]),i[y.adtype].push(y)),t[h(y.order_id,l.id,u?u[c]:0)]=y}})};for(u=0;u<c;u+=1)C()}for(var I in"undefined"!=typeof e.anchor_binding&&function(){var i=void 0,a=void 0,s=void 0;for(c=e.anchor_binding.length||0,u=0;u<c;u++)a=e.anchor_binding[u],(i=new n).scene_id=a.scene_id,i.time=a.time||0,i.end_time=a.end_time||i.time,i.adunit_id=a.adunit_id||"",a.order_list&&a.order_list.length&&(i.orderList=[],a.order_list.forEach(function(e){if(s=t[h(e.order_id,e.cre_id,i.time)]){s.link=e.link,s.reportTime=e.report_time||0,s.reportUrl=e.report_url,"1"==e.report_range&&(s.reportRange=1,s.reportBegin=e.report_begin,s.reportEnd=e.report_end),s.is_time_target=+e.is_time_target,s.time_stamp=e.time_stamp,s.time_offset=+(e.time_offset||0),s.setCurCreative(e.cre_id);var r=s.getCurCreative();if(r&&r.duration>0&&(s.duration=r.duration),r&&r.creport){var n=r.creport;Object.keys(n).length&&["reportUrlOther","clickReportUrlOther","reportUrlView"].forEach(function(e){if(n[e]&&n[e].reportitem&&n[e].reportitem.length){n.dreport=n.dreport||{},n.dreport.reportitem=n.dreport.reportitem||[];var t=n[e].reportitem;t.forEach(function(e,i){"1"==e.report_range&&(n.dreport.reportitem.push(e),t.splice(i,1))})}})}e.anchor?s.anchor={pos_x:e.anchor.pos_x,pos_y:e.anchor.pos_y,pos_h:e.anchor.pos_h,pos_w:e.anchor.pos_w,begin:e.anchor.begin,end:e.anchor.end,interval:e.anchor.interval,ratio:e.anchor.ratio}:s.anchor=null,i.orderList.push(s)}})),(s=i.orderList?i.orderList[0]:null)&&(s.adtype==o.PSJ&&s.anchor&&s.anchor.end&&s.anchor.interval&&1!==s.is_time_target?i.isWholeScene=!0:i.isWholeScene=!1,s.adtype==o.BS&&l.push({order_id:s.order_id,scene_id:i.scene_id,link:s.link,params:{watch_buy:s.watchBuyData},play_mtime:.001*i.time})),r[u]=i}(),i)i[I]&&(i[I].adcost=e.adcost,i[I].errorcode=e.errorcode);return l.length>0&&l.sort(function(e,t){return e.play_mtime<=t.play_mtime?-1:1}),{adtypeMap:i,sceneInfos:r,fields:e.fields,watchbuys:l}}}},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(3),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene_id="",this.time=15e3,this.orderList=null,this.status=0,this.isWholeScene=!1}return r(e,[{key:"getStartSec",value:function(){var e=this.firstOrder;if(e&&e.adtype===n.PSJ&&e.anchor&&e.anchor.begin){var t=parseInt(e.anchor.begin,10)+e.time_offset;return this.getIsAbsoluteTime()?t:parseInt(.001*t,10)}var i=parseInt(.001*this.time,10);return e&&e.adtype===n.PHLS?i+parseInt(.001*e.time_offset,10):i}},{key:"getIsAbsoluteTime",value:function(){var e=this.firstOrder;return!!e&&1===e.is_time_target}},{key:"getEndSec",value:function(e){var t=this.firstOrder;return t?t.adtype==n.PSJ&&t.anchor&&this.getIsAbsoluteTime()?parseInt(this.getStartSec()+.001*t.duration,10):t.adtype==n.PSJ&&this.isWholeScene&&t.anchor?parseInt(parseInt(e)-.001*parseInt(t.anchor.end),10):t.adtype==n.VIN?.001*parseInt(this.end_time):parseInt(this.getStartSec()+.001*t.duration,10):-1}},{key:"isEmpty",get:function(){return!this.orderList||0===!this.orderList.length||this.orderList.every(function(e){return e.isEmpty})}},{key:"orderType",get:function(){var e=this.firstOrder;return e?e.adtype:""}},{key:"firstOrder",get:function(){return this.orderList?this.orderList[0]:null}}]),e}();e.exports=a},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(3),a=i(2),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.order_id="",this.adtype="",this.display_code="",this.duration="",this.no_click="N",this.inner_jump="N",this.privacy_url="",this.privacy_type="",this.dsp_name="",this.expired_time=0,this.creative=null,this.link="",this.reportTime=0,this.reportUrl="",this.reportUrlOther=null,this.reportUrlSDK=null,this.clickReportUrlOther=null,this.reportUrlView=null,this.anchor=null,this.skip_title="",this.vid_type=NaN,this.isVideoAdSoundOpen=!1,this.actionButton=null,this.destPageUrl="",this.qrcodeUrl="",this.activeBannerInfo=null,this.effectUrl="",this.traceId="",this.clickJumpType="",this.anchorInfo=null,this.adLoc=null,this.adGetv=null,this.orderIdx=0,this._cre_id="",this._curCreative=null,this._materialIdx=0,this._curMaterial=null,this.extParams=null,this.richType="",this.richRes=null,this.canPlay=!0,this.isTrueview=!1,this.forbidSkip=!1,this.isVip=!1,this.vid=""}return r(e,[{key:"getCurCreative",value:function(){return this._curCreative?this._curCreative:this.creative&&this.creative.length?this.creative[0]:null}},{key:"setCurCreative",value:function(e){if(this.creative){this._cre_id=e;for(var t=this.creative.length||0,i=void 0,r=0;r<t;r++)if((i=this.creative[r])&&i.id==this._cre_id){this._curCreative=i;break}}}},{key:"getCurMaterial",value:function(){return this._curMaterial}},{key:"setCurMaterial",value:function(e){if(this._materialIdx=e,this.getCurCreative()&&this.getCurCreative().material){var t=this.getCurCreative().material;t instanceof Array?this._curMaterial=t[this._materialIdx]||t[0]:this._curMaterial=t}}},{key:"onlyId",get:function(){return this.order_id+"_"+this._cre_id}},{key:"creId",get:function(){return this._cre_id}},{key:"oadId",get:function(){return this.adLoc?this.adLoc.aid:0}},{key:"adFlag",get:function(){return this.adLoc?this.adLoc.adFlag:0}},{key:"isEmpty",get:function(){return parseInt(this.order_id)<100||"Empty"==this.display_code}},{key:"richData",get:function(){return this.extParams?this.extParams.richdata:null}},{key:"watchBuyData",get:function(){return this.extParams?this.extParams.watch_buy:null}},{key:"isRichMedia",get:function(){return this.display_code&&"RichVideoFront"==this.display_code}},{key:"isVideoAd",get:function(){switch(this.adtype){case n.LD:case n.HT:case n.ZC:case n.KB:return!0}return!1}},{key:"isAutoPlay",get:function(){switch(this.adtype){case n.ZC:case n.HT:return!1}return!0}},{key:"canSkip",get:function(){return!this.adLoc||0==this.adLoc.adFlag}},{key:"userIsVip",get:function(){return this.adLoc&&1==this.adLoc.isvip}},{key:"rfid",get:function(){return this.adLoc?this.adLoc.rfid:""}},{key:"isTrueView",get:function(){return this.richData&&this.richData.plugins&&"N"!=this.richData.plugins.trueview}},{key:"plugType",get:function(){return this.richData&&this.richData.plugins?this.richData.plugins.plugType:""}},{key:"locId",get:function(){return this.reportUrl&&a.url2Obj(this.reportUrl).loc||""}},{key:"actionButtonText",get:function(){return this.actionButton&&this.actionButton.button_text||""}},{key:"isActiveAd",get:function(){return this.reportUrl&&this.reportUrl.indexOf("etype=__EXPOSURE_TYPE__")>-1}},{key:"isActiveScanAd",get:function(){return this.isActiveAd&&this.qrcodeUrl}},{key:"isActiveNormalAd",get:function(){return this.isActiveAd&&!this.qrcodeUrl}},{key:"closeAd",get:function(){return"Y"===(this.richData&&this.richData.plugins&&this.richData.plugins.close_ad)}},{key:"psjCloseIcon",get:function(){return this.anchorInfo&&this.anchorInfo.anchor&&this.anchorInfo.anchor[0]&&this.anchorInfo.anchor[0].close_icon||null}}]),e}();e.exports=o},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var a=i(36),o=i(37),s=i(1),d=i(0)("controller/adController"),l=i(43),u=i(58),c=i(64),h=i(66),f=i(3),p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adplayer=t,this.message=new l,this.adService=new a(this.adplayer,this.message),this.adReporter=new o,this.bindPlayerEvent(),this.listenReportEvents()}return r(e,[{key:"init",value:function(){if(!this.adplayer.videoAdUi){var e=this.adplayer.getConf();this.adplayer.$dom={},this.adplayer.videoAdUi=new u({adplayer:this.adplayer,conf:e,message:this.message})}this.adplayer.videoZtAdUi||(this.adplayer.videoZtAdUi=new c({adplayer:this.adplayer,message:this.message})),this.adplayer.video3dZtAdUi||(this.adplayer.video3dZtAdUi=new h({adplayer:this.adplayer,message:this.message}))}},{key:"initOrderReport",value:function(e){this.adReporter.init({adplayer:this.adplayer,playerData:this.adplayer.getConf().playerData,orderList:e.adList,adcost:e.adcost,message:this.message}),this.reportEvents={}}},{key:"bindPlayerEvent",value:function(){for(var e in s.TXPLAYER_EVENT)if(s.TXPLAYER_EVENT.hasOwnProperty(e)){var t=this;!function(e){t.message.on(s.TXPLAYER_EVENT[e],function(i){d.log("emitToPlayer: ",e);try{t.message.emit[s[e]]}catch(r){}t.adplayer.emitToPlayer(s.TXPLAYER_EVENT[e],i)})}(e)}}},{key:"getAd",value:function(e){return this.adService.getAd(e)}},{key:"preloadAd",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.adService.preloadAd(e,t),this.adReporter.reportAd(e)}},{key:"loadAd",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return this.adService.loadAd(e,t)}},{key:"playAd",value:function(){this.adService.playAd.apply(this.adService,arguments)}},{key:"pauseAd",value:function(){this.adService.pauseAd.apply(this.adService,arguments)}},{key:"stopAd",value:function(){this.adService.stopAd.apply(this.adService,arguments)}},{key:"stopAllAd",value:function(){this.adService.stopAllAd.apply(this.adService,arguments)}},{key:"readRfId",value:function(){var e="";if("undefined"!=typeof window.localStorage)try{e=window.localStorage["TxpCreativePlayer-rfid"]}catch(t){}return e||""}},{key:"muteAd",value:function(){this.adService.muteAd.apply(this.adService,arguments)}},{key:"unMuteAd",value:function(){this.adService.unMuteAd.apply(this.adService,arguments)}},{key:"setAdVolume",value:function(){this.adService.setAdVolume.apply(this.adService,arguments)}},{key:"resizeAd",value:function(){this.adService.resizeAd.apply(this.adService,arguments)}},{key:"adjustUI",value:function(){this.adService.adjustUI.apply(this.adService,arguments)}},{key:"hideAdBeforeResize",value:function(){this.adService.hideAdBeforeResize.apply(this.adService,arguments)}},{key:"setAdFullscreen",value:function(){this.adService.setAdFullscreen.apply(this.adService,arguments)}},{key:"setAdSmallWindow",value:function(e){this.adService.setAdSmallWindow.apply(this.adService,arguments)}},{key:"setAdPosition",value:function(e){this.adService.setAdPosition.apply(this.adService,arguments)}},{key:"reportAd",value:function(e){return this.adService.reportAd.apply(this.adService,arguments)}},{key:"seekStart",value:function(e){this.adService.seekStart.apply(this.adService,arguments)}},{key:"listenReportEvents",value:function(){var e,t=this,i=this;this.reportEvents=(n(e={},s.REPORT_EVENT.AD_DP3_CZC,function(e){d.log("report: ",s.REPORT_EVENT.AD_DP3_CZC,e);try{i.adReporter.reportCzcDp3(e)}catch(t){}}),n(e,s.REPORT_EVENT.AD_MIND_CZC,function(e){d.log("report: ",s.REPORT_EVENT.AD_MIND_CZC,e);try{i.adReporter.reportAdMind(e)}catch(t){}}),n(e,s.REPORT_EVENT.AD_DURING,function(e){d.log("report: ",s.REPORT_EVENT.AD_DURING,e);try{i.adReporter.reportAdData(e,!e.isOther)}catch(t){}}),n(e,s.REPORT_EVENT.AD_POINT_VIEW,function(e){d.log("report: ",s.REPORT_EVENT.AD_POINT_VIEW,e);try{i.adReporter.reportAdData(e,!0)}catch(t){}}),n(e,s.REPORT_EVENT.AD_3PARTY_VIEW,function(e){d.log("report: ",s.REPORT_EVENT.AD_3PARTY_VIEW,e);try{i.adReporter.reportAdData(e)}catch(t){}}),n(e,s.REPORT_EVENT.AD_SCREEN_SHOT,function(e){d.log("report: ",s.REPORT_EVENT.AD_SCREEN_SHOT,e);try{i.adReporter.reportAdScreenShot(e)}catch(t){}}),n(e,s.REPORT_EVENT.AD_GET_INFO_ERROR,function(e){d.log("report: ",s.REPORT_EVENT.AD_GET_INFO_ERROR,e);try{i.adReporter.reportDp3Error(e)}catch(t){}}),n(e,s.REPORT_EVENT.AD_VIEW,function(e){d.log("report: ",s.REPORT_EVENT.AD_VIEW,e.adInfo);try{i.adReporter.reportAd(e)}catch(t){}}),n(e,s.REPORT_EVENT.AD_VIDEO_PLAY_STATUS,function(e){var t=e.playType,r=t===undefined?0:t,n=e.timeOffset,a=n===undefined?0:n,o=e.timeStamp,s=o===undefined?Date.now():o,d=e.failReason,l=d===undefined?0:d,u=e.reportUrl,c=u===undefined?"":u;try{i.adReporter.reportAdVideoPlayStatus({playType:r,timeOffset:a,timeStamp:s,failReason:l,reportUrl:c})}catch(h){}}),n(e,s.REPORT_EVENT.AD_GET_INFO,function(e){var t={adtype:e.adtype||"",errMsg:e.errMsg||"",adInfo:e.adInfo,adcost:e.adcost||"",errorcode:e.errorCode||""};d.log("ad_get_info-report: ",s.REPORT_EVENT.AD_GET_INFO,e);try{i.adReporter.reportDp3(1,t),i.adReporter.reportVideoDp3(1,t)}catch(r){}}),n(e,s.REPORT_EVENT.NEW_DP3,function(e){i.adReporter.reportNewDp3(e,e.adInfo)}),n(e,s.REPORT_EVENT.AD_END,function(e){var t={adclose:e.adclose||"",closetime:e.closetime||"",adfbt:e.adfbt||"",adtt:e.adtt||"",firstview:e.firstview||"",videott:e.videott||"",videopt:e.videopt||"",errorcode:e.errorcode||"",adInfo:e.adInfo};if(d.log("report: ",s.REPORT_EVENT.AD_END,e),e.adInfo.list&&e.adInfo.list.length>0)for(var r=0,n=e.adInfo.list.length;r<n;r++)if(e.adInfo.list[r]&&e.adInfo.list[r].delayReportTimeoutIds)for(var a in e.adInfo.list[r].delayReportTimeoutIds)d.log("\u6e05\u9664\u5ef6\u65f6\u4e0a\u62a5, order_id/timeid: ",e.adInfo.list[r].order_id,a),clearTimeout(a);try{var o=e.adInfo;!o||o.adtype!=f.LD&&o.adtype!=f.KB&&o.adtype!=f.ZC&&o.adtype!=f.HT||(i.adReporter.reportDp3(2,t),i.adReporter.reportVideoDp3(2,t))}catch(l){}}),n(e,s.REPORT_EVENT.AD_LOAD_COMPLETE,function(e){var t={errorcode:e.errorcode,adload:e.adload||"",tpindex:e.tpindex||"",oid:e.oid||e.adInfo.order_id||"",adInfo:e.adInfo};try{i.adReporter.reportDp3(3,t),i.adReporter.reportVideoDp3(3,t)}catch(r){}d.log("report: ",s.REPORT_EVENT.AD_LOAD_COMPLETE,e)}),n(e,s.REPORT_EVENT.AD_CLICK,function(e){var t={adclick:e.adclick,clicktime:e.clicktime||"",adInfo:e.adInfo};try{var r=e.adInfo;!r||r.adtype!=f.LD&&r.adtype!=f.KB&&r.adtype!=f.ZC&&r.adtype!=f.HT||(i.adReporter.reportDp3(4,t),i.adReporter.reportVideoDp3(4,t)),i.adReporter.reportOtherAdClick(e)}catch(n){}d.log("report: ",s.REPORT_EVENT.AD_CLICK,e)}),n(e,s.REPORT_EVENT.AD_EFFECT_CLICK,function(e){i.adReporter.reportEffect(e),d.log("report: ",s.REPORT_EVENT.AD_EFFECT_CLICK,e)}),e),Object.keys(this.reportEvents).forEach(function(e){var i=t.reportEvents[e];t.message.on(e,i)})}}]),e}();e.exports=p},function(e,t,i){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var a=i(3),o=i(4),s=i(1),d=i(0)("service/adService"),l=i(8).Promise;e.exports=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adplayer=t,this.message=i,this.adplayer.adMap=this.adMap={};var r=this;this.message.on(s.AD_SHOW,function(e){e&&r.isNeedCheckType(e.adtype)&&(d.log("ad show, adtype="+e.adtype),r.checkSceneShow())}),this.message.on(s.AD_HIDE,function(e){e&&!e.isWholeScene&&r.isNeedCheckType(e.adtype)&&(d.log("ad hide, adtype="+e.adtype),r.checkSceneShow())}),this.message.on(s.AD_STOP,function(e){if(e){if(e.removeType&&e.adtype)return delete r.adMap[e.adtype],void d.log("ad stop and removeTypeFromAdMap, adtype="+e.adtype+", isWholeScene="+e.isWholeScene);var t=void 0,i=void 0,n=void 0;if(e.adinfo)for(var a in n=r.getAd(e.adinfo),r.adMap)if((t=r.adMap[a])&&(i=t.indexOf(n),!/PPB|PDF/gi.test(a)&&i>-1)){t.splice(i,1,undefined),d.log("ad stop and removeFromAdMap, adtype="+e.adinfo.adtype+", isWholeScene="+e.isWholeScene);break}}})}return n(e,[{key:"checkSceneShow",value:function(){var e=void 0,t=!1,i=[];for(var r in this.adMap)(e=this.adMap[r])&&e.length&&e.forEach(function(e){e&&(e.isWholeScene?i.push(e):e.isShow&&e.info&&"PPB"!==e.info.adtype&&"PDF"!==e.info.adtype&&"CZC"!==e.info.adtype&&(t=!0))});i.forEach(function(e){t?e.isShow&&(e.hide(!0),d.log("and ad hide, adtype="+e.adtype+", isWholeScene="+e.isWholeScene)):e.isShow||(e.show(!0),d.log("and ad show, adtype="+e.adtype+", isWholeScene="+e.isWholeScene))})}},{key:"isNeedCheckType",value:function(e){switch(e){case a.ZT:case a.ZI:case a.TP:case a.PSJ:case a.BS:case a.PHLS:return!0}return!1}},{key:"loadAd",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!e)return l.resolve();var i=void 0;if(e[0]&&e[0].adtype===a.PSJ){if(i=this.getAd(a.PSJ),1===e[0].is_time_target&&i&&!i.isWholeScene)return l.reject();t&&!t.isWholeScene&&i&&i.scene&&i.scene.getIsAbsoluteTime()&&i.stop()}else(i=this.getAd(e))&&i.stop();var r=this._createAd(e,this.adplayer.$dom,t);return r?(r.load(),l.resolve()):l.reject()}},{key:"_reportAdGetInfo",value:function(e){e.adtype!=a.CZC&&e.adtype!=a.PHLS&&e.adtype!=a.VIN&&this.message.emit(s.REPORT_EVENT.AD_GET_INFO,{errMsg:e.list.errMsg||"",adInfo:e,adcost:e.list.adcost,errorCode:e.list.errorcode,adtype:e.adtype,duration:this.adplayer.getOrderDuration(e.list),isEmpty:this.adplayer.isOrderEmpty(e.list)})}},{key:"_createAd",value:function(e,t){var i,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!(e=this._getParam(e)).adtype||!e.list)return null;var n=e.adtype,d={infos:e.list,dom:t,scene:r,dataset:this.adplayer.dataset,message:this.message,adplayer:this.adplayer};switch(this._reportAdGetInfo(e),n){case a.LD:this.message.emit(s.TXPLAYER_EVENT.AD_GET_INFO,{adtype:n,duration:this.adplayer.getOrderDuration(e.list),isEmpty:this.adplayer.isOrderEmpty(e.list)}),i=TxpCreativePlayer.adClass.make("LoadingAd",d);break;case a.HT:i=TxpCreativePlayer.adClass.make("EndingAd",d);break;case a.ZC:i=TxpCreativePlayer.adClass.make("ZcAd",d);break;case a.ZT:i=this.createZtAd(d);break;case a.ZI:i=TxpCreativePlayer.adClass.make("IvbAd",d);break;case a.BS:i=TxpCreativePlayer.adClass.make("BuyAd",d);break;case a.PSJ:i=TxpCreativePlayer.adClass.make("FlowAd",d);break;case a.PDF:case a.PPB:case a.PVL:d.dom=this.adplayer.getConf().playerDom[n.toLowerCase()+"AdLayer"],i=TxpCreativePlayer.adClass.make("EmbedAd",d);break;case a.CZC:i=TxpCreativePlayer.adClass.make("CzcAd",d);break;case a.PHLS:i=TxpCreativePlayer.adClass.make("PHLSAd",d);break;case a.VIN:i=TxpCreativePlayer.adClass.make("VinAd",d);break;default:i=null}if(i){if(i.state!==o.END){this.adMap[n]||(this.adMap[n]=[]);var l=this.adMap[n];if(l.length>0)if(e.adtype==a.LD||e.adtype==a.ZC||e.adtype==a.HT)for(var u=0;u<l.length;u++){try{l[u]&&l[u].stop()}catch(c){}l.splice(u,1),u--}l.push(i)}return i}}},{key:"createZtAd",value:function(e){var t=e&&e.infos&&e.infos[0]&&e.infos[0].creative&&e.infos[0].creative[0]&&e.infos[0].creative[0]&&e.infos[0].creative[0].material&&e.infos[0].creative[0].material[1]&&e.infos[0].creative[0].material[1].vid;return t&&"PauseBroken"===e.infos[0].display_code?TxpCreativePlayer.adClass.make("Video3dZtAd",e):t?TxpCreativePlayer.adClass.make("VideoZtAd",e):TxpCreativePlayer.adClass.make("ZtAd",e)}},{key:"_getParam",value:function(e){if(!e)return e;var t=void 0;return"string"==typeof e?{adtype:t=e,list:this.adplayer.getOrdersByType(t)}:e instanceof Array?{adtype:t=e.adtype||(e[0]?e[0].adtype:""),list:e}:"object"===(void 0===e?"undefined":r(e))?{adtype:t=e.adtype||"",list:[e]}:e}},{key:"getAd",value:function(e){if(!e)return null;var t=void 0,i=void 0,n=void 0,a=void 0;for(var o in this.adMap)for(a=(t=this.adMap[o])?t.length:0,n=0;n<a;n++)if(i=t[n])if("string"==typeof e){if(i.adtype==e){if(i._isForceHide)continue;return i}}else if(e instanceof Array){if(i.infos&&i.infos==e)return i}else if("object"===(void 0===e?"undefined":r(e))&&i.info&&(i.info==e||i.info.onlyId==e.onlyId&&i.info&&i.info.adtype===e.adtype))return i;return null}},{key:"_broadcastToAllAd",value:function(){var e=this;if(this.adMap){var t=Array.prototype.slice.call(arguments),i=t[0];t.shift();var r=function(r){e.adMap[r]&&e.adMap[r].forEach(function(e){try{e&&"function"==typeof e[i]&&e[i].apply(e,t)}catch(n){d.log("\u5e7f\u544a\u7c7b\u578b["+r+"]\u8c03\u7528["+i+"]\u62a5\u9519\uff1a",n)}})};for(var n in this.adMap){r(n)}}}},{key:"playAd",value:function(e){var t=this;d.log("playAd",e);var i=this.getAd(e);if(i&&i.canPlay)d.log("play"),i.play();else if(i&&i._state===o.WAIT_FOR_STOP)d.log("stop"),i.stop();else if(!i)if(e===a.HT){var r=function(){t.endingAdTimeoutHandler=setTimeout(function(){var i=t.getAd(e);i&&i.canPlay&&i._state>=o.INIT&&i._state<=o.LOAD_READY?i.play():i&&i.stop&&i._state<=o.INIT?i.stop(!0):i||t.message.emit(s.TXPLAYER_EVENT.AD_STOP,{adtype:a.HT})},1e3)};t.adplayer.hasLoadEndingAd?(d.log("\u5df2\u7ecf\u8bf7\u6c42\u8fc7\u4e86..."),r()):setTimeout(function(){t.adplayer.hasLoadEndingAd?r():t.adplayer.hasLoadEndingAd=!0},500)}else this.message.emit(s.TXPLAYER_EVENT.AD_STOP,{adtype:e})}},{key:"stopAd",value:function(e){var t=this.getAd(e);t&&t.stop()}},{key:"pauseAd",value:function(e){var t=this.getAd(e);t&&t.pause()}},{key:"reportAd",value:function(e,t){var i,r=this;return"string"==typeof e&&(i=this.getAd(e)),i?("[object Array]"!==Object.prototype.toString.call(i)&&(i=[i]),i.forEach(function(e){e.info&&t.view&&r.message.emit(s.REPORT_EVENT.AD_VIEW,{adInfo:e.info})}),!0):!!t.info&&(this.message.emit(s.REPORT_EVENT.AD_GET_INFO,t.data),!0)}},{key:"stopAllAd",value:function(){clearTimeout(this.endingAdTimeoutHandler),this.adplayer.hasLoadEndingAd=!1,this._broadcastToAllAd("stop",!0);var e=this.adplayer.controllers;e&&e.orderController&&e.orderController.reset(),this.adplayer.adMap=this.adMap={}}},{key:"muteAd",value:function(){this._broadcastToAllAd("mute")}},{key:"unMuteAd",value:function(){this._broadcastToAllAd("unMute")}},{key:"setAdVolume",value:function(e){this._broadcastToAllAd("setVolume",e)}},{key:"resizeAd",value:function(e){this._broadcastToAllAd("resize",e)}},{key:"adjustUI",value:function(e){this._broadcastToAllAd("adjustUI",e)}},{key:"hideAdBeforeResize",value:function(){this._broadcastToAllAd("hideAdBeforeResize")}},{key:"setAdFullscreen",value:function(e){this._broadcastToAllAd("setFullScreen",e)}},{key:"setAdSmallWindow",value:function(e){if(e){var t=this.adplayer.dataset;t.playerWidth=e.width,t.playerHeight=e.height}this._broadcastToAllAd("setSmallWindow",e)}},{key:"setAdPosition",value:function(e){this._broadcastToAllAd("setPosition",e)}},{key:"seekStart",value:function(e){this._broadcastToAllAd("seekStart",e)}}]),e}()},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(9),a=i(38),o=i(39),s=i(41),d=i(42),l=i(17),u=i(0)("modules/adReporter"),c=i(2);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adCommonReporter=null,this.adReportDp3=null,this.screenShotter=null,this.commonCfg={},this.screenShotCfg={},this.dp3Cfg={},this.mindCfg={}}return r(e,[{key:"init",value:function(e){if(e&&e.playerData){var t=this.playerData=e.playerData;this.adplayer=e.adplayer,this.commonCfg={from:t.playerFrom,pf:t.playerPf,v:t.playerVersion,dura:t.playerDuration,coverid:t.playerCid,pf_ex:t.playerPfEx,chid:t.playerChid||0,tpid:t.playerTpid||"",vptag:t.playerVptag,appversion:n},this.adCommonReporter||(this.adCommonReporter=new a),this.adCommonReporter.init(this.commonCfg,e.message),this.screenShotCfg={flowid:t.playerFlowid,guid:t.playerGuid,platform:t.playerPlatform,vid:t.playerVid},this.screenShotter||(this.screenShotter=new o),this.screenShotter.init(this.screenShotCfg),this.dp3Cfg={appuser:function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!=t){t=t+e.length+1;var i=document.cookie.indexOf(";",t);return-1==i&&(i=document.cookie.length),decodeURIComponent(document.cookie.substring(t,i))}}return""}("appuser"),flowid:t.playerFlowid,guid:t.playerGuid,pf:t.playerPf,pfEx:t.playerPfEx,chid:t.playerChid||0,mvid:t.playerVid,videoDuration:t.playerDuration,coverid:t.playerCid,pversion:t.playerVersion,live:0,version:n,orderList:e.orderList||{},adcost:e.adcost||""},this.adReportDp3||(this.adReportDp3=new s),this.adReportDp3.init(this.dp3Cfg),this.mindReporter||(this.mindReporter=new d),this.mindReporter.init(this.mindCfg)}}},{key:"reportAd",value:function(e){this.adCommonReporter.reportAd(e)}},{key:"reportAdVideoPlayStatus",value:function(e){this.adCommonReporter.reportAdVideoPlayStatus(e)}},{key:"reportAdData",value:function(e,t){this.adCommonReporter.reportAdData(e,t)}},{key:"reportOtherAdClick",value:function(e){this.adCommonReporter.reportOtherAdClick(e)}},{key:"reportEffect",value:function(e){this.adCommonReporter.reportEffect(e)}},{key:"reportDp3",value:function(e,t){this.adReportDp3.reportStep(e,t)}},{key:"reportNewDp3",value:function(e,t){var i=t&&t.extParams&&t.extParams.richdata?t.extParams.richdata.plugins:{},r=this.adplayer.getConf(),n={bid:"10021013",requestid:"",pf:r.playerData.playerPf,chid:r.playerData.playerChid||"",ts:+new Date,configversion:"",data:"",adtype:e.adtype,flow_id:r.playerData.playerFlowid,live:0,offline:0,reportkey:"",preload:0,page:"",style:"",playmode:"",coverid:r.playerData.coverid||"",vid:r.playerData.playerVid,previd:"",channelid:"",tpid:r.playerData.playerTpid,videoDuration:r.playerData.playerDuration,body:[{errorcode:e.errorcode||"",starttime:e.starttime||0,fullscreen:0,muted:0,userclose:i&&"Y"==i.close_ad?1:0,oid:t?t.order_id:"",ad_vid:"",cdnUrl:"",dfn:"",lpLoadDuration:"",lpStayDuration:"",playOidDuration:"",errorName:"",errorMsg:"",displayid:"",isEmpty:"",failedUrl:"",clickX:"",clickY:"",soid:"",orderAdType:"",playVidTime:"",anchorid:e.anchorid||"",adtype:e.adtype,allAdDuration:"",adunit_id:e.adunit_id||""}]};u.log("("+e.adtype+") reportNewDp3:",n);try{var a=new XMLHttpRequest;a.open("POST","//dp3.qq.com/stdlog",!0),a.responseType="text",a.timeout="8000",a.setRequestHeader("Content-type","text/plain"),a.send(JSON.stringify(n))}catch(o){console.log(o)}}},{key:"reportVideoDp3",value:function(e,t){this.adReportDp3.reportStepForVidoe(e,t)}},{key:"reportDp3Error",value:function(e){var t=e.playerData,i=e.adcost,r=e.errorCode,a=e.adtype.split("|"),o={appuser:c.cookie.get("appuser")||"",channel:c.getVideoType(),qq:c.cookie.get("luin")||c.cookie.get("uin")||"",guid:t.playerGuid||"",pf:t.playerPf||"",pfEx:t.playerPfEx||"",chid:t.playerChid||0,mvid:t.playerVid||"",videoDuration:t.playerDuration||0,coverid:t.playerCid||"",pversion:t.playerVersion||"",live:0,version:n,ua:c.getUA(navigator.userAgent),adcost:i||"",errorcode:r};a.forEach(function(t){o.adtype=t,function(t){var i={bid:"10091006",step:1};for(var n in 0!=+r&&(i.errMsg=e.errMsg||""),t)i[n]=t[n];try{var a=new XMLHttpRequest;a.open("POST","//dp3.qq.com/stdlog"),a.responseType="text",a.timeout="8000",a.setRequestHeader("Content-type","text/plain"),a.send(JSON.stringify(i))}catch(o){u.log("reportErrorByPost:",o)}}(o),function(e,t,i){var r=c.appendParamsToUrl(e,t);r+="&step=1",i&&(r+="&_dc="+Math.random());var n=new Image;n.onload=n.onerror=function(){n=null},n.src=r}("//btrace.video.qq.com/kvcollect?BossId=5818&Pwd=1658255276",o,!0)})}},{key:"reportAdScreenShot",value:function(e){this.screenShotter.shot(e)}},{key:"resetAdScreenShot",value:function(){this.screenShotter.reset()}},{key:"reportAdMind",value:function(e){this.mindReporter.reportMind(e)}},{key:"reportCzcDp3",value:function(e){var t,i,r,n,a=this.playerData,o={appuser:c.cookie.get("appuser")||"",qq:c.cookie.get("luin")||c.cookie.get("uin")||"",flowid:a.playerFlowid,guid:a.playerGuid||"",pf:a.playerPf||"",chid:a.playerChid||0,vid:a.playerVid||"",coverid:a.playerCid||"",ua:c.getUA(navigator.userAgent)};o=l({},o,e),t="//dp3.qq.com/stdlog?bid=10091007",i=o,r=c.appendParamsToUrl(t,i),(n=new Image).onload=n.onerror=function(){n=null},n.src=r}}]),e}()},function(e,t,i){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var a=i(17),o=i(0)("modules/adcommonreporter"),s=i(1),d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.delayReportArr=null,this.list=[],this.timer=null,this.imgObj=null}return n(e,[{key:"init",value:function(e,t){this.config=e,this.message=t}},{key:"reportAdVideoPlayStatus",value:function(e){var t=e.playType,i=t===undefined?0:t,r=e.timeOffset,n=r===undefined?0:r,a=e.timeStamp,o=a===undefined?Date.now():a,s=e.failReason,d=s===undefined?0:s,l=e.reportUrl,u=(l===undefined?"":l).replace("__PLAY_TYPE__",i).replace("__TIME_OFFSET__",n).replace("__TIMESTAMP__",o).replace("__FAIL_REASON__",d);this.reportData({url:u},"\u64ad\u653e\u7c7b\u578b\u5e7f\u544a\u4e0a\u62a5(video_report_url):"+u)}},{key:"reportAd",value:function(e){var t=this,i=e.adInfo,n=e.scene;if(Array.isArray(i)&&(i=i[0]),i&&"object"==(void 0===i?"undefined":r(i))){var o="PSJ"==i.adtype&&!n.isWholeScene;if(i.reportUrl&&("CZC"!=i.adtype||"CZC"==i.adtype&&"1"!=i.reportRange)){var s={url:document.URL};s=a(s,l(this.config,i)),TxpCreativePlayer.fromPcClient&&(s.vptag=this.config.vptag||"");var d=i.reportUrl,h=c(d);s=a(s,h);var f=u(d.split("?")[0],s,!0);this.reportData({adinfo:i,time:o?0:parseInt(i.reportTime)||0,url:f},i.adtype+"\u5185\u90e8\u66dd\u5149\u4e0a\u62a5(reportUrl)")}var p=["reportUrlOther"];if(p.forEach(function(e){i[e]&&Array.isArray(i[e].reportitem)&&i[e].reportitem.length&&i[e].reportitem.forEach(function(e,r){e&&e.url&&t.reportData({adinfo:i,time:o?0:parseInt(e.reporttime)||0,url:e.url,isOther:!0},i.adtype+"\u7b2c\u4e09\u65b9\u66dd\u5149\u4e0a\u62a5(reportUrlOther)")})}),"CZC"!=i.adtype&&p.push("dreport"),i._curCreative&&i._curCreative.creport){var v=i._curCreative.creport;p.forEach(function(e){v[e]&&Array.isArray(v[e].reportitem)&&v[e].reportitem.length&&v[e].reportitem.forEach(function(e,r){e&&e.url&&t.reportData({adinfo:i,time:o?0:parseInt(e.reporttime)||0,url:e.url,isOther:!0},i.adtype+"\u521b\u610f\u7ea7\u522b\u7684\u7b2c\u4e09\u65b9\u4e0a\u62a5(creative.creport)")})})}}}},{key:"reportOtherAdClick",value:function(e){var t=e.adInfo,i=t._curCreative&&t._curCreative.creport;if(Array.isArray(t)&&(t=t[0]),t&&"object"==(void 0===t?"undefined":r(t))){if(t.clickReportUrlOther&&t.clickReportUrlOther.reportitem)for(var n=t.clickReportUrlOther.reportitem,a=0;a<n.length;a++){"2"!=(s=n[a]).reporttype&&this.requestReportUrl(s.url)}if(i&&i.clickReportUrlOther&&i.clickReportUrlOther.reportitem){var o=i.clickReportUrlOther.reportitem;for(a=0;a<o.length;a++){var s;"2"!=(s=o[a]).reporttype&&this.requestReportUrl(s.url)}}}}},{key:"reportEffect",value:function(e){this.reportData({url:e.effectUrl},e.adtype+"\u70b9\u51fb\u6548\u679c\u4e0a\u62a5")}},{key:"reportAdData",value:function(e,t){if(t){var i={url:document.URL};i=a(i,l(this.config,e.adinfo||{}));var r=u(e.url,i,!0),n=r.split("?")[0],o=c(r);e.adinfo.reportTime&&0!=e.adinfo.reportTime&&(o.t=e.adinfo.reportTime),e.url=u(n,o,!1)}this.reportData(e)}},{key:"reportData",value:function(e,t){e&&(o.log("("+t+") report:","("+e.time+")",e.url),e.time>0?this.delayReport(e.url,e.time-100,e.adinfo,e.isOther):this.requestReportUrl(e.url))}},{key:"setReportNull",value:function(e){e.order_id="1",e.reportUrl=e.reportUrl.replace(/(livemsg\?o\=)(\d+)(\&)/,"$190$3"),e.reportUrlOther=null,e.reportUrlSDK=null}},{key:"delayReport",value:function(e,t,i,r){var n=this,a=setTimeout(function(){if(clearTimeout(a),i.delayReportTimeoutIds&&i.delayReportTimeoutIds[a]&&delete i.delayReportTimeoutIds[a],o.log("\u5ef6\u65f6\u4e0a\u62a5\u5b8c\u6210, order_id/time/url: ",i.order_id,t,e),i){var s=t+100,d=i.realViewTime;if(r){if(d&&d<s)return;n.requestReportUrl(e)}else{var l=e.split("?")[0],h=c(e);i.reportTime&&0!=i.reportTime&&(h.t=i.reportTime),i.isTrueView&&d&&(h.t=d);var f=u(l,h,!1);n.requestReportUrl(f)}}else n.requestReportUrl(e)},t);i.delayReportTimeoutIds||(i.delayReportTimeoutIds={}),i.delayReportTimeoutIds[a]=1,o.log("\u5ef6\u65f6\u4e0a\u62a5, order_id/timeid/time/: ",i.order_id,a,t)}},{key:"requestReportUrl",value:function(e){var t=this,i=e;if(-1!==i.indexOf("etype=__EXPOSURE_TYPE__")){var r=i.replace("etype=__EXPOSURE_TYPE__","etype=1001");this.list.push(r),i=i.replace("etype=__EXPOSURE_TYPE__","etype=1000")}-1===i.indexOf("uniquetimestamp")&&(i=u(i,{uniquetimestamp:Date.now()})),this.timer?this.list.push(i):(this.timer=setTimeout(function(){t.timeoutHandler()},1e3),TxpCreativePlayer.fromPcClient?this.message.emit(s.TXPLAYER_EVENT.AD_REPORT,{data:{reportUrl:i}}):(this.imgObj=document.createElement("img"),this.imgObj.onerror=this.timeoutHandler.bind(this),this.imgObj.src=i))}},{key:"timeoutHandler",value:function(){if(0===this.list.length)return this.imgObj=null,void(this.timer=null);clearTimeout(this.timer),this.timer=null,this.requestReportUrl(this.list.shift())}}]),e}();function l(e,t){var i={oadid:t.oadId||"",vptag:function(){for(var e=document.location.toString().toLowerCase(),t="",i=["ptag","adtag","pgv_ref"],r=0,n=i.length;r<n&&!(t=h(i[r],e));r++);if(!t)try{t=sessionStorage.getItem("ptag")}catch(o){}if(!t){var a=function(e){if(void 0===e||null==e||""==e)return"";var t=document.createElement("a");return t.href=e,t.hostname}(document.referrer);a&&-1===["v.qq.com","film.qq.com","m.v.qq.com"].indexOf(a)&&(t=a.replace(/\./g,"_"))}t||(t=function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!=t){t=t+e.length+1;var i=document.cookie.indexOf(";",t);return-1==i&&(i=document.cookie.length),decodeURIComponent(document.cookie.substring(t,i))}}return""}("ptag"));return t}()||"",url:location.href,lcount:t.orderIdx||1,t:0};return"Empty"==t.display_code&&(i.chid=e.chid),i=a(i,e)}function u(e,t,i){return"string"==typeof e&&t&&(e+=(-1==e.indexOf("?")?"?":"&")+function(e,t){var i=[];for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];i.push(r+"="+(t?encodeURIComponent(n):n))}return i.join("&")}(t,i)),e}function c(e){var t=e.indexOf("?"),i={};return e.substring(t+1).split("&").forEach(function(e){var t=e.split("=");t.length>=2&&(i[t.shift()]=t.join("="))}),i}function h(e,t){t=t||document.location.toString();var i,r=new RegExp("(^|&|\\\\?)"+e+"=([^&]*)(&|$|#)");return(i=t.match(r))?i[2]:""}e.exports=d},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n={EMPTY:"",AD_ERROR:"1",CORS_ERROR:"2",NOT_SUPPORT:"3",SCRIPT_ERROR:"4"},a=i(40),o=i(2).getUA(window.navigator.userAgent),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hasReport=!1,this.imageExt="png",this.imageQuality=1,this.width=160,this.height=90,this.reportUrl=location.protocol+"//adss.video.qq.com/report",this.worker=null,this.canvas=null,this.ctx=null,this.errcode=n.EMPTY,this.initWorker(),this.initCanvas(),this.addEventListener()}return r(e,[{key:"init",value:function(e){this.cfg=e}},{key:"initWorker",value:function(e){try{var t=window.URL||window.webkitURL||window.mozURL||window.msURL,i=new Blob(["self.onmessage = function(res) {var data = res.data;var imageData = data.imageData;var width = data.width;var height = data.height;var chunkLength = width * height;for (var i = 0; i < chunkLength * 4; i = i + 4) {var gray = parseInt((imageData.data[i] + imageData.data[i + 1] + imageData.data[i + 2]) / 3);imageData.data[i] = imageData.data[i + 1] = imageData.data[i + 2] = gray;}try { postMessage(imageData); } catch(e) {console.log(e)}}"],{type:"application/javascript"}),r=t.createObjectURL(i);this.worker=new Worker(r)}catch(a){this.worker=null,this.errcode=n.NOT_SUPPORT}}},{key:"initCanvas",value:function(){this.canvas=document.createElement("canvas"),this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this.canvas.style.cssText="width:"+this.width+"px;height:"+this.height+"px;",this.ctx=this.canvas.getContext("2d")}},{key:"addEventListener",value:function(){var e=this;this.worker&&this.canvas&&this.ctx&&(this.worker.onmessage=function(t){e.ctx.putImageData(t.data,0,0),e.imageUrl=e.canvas.toDataURL("image/"+e.imageExt,e.imageQuality),e.reportData()},this.worker.onerror=function(t){e.errcode=n.SCRIPT_ERROR,e.reportData()})}},{key:"shot",value:function(e){if("safari"!==o&&!this.hasReport){var t=!1;if(e=e||{},this.ptime=e.time||"",this.orderid=e.oid||"",this.aid=e.vid||"",this.idx=e.index,this.errcode=n.EMPTY,(!e.video&&!e.empty||e.video&&0===e.time&&e.video.error&&e.video.error.code)&&(this.errcode=n.AD_ERROR),e.video&&this.worker&&this.ctx)try{this.video=e.video,this.ctx.drawImage(this.video,0,0,this.width,this.height);var i=this.ctx.getImageData(0,0,this.width,this.height);t=!0,this.worker.postMessage({imageData:i,width:this.width,height:this.height})}catch(r){this.errcode=n.CORS_ERROR,t=!1}t||this.reportData()}}},{key:"reportData",value:function(){if(!this.hasReport){this.hasReport=!0;var e=this,t=+new Date,i=a("adsafe"+t+this.cfg.flowid+this.cfg.guid+this.cfg.platform+this.cfg.vid),r={ftime:parseInt(t/1e3),flow_id:this.cfg.flowid,guid:this.cfg.guid,platform:this.cfg.platform,vid:this.cfg.vid,aidtype:1,aid:this.aid,idx:this.idx,ptime:this.ptime,orderid:this.orderid,admedia:"",pdata:"",crc:i,errcode:this.errcode};this.imageUrl&&(r.pdata=this.imageUrl.replace(/^data\:image\/png\;base64\,/,""));try{var n=new XMLHttpRequest;n.open("POST",this.reportUrl),n.addEventListener("error",function(){e.reportCgiError(n.status)}),n.send(JSON.stringify(r))}catch(o){}this.reset()}}},{key:"reset",value:function(){this.hasReport=!1,this.imageUrl="",this.aid="",this.idx="",this.ptime="",this.orderid="",this.errcode=n.EMPTY,this.ctx.clearRect(0,0,this.width,this.height)}},{key:"reportCgiError",value:function(){}}]),e}();e.exports=s},function(e,t,i){"use strict";var r;"function"==typeof Symbol&&Symbol.iterator;!function(n){function a(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function o(e,t,i,r,n,o){return a(function(e,t){return e<<t|e>>>32-t}(a(a(t,e),a(r,o)),n),i)}function s(e,t,i,r,n,a,s){return o(t&i|~t&r,e,t,n,a,s)}function d(e,t,i,r,n,a,s){return o(t&r|i&~r,e,t,n,a,s)}function l(e,t,i,r,n,a,s){return o(t^i^r,e,t,n,a,s)}function u(e,t,i,r,n,a,s){return o(i^(t|~r),e,t,n,a,s)}function c(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var i,r,n,o,c,h=1732584193,f=-271733879,p=-1732584194,v=271733878;for(i=0;i<e.length;i+=16)r=h,n=f,o=p,c=v,f=u(f=u(f=u(f=u(f=l(f=l(f=l(f=l(f=d(f=d(f=d(f=d(f=s(f=s(f=s(f=s(f,p=s(p,v=s(v,h=s(h,f,p,v,e[i],7,-680876936),f,p,e[i+1],12,-389564586),h,f,e[i+2],17,606105819),v,h,e[i+3],22,-1044525330),p=s(p,v=s(v,h=s(h,f,p,v,e[i+4],7,-176418897),f,p,e[i+5],12,1200080426),h,f,e[i+6],17,-1473231341),v,h,e[i+7],22,-45705983),p=s(p,v=s(v,h=s(h,f,p,v,e[i+8],7,1770035416),f,p,e[i+9],12,-1958414417),h,f,e[i+10],17,-42063),v,h,e[i+11],22,-1990404162),p=s(p,v=s(v,h=s(h,f,p,v,e[i+12],7,1804603682),f,p,e[i+13],12,-40341101),h,f,e[i+14],17,-1502002290),v,h,e[i+15],22,1236535329),p=d(p,v=d(v,h=d(h,f,p,v,e[i+1],5,-165796510),f,p,e[i+6],9,-1069501632),h,f,e[i+11],14,643717713),v,h,e[i],20,-373897302),p=d(p,v=d(v,h=d(h,f,p,v,e[i+5],5,-701558691),f,p,e[i+10],9,38016083),h,f,e[i+15],14,-660478335),v,h,e[i+4],20,-405537848),p=d(p,v=d(v,h=d(h,f,p,v,e[i+9],5,568446438),f,p,e[i+14],9,-1019803690),h,f,e[i+3],14,-187363961),v,h,e[i+8],20,1163531501),p=d(p,v=d(v,h=d(h,f,p,v,e[i+13],5,-1444681467),f,p,e[i+2],9,-51403784),h,f,e[i+7],14,1735328473),v,h,e[i+12],20,-1926607734),p=l(p,v=l(v,h=l(h,f,p,v,e[i+5],4,-378558),f,p,e[i+8],11,-2022574463),h,f,e[i+11],16,1839030562),v,h,e[i+14],23,-35309556),p=l(p,v=l(v,h=l(h,f,p,v,e[i+1],4,-1530992060),f,p,e[i+4],11,1272893353),h,f,e[i+7],16,-155497632),v,h,e[i+10],23,-1094730640),p=l(p,v=l(v,h=l(h,f,p,v,e[i+13],4,681279174),f,p,e[i],11,-358537222),h,f,e[i+3],16,-722521979),v,h,e[i+6],23,76029189),p=l(p,v=l(v,h=l(h,f,p,v,e[i+9],4,-640364487),f,p,e[i+12],11,-421815835),h,f,e[i+15],16,530742520),v,h,e[i+2],23,-995338651),p=u(p,v=u(v,h=u(h,f,p,v,e[i],6,-198630844),f,p,e[i+7],10,1126891415),h,f,e[i+14],15,-1416354905),v,h,e[i+5],21,-57434055),p=u(p,v=u(v,h=u(h,f,p,v,e[i+12],6,1700485571),f,p,e[i+3],10,-1894986606),h,f,e[i+10],15,-1051523),v,h,e[i+1],21,-2054922799),p=u(p,v=u(v,h=u(h,f,p,v,e[i+8],6,1873313359),f,p,e[i+15],10,-30611744),h,f,e[i+6],15,-1560198380),v,h,e[i+13],21,1309151649),p=u(p,v=u(v,h=u(h,f,p,v,e[i+4],6,-145523070),f,p,e[i+11],10,-1120210379),h,f,e[i+2],15,718787259),v,h,e[i+9],21,-343485551),h=a(h,r),f=a(f,n),p=a(p,o),v=a(v,c);return[h,f,p,v]}function h(e){var t,i="",r=32*e.length;for(t=0;t<r;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function f(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function p(e){var t,i,r="0123456789abcdef",n="";for(i=0;i<e.length;i+=1)t=e.charCodeAt(i),n+=r.charAt(t>>>4&15)+r.charAt(15&t);return n}function v(e){return unescape(encodeURIComponent(e))}function y(e){return function(e){return h(c(f(e),8*e.length))}(v(e))}function g(e,t){return function(e,t){var i,r,n=f(e),a=[],o=[];for(a[15]=o[15]=void 0,n.length>16&&(n=c(n,8*e.length)),i=0;i<16;i+=1)a[i]=909522486^n[i],o[i]=1549556828^n[i];return r=c(a.concat(f(t)),512+8*t.length),h(c(o.concat(r),640))}(v(e),v(t))}function m(e,t,i){return t?i?g(t,e):function(e,t){return p(g(e,t))}(t,e):i?y(e):function(e){return p(y(e))}(e)}(r=function(){return m}.call(t,i,t,e))===undefined||(e.exports=r)}(undefined)},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(0)("modules/adReportDp3"),a=i(2),o=i(3);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.qq=a.cookie.get("luin")||a.cookie.get("uin")||"",this.adListMap={}}return r(e,[{key:"init",value:function(e){this.config=e;var t=e.orderList||{},i=function(e){var t=[],i=e.item;if(i){var r="[object Array]"===Object.prototype.toString.call(i)?i:[i];r.forEach(function(e,i){e.type&&t.indexOf(e.type)<0&&t.push(e.type)})}return n.log("getTypesFromAdList:",e,t),t.join("_")}(t);i&&(this.adListMap[i]={list:t,adcost:e.adcost})}},{key:"getBaseParam",value:function(){return n.log("getBaseParam:",this.config),{appuser:a.cookie.get("appuser")||"",guid:this.config.guid||"",pf:this.config.pf,pfEx:this.config.pfEx,chid:this.config.chid,channel:a.getVideoType(),requestid:this.config.flowid||"",mvid:this.config.mvid||"",videoDuration:this.config.videoDuration||0,coverid:this.config.coverid||"",qq:this.qq,pversion:this.config.pversion,live:0,version:this.config.version,ua:a.getUA(navigator.userAgent)}}},{key:"parseOrderList",value:function(e){n.log("parseOrderList:",e);var t=[],i=[],r=[],a=e.item;a&&("[object Array]"===Object.prototype.toString.call(a)?a:[a]).forEach(function(e,n){(e=function(e){var t=JSON.parse(JSON.stringify(e));t.creative?t.duration=t.creative[0].duration:t.creative=[];t.image&&(t.image.length?t.creative=t.creative.concat(t.image):t.creative.push(t.image));return t}(e)).order_id&&e.duration&&(e.duration&&r.push(e.duration),"[object Array]"===Object.prototype.toString.call(e.creative)&&e.creative.length&&(e.creative[0].vid?i.push(e.creative[0].vid):e.creative[0].material&&e.creative[0].material.length&&e.creative[0].material[0].vid&&i.push(e.creative[0].material[0].vid)),t.push(e.order_id))});return{oids:t,vids:i,videopt:r}}},{key:"handleParams",value:function(e,t,i){if(e){var r=t.adInfo;r&&r.list&&r.list.length>0&&(r=r.list[0]);var a,s,d={};if(n.log("reportStep",this.config,t),d.adtype=r&&r.adtype?r.adtype:t.adtype,d.adtype){var l=function(e,t){var i={};Object.keys(e).forEach(function(r){r.indexOf(t)>=0&&(i=e[r])});var r=JSON.parse(JSON.stringify(i));o.ZC!==t&&o.ZI!==t&&o.PSJ!==t&&o.BS!==t||r.list&&r.list.item&&r.list.item.length&&(r.list.item=r.list.item.filter(function(e){return e.type===t}));return n.log("getOrderListOfType:",t,r),r}(this.adListMap,d.adtype);if(1===e||2===e){d.flowid=this.config.flowid,r&&(d.soid=function(e,t){if(!e)return"";var i={};return(e.indexOf("?")>-1?e.split("?")[1]:e).split("&").forEach(function(e){var t=e.split("=");i[t[0]]=t[1]}),i[t]||""}(r.reportUrl,"soid"),d.isTrueView=r.isTrueView?1:0,d.adid=r.oadId||"");var u=l&&l.list?this.parseOrderList(l.list):null;d.oids=u?u.oids.join(","):"",d.adtype==o.LD||d.adtype==o.KB||d.adtype==o.ZC||d.adtype==o.HT?d.vids=u?u.vids.join(","):"":d.vids=""}return t.errorcode!==undefined&&(d.errorcode=t.errorcode),"undefined"!=typeof d.errorcode&&0!=d.errorcode&&(d.errMsg=t.errMsg||""),1===e?d.adcost=t.adcost||l.adcost:2===e?(d.adfbt=t.adfbt||"",d.adtt=t.adtt||"",a=t.videopt||[],s=t.videott||[],d.videopt=a.join(",")||"",d.videott=s.join(",")||"",d.errorcode=t.errorcode?t.errorcode:r&&r.errorcode?2201:"",d.adclose=t.adclose||"",d.closetime=t.closetime||"",d.firstview=t.errorcode?-1:t.firstview||""):3===e?(d.adload=t.adload,d.tpindex=t.tpindex,d.oid=t.oid,d.errorcode=t.errorcode||""):4===e&&(d.adclick=t.adclick,d.clicktime=t.clicktime),d.timestamp=+new Date,"video"==i&&d.timestamp&&(d.ctimestamp=d.timestamp,delete d.timestamp),3!==e&&4!==e||(d.timestamp&&delete d.timestamp,d.ctimestamp&&delete d.ctimestamp,d.flowid&&delete d.flowid),d}}}},{key:"reportStep",value:function(e,t){if(e){var i=this.handleParams(e,t);if(i){var r=this.getBaseParam();for(var a in r.bid="10091006",r.step=e,i)r[a]=i[a];try{var o=new XMLHttpRequest;o.open("POST","//dp3.qq.com/stdlog"),o.responseType="text",o.timeout="8000",o.setRequestHeader("Content-type","text/plain"),o.send(JSON.stringify(r))}catch(s){n.log("dp3 reportStep:",s)}}}}},{key:"reportStepForVidoe",value:function(e,t){if(e){var i="//btrace.video.qq.com/kvcollect?BossId=5818&Pwd=1658255276&"+function(e){var t=[];for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];t.push(i+"="+encodeURIComponent(r))}return t.join("&")}(this.getBaseParam()),r=this.handleParams(e,t,"video");if(r){var n=a.appendParamsToUrl(i,r);n+="&step="+e+"&_dc="+Math.random(),this.report(n)}}}},{key:"report",value:function(e){e&&(this.sendReport(e.url||e),n.log("report:",e.url||e))}},{key:"sendReport",value:function(e,t){var i="GP_REPORT"+ +new Date+".r"+Math.floor(1e3*Math.random()),r=this[i]=new Image;r.onload=r.onerror=function(){t&&t(),delete this[i]},r.src=e}}]),e}()},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(0)("modules/adReportDp3"),a=i(2);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"init",value:function(e){this.config=e,this.setBaseStepUrl()}},{key:"setBaseStepUrl",value:function(){var e=this.getBaseParam();this.baseStepUrl="http://p.l.qq.com/?t=s"+function(e){var t=[];for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];t.push(i+"="+encodeURIComponent(r))}return t.join("&")}(e)}},{key:"getBaseParam",value:function(){return n.log("getBaseParam:",this.config),{}}},{key:"reportMind",value:function(e){var t={actid:e.actid,mid:e.orderId,oid:e.orderId,creative_id:e.creative_id,pf:e.pf,locid:e.locId},i=this.handleVers(e.extra);i&&(t.aver=i);var r=a.appendParamsToUrl(this.baseStepUrl,t);this.report(r)}},{key:"report",value:function(e){e&&(this.sendReport(e.url||e),n.log("report:",e.url||e))}},{key:"sendReport",value:function(e,t){var i="GP_REPORT"+ +new Date+".r"+Math.floor(1e3*Math.random()),r=this[i]=new Image;r.onload=r.onerror=function(){t&&t(),delete this[i]},r.src=e}},{key:"handleVers",value:function(e){e=e||{};var t="";for(var i in e){if(e.hasOwnProperty(i))t+=i+"{"+e[i]+"}"}return t}}]),e}()},function(e,t,i){"use strict";var r,n,a,o,s,d,l,u=i(44),c=i(57),h=Function.prototype.apply,f=Function.prototype.call,p=Object.create,v=Object.defineProperty,y=Object.defineProperties,g=Object.prototype.hasOwnProperty,m={configurable:!0,enumerable:!1,writable:!0};s={on:r=function(e,t){var i;return c(t),g.call(this,"__ee__")?i=this.__ee__:(i=m.value=p(null),v(this,"__ee__",m),m.value=null),i[e]?"object"==typeof i[e]?i[e].push(t):i[e]=[i[e],t]:i[e]=t,this},once:n=function(e,t){var i,n;return c(t),n=this,r.call(this,e,i=function(){a.call(n,e,i),h.call(t,this,arguments)}),i.__eeOnceListener__=t,this},off:a=function(e,t){var i,r,n,a;if(c(t),!g.call(this,"__ee__"))return this;if(!(i=this.__ee__)[e])return this;if("object"==typeof(r=i[e]))for(a=0;n=r[a];++a)n!==t&&n.__eeOnceListener__!==t||(2===r.length?i[e]=r[a?0:1]:r.splice(a,1));else r!==t&&r.__eeOnceListener__!==t||delete i[e];return this},emit:o=function(e){var t,i,r,n,a;if(g.call(this,"__ee__")&&(n=this.__ee__[e]))if("object"==typeof n){for(i=arguments.length,a=new Array(i-1),t=1;t<i;++t)a[t-1]=arguments[t];for(n=n.slice(),t=0;r=n[t];++t)h.call(r,this,a)}else switch(arguments.length){case 1:f.call(n,this);break;case 2:f.call(n,this,arguments[1]);break;case 3:f.call(n,this,arguments[1],arguments[2]);break;default:for(i=arguments.length,a=new Array(i-1),t=1;t<i;++t)a[t-1]=arguments[t];h.call(n,this,a)}}},d={on:u(r),once:u(n),off:u(a),emit:u(o)},l=y({},d),e.exports=t=function(e){return null==e?p(l):y(Object(e),d)},t.methods=s},function(e,t,i){"use strict";var r=i(45),n=i(52),a=i(53),o=i(54);(e.exports=function(e,t){var i,a,s,d,l;return arguments.length<2||"string"!=typeof e?(d=t,t=e,e=null):d=arguments[2],null==e?(i=s=!0,a=!1):(i=o.call(e,"c"),a=o.call(e,"e"),s=o.call(e,"w")),l={value:t,configurable:i,enumerable:a,writable:s},d?r(n(d),l):l}).gs=function(e,t,i){var s,d,l,u;return"string"!=typeof e?(l=i,i=t,t=e,e=null):l=arguments[3],null==t?t=undefined:a(t)?null==i?i=undefined:a(i)||(l=i,i=undefined):(l=t,t=i=undefined),null==e?(s=!0,d=!1):(s=o.call(e,"c"),d=o.call(e,"e")),u={get:t,set:i,configurable:s,enumerable:d},l?r(n(l),u):u}},function(e,t,i){"use strict";e.exports=i(46)()?Object.assign:i(47)},function(e,t,i){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,i){"use strict";var r=i(48),n=i(51),a=Math.max;e.exports=function(e,t){var i,o,s,d=a(arguments.length,2);for(e=Object(n(e)),s=function(r){try{e[r]=t[r]}catch(n){i||(i=n)}},o=1;o<d;++o)t=arguments[o],r(t).forEach(s);if(i!==undefined)throw i;return e}},function(e,t,i){"use strict";e.exports=i(49)()?Object.keys:i(50)},function(e,t,i){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,i){"use strict";var r=i(10),n=Object.keys;e.exports=function(e){return n(r(e)?Object(e):e)}},function(e,t,i){"use strict";var r=i(10);e.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,i){"use strict";var r=i(10),n=Array.prototype.forEach,a=Object.create;e.exports=function(e){var t=a(null);return n.call(arguments,function(e){r(e)&&function(e,t){var i;for(i in e)t[i]=e[i]}(Object(e),t)}),t}},function(e,t,i){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t,i){"use strict";e.exports=i(55)()?String.prototype.contains:i(56)},function(e,t,i){"use strict";var r="razdwatrzy";e.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},function(e,t,i){"use strict";var r=String.prototype.indexOf;e.exports=function(e){return r.call(this,e,arguments[1])>-1}},function(e,t,i){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(59),a=i(62),o=i(0)("base/videoAdUi"),s=i(5),d=i(2),l=i(1);e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adplayer=t.adplayer,this.message=t.message,this.renderVideoAdCountdownLayer(t.conf),this.renderVideoAdLayer(t.conf),this.bindVideoAdLayerUiEvent(),this.renderInteractiveAdLayer(t.conf)}return r(e,[{key:"renderVideoAdCountdownLayer",value:function(e){if(e.playerDom.videoAdCountdownLayer){var t={countdown:"adplayer-enter-countdown",countdownNum:"adplayer-enter-countdown-num"};for(var i in e.playerDom.videoAdCountdownLayer.innerHTML=n(t),this.adplayer.$dom.$enterCountdown={},this.adplayer.$dom.$enterCountdown.layer=e.playerDom.videoAdCountdownLayer,t)t.hasOwnProperty(i)&&(this.adplayer.$dom.$enterCountdown["$"+i]=e.playerDom.videoAdCountdownLayer.querySelector('[data-role="'+t[i]+'"]'))}else o.log("\u6ca1\u6709\u627e\u5230\u8fdb\u5165\u5e7f\u544a\u5012\u8ba1\u65f6\u5bb9\u5668")}},{key:"renderVideoAdLayer",value:function(e){if(e.playerDom.videoAdLayer){var t={videoContainer:"adplayer-video-container",videoAdInner:"adplayer-video-inner",videoAdContainer:"adplayer-video-ad-container",videoRichMediaAdContainer:"adplayer-video-rich-media-ad-container",videoAdControl:"adplayer-video-ad-control",videoCountDown:"adplayer-video-countdown",videoCloseBtn:"adplayer-video-close-btn",videoSkipText:"adplayer-video-skip-text",videoNoSkipBtn:"adplayer-video-no-skip-btn",videoDetail:"adplayer-video-detail",videoDetailBtn:"adplayer-video-detail-btn",videoDetailBtnText:"adplayer-video-detail-btn-text",activeNormalVideoDetail:"adplayer-active-normal-video-detail",activeNormalVideoDetailCloseBtn:"adplayer-active-normal-video-detail-close-btn",activeNormalVideoDetailItemImg:"adplayer-active-normal-video-detail-item-img",activeNormalVideoDetailItemDesc:"adplayer-active-normal-video-detail-item-desc",activeNormalVideoDetailItemName:"adplayer-active-normal-video-detail-item-name",activeNormalVideoDetailBtn:"adplayer-active-normal-video-detail-btn",activeNormalVideoDetailBtnText:"adplayer-active-normal-video-detail-btn-text",activeScanVideoDetail:"adplayer-active-scan-video-detail",activeScanVideoDetailBtn:"adplayer-active-scan-video-detail-btn",activeScanVideoDetailBtnText:"adplayer-active-scan-video-detail-btn-text",activeScanVideoDetailBtnImg:"adplayer-active-scan-video-detail-btn-img",activeScanVideoDetailQrCode:"adplayer-active-scan-video-detail-qr-code",cantOpenToast:"adplayer-active-cant-open-toast",activeScanCanOpenArrow:"adplayer-active-can-open-arrow",videoLinkArea:"adplayer-video-link-area",videoVolumeBtn:"adplayer-video-volume-btn",videoNoSkipDialog:"adplayer-video-no-skip-dialog",videoNoSkipAuthor:"adplayer-video-no-skip-author",videoNoSkipKnowBtn:"adplayer-video-no-skip-know-btn",videoNoSkipCloseBtn:"adplayer-video-no-skip-close-btn",videoDspNameText:"adplayer-video-dsp-name-text",videoBlackScreen:"aplayer-video-black-screen",videoPlayIcon:"adplayer-video-play-icon",centerQrcode:"adplayer-center-qrcode",centerQrcodeItemText:"adplayer-center-qrcode-item-text",centerQrcodeContainer:"adplayer-center-qrcode-container",centerQrcodeItemIcon:"adplayer-center-qrcode-item-icon",centerQrcodeCloseBtn:"adplayer-center-qrcode-close-btn"};for(var i in e.playerDom.videoAdLayer.innerHTML=a(t),this.adplayer.$dom.$videoAd={},this.adplayer.$dom.$videoAd.layer=e.playerDom.videoAdLayer,t)t.hasOwnProperty(i)&&(this.adplayer.$dom.$videoAd["$"+i]=e.playerDom.videoAdLayer.querySelector('[data-role="'+t[i]+'"]'));var r=this.adplayer.$dom,n=r.$videoAd;for(var s in this.$videoAd=r.$videoAd,n)n.hasOwnProperty(s)&&(this[s]=n[s])}else o.log("\u6ca1\u6709\u627e\u5230\u89c6\u9891\u7c7b\u5e7f\u544a\u5bb9\u5668")}},{key:"renderInteractiveAdLayer",value:function(e){e.playerDom.interactiveAdLayer?(this.adplayer.$dom.$interactiveAd={},this.adplayer.$dom.$interactiveAd.layer=e.playerDom.interactiveAdLayer,this.$interactiveAd=this.adplayer.$dom.$interactiveAd,this.$interactiveAd.layer&&s.show(this.$interactiveAd.layer)):o.log("\u6ca1\u6709\u627e\u5230\u4e92\u52a8\u5e7f\u544a\u5bb9\u5668")}},{key:"bindVideoAdLayerUiEvent",value:function(){var e=this;this.$videoAd&&(s.on(this.$videoSkipText,"click",function(t){e.message.emit(l.UI_EVENT.VIDEO_SKIP_TEXT,{target:t.target})}),s.on(this.$videoCloseBtn,"click",function(t){e.message.emit(l.UI_EVENT.VIDEO_CLOSE_BUTTON_CLICK,{target:t.target})}),s.on(this.$videoNoSkipBtn,"click",function(t){e.message.emit(l.UI_EVENT.VIDEO_NO_SKIP_BUTTON_CLICK,{target:t.target})}),s.on(this.$videoNoSkipCloseBtn,"click",function(t){e.message.emit(l.UI_EVENT.VIDEO_NO_SKIP_CLOSE_BUTTON_CLICK,{target:t.target})}),s.on(this.$videoNoSkipKnowBtn,"click",function(t){e.message.emit(l.UI_EVENT.VIDEO_NO_SKIP_KNOW_BUTTON_CLICK,{target:t.target})}),s.on(this.$videoLinkArea,"click",function(){e.message.emit(l.UI_EVENT.VIDEO_LINK_AREA_CLICK,"1014")}),s.on(this.$videoDetailBtn,"click",function(t){t.stopPropagation(),e.message.emit(l.UI_EVENT.VIDEO_LINK_AREA_CLICK,"1021")}),s.on(this.$activeNormalVideoDetailBtn,"click",function(t){t.stopPropagation(),e.message.emit(l.UI_EVENT.VIDEO_LINK_AREA_CLICK,"1021")}),s.on(this.$activeScanVideoDetailBtn,"click",function(t){t.stopPropagation(),e.message.emit(l.UI_EVENT.VIDEO_LINK_AREA_CLICK,"1003")}),s.on(this.$activeNormalVideoDetailItemName,"click",function(t){t.stopPropagation(),e.message.emit(l.UI_EVENT.VIDEO_LINK_AREA_CLICK,"1003")}),s.on(this.$activeNormalVideoDetailItemImg,"click",function(t){t.stopPropagation(),e.message.emit(l.UI_EVENT.VIDEO_LINK_AREA_CLICK,"1002")}),s.on(this.$activeNormalVideoDetailItemDesc,"click",function(t){t.stopPropagation(),e.message.emit(l.UI_EVENT.VIDEO_LINK_AREA_CLICK,"1011")}),s.on(this.$activeNormalVideoDetail,"click",function(t){t.stopPropagation(),e.message.emit(l.UI_EVENT.VIDEO_LINK_AREA_CLICK,"1025")}),s.on(this.$videoDetail,"click",function(){e.message.emit(l.UI_EVENT.VIDEO_DETAIL_BUTTON_CLICK,"1024")}),s.on(this.$videoVolumeBtn,"click",function(t){e.message.emit(l.UI_EVENT.VIDEO_VOLUME_BUTTON_CLICK,{target:t.target})}),s.on(this.$videoPlayIcon,"click",function(){e.message.emit(l.UI_EVENT.VIDEO_PLAY_ICON_CLICK)}),s.on(this.$activeScanVideoDetail,"click",function(){e.message.emit(l.UI_EVENT.ACTIVE_SCAN_DETAIL_BUTTON_CLICK)}),s.on(this.$activeNormalVideoDetailCloseBtn,"click",function(t){t.stopPropagation(),e.foldActiveDetail()}),s.on(this.$centerQrcodeCloseBtn,"click",function(){e.message.emit(l.UI_EVENT.CENTER_QRCODE_CLOSE_BUTTON_CLICK)}))}},{key:"hideAll",value:function(){this.resetVideoUi(!0)}},{key:"resetVideoUi",value:function(e){var t=[this.$videoCountDown,this.$videoCloseBtn,this.$videoSkipText,this.$videoAdControl,this.$videoNoSkipBtn,this.$videoNoSkipDialog,this.$videoNoSkipKnowBtn,this.$videoNoSkipCloseBtn];e&&(t=[this.$videoContainer,this.$videoAdContainer,this.$videoRichMediaAdContainer].concat(t)),t.forEach(function(e){s.hide(e)}),s.text(this.$videoSkipText,""),clearInterval(this.trueViewInterval),this.trueViewInterval=null}},{key:"updateVideoAdInner",value:function(e){e?s.show(this.$videoAdInner):s.hide(this.$videoAdInner)}},{key:"updateVideoLayer",value:function(e){e?s.show(this.$videoContainer):s.hide(this.$videoContainer)}},{key:"updateVideoAdControl",value:function(e){e?s.show(this.$videoAdControl):s.hide(this.$videoAdControl)}},{key:"adjustVideoAdControl",value:function(e){e&&(s.css(this.$videoAdControl,"top",e.top),s.css(this.$videoDetail,"bottom",e.bottom))}},{key:"updateVideoAdLayer",value:function(e){e?s.show(this.$videoAdContainer):s.hide(this.$videoAdContainer)}},{key:"updateVideoRichMediaAdContainer",value:function(e){e?s.show(this.$videoRichMediaAdContainer):s.hide(this.$videoRichMediaAdContainer)}},{key:"updateVideoDSP",value:function(e){e?(s.text(this.$videoDspNameText,e),s.show(this.$videoDspNameText)):(s.text(this.$videoDspNameText,""),s.hide(this.$videoDspNameText))}},{key:"updateLinkArea",value:function(e){e?s.css(this.$videoLinkArea,"cursor","pointer"):s.css(this.$videoLinkArea,"cursor","auto")}},{key:"showVideoForbidSkipAd",value:function(e){2==e?(s.text(this.$videoNoSkipAuthor,"\u5185\u5bb9\u65b9"),s.text(this.$videoSkipText,"\u5e94\u5185\u5bb9\u65b9\u8981\u6c42\uff0cVIP\u65e0\u6cd5\u514d\u8be5\u7247\u5e7f\u544a"),s.show(this.$videoSkipText),s.show(this.$videoNoSkipBtn)):1==e&&(s.text(this.$videoNoSkipAuthor,"\u7248\u6743\u65b9\uff08\u534e\u7eb3\uff09"),s.text(this.$videoSkipText,"\u5e94\u7248\u6743\u65b9\u8981\u6c42\uff0cVIP\u65e0\u6cd5\u514d\u8be5\u7247\u5e7f\u544a"),s.show(this.$videoSkipText),s.show(this.$videoNoSkipBtn)),s.show(this.$videoNoSkipCloseBtn),s.show(this.$videoNoSkipKnowBtn)}},{key:"toggleVideoCountDown",value:function(e){e?s.show(this.$videoCountDown):s.hide(this.$videoCountDown)}},{key:"updateVideoCountDown",value:function(e){s.html(this.$videoCountDown,e)}},{key:"updateVideoCountDownHtml",value:function(e){s.html(this.$videoCountDown,e+"<style>.txp_ad_countdown:after{display:none}</style>")}},{key:"updateCloseButton",value:function(e){var t=this.$videoCloseBtn,i=this.$videoSkipText;e.show?(s.show(t),s.show(i)):(s.hide(t),s.hide(i)),"undefined"!=typeof e.text&&s.text(i,e.text)}},{key:"updateDetail",value:function(e){this.activeType&&this.foldActiveDetail(),e.show?(s.show(this.$videoDetail),e.isActive?(e.isActive&&e.isActiveScan&&e.activeScanCanOpen?(s.show(this.$activeScanCanOpenArrow),s.removeClass(this.$videoDetail,"can-not-open")):(s.hide(this.$activeScanCanOpenArrow),s.addClass(this.$videoDetail,"can-not-open")),e.isActiveNormal?(this.activeType="Normal",s.text(this.$videoDetailBtnText,"\u70b9\u51fb\u753b\u9762\uff0c"+(e.btnText||"\u67e5\u770b\u8be6\u60c5")),s.text(this.$activeNormalVideoDetailBtnText,e.btnText||"\u67e5\u770b\u8be6\u60c5"),s.attr(this.$activeNormalVideoDetailItemImg,"src",e.activeItemImgUrl),s.text(this.$activeNormalVideoDetailItemDesc,e.activeItemDesc),s.text(this.$activeNormalVideoDetailItemName,e.activeItemName)):(this.activeType="Scan",s.text(this.$videoDetailBtnText,"\u626b\u4e8c\u7ef4\u7801\uff0c"+(e.btnText||"\u67e5\u770b\u8be6\u60c5")),s.text(this.$activeScanVideoDetailBtnText,e.activeItemName),s.text(this.$centerQrcodeItemText,e.activeItemName),s.attr(this.$activeScanVideoDetailBtnImg,"src",e.activeItemImgUrl),s.attr(this.$centerQrcodeItemIcon,"src",e.activeItemImgUrl),this.renderQrCode(this.$activeScanVideoDetailQrCode,d.appendParamsToUrl(e.activeScanBtnTargetUrl,{act:"1025"}),"detailBtnQrcode",102),this.renderQrCode(this.$centerQrcodeContainer,d.appendParamsToUrl(e.activeScanBtnTargetUrl,{act:"1026"}),"centerQrcode",240))):s.text(this.$videoDetailBtnText,"\u70b9\u51fb\u753b\u9762\uff0c"+(e.btnText||"\u67e5\u770b\u8be6\u60c5"))):s.hide(this.$videoDetail)}},{key:"updateSkipTips",value:function(e){var t="";e.closeText.length>0?t=e.closeText:e.showVipCommand?t="\u5173\u95ed\u63a8\u8350":e.showVipClick?t="VIP\u70b9\u51fb\u5173\u95ed\u8be5\u5e7f\u544a":e.shortVideo?t="\u5173\u95ed\u8be5\u5e7f\u544a":e.isTrueView||(t="VIP\u53ef\u5173\u95ed\u8be5\u5e7f\u544a"),e.isTrueView?(this.updateCloseButton({show:!0}),s.text(this.$videoSkipText)||s.hide(this.$videoSkipText),s.hide(this.$videoCloseBtn)):this.updateCloseButton({show:e.showCloseButton&&!e.isTrueView,text:t})}},{key:"updateTrueview",value:function(e){var t=this;if(e.showCloseButton){var i=e.countdown;e.duration<=10?(s.text(this.$videoSkipText,"\u5173\u95ed\u8be5\u5e7f\u544a"),s.show(this.$videoCloseBtn)):i>0?(s.html(this.$videoSkipText,"\u4f60\u53ef\u4ee5\u5728"+i+"\u79d2\u540e\u5173\u95ed\u8be5\u5e7f\u544a"),s.hide(this.$videoCloseBtn),this.trueViewInterval=setInterval(function(){(i-=1)<=0?(clearInterval(t.trueViewInterval),t.trueViewInterval=null,s.text(t.$videoSkipText,"\u5173\u95ed\u8be5\u5e7f\u544a"),s.show(t.$videoCloseBtn)):(s.html(t.$videoSkipText,"\u4f60\u53ef\u4ee5\u5728"+i+"\u79d2\u540e\u5173\u95ed\u8be5\u5e7f\u544a"),s.hide(t.$videoCloseBtn))},1e3)):(s.text(this.$videoSkipText,"\u5173\u95ed\u8be5\u5e7f\u544a"),s.show(this.$videoCloseBtn))}else s.hide(this.$videoSkipText)}},{key:"updateNoSkipDialog",value:function(e){e.show?s.show(this.$videoNoSkipDialog):s.hide(this.$videoNoSkipDialog)}},{key:"updateVideoVolumeBtn",value:function(e){s.hide(this.$videoVolumeBtn),e.mute?s.addClass(this.$videoVolumeBtn,"txp_btn_ad_mute"):s.removeClass(this.$videoVolumeBtn,"txp_btn_ad_mute")}},{key:"updatePlayIcon",value:function(e){e?s.show(this.$videoPlayIcon):s.hide(this.$videoPlayIcon)}},{key:"unfoldActiveDetail",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.activeType;s.addClass(this.$videoDetail,"txp_ad_active_"+t.toLocaleLowerCase()),this.$videoDetailBtn.className="txp_ad_more",setTimeout(function(){s.hide(e.$videoDetailBtn),s.show(e["$active"+t+"VideoDetail"])},500),setTimeout(function(){s.addClass(e["$active"+t+"VideoDetail"],"active_show")},1500)}},{key:"foldActiveDetail",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.activeType;this.$videoDetail.className="txp_ad_detail",s.removeClass(this["$active"+t+"VideoDetail"],"active_show"),setTimeout(function(){s.hide(e["$active"+t+"VideoDetail"]),e.$videoDetailBtn.className="txp_ad_more"},500),setTimeout(function(){s.addClass(e.$videoDetailBtn,"active_show")},600),this.activeType=""}},{key:"renderQrCode",value:function(e,t,r,n){if(this[r])this[r].clear(),this[r].makeCode(t);else{var a=i(63);this[r]=new a(e,{text:t,width:n,height:n})}}},{key:"showCantOpenToast",value:function(){var e=this;s.show(this.$cantOpenToast),setTimeout(function(){s.hide(e.$cantOpenToast)},2e3)}},{key:"toggleCenterQrcode",value:function(){if(!(arguments.length>0&&arguments[0]!==undefined)||arguments[0])return s.hide(this.$videoDetail),void s.show(this.$centerQrcode);s.show(this.$videoDetail),s.hide(this.$centerQrcode)}}]),e}()},function(e,t,i){var r=i(12);e.exports=function(e){"use strict";e=e||{};var t="",i=r.$escape,n=e.countdown,a=e.countdownNum;return t+='<txpdiv class="txp_ad_control txp_none" data-role="',t+=i(n),t+='">\n    <txpdiv class="txp_ad_skip">\n        <txpdiv class="txp_ad_countdown" data-role="',t+=i(a),t+='"></txpdiv>\n        <txpdiv class="txp_ad_skip_text">\u8fdb\u5165\u5e7f\u544a</txpdiv>\n    </txpdiv>\n</txpdiv>'}},function(e,t,i){"use strict";(function(t){var r=i(61),n=Object.create(r?t:window),a=/["&'<>]/;n.$escape=function(e){return function(e){var t=""+e,i=a.exec(t);if(!i)return e;var r="",n=void 0,o=void 0,s=void 0;for(n=i.index,o=0;n<t.length;n++){switch(t.charCodeAt(n)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}o!==n&&(r+=t.substring(o,n)),o=n+1,r+=s}return o!==n?r+t.substring(o,n):r}(function t(e){"string"!=typeof e&&(e=e===undefined||null===e?"":"function"==typeof e?t(e.call(e)):JSON.stringify(e));return e}(e))},n.$each=function(e,t){if(Array.isArray(e))for(var i=0,r=e.length;i<r;i++)t(e[i],i);else for(var n in e)t(e[n],n)},e.exports=n}).call(t,i(7))},function(e,t,i){(function(t){e.exports=!1;try{e.exports="[object process]"===Object.prototype.toString.call(t.process)}catch(i){}}).call(t,i(7))},function(e,t,i){var r=i(12);e.exports=function(e){"use strict";e=e||{};var t="",i=r.$escape,n=e.videoContainer,a=e.videoAdContainer,o=e.videoRichMediaAdContainer,s=e.videoBlackScreen,d=e.videoAdInner,l=e.videoLinkArea,u=e.cantOpenToast,c=e.centerQrcode,h=e.centerQrcodeItemText,f=e.centerQrcodeContainer,p=e.centerQrcodeItemIcon,v=e.centerQrcodeCloseBtn,y=e.videoDetail,g=e.activeNormalVideoDetail,m=e.activeNormalVideoDetailCloseBtn,A=e.activeNormalVideoDetailItemImg,_=e.activeNormalVideoDetailItemDesc,E=e.activeNormalVideoDetailItemName,T=e.activeNormalVideoDetailBtn,b=e.activeNormalVideoDetailBtnText,w=e.activeScanVideoDetail,x=e.activeScanVideoDetailBtn,S=e.activeScanVideoDetailBtnImg,C=e.activeScanVideoDetailBtnText,I=e.activeScanCanOpenArrow,D=e.activeScanVideoDetailQrCode,k=e.videoDetailBtn,L=e.videoDetailBtnText,R=e.videoDspNameText,P=e.videoAdControl,O=e.videoCountDown,N=e.videoSkipText,V=e.videoCloseBtn,M=e.videoNoSkipBtn,U=e.videoVolumeBtn,B=e.videoNoSkipDialog,F=e.videoNoSkipKnowBtn,G=e.videoNoSkipCloseBtn,j=e.videoPlayIcon;return t+='<style>\n  .txp_btn_ad_volume {\n    background: rgba(37, 37, 37, 0.7) url(https://ca.gtimg.com/adplugin/js/imgs/mutes.png) no-repeat;\n    height: 28px;\n    border: none;\n    border-radius: 14px;\n    width: 28px;\n    margin-left: 8px;\n    user-select: initial;\n    outline: none;\n  }\n  .txp_btn_ad_mute {\n    background-position-y: -28px;\n  }\n  /* adblock */\n  .txp_cac_black_screen {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    z-index: 1000;\n    background-color: #000;\n    text-align: center;\n    display: flex;\n    line-height: 1.5;\n    flex-direction: column;\n    justify-content: center;\n  }\n  .txp_cac_black_screen .txp_cac_black_screen_title {\n    margin-bottom: 15px;\n    font-size: 16px;\n    color: #fff;\n    text-align: center;\n  }\n  .txp_cac_black_screen .txp_cac_black_screen_em {\n    display: inline;\n    color: #ff7000;\n  }\n\n  .txp_play_icon {\n    width: 10%;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    pointer-events: auto;\n  }\n\n  .txp_ad_detail {\n    position: absolute;\n    top: auto;\n    right: 10px;\n    bottom: 64px;\n    left: auto;\n    width: 178px;\n    height: 34px;\n    border-radius: 8px;\n    overflow: hidden;\n    pointer-events: auto;\n    background-color: rgba(0, 0, 0, 0);\n    transition: width 0s ease-in-out 0.5s, height 0s ease-in-out 0.5s, background-color 0.5s ease-in-out;\n  }\n  .txp_ad_detail.can-not-open a {\n    cursor: default;\n  }\n  .txp_ad_detail.txp_ad_active_normal {\n    width: 340px;\n    height: 124px;\n    background-color: rgba(0, 0, 0, 0.8);\n    transition: width 0.7s ease-in-out 0.8s, height 0.7s ease-in-out 0.8s, background-color 1s ease-in-out 0.6s;\n  }\n  .txp_ad_active_normal:hover {\n    background-color: #000;\n  }\n  .txp_ad_detail .active_show {\n    opacity: 1;\n    transition: opacity 0.3s ease-in-out;\n  }\n  .active_normal {\n    display: flex;\n    flex-direction: column;\n    margin: 10px;\n    opacity: 0;\n  }\n  .active_normal .content {\n    display: flex;\n    margin-bottom: 10px;\n  }\n  .txp_ad_active_normal .active_normal .txp_ad_more {\n    opacity: 1;\n  }\n  .txp_ad_active_close {\n    position: absolute;\n    top: 3px;\n    right: 3px;\n    width: 16px;\n    height: 16px;\n    line-height: 8px;\n    cursor: pointer;\n  }\n  .txp_ad_active_close img.hover {\n    display: none;\n  }\n  .txp_ad_active_close:hover img.hover {\n    display: block;\n  }\n  .txp_ad_active_close:hover img.not-hover {\n    display: none;\n  }\n  .txp_ad_active_img {\n    width: 60px;\n    height: 60px;\n    margin-right: 10px;\n    border-radius: 4px;\n    overflow: hidden;\n  }\n  .txp_ad_active_normal_text {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    width: 240px;\n    height: 60px;\n    font-size: 14px;\n    line-height: 18px;\n  }\n  .txp_ad_active_normal_text .vendor {\n    font-size: 12px;\n    opacity: 0.5;\n  }\n  .txp_autohide .txp_ad_detail {\n    bottom: 10px;\n  }\n  .txp_autohide .txp_ad_more {\n    bottom: unset;\n  }\n  .txp_ad_detail.txp_ad_active_scan {\n    width: 162px;\n    height: 207px;\n    background-color: rgba(0, 0, 0, 0.8);\n    transition: width 0.7s ease-in-out 0.8s, height 0.7s ease-in-out 0.8s, background-color 1s ease-in-out 0.6s;\n  }\n  .active_scan {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    height: 100%;\n    padding-bottom: 15px;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 12px;\n    opacity: 0;\n  }\n  .active_scan .txp_ad_more {\n    display: flex;\n    justify-content: flex-start;\n    height: 40px;\n    padding: 0 9px;\n    line-height: 40px;\n    background-color: #000;\n    opacity: 1;\n    border-radius: 0;\n  }\n  .active_scan .item-icon {\n    width: 20px;\n    min-width: 20px;\n    height: 20px;\n    margin-right: 5px;\n    border-radius: 2px;\n    overflow: hidden;\n  }\n  .active_scan .item-text {\n    overflow:hidden;\n    text-overflow:ellipsis;\n    white-space:nowrap;\n  }\n  .active_scan .txp_ad_more txpdiv {\n    flex-grow: 1;\n    text-align: left;\n  }\n  .active_scan .qr-code {\n    width: 110px;\n    height: 110px;\n    padding: 4px;\n    border-radius: 4px;\n    background-color: #fff;\n  }\n  .active_scan .qr-code .code {\n    width: 100%;\n    height: 100%;\n  }\n  .txp_ad_more {\n    position: relative;\n    right: unset;\n    bottom: unset;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 34px;\n    padding: 0 16px;\n    line-height: 34px;\n    text-align: center;\n    font-size: 14px;\n    background-color: #fe5c38;\n    border-radius: 16px;\n    opacity: 0;\n    transition: opacity 0.5s ease-in-out;\n  }\n  .txp_ad_more img {\n    width: 16px;\n    height: 16px;\n    margin-right: 8px;\n  }\n  .txp_ad_more:hover {\n    background-color: #ff183e;\n  }\n  .txp_ad_active_scan .txp_ad_more:hover {\n    background-color: #000;\n  }\n  .txp_ad_control {\n    z-index: 2;\n  }\n  .txp_ad_skip {\n    padding: 0 12px;\n    border-radius: 12px;\n  }\n  .txp_ad_countdown {\n    color: #fe5c38;\n    font-size: 12px;\n  }\n  .cant-open-toast {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    height: 40px;\n    padding: 0 20px;\n    line-height: 40px;\n    font-size: 14px;\n    color: #fff;\n    background-color: rgba(0, 0, 0, .9);\n    border-radius: 20px;\n  }\n  .center-qrcode {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    background-color: rgba(0,0,0,.3);\n    pointer-events: auto;\n  }\n  .center-qrcode .item-text {\n    margin-bottom: 20px;\n    color: #fff;\n    font-size: 20px;\n  }\n  .center-qrcode .center-qrcode-container {\n    position: relative;\n    width: 260px;\n    height: 300px;\n    padding: 10px;\n    border-radius: 2px;\n    background-color: #fff;\n  }\n  .center-qrcode .center-qrcode-container .item-icon {\n    position: absolute;\n    top: 105px;\n    left: 105px;\n    width: 50px;\n    height: 50px;\n    border: 2px solid #fff;\n    border-radius: 4px;\n  }\n  .center-qrcode .center-qrcode-container .scan-tips {\n    margin-top: 15px;\n    color: #3F3F4C;\n    font-size: 14px;\n    text-align: center;\n  }\n  .center-qrcode .close-qrcode {\n    width: 26px;\n    height: 26px;\n    margin-top: 20px;\n    cursor: pointer;\n  }\n  .center-qrcode .close-qrcode .close-hover {\n    display: none;\n  }\n  .center-qrcode .close-qrcode:hover .close-not-hover {\n    display: none;\n  }\n  .center-qrcode .close-qrcode:hover .close-hover {\n    display: block;\n  }\n</style>\n<txpdiv data-role="',t+=i(n),t+='" class="txp_ad" style="width: 100%; height: 100%">\n  \x3c!-- \u5e7f\u544a video \u6807\u7b7e\u5bb9\u5668--\x3e\n  <txpdiv data-role="',t+=i(a),t+='" style="width: 100%; height: 100%; position: relative"></txpdiv>\n\n  \x3c!-- \u5e7f\u544a \u5bcc\u5a92\u4f53\u5bb9\u5668\u6807\u7b7e --\x3e\n  <txpdiv data-role="',t+=i(o),t+='" style="width: 100%; height: 100%"></txpdiv>\n\n  <txp data-role="',t+=i(s),t+='" class="txp_cac_black_screen txp_none">\n    <txp class="txp_cac_black_screen_title">\u5e7f\u544a\u88ab\u62e6\u622a\u63d2\u4ef6\u8bef\u4f24\u5566\uff0c<txp class="txp_cac_black_screen_em">1</txp>\u79d2\u540e\u64ad\u653e</txp>\n    <txp>\u5173\u95ed\u62e6\u622a\u63d2\u4ef6\u6062\u590d\u6b63\u5e38</txp>\n  </txp>\n\n  \x3c!-- \u5185\u90e8\u533a\u57df --\x3e\n  <txpdiv data-role="',t+=i(d),t+='" class="txp_ad_inner txp_none">\n    \x3c!-- \u5e7f\u544a\u70b9\u51fb\u533a\u57df --\x3e\n    <a data-role="',t+=i(l),t+='" href="javascript:;" class="txp_ad_link"></a>\n\n    \x3c!-- \u4e0d\u80fd\u6253\u5f00\u843d\u5730\u9875toast\u63d0\u793a --\x3e\n    <txpdiv data-role="',t+=i(u),t+='" class="cant-open-toast txp_none">\u6682\u4e0d\u652f\u6301\u6253\u5f00\uff0c\u8bf7\u7528\u5fae\u4fe1\u626b\u7801\u6d4f\u89c8</txpdiv>\n\n    \x3c!-- \u5c45\u4e2d\u5c55\u793a\u7684\u4e8c\u7ef4\u7801 --\x3e\n    <txpdiv data-role="',t+=i(c),t+='" class="txp_none center-qrcode">\n      \x3c!-- \u5546\u54c1\u540d\u79f0 --\x3e\n      <div data-role="',t+=i(h),t+='" class="item-text"></div>\n      \x3c!-- \u4e8c\u7ef4\u7801\u5bb9\u5668 --\x3e\n      <txpdiv class="center-qrcode-container">\n        <txpdiv data-role="',t+=i(f),t+='" class="code"></txpdiv>\n        \x3c!-- \u5546\u54c1\u56fe\u7247 --\x3e\n        <img data-role="',t+=i(p),t+='" class="item-icon" alt="" />\n        \x3c!-- \u63d0\u793a --\x3e\n        <txpdiv class="scan-tips">\u5fae\u4fe1\u626b\u4e00\u626b\u67e5\u770b\u66f4\u591a\u7cbe\u5f69</txpdiv>\n      </txpdiv>\n      \x3c!-- \u5173\u95ed\u6309\u94ae --\x3e\n      <txpdiv data-role="',t+=i(v),t+='" class="close-qrcode" title="\u5173\u95ed\u8be5\u5e7f\u544a">\n        <svg class="close-not-hover" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle opacity="0.5" cx="12.5625" cy="12" r="12" fill="black"/><rect x="7.81055" y="6.56934" width="14.4" height="0.96" rx="0.48" transform="rotate(45 7.81055 6.56934)" fill="white"/><rect x="7.13184" y="16.7515" width="14.4" height="0.96" rx="0.48" transform="rotate(-45 7.13184 16.7515)" fill="white"/></svg>\n        <svg class="close-hover" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle opacity="0.8" cx="12.5625" cy="12" r="12" fill="black"/><rect x="7.81055" y="6.56934" width="14.4" height="0.96" rx="0.48" transform="rotate(45 7.81055 6.56934)" fill="#FE5C38"/><rect x="7.13184" y="16.7515" width="14.4" height="0.96" rx="0.48" transform="rotate(-45 7.13184 16.7515)" fill="#FE5C38"/></svg>\n      </txpdiv>\n    </txpdiv>\n\n    \x3c!-- \u8be6\u60c5\u70b9\u51fb --\x3e\n    <txpdiv data-role="',t+=i(y),t+='" class="txp_ad_detail">\n      \x3c!-- \u7ade\u4ef7\u5185\u5bb9 --\x3e\n      \x3c!-- \u666e\u901a\u7ade\u4ef7 --\x3e\n      <txpdiv data-role="',t+=i(g),t+='" class="active_normal txp_none">\n        \x3c!-- \u5173\u95ed\u6309\u94ae --\x3e\n        <txpdiv data-role="',t+=i(m),t+='" class="txp_ad_active_close">\n          <img\n            class="not-hover"\n            ',t+='src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAABGElEQVRYCe1VwQrCMAxdBfHixY8RYf/PQPYxXryMHWaea2CWpkkKTg8NZNM2L+81ybaua9Yq0Crw4wqEEv+yLDfaP5KPIYSpFJvuEfZEa1fymbD3dJ//H/iHcAf5hbyPCYWwz+UY20cscoimCRgJ+SQ/k5tEbMiBARY5RCu2AKhMwkFqhyeWFakCrCJqyJHbJEATUUvuEiCJwDoZBo57LrboHZlczBVgXOa02KoiB9AtAKBEBJYw7a6TAwTTHsM16otXdwWS0+PksH1akCEfVv4dhjBHzi+k0l4UKN5MLbAQWGJyKlQBnsSeWBZTFFCT0IvRHkN8z10THucCw8lfUeQQTRMwE/JB7nrJbEQAixzNWgVaBf63Ai9zOaAYWlyyrgAAAABJRU5ErkJggg=="',t+='\n            alt=""\n          />\n          <img\n            class="hover"\n            ',t+='src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACAUlEQVRYCcVXsU7DMBC109JKFWVALPADfAE7zCyVKCNLi/goBgZYO7Cws/MF/EQlaFWppdS858ZplLiNL6jJk44YN3fv2Tmfba0yMMY00dWBtWANWATTsDIwcFrBfmEL2ExrvcQzQRIYxGwfwrrJr/tpTBB2CiEUtx5ZTH6M/9vsrABzcIwpgtNLcORVkZOPXORUUfzN9z3t5MqiS27OABOuLnQogNleF1oUwKXmx/3Vsxpcvqq3FyaoDPShL2NsR4MCaH6szJH5mV+o0eNIJILk8LG+iOEPbnsjkie1IPfizXCgm81Ps1yeB4tw5PChr0KMXNxNh94+er50fTdW/Yd+sIgsOXxtjA1hrrVbgERECXKGLxYQIqIkOUNrFIMzNoLgI6IjE85984BpT3PJBNAzKwJdZckZTi6AXikRNgizXThy+hFhObB+dy9/5QJSo+fyDF6iW+TLBGTI7bRL6oRHBI9fYfCRs1Ct0dduJbBsK1VYgBxp2AzsJpdXTMeOZ7GAInIXTFq2Y7/dAkLJ/yGCdeAU/v4dEfs5t1S7q0nWeVr4QftDPb33nMbM0x5KeW73I9LfmgEk5IzEz9Eb3lpfrb/8wW3vijNwgmZdx7IFc4A3lrpgBczqYgfvLIrvarwuVY0Jud0ynIKd16WqQC5ybpYfkrG+y2l62BBS6fX8Dz8LYXDqX2E6AAAAAElFTkSuQmCC"',t+='\n            alt=""\n          />\n        </txpdiv>\n        <txpdiv class="content">\n          \x3c!-- \u56fe\u7247 --\x3e\n          <txpdiv class="txp_ad_active_img"><img data-role="',t+=i(A),t+='" /></txpdiv>\n          \x3c!-- \u6587\u672c --\x3e\n          <txpdiv class="txp_ad_active_normal_text">\n            \x3c!-- \u63cf\u8ff0 --\x3e\n            <txpdiv class="desc" data-role="',t+=i(_),t+='"></txpdiv>\n            \x3c!-- \u5382\u5546 --\x3e\n            <txpdiv class="vendor" data-role="',t+=i(E),t+='"></txpdiv>\n          </txpdiv>\n        </txpdiv>\n        <a data-role="',t+=i(T),t+='" class="txp_ad_more" href="javascript:;">\n          <img\n            ',t+='src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAJKADAAQAAAABAAAAJAAAAAAqDuP8AAACHklEQVRYCe2YPU7DQBCFY5ASCUGLAgUdNIRDIAqgyC04CAplOkRyBlpygQghQUOJkGiQIEBHwU8VCvM9sKXVZuPYziaxBCO9eD078/yy3h2vXSr9W/IIBMndg71hGJbxboM6qIEVsApkLxFuOXZANwiCPkf/hpAqaIF3kNbeCGyDqjdFkFXAEfgEeU25DVAZSxgEGpVL4MuuIMo3WiTWQG+Ikkf8J2AfbIDFCGrLp75hufJvZR4pki6AbU84DsD8KELFRLHPHG2TqGwjRcKNxdLhfGmUELtfOeDM4tKpbl/6OUVwHWhFfQFNyDn7YmnPlQuOgW2NtBw/cWSXwYIrCf8yaEZYdsWYPuIkyh4prb5st84kNdsQnYPY7mmsmf2uNjG6ffacartiM/sgtgtkWlFaFKapeKr6j2eQuObESFHkafVplZm2O54asmET8anJGrXTiFKdMq01tiARwJhLFHkqnqZ1nYKI2AOqwj5MI+VcffhV0U27GybowYzy0G66LgSvHjWmfcRxuYtdTODpGDp5kFysW+ZUmeDkD0x2Uidce6ArrxgRket/2UNauMJYuEfH9B+u3BZtGZybKPzT3X5wwR3wCvrgEOSuWcoFrjmXfoMGwTUwrcPJTLewXVNN1J7pJn8TET2HKLn0AFYt0VN7HUz+NSgqYMV5UYxLM/++OK/SsShjtCb+scHH5xh9itEnGdn0Psf8Xu8P/n4D4PsXcaUqP5MAAAAASUVORK5CYII="',t+='\n            alt=""\n          />\n          <txpdiv data-role="',t+=i(b),t+='"></txpdiv>\n        </a>\n      </txpdiv>\n      \x3c!-- \u626b\u7801\u7ade\u4ef7 --\x3e\n      <txpdiv data-role="',t+=i(w),t+='" class="active_scan txp_none">\n        \x3c!-- \u8df3\u8f6c\u6309\u94ae --\x3e\n        <a data-role="',t+=i(x),t+='" class="txp_ad_more" href="javascript:;">\n          <img data-role="',t+=i(S),t+='" class="item-icon" alt="" />\n          <txpdiv data-role="',t+=i(C),t+='" class="item-text"></txpdiv>\n          <img\n            data-role="',t+=i(I),t+='"\n            ',t+='src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAJKADAAQAAAABAAAAJAAAAAAqDuP8AAAAg0lEQVRYCe2WQQqAMAwEix8r+BnBg7/2G8YVPRVa2pNbmEAubaDDNISkRGAAAxiY0EBEZOVqgy6YU3kpNwsogezKJ6ygjpcJqHaXyBKm2oq+W0x1aVJRYWp4eC69D01ZV9j5d4oDU+shzMxixmv9UN/YLWhZUMNTuPb9nGMAAxhwMnADTiAA962llmkAAAAASUVORK5CYII="',t+='\n            style="margin: 0"\n            alt=""\n          />\n        </a>\n        \x3c!-- \u4e8c\u7ef4\u7801 --\x3e\n        <txpdiv class="qr-code"><txpdiv data-role="',t+=i(D),t+='" class="code"></txpdiv></txpdiv>\n        <txpdiv class="text">\u5fae\u4fe1\u626b\u7801\u67e5\u770b\u66f4\u591a</txpdiv>\n      </txpdiv>\n      \x3c!-- \u5355\u6309\u94ae --\x3e\n      <a data-role="',t+=i(k),t+='" class="txp_ad_more active_show" href="javascript:;">\n        <img\n          ',t+='src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAJKADAAQAAAABAAAAJAAAAAAqDuP8AAACHklEQVRYCe2YPU7DQBCFY5ASCUGLAgUdNIRDIAqgyC04CAplOkRyBlpygQghQUOJkGiQIEBHwU8VCvM9sKXVZuPYziaxBCO9eD078/yy3h2vXSr9W/IIBMndg71hGJbxboM6qIEVsApkLxFuOXZANwiCPkf/hpAqaIF3kNbeCGyDqjdFkFXAEfgEeU25DVAZSxgEGpVL4MuuIMo3WiTWQG+Ikkf8J2AfbIDFCGrLp75hufJvZR4pki6AbU84DsD8KELFRLHPHG2TqGwjRcKNxdLhfGmUELtfOeDM4tKpbl/6OUVwHWhFfQFNyDn7YmnPlQuOgW2NtBw/cWSXwYIrCf8yaEZYdsWYPuIkyh4prb5st84kNdsQnYPY7mmsmf2uNjG6ffacartiM/sgtgtkWlFaFKapeKr6j2eQuObESFHkafVplZm2O54asmET8anJGrXTiFKdMq01tiARwJhLFHkqnqZ1nYKI2AOqwj5MI+VcffhV0U27GybowYzy0G66LgSvHjWmfcRxuYtdTODpGDp5kFysW+ZUmeDkD0x2Uidce6ArrxgRket/2UNauMJYuEfH9B+u3BZtGZybKPzT3X5wwR3wCvrgEOSuWcoFrjmXfoMGwTUwrcPJTLewXVNN1J7pJn8TET2HKLn0AFYt0VN7HUz+NSgqYMV5UYxLM/++OK/SsShjtCb+scHH5xh9itEnGdn0Psf8Xu8P/n4D4PsXcaUqP5MAAAAASUVORK5CYII="',t+='\n          alt=""\n        />\n        <txpdiv data-role="',t+=i(L),t+='"></txpdiv>\n      </a>\n    </txpdiv>\n\n    \x3c!-- \u5e95\u90e8\u4ecb\u7ecd --\x3e\n    <txpdiv data-role="',t+=i(R),t+='" style="left: 10px; bottom: 10px; position: absolute; opacity: 0.6; font-size: 12px; text-shadow: 2px 2px #000"></txpdiv>\n\n    \x3c!-- \u65e0\u6cd5\u8df3\u8fc7\u5e7f\u544a\u6309\u94ae --\x3e\n    <txpdiv class="txp_ad_control" data-role="',t+=i(P),t+='">\n      <txpdiv class="txp_ad_skip">\n        \x3c!-- \u5012\u8ba1\u65f6 --\x3e\n        <txpdiv data-role="',t+=i(O),t+='" class="txp_ad_countdown"></txpdiv>\n\n        \x3c!-- \u8df3\u8fc7\u5e7f\u544a\u6587\u6848\u6216\u8005\u8fdb\u5165\u5e7f\u544a\u6587\u6848 --\x3e\n        <txpdiv data-role="',t+=i(N),t+='" class="txp_ad_skip_text" style="cursor: pointer"></txpdiv>\n\n        \x3c!-- \u5173\u95ed\u5e7f\u544a\u6309\u94ae --\x3e\n        <button data-role="',t+=i(V),t+='" class="txp_btn txp_btn_close"></button>\n\n        \x3c!-- \u65e0\u6cd5\u514d\u5e7f\u544a\u8bf4\u660e --\x3e\n        <button data-role="',t+=i(M),t+='" class="txp_btn txp_btn_hint" title="\u65e0\u6cd5\u5173\u95ed\u5e7f\u544a\u8bf4\u660e"></button>\n      </txpdiv>\n      <button data-role="',t+=i(U),t+='" class="txp_btn txp_btn_ad_volume txp_none" style="z-index: 10; position: relative"></button>\n    </txpdiv>\n\n    \x3c!-- \u65e0\u6cd5\u514d\u5e7f\u544a\u5f39\u7a97\u8bf4\u660e --\x3e\n    <txpdiv data-role="',t+=i(B),t+='" class="txp_ad_dialog txp_none">\n      <txpdiv class="txp_dialog_bd"> \u65e0\u6cd5\u5173\u95ed\u5e7f\u544a\u2026\u2026\u7ee7\u7eed\u4e89\u53d6\u5e7f\u544a\u6743\u76ca\u2026\u2026 </txpdiv>\n      <txpdiv data-role="',t+=i(F),t+='" class="txp_ad_btn">\u6211\u77e5\u9053\u4e86!</txpdiv>\n      <a class="txp_ad_fb" target="_blank" href="http://support.qq.com/write.shtml?fid=850">\u610f\u89c1\u53cd\u9988</a>\n      <button data-role="',t+=i(G),t+='" class="txp_btn txp_btn_close"></button>\n    </txpdiv>\n\n    \x3c!-- \u6062\u590d\u64ad\u653e\u6309\u94ae --\x3e\n    <txpdiv data-role="',t+=i(j),t+='" class="txp_play_icon txp_none">\n      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">\n        <circle cx="50" cy="50" r="50" style="fill: rgb(34, 34, 34); fill-opacity: 0.75; --darkreader-inline-fill: #d3cfc9" data-darkreader-inline-fill=""></circle>\n        <path\n          transform="translate(36, 33)"\n          d="M0.6,2C0.6,2,0,3.5,0,16.9C0,30.3,0.6,32,0.6,32c0,1.5,1.6,2.5,2.9,1.8c0,0,3-0.5,15.2-6.6c12.2-6.1,14.2-8.4,14.2-8.4c1.5-0.7,1.5-2.8,0-3.6c0,0-3.3-3.1-14.2-8.6C7.9,1.1,3.5,0.2,3.5,0.2C2.1-0.5,0.6,0.5,0.6,2z"\n          style="fill: rgb(255, 255, 255); --darkreader-inline-fill: #e8e6e3"\n          data-darkreader-inline-fill=""\n        ></path>\n      </svg>\n    </txpdiv>\n  </txpdiv>\n</txpdiv>\n'}},function(e,t){var i;!function(){function e(e){this.mode=d.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=[],i=0,r=this.data.length;r>i;i++){var n=this.data.charCodeAt(i);n>65536?(t[0]=240|(1835008&n)>>>18,t[1]=128|(258048&n)>>>12,t[2]=128|(4032&n)>>>6,t[3]=128|63&n):n>2048?(t[0]=224|(61440&n)>>>12,t[1]=128|(4032&n)>>>6,t[2]=128|63&n):n>128?(t[0]=192|(1984&n)>>>6,t[1]=128|63&n):t[0]=n,this.parsedData=this.parsedData.concat(t)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function t(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function r(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var i=0;i<e.length&&0==e[i];)i++;this.num=new Array(e.length-i+t);for(var r=0;r<e.length-i;r++)this.num[r]=e[r+i]}function n(e,t){this.totalCount=e,this.dataCount=t}function a(){this.buffer=[],this.length=0}function o(){var e=!1,t=navigator.userAgent;return/android/i.test(t)&&(e=!0,aMat=t.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(e=parseFloat(aMat[1]))),e}function s(e,t){for(var i=1,r=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}(e),n=0,a=p.length;a>=n;n++){var o=0;switch(t){case l.L:o=p[n][0];break;case l.M:o=p[n][1];break;case l.Q:o=p[n][2];break;case l.H:o=p[n][3]}if(o>=r)break;i++}if(i>p.length)throw new Error("Too long data");return i}e.prototype={getLength:function(){return this.parsedData.length},write:function(e){for(var t=0,i=this.parsedData.length;i>t;t++)e.put(this.parsedData[t],8)}},t.prototype={addData:function(t){var i=new e(t);this.dataList.push(i),this.dataCache=null},isDark:function(e,t){if(0>e||this.moduleCount<=e||0>t||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,i){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,i),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,i)},setupPositionProbePattern:function(e,t){for(var i=-1;7>=i;i++)if(!(-1>=e+i||this.moduleCount<=e+i))for(var r=-1;7>=r;r++)-1>=t+r||this.moduleCount<=t+r||(this.modules[e+i][t+r]=i>=0&&6>=i&&(0==r||6==r)||r>=0&&6>=r&&(0==i||6==i)||i>=2&&4>=i&&r>=2&&4>=r)},getBestMaskPattern:function(){for(var e=0,t=0,i=0;8>i;i++){this.makeImpl(!0,i);var r=c.getLostPoint(this);(0==i||e>r)&&(e=r,t=i)}return t},createMovieClip:function(e,t,i){var r=e.createEmptyMovieClip(t,i);this.make();for(var n=0;n<this.modules.length;n++)for(var a=1*n,o=0;o<this.modules[n].length;o++){var s=1*o;this.modules[n][o]&&(r.beginFill(0,100),r.moveTo(s,a),r.lineTo(s+1,a),r.lineTo(s+1,a+1),r.lineTo(s,a+1),r.endFill())}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=0==e%2);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){for(var e=c.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var i=0;i<e.length;i++){var r=e[t],n=e[i];if(null==this.modules[r][n])for(var a=-2;2>=a;a++)for(var o=-2;2>=o;o++)this.modules[r+a][n+o]=-2==a||2==a||-2==o||2==o||0==a&&0==o}},setupTypeNumber:function(e){for(var t=c.getBCHTypeNumber(this.typeNumber),i=0;18>i;i++){var r=!e&&1==(1&t>>i);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=r}for(i=0;18>i;i++){r=!e&&1==(1&t>>i);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=r}},setupTypeInfo:function(e,t){for(var i=this.errorCorrectLevel<<3|t,r=c.getBCHTypeInfo(i),n=0;15>n;n++){var a=!e&&1==(1&r>>n);6>n?this.modules[n][8]=a:8>n?this.modules[n+1][8]=a:this.modules[this.moduleCount-15+n][8]=a}for(n=0;15>n;n++){a=!e&&1==(1&r>>n);8>n?this.modules[8][this.moduleCount-n-1]=a:9>n?this.modules[8][15-n-1+1]=a:this.modules[8][15-n-1]=a}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var i=-1,r=this.moduleCount-1,n=7,a=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var s=0;2>s;s++)if(null==this.modules[r][o-s]){var d=!1;a<e.length&&(d=1==(1&e[a]>>>n)),c.getMask(t,r,o-s)&&(d=!d),this.modules[r][o-s]=d,-1==--n&&(a++,n=7)}if(0>(r+=i)||this.moduleCount<=r){r-=i,i=-i;break}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,i,r){for(var o=n.getRSBlocks(e,i),s=new a,d=0;d<r.length;d++){var l=r[d];s.put(l.mode,4),s.put(l.getLength(),c.getLengthInBits(l.mode,e)),l.write(s)}var u=0;for(d=0;d<o.length;d++)u+=o[d].dataCount;if(s.getLengthInBits()>8*u)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*u+")");for(s.getLengthInBits()+4<=8*u&&s.put(0,4);0!=s.getLengthInBits()%8;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*u)&&(s.put(t.PAD0,8),!(s.getLengthInBits()>=8*u));)s.put(t.PAD1,8);return t.createBytes(s,o)},t.createBytes=function(e,t){for(var i=0,n=0,a=0,o=new Array(t.length),s=new Array(t.length),d=0;d<t.length;d++){var l=t[d].dataCount,u=t[d].totalCount-l;n=Math.max(n,l),a=Math.max(a,u),o[d]=new Array(l);for(var h=0;h<o[d].length;h++)o[d][h]=255&e.buffer[h+i];i+=l;var f=c.getErrorCorrectPolynomial(u),p=new r(o[d],f.getLength()-1).mod(f);s[d]=new Array(f.getLength()-1);for(h=0;h<s[d].length;h++){var v=h+p.getLength()-s[d].length;s[d][h]=v>=0?p.get(v):0}}var y=0;for(h=0;h<t.length;h++)y+=t[h].totalCount;var g=new Array(y),m=0;for(h=0;n>h;h++)for(d=0;d<t.length;d++)h<o[d].length&&(g[m++]=o[d][h]);for(h=0;a>h;h++)for(d=0;d<t.length;d++)h<s[d].length&&(g[m++]=s[d][h]);return g};for(var d={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},l={L:1,M:0,Q:3,H:2},u={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},c={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;c.getBCHDigit(t)-c.getBCHDigit(c.G15)>=0;)t^=c.G15<<c.getBCHDigit(t)-c.getBCHDigit(c.G15);return(e<<10|t)^c.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;c.getBCHDigit(t)-c.getBCHDigit(c.G18)>=0;)t^=c.G18<<c.getBCHDigit(t)-c.getBCHDigit(c.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return c.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,i){switch(e){case u.PATTERN000:return 0==(t+i)%2;case u.PATTERN001:return 0==t%2;case u.PATTERN010:return 0==i%3;case u.PATTERN011:return 0==(t+i)%3;case u.PATTERN100:return 0==(Math.floor(t/2)+Math.floor(i/3))%2;case u.PATTERN101:return 0==t*i%2+t*i%3;case u.PATTERN110:return 0==(t*i%2+t*i%3)%2;case u.PATTERN111:return 0==(t*i%3+(t+i)%2)%2;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new r([1],0),i=0;e>i;i++)t=t.multiply(new r([1,h.gexp(i)],0));return t},getLengthInBits:function(e,t){if(t>=1&&10>t)switch(e){case d.MODE_NUMBER:return 10;case d.MODE_ALPHA_NUM:return 9;case d.MODE_8BIT_BYTE:case d.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(27>t)switch(e){case d.MODE_NUMBER:return 12;case d.MODE_ALPHA_NUM:return 11;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(41>t))throw new Error("type:"+t);switch(e){case d.MODE_NUMBER:return 14;case d.MODE_ALPHA_NUM:return 13;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),i=0,r=0;t>r;r++)for(var n=0;t>n;n++){for(var a=0,o=e.isDark(r,n),s=-1;1>=s;s++)if(!(0>r+s||r+s>=t))for(var d=-1;1>=d;d++)0>n+d||n+d>=t||(0!=s||0!=d)&&o==e.isDark(r+s,n+d)&&a++;a>5&&(i+=3+a-5)}for(r=0;t-1>r;r++)for(n=0;t-1>n;n++){var l=0;e.isDark(r,n)&&l++,e.isDark(r+1,n)&&l++,e.isDark(r,n+1)&&l++,e.isDark(r+1,n+1)&&l++,(0==l||4==l)&&(i+=3)}for(r=0;t>r;r++)for(n=0;t-6>n;n++)e.isDark(r,n)&&!e.isDark(r,n+1)&&e.isDark(r,n+2)&&e.isDark(r,n+3)&&e.isDark(r,n+4)&&!e.isDark(r,n+5)&&e.isDark(r,n+6)&&(i+=40);for(n=0;t>n;n++)for(r=0;t-6>r;r++)e.isDark(r,n)&&!e.isDark(r+1,n)&&e.isDark(r+2,n)&&e.isDark(r+3,n)&&e.isDark(r+4,n)&&!e.isDark(r+5,n)&&e.isDark(r+6,n)&&(i+=40);var u=0;for(n=0;t>n;n++)for(r=0;t>r;r++)e.isDark(r,n)&&u++;return i+10*(Math.abs(100*u/t/t-50)/5)}},h={glog:function(e){if(1>e)throw new Error("glog("+e+")");return h.LOG_TABLE[e]},gexp:function(e){for(;0>e;)e+=255;for(;e>=256;)e-=255;return h.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},f=0;8>f;f++)h.EXP_TABLE[f]=1<<f;for(f=8;256>f;f++)h.EXP_TABLE[f]=h.EXP_TABLE[f-4]^h.EXP_TABLE[f-5]^h.EXP_TABLE[f-6]^h.EXP_TABLE[f-8];for(f=0;255>f;f++)h.LOG_TABLE[h.EXP_TABLE[f]]=f;r.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var n=0;n<e.getLength();n++)t[i+n]^=h.gexp(h.glog(this.get(i))+h.glog(e.get(n)));return new r(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=h.glog(this.get(0))-h.glog(e.get(0)),i=new Array(this.getLength()),n=0;n<this.getLength();n++)i[n]=this.get(n);for(n=0;n<e.getLength();n++)i[n]^=h.gexp(h.glog(e.get(n))+t);return new r(i,0).mod(e)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(e,t){var i=n.getRsBlockTable(e,t);if(void 0==i)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=i.length/3,a=[],o=0;r>o;o++)for(var s=i[3*o+0],d=i[3*o+1],l=i[3*o+2],u=0;s>u;u++)a.push(new n(d,l));return a},n.getRsBlockTable=function(e,t){switch(t){case l.L:return n.RS_BLOCK_TABLE[4*(e-1)+0];case l.M:return n.RS_BLOCK_TABLE[4*(e-1)+1];case l.Q:return n.RS_BLOCK_TABLE[4*(e-1)+2];case l.H:return n.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},a.prototype={get:function(e){var t=Math.floor(e/8);return 1==(1&this.buffer[t]>>>7-e%8)},put:function(e,t){for(var i=0;t>i;i++)this.putBit(1==(1&e>>>t-i-1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var p=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],v=function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){function t(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)t.hasOwnProperty(r)&&i.setAttribute(r,t[r]);return i}var i=this._htOption,r=this._el,n=e.getModuleCount();Math.floor(i.width/n),Math.floor(i.height/n),this.clear();var a=t("svg",{viewBox:"0 0 "+String(n)+" "+String(n),width:"100%",height:"100%",fill:i.colorLight});a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),r.appendChild(a),a.appendChild(t("rect",{fill:i.colorDark,width:"1",height:"1",id:"template"}));for(var o=0;n>o;o++)for(var s=0;n>s;s++)if(e.isDark(o,s)){var d=t("use",{x:String(o),y:String(s)});d.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),a.appendChild(d)}},e.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},e}(),y="svg"===document.documentElement.tagName.toLowerCase()?v:"undefined"!=typeof CanvasRenderingContext2D?function(){function e(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}if(this._android&&this._android<=2.1){var t=1/window.devicePixelRatio,i=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(e,r,n,a,o,s,d,l){if("nodeName"in e&&/img/i.test(e.nodeName))for(var u=arguments.length-1;u>=1;u--)arguments[u]=arguments[u]*t;else void 0===l&&(arguments[1]*=t,arguments[2]*=t,arguments[3]*=t,arguments[4]*=t);i.apply(this,arguments)}}var r=function(e,t){this._bIsPainted=!1,this._android=o(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return r.prototype.draw=function(e){var t=this._elImage,i=this._oContext,r=this._htOption,n=e.getModuleCount(),a=r.width/n,o=r.height/n,s=Math.round(a),d=Math.round(o);t.style.display="none",this.clear();for(var l=0;n>l;l++)for(var u=0;n>u;u++){var c=e.isDark(l,u),h=u*a,f=l*o;i.strokeStyle=c?r.colorDark:r.colorLight,i.lineWidth=1,i.fillStyle=c?r.colorDark:r.colorLight,i.fillRect(h,f,a,o),i.strokeRect(Math.floor(h)+.5,Math.floor(f)+.5,s,d),i.strokeRect(Math.ceil(h)-.5,Math.ceil(f)-.5,s,d)}this._bIsPainted=!0},r.prototype.makeImage=function(){this._bIsPainted&&function(e,t){var i=this;if(i._fFail=t,i._fSuccess=e,null===i._bSupportDataURI){var r=document.createElement("img"),n=function(){i._bSupportDataURI=!1,i._fFail&&_fFail.call(i)};return r.onabort=n,r.onerror=n,r.onload=function(){i._bSupportDataURI=!0,i._fSuccess&&i._fSuccess.call(i)},void(r.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===i._bSupportDataURI&&i._fSuccess?i._fSuccess.call(i):!1===i._bSupportDataURI&&i._fFail&&i._fFail.call(i)}.call(this,e)},r.prototype.isPainted=function(){return this._bIsPainted},r.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},r.prototype.round=function(e){return e?Math.floor(1e3*e)/1e3:e},r}():function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){for(var t=this._htOption,i=this._el,r=e.getModuleCount(),n=Math.floor(t.width/r),a=Math.floor(t.height/r),o=['<table style="border:0;border-collapse:collapse;">'],s=0;r>s;s++){o.push("<tr>");for(var d=0;r>d;d++)o.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+n+"px;height:"+a+"px;background-color:"+(e.isDark(s,d)?t.colorDark:t.colorLight)+';"></td>');o.push("</tr>")}o.push("</table>"),i.innerHTML=o.join("");var l=i.childNodes[0],u=(t.width-l.offsetWidth)/2,c=(t.height-l.offsetHeight)/2;u>0&&c>0&&(l.style.margin=c+"px "+u+"px")},e.prototype.clear=function(){this._el.innerHTML=""},e}();(i=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:l.H},"string"==typeof t&&(t={text:t}),t)for(var i in t)this._htOption[i]=t[i];"string"==typeof e&&(e=document.getElementById(e)),this._android=o(),this._el=e,this._oQRCode=null,this._oDrawing=new y(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(e){this._oQRCode=new t(s(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._el.title=e,this._oDrawing.draw(this._oQRCode),this.makeImage()},i.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},i.prototype.clear=function(){this._oDrawing.clear()},i.CorrectLevel=l}(),e.exports=i},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(65),a=i(1),o=i(5),s={ztVideoAdContainer:"adplayer-zt-video-container",ztVideoAdMask:"adplayer-zt-video-mask",ztVideoAdContent:"adplayer-zt-video-content",ztVideoAdLoading:"adplayer-zt-video-loading",ztVideoAdErrTips:"adplayer-zt-video-err-tips",ztVideoAdErrTipsBtn:"adplayer-zt-video-err-tips-btn",ztVideoAdVideo:"adplayer-zt-video-video",ztVideoAdClose:"adplayer-zt-video-close",ztVideoAdDetail:"adplayer-zt-video-detail",ztVideoAdDetailText:"adplayer-zt-video-detail-text",ztVideoAdMute:"adplayer-zt-video-mute",ztVideoAdProgress:"adplayer-zt-video-progress",videoPlayIcon:"adplayer-video-play-icon"};e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adplayer=t.adplayer,this.message=t.message,this.renderVideoAdLayer(),this.bindVideoAdLayerUiEvent()}return r(e,[{key:"renderVideoAdLayer",value:function(){var e=this,t=this.adplayer.$dom.$interactiveAd.$videoZtAd;if(!t){t={};var i=document.createElement("txpdiv");i.innerHTML=n(s),this.adplayer.$dom.$interactiveAd.layer.appendChild(i),this.adplayer.$dom.$interactiveAd.$videoZtAd=t}Object.keys(s).forEach(function(i){t["$"+i]=e.adplayer.$dom.$interactiveAd.layer.querySelector('[data-role="'+s[i]+'"]'),e["$"+i]=t["$"+i]}),this.$videoZtAd=t}},{key:"bindVideoAdLayerUiEvent",value:function(){var e=this;this.$videoZtAd&&(o.on(this.$ztVideoAdClose,"click",function(t){t.stopPropagation(),e.message.emit(a.UI_EVENT.ZT_VIDEO_CLOSE_CLICK)}),o.on(this.$ztVideoAdMute,"click",function(t){t.stopPropagation(),e.message.emit(a.UI_EVENT.ZT_VIDEO_MUTE_CLICK)}),o.on(this.$ztVideoAdErrTipsBtn,"click",function(t){t.stopPropagation(),e.message.emit(a.UI_EVENT.ZT_VIDEO_RETRY_CLICK)}),o.on(this.$ztVideoAdContent,"click",function(t){t.stopPropagation(),e.message.emit(a.UI_EVENT.VIDEO_LINK_AREA_CLICK)}),o.on(this.$ztVideoAdDetail,"click",function(t){t.stopPropagation(),e.message.emit(a.UI_EVENT.VIDEO_DETAIL_BUTTON_CLICK)}),o.on(this.$ztVideoAdErrTips,"click",function(e){e.stopPropagation()}),o.on(this.$ztVideoAdLoading,"click",function(e){e.stopPropagation()}))}},{key:"toggleLoading",value:function(e){e?o.show(this.$ztVideoAdLoading):o.hide(this.$ztVideoAdLoading)}},{key:"toggleErrTips",value:function(e){e?o.show(this.$ztVideoAdErrTips):o.hide(this.$ztVideoAdErrTips)}},{key:"toggleMask",value:function(e){e?o.show(this.$ztVideoAdMask):o.hide(this.$ztVideoAdMask)}},{key:"toggleMuteClass",value:function(e){e?(o.removeClass(this.$ztVideoAdMute,"mute"),o.addClass(this.$ztVideoAdMute,"volume")):(o.removeClass(this.$ztVideoAdMute,"volume"),o.addClass(this.$ztVideoAdMute,"mute"))}},{key:"updateProgress",value:function(e){console.log(e)}},{key:"updateVideoPost",value:function(e){o.css(this.$ztVideoAdLoading,"background-image","url('"+e+"')")}},{key:"updatePlayIcon",value:function(e){e?o.show(this.$videoPlayIcon):o.hide(this.$videoPlayIcon)}},{key:"updateActionBtnText",value:function(e){o.text(this.$ztVideoAdDetailText,e)}}]),e}()},function(e,t,i){var r=i(12);e.exports=function(e){"use strict";e=e||{};var t="",i=r.$escape,n=e.ztVideoAdContainer,a=e.ztVideoAdMask,o=e.ztVideoAdContent,s=e.ztVideoAdLoading,d=e.ztVideoAdErrTips,l=e.ztVideoAdErrTipsBtn,u=e.ztVideoAdVideo,c=e.ztVideoAdClose,h=e.ztVideoAdDetail,f=e.ztVideoAdDetailText,p=e.ztVideoAdMute,v=e.ztVideoAdProgress,y=e.videoPlayIcon;return t+='<style>\n  .txp_zt_video {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    z-index: 2;\n  }\n\n  .txp_zt_video_ad_mask {\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    pointer-events: none;\n  }\n\n  .txp_zt_video_content {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background-color: #1c1c1c;\n    border-radius: 4px;\n    overflow: hidden;\n    cursor: pointer;\n    pointer-events: auto;\n  }\n\n  .txp_zt_video_loading {\n    z-index: 2;\n    background-color: #1c1c1c;\n    background-position: center;\n    background-size: 100% 100%;\n    background-repeat: no-repeat;\n    pointer-events: unset;\n    cursor: auto;\n  }\n\n  .txp_zt_video_err_tips {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    z-index: 2;\n    background-color: #1c1c1c;\n    cursor: auto;\n  }\n\n  .txp_zt_video_err_tips_text {\n    margin-bottom: 20px;\n    font-size: 16px;\n  }\n\n  .txp_zt_video_err_tips_btn {\n    width: 90px;\n    height: 30px;\n    border-radius: 15px;\n    background-color: rgba(255, 255, 255, 0.1);\n    line-height: 30px;\n    text-align: center;\n    font-size: 12px;\n    cursor: pointer;\n  }\n\n  .txp_zt_video_video {\n    width: 100%;\n    height: 100%;\n  }\n\n  .txp_zt_video_close {\n    display: flex;\n    align-items: center;\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    width: 58px;\n    height: 26px;\n    padding-left: 10px;\n    z-index: 3;\n    border-radius: 2px;\n    background-color: rgba(0, 0, 0, 0.5);\n    line-height: 26px;\n    font-size: 12px;\n    cursor: pointer;\n  }\n\n  .txp_zt_video_close:hover {\n    background-color: rgba(0, 0, 0, 0.8);\n  }\n\n  .txp_zt_video_close img {\n    display: block;\n    width: 14px;\n    height: 14px;\n    margin-left: 2px;\n  }\n\n  .txp_zt_video_detail {\n    display: flex;\n    align-items: center;\n    position: absolute;\n    right: 10px;\n    bottom: 12px;\n    width: 100px;\n    height: 30px;\n    padding: 0 15px;\n    border-radius: 15px;\n    background-color: #fe5c38;\n    font-size: 12px;\n    cursor: pointer;\n  }\n\n  .txp_zt_video_detail:hover {\n    background-color: #FF183E;\n  }\n\n  .txp_zt_video_detail img {\n    width: 16px;\n    height: 16px;\n    margin-right: 6px;\n  }\n\n  .txp_zt_video_mute {\n    position: absolute;\n    bottom: 12px;\n    left: 10px;\n    width: 30px;\n    height: 30px;\n    padding: 5px;\n    border-radius: 50%;\n    cursor: pointer;\n    fill: #fff;\n  }\n\n  .txp_zt_video_mute:hover {\n    background-color: rgba(0, 0, 0, 0.8);\n  }\n\n  .txp_zt_video_mute .txp_svg_symbol {\n    display: none;\n  }\n\n  .txp_zt_video_mute.volume .txp_svg_volume {\n    display: block;\n  }\n\n  .txp_zt_video_mute.mute .txp_svg_volume_mute {\n    display: block;\n  }\n\n  .txp_zt_video_progress {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 4px;\n    background-color: rgba(255, 255, 255, 0.45);\n    cursor: auto;\n  }\n\n  .txp_zt_video_progress .progress {\n    width: 0;\n    height: 4px;\n    background-color: #fe5c38;\n    border-top-right-radius: 2px;\n    border-bottom-right-radius: 2px;\n    transition: width 0.15s;\n  }\n\n  .txp_play_icon {\n    width: 10%;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    pointer-events: auto;\n  }\n</style>\n\n<txpdiv data-role="',t+=i(n),t+='" class="txp_zt_video txp_none">\n  \x3c!-- \u906e\u7f69\u5c42 --\x3e\n  <txpdiv data-role="',t+=i(a),t+='" class="txp_zt_video_ad_mask txp_none"></txpdiv>\n\n  \x3c!-- \u5185\u5bb9\u533a\u57df --\x3e\n  <txpdiv data-role="',t+=i(o),t+='" class="txp_zt_video_content">\n    \x3c!-- loading \u63d0\u793a --\x3e\n    <txpdiv data-role="',t+=i(s),t+='" class="txp_zt_video_loading txp_overlay_loading">\n      <txpdiv class="txp_icon_loading"></txpdiv>\n    </txpdiv>\n    \x3c!-- \u9519\u8bef\u63d0\u793a --\x3e\n    <txpdiv data-role="',t+=i(d),t+='" class="txp_zt_video_err_tips txp_none">\n      <txpdiv class="txp_zt_video_err_tips_text">\u89c6\u9891\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u70b9\u51fb\u91cd\u8bd5</txpdiv>\n      <txpdiv data-role="',t+=i(l),t+='" class="txp_zt_video_err_tips_btn">\u70b9\u51fb\u91cd\u8bd5</txpdiv>\n    </txpdiv>\n    \x3c!-- video \u5bb9\u5668 --\x3e\n    <txpdiv data-role="',t+=i(u),t+='" class="txp_zt_video_video"></txpdiv>\n    \x3c!-- \u5173\u95ed\u6309\u94ae --\x3e\n    <txpdiv data-role="',t+=i(c),t+='" class="txp_zt_video_close">\n      \u5e7f\u544a\n      <txpidv class="close">\n        <img\n          class="not-hover"\n          ',t+='src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAz0lEQVRIDe1V2w3CMAxs2IGBYOduUDZgC35gAnOuUpFYxvGhSvw0khulvjsn5z6m6RiMAyIyIxbEmeEpVjmVO3/lVgAmuSPSRRRbOZhkiQq0wFQRIz7mMAQG250qQ8xgOlG7iASinNUJ156Qdy8UGSUdQW2kjnFDR+JbHmLt00WJnzaRv81m92rLfhY54mpVa9fvfYiEolzK6oxABuMWY4gMdi1GE8CiOADrv0AH1Tzg28Z3n2v7HrywqRviUkp5rMdKXCr2WrnPBOWAfBx4A/82CR3u3683AAAAAElFTkSuQmCC"',t+='\n          alt=""\n        />\n      </txpidv>\n    </txpdiv>\n    \x3c!-- \u67e5\u770b\u8be6\u60c5 --\x3e\n    <txpdiv data-role="',t+=i(h),t+='" class="txp_zt_video_detail">\n      <img\n        ',t+='src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAJKADAAQAAAABAAAAJAAAAAAqDuP8AAACHklEQVRYCe2YPU7DQBCFY5ASCUGLAgUdNIRDIAqgyC04CAplOkRyBlpygQghQUOJkGiQIEBHwU8VCvM9sKXVZuPYziaxBCO9eD078/yy3h2vXSr9W/IIBMndg71hGJbxboM6qIEVsApkLxFuOXZANwiCPkf/hpAqaIF3kNbeCGyDqjdFkFXAEfgEeU25DVAZSxgEGpVL4MuuIMo3WiTWQG+Ikkf8J2AfbIDFCGrLp75hufJvZR4pki6AbU84DsD8KELFRLHPHG2TqGwjRcKNxdLhfGmUELtfOeDM4tKpbl/6OUVwHWhFfQFNyDn7YmnPlQuOgW2NtBw/cWSXwYIrCf8yaEZYdsWYPuIkyh4prb5st84kNdsQnYPY7mmsmf2uNjG6ffacartiM/sgtgtkWlFaFKapeKr6j2eQuObESFHkafVplZm2O54asmET8anJGrXTiFKdMq01tiARwJhLFHkqnqZ1nYKI2AOqwj5MI+VcffhV0U27GybowYzy0G66LgSvHjWmfcRxuYtdTODpGDp5kFysW+ZUmeDkD0x2Uidce6ArrxgRket/2UNauMJYuEfH9B+u3BZtGZybKPzT3X5wwR3wCvrgEOSuWcoFrjmXfoMGwTUwrcPJTLewXVNN1J7pJn8TET2HKLn0AFYt0VN7HUz+NSgqYMV5UYxLM/++OK/SsShjtCb+scHH5xh9itEnGdn0Psf8Xu8P/n4D4PsXcaUqP5MAAAAASUVORK5CYII="',t+='\n        alt=""\n      />\n      <txpidv data-role="',t+=i(f),t+='"></txpidv>\n    </txpdiv>\n    \x3c!-- \u9759\u97f3\u5207\u6362 --\x3e\n    <txpdiv data-role="',t+=i(p),t+='" class="txp_zt_video_mute mute">\n      <svg viewBox="0 0 20 20" class="txp_svg_volume txp_svg_symbol">\n        <path\n          d="M16.714 15.593l-.01-.01a1 1 0 0 1-1.705-.708c0-.287.124-.542.317-.724C16.354 13.073 17 11.614 17 10s-.645-3.072-1.682-4.151A.993.993 0 0 1 15 5.125a1 1 0 0 1 1-1c.3 0 .561.139.744.348l.017-.016A7.969 7.969 0 0 1 19 10c0 2.178-.874 4.15-2.286 5.593zm-3.999 3.122a.956.956 0 0 1-.688.28c-.009 0-.018.005-.027.005a.984.984 0 0 1-.75-.357L5.818 15H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h3.818l5.432-3.643A.984.984 0 0 1 12 1c.009 0 .017.005.026.005a.954.954 0 0 1 .968.967c.001.01.006.018.006.028v16c0 .009-.005.017-.005.026a.959.959 0 0 1-.28.689zM6.75 6.643A.984.984 0 0 1 6 7H3v6h3c.304 0 .567.143.75.357l4.25 2.85V3.792L6.75 6.643z"\n        ></path>\n      </svg>\n      <svg viewBox="0 0 20 20" class="txp_svg_volume_mute txp_svg_symbol">\n        <path\n          d="M16.394 12.566A5.88 5.88 0 0 0 17 10a5.97 5.97 0 0 0-1.682-4.151.993.993 0 0 1-.318-.724 1 1 0 0 1 1-1c.3 0 .561.139.745.348l.016-.016A7.969 7.969 0 0 1 19 10a7.934 7.934 0 0 1-1.116 4.055l-1.49-1.489zM11 3.792L8.978 5.149 7.62 3.792l3.63-2.435A.984.984 0 0 1 12 1c.009 0 .017.005.026.005a.954.954 0 0 1 .968.967c.001.01.006.018.006.028v7.171l-2-2V3.792zm7.864 14.072a.999.999 0 0 1-1.414 0L2.136 2.55a1 1 0 1 1 1.415-1.415L18.864 16.45a1 1 0 0 1 0 1.414zM3.171 5l2 2H3v6h3c.304 0 .567.143.75.357l4.25 2.85v-3.379l2 2V18c0 .009-.005.017-.005.027a.955.955 0 0 1-.967.968c-.01 0-.019.005-.028.005a.984.984 0 0 1-.75-.357L5.818 15H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.171z"\n        ></path>\n      </svg>\n    </txpdiv>\n    \x3c!-- \u8fdb\u5ea6\u6761 --\x3e\n    <txpdiv class="txp_zt_video_progress">\n      <txpdiv data-role="',t+=i(v),t+='" class="progress"></txpdiv>\n    </txpdiv>\n  </txpdiv>\n\n  \x3c!-- \u6062\u590d\u64ad\u653e\u6309\u94ae --\x3e\n  <txpdiv data-role="',t+=i(y),t+='" class="txp_play_icon txp_none">\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">\n      <circle cx="50" cy="50" r="50" style="fill: rgb(34, 34, 34); fill-opacity: 0.75; --darkreader-inline-fill: #d3cfc9" data-darkreader-inline-fill=""></circle>\n      <path\n        transform="translate(36, 33)"\n        d="M0.6,2C0.6,2,0,3.5,0,16.9C0,30.3,0.6,32,0.6,32c0,1.5,1.6,2.5,2.9,1.8c0,0,3-0.5,15.2-6.6c12.2-6.1,14.2-8.4,14.2-8.4c1.5-0.7,1.5-2.8,0-3.6c0,0-3.3-3.1-14.2-8.6C7.9,1.1,3.5,0.2,3.5,0.2C2.1-0.5,0.6,0.5,0.6,2z"\n        style="fill: rgb(255, 255, 255); --darkreader-inline-fill: #e8e6e3"\n        data-darkreader-inline-fill=""\n      ></path>\n    </svg>\n  </txpdiv>\n</txpdiv>\n'}},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(67),a=i(1),o=i(5),s={zt3dVideoAdContainer:"adplayer-zt-3d-video-container",zt3dVideoAdMask:"adplayer-zt-3d-video-mask",zt3dVideoAdContent:"adplayer-zt-3d-video-content",zt3dVideoAdLoading:"adplayer-zt-3d-video-loading",zt3dVideoAdErrTips:"adplayer-zt-3d-video-err-tips",zt3dVideoAdErrTipsBtn:"adplayer-zt-3d-video-err-tips-btn",zt3dVideoCanvas:"adplayer-zt-3d-video-canvas",zt3dVideoAdClose:"adplayer-zt-3d-video-close"};e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adplayer=t.adplayer,this.message=t.message,this.renderVideoAdLayer(),this.bindVideoAdLayerUiEvent()}return r(e,[{key:"renderVideoAdLayer",value:function(){var e=this,t=this.adplayer.$dom.$interactiveAd.$video3dZtAd;if(!t){t={};var i=document.createElement("txpdiv");i.innerHTML=n(s),this.adplayer.$dom.$interactiveAd.layer.appendChild(i),this.adplayer.$dom.$interactiveAd.$video3dZtAd=t}Object.keys(s).forEach(function(i){t["$"+i]=e.adplayer.$dom.$interactiveAd.layer.querySelector('[data-role="'+s[i]+'"]'),e["$"+i]=t["$"+i]}),this.$video3dZtAd=t}},{key:"bindVideoAdLayerUiEvent",value:function(){var e=this;this.$video3dZtAd&&(o.on(this.$zt3dVideoAdContent,"click",function(t){t.stopPropagation(),e.message.emit(a.UI_EVENT.VIDEO_LINK_AREA_CLICK)}),o.on(this.$zt3dVideoAdClose,"click",function(t){t.stopPropagation(),e.message.emit(a.UI_EVENT.ZT_VIDEO_CLOSE_CLICK)}),o.on(this.$zt3dVideoAdErrTips,"click",function(t){t.stopPropagation(),e.message.emit(a.UI_EVENT.ZT_VIDEO_RETRY_CLICK)}),o.on(this.$zt3dVideoAdLoading,"click",function(e){e.stopPropagation()}))}},{key:"toggleLoading",value:function(e){e?o.show(this.$zt3dVideoAdLoading):o.hide(this.$zt3dVideoAdLoading)}},{key:"toggleErrTips",value:function(e){e?o.show(this.$zt3dVideoAdErrTips):o.hide(this.$zt3dVideoAdErrTips)}},{key:"toggleMask",value:function(e){e?o.show(this.$zt3dVideoAdMask):o.hide(this.$zt3dVideoAdMask)}},{key:"updateVideoPost",value:function(e){o.css(this.$zt3dVideoAdLoading,"background-image","url('"+e+"')")}}]),e}()},function(e,t,i){var r=i(12);e.exports=function(e){"use strict";e=e||{};var t="",i=r.$escape,n=e.zt3dVideoAdContainer,a=e.zt3dVideoAdMask,o=e.zt3dVideoAdContent,s=e.zt3dVideoAdLoading,d=e.zt3dVideoAdErrTips,l=e.zt3dVideoAdErrTipsBtn,u=e.zt3dVideoCanvas,c=e.zt3dVideoAdClose;return t+='<style>\n  .txp_zt_3d_video {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    z-index: 2;\n  }\n\n  .txp_zt_3d_video_ad_mask {\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    pointer-events: none;\n  }\n\n  .txp_zt_3d_video_content {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    overflow: hidden;\n    cursor: pointer;\n    pointer-events: auto;\n    display: flex;\n    max-width: 716px;\n    max-height: 402px;\n  }\n\n  .txp_zt_3d_video_loading {\n    z-index: 2;\n    background-position: center;\n    background-size: 100% 100%;\n    background-repeat: no-repeat;\n    pointer-events: unset;\n    cursor: auto;\n    width: 100%;\n    height: 100%;\n    flex: 1;\n  }\n\n  .txp_zt_3d_video_err_tips {\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    z-index: 2;\n    background-color: #1c1c1c;\n    cursor: auto;\n  }\n\n  .txp_zt_3d_video_err_tips_text {\n    margin-bottom: 20px;\n    font-size: 16px;\n  }\n\n  .txp_zt_3d_video_err_tips_btn {\n    width: 90px;\n    height: 30px;\n    border-radius: 15px;\n    background-color: rgba(255, 255, 255, 0.1);\n    line-height: 30px;\n    text-align: center;\n    font-size: 12px;\n    cursor: pointer;\n  }\n\n\n  .txp_zt_3d_video_canvas {\n    width: 100%;\n    height: 100%;\n  }\n\n  .txp_zt_3d_video_close {\n    display: flex;\n    align-items: center;\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    width: 58px;\n    height: 26px;\n    padding-left: 10px;\n    z-index: 3;\n    border-radius: 2px;\n    background-color: rgba(0, 0, 0, 0.5);\n    line-height: 26px;\n    font-size: 12px;\n    cursor: pointer;\n  }\n\n  .txp_zt_3d_video_close:hover {\n    background-color: rgba(0, 0, 0, 0.8);\n  }\n\n  .txp_zt_3d_video_close img {\n    display: block;\n    width: 14px;\n    height: 14px;\n    margin-left: 2px;\n  }\n\n  .txp_zt_3d_video_detail img {\n    width: 16px;\n    height: 16px;\n    margin-right: 6px;\n  }\n\n</style>\n\n<txpdiv data-role="',t+=i(n),t+='" class="txp_zt_3d_video txp_none">\n  \x3c!-- \u906e\u7f69\u5c42 --\x3e\n  <txpdiv data-role="',t+=i(a),t+='" class="txp_zt_3d_video_ad_mask txp_none"></txpdiv>\n\n  \x3c!-- \u5185\u5bb9\u533a\u57df --\x3e\n  <txpdiv data-role="',t+=i(o),t+='" class="txp_zt_3d_video_content txp_zt_3d_video_content_size">\n    \x3c!-- loading \u63d0\u793a --\x3e\n    <txpdiv data-role="',t+=i(s),t+='" class="txp_zt_3d_video_loading txp_overlay_loading">\n      <txpdiv class="txp_icon_loading"></txpdiv>\n    </txpdiv>\n    \x3c!-- \u9519\u8bef\u63d0\u793a --\x3e\n    <txpdiv data-role="',t+=i(d),t+='" class="txp_zt_3d_video_err_tips txp_none">\n      <txpdiv class="txp_zt_3d_video_err_tips_text">\u89c6\u9891\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u70b9\u51fb\u91cd\u8bd5</txpdiv>\n      <txpdiv data-role="',t+=i(l),t+='" class="txp_zt_3d_video_err_tips_btn">\u70b9\u51fb\u91cd\u8bd5</txpdiv>\n    </txpdiv>\n    \x3c!-- \u5c55\u793a3D\u6548\u679c\u7684\u5bb9\u5668 --\x3e\n    <canvas id = "txp-zt-three-d-video" width="716" height="402" data-role="',t+=i(u),t+='" class="txp_zt_3d_video_canvas"></canvas>\n    \x3c!-- \u5173\u95ed\u6309\u94ae --\x3e\n    <txpdiv data-role="',t+=i(c),t+='" class="txp_zt_3d_video_close">\n      \u5e7f\u544a\n      <txpidv class="close">\n        <img\n                class="not-hover"\n                ',t+='src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAz0lEQVRIDe1V2w3CMAxs2IGBYOduUDZgC35gAnOuUpFYxvGhSvw0khulvjsn5z6m6RiMAyIyIxbEmeEpVjmVO3/lVgAmuSPSRRRbOZhkiQq0wFQRIz7mMAQG250qQ8xgOlG7iASinNUJ156Qdy8UGSUdQW2kjnFDR+JbHmLt00WJnzaRv81m92rLfhY54mpVa9fvfYiEolzK6oxABuMWY4gMdi1GE8CiOADrv0AH1Tzg28Z3n2v7HrywqRviUkp5rMdKXCr2WrnPBOWAfBx4A/82CR3u3683AAAAAElFTkSuQmCC"',t+='\n                alt=""\n        />\n      </txpidv>\n    </txpdiv>\n  </txpdiv>\n</txpdiv>\n'}},function(e,t,i){"use strict";var r="adController",n=[{k:"setConf",c:["confController"]},{k:"getConf",c:["confController"]},{k:"getOrdersByType",c:["orderController"]},{k:"getOrderDuration",c:["orderController"]},{k:"isOrderEmpty",c:["orderController"]},{k:"setPageWatchBuyData",c:["orderController"]},{k:"clearPageWatchBuyData",c:["orderController"]},{k:"preLoadAd",c:[r]},{k:"loadAd",c:[r]},{k:"playAd",c:[r]},{k:"pauseAd",c:[r]},{k:"stopAd",c:[r]},{k:"stopAllAd",c:[r]},{k:"readRfId",c:[r]},{k:"muteAd",c:[r]},{k:"unMuteAd",c:[r]},{k:"setAdVolume",c:[r]},{k:"resizeAd",c:[r]},{k:"adjustUI",c:[r]},{k:"hideAdBeforeResize",c:[r]},{k:"setAdFullscreen",c:[r]},{k:"setAdPosition",c:[r]},{k:"setAdSmallWindow",c:[r]},{k:"reportAd",c:[r]},{k:"seekStart",c:[r]}];e.exports={install:function(e){n.forEach(function(t){e.prototype[t.k]||(e.prototype[t.k]=function(){for(var e=0,i=t.c.length;e<i;e++)return this.controllers[t.c[e]][t.k].apply(this.controllers[t.c[e]],Array.prototype.slice.call(arguments))})})}}},function(e,t,i){"use strict";var r=i(70),n=i(76),a=i(77),o=i(78),s=i(2);e.exports={install:function(e){e.adClass={loadedCount:0,maxLoadedCount:3,nextPartUrl:"//vm.gtimg.cn/tencentvideo/txpv5/creative/plugins/nextpart",nextPartReady:!1,hasRequestNextPart:!1,make:function(){var e=Array.prototype.slice.call(arguments),t=e[0];e.shift();var i=this.factory;if(i[t]&&i[t].ready)return i[t].creater.apply(i[t].creater,e)},loadNextPart:function(){var t=this,i=e.version;this.loadedCount>0&&(i+="."+ +new Date),this.loadedCount++,!this.hasRequestNextPart&&this.loadedCount<=this.maxLoadedCount&&s.loadJs(s.appendParamsToUrl(this.nextPartUrl+"."+e.version+".js",{t:i}),function(e){e&&e.error?(t.hasRequestNextPart=!1,t.loadNextPart()):t.hasRequestNextPart=!0})},factory:{LoadingAd:{ready:!0,creater:function(e){return e._name="LoadingAd",new r(e)}},EmbedAd:{ready:!0,creater:function(e){return e._name="EmbedAd",new n(e)}},EndingAd:{ready:!0,creater:function(e){return e._name="EndingAd",new o(e)}},ZcAd:{ready:!0,creater:function(e){return e._name="ZcAd",new a(e)}}}}}}},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(21),a=i(1);e.exports=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.message.on(a.TXPLAYER_EVENT.AD_STOP,function(e){"LD"===e.adtype&&e.rfid&&e.isAllAdEnd&&i.saveRfId(e.rfid)}),i._name=e._name,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n),r(t,[{key:"saveRfId",value:function(e){if("undefined"!=typeof window.localStorage)try{window.localStorage["TxpCreativePlayer-rfid"]=e}catch(t){}}}]),t}()},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(8).Promise,a=i(2);e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.api={url:"//ra.gtimg.com/web/viewability/viewabilityalone.js",startMonitor:null},this.target=t)}return r(e,[{key:"initApi",value:function(){var e=this;return new n(function(t,i){a.loadJs(e.api.url,function(r){r?i():crystalViewModule&&crystalViewModule.startviewability?(e.api.startMonitor=crystalViewModule.startviewability,t()):i()})})}},{key:"getReportData",value:function(e){var t=[],i=e.reportUrlView;return i&&i.reportitem&&i.reportitem.length>0?(i.reportitem.forEach(function(e){e&&e.url&&t.push(e.url)}),{objectID:[this.target],reportItemUrl:t,oid:e.orderId,duration:1e3*e.duration,retry:0}):null}},{key:"start",value:function(e){var t=this,i=this.getReportData(e);i&&(this.api.startMonitor?this.api.startMonitor(i):this.initApi().then(function(){t.api.startMonitor(i)}))}}]),e}()},function(e,t,i){var r;r=function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=10)}([function(e,t,i){"use strict";i.d(t,"a",function(){return u}),i.d(t,"b",function(){return c});var r=i(4),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(){}var o={trace:a,debug:a,log:a,warn:a,info:a,error:a},s=o;var d=Object(r.a)();function l(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];i.forEach(function(t){s[t]=e[t]?e[t].bind(e):function(e){var t=d.console[e];return t?function(){for(var i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];r[0]&&(r[0]=function(e,t){return t="["+e+"] > "+t}(e,r[0])),t.apply(d.console,r)}:a}(t)})}var u=function(e){if(!0===e||"object"===(void 0===e?"undefined":n(e))){l(e,"debug","log","info","warn","error");try{s.log()}catch(t){s=o}}else s=o},c=s},function(e,t,i){"use strict";t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(e,t,i){"use strict";i.d(t,"b",function(){return r}),i.d(t,"a",function(){return n});var r={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},n={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t){e.exports=void 0},function(e,t,i){"use strict";t.a=function(){return"undefined"==typeof window?self:window}},function(e,t,i){var r,n,a,o,s;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/;?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var r=this.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=this.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return i.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=this.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var d=n.exec(o.path);o.netLoc=d[1],o.path=d[2]}o.netLoc&&!o.path&&(o.path="/");var l={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var u=o.path,c=u.substring(0,u.lastIndexOf("/")+1)+a.path;l.path=s.normalizePath(c)}else l.path=o.path,a.params||(l.params=o.params,a.query||(l.query=o.query));return null===l.path&&(l.path=i.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(l)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},function(e,t){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||undefined}function r(e){return"function"==typeof e}function n(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=i,i.EventEmitter=i,i.prototype._events=undefined,i.prototype._maxListeners=undefined,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,i,o,s,d,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(a(i=this._events[e]))return!1;if(r(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(n(i))for(s=Array.prototype.slice.call(arguments,1),o=(l=i.slice()).length,d=0;d<o;d++)l[d].apply(this,s);return!0},i.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?n(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,n(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var i=!1;function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){var i,a,o,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(i=this._events[e]).length,a=-1,i===t||r(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n(i)){for(s=o;s-- >0;)if(i[s]===t||i[s].listener&&i[s].listener===t){a=s;break}if(a<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(i=this._events[e]))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,i){"use strict";var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,i){for(var r=i,n=0;e.isHeader(t,i);){n+=10,n+=e._readSize(t,i+6),e.isFooter(t,i+10)&&(n+=10),i+=n}return n>0?t.subarray(r,r+n):undefined},e._readSize=function(e,t){var i=0;return i=(127&e[t])<<21,i|=(127&e[t+1])<<14,i|=(127&e[t+2])<<7,i|=127&e[t+3]},e.getTimeStamp=function(t){for(var i=e.getID3Frames(t),r=0;r<i.length;r++){var n=i[r];if(e.isTimeStampFrame(n))return e._readTimeStamp(n)}return undefined},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var i=String.fromCharCode(t[0],t[1],t[2],t[3]),r=e._readSize(t,4);return{type:i,size:r,data:t.subarray(10,10+r)}},e.getID3Frames=function(t){for(var i=0,r=[];e.isHeader(t,i);){for(var n=e._readSize(t,i+6),a=(i+=10)+n;i+8<a;){var o=e._getFrameData(t.subarray(i)),s=e._decodeFrame(o);s&&r.push(s),i+=o.size+10}e.isFooter(t,i)&&(i+=10)}return r},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):undefined},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),i=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,i&&(r+=47721858.84),Math.round(r)}return undefined},e._decodePrivFrame=function(t){if(t.size<2)return undefined;var i=e._utf8ArrayToStr(t.data,!0),r=new Uint8Array(t.data.subarray(i.length+1));return{key:t.type,info:i,data:r.buffer}},e._decodeTextFrame=function(t){if(t.size<2)return undefined;if("TXXX"===t.type){var i=1,r=e._utf8ArrayToStr(t.data.subarray(i));i+=r.length+1;var n=e._utf8ArrayToStr(t.data.subarray(i));return{key:t.type,info:r,data:n}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return undefined;var i=1,r=e._utf8ArrayToStr(t.data.subarray(i));i+=r.length+1;var n=e._utf8ArrayToStr(t.data.subarray(i));return{key:t.type,info:r,data:n}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e){for(var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],i=e.length,r=void 0,n=void 0,a=void 0,o="",s=0;s<i;){if(0===(r=e[s++])&&t)return o;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(r);break;case 12:case 13:n=e[s++],o+=String.fromCharCode((31&r)<<6|63&n);break;case 14:n=e[s++],a=e[s++],o+=String.fromCharCode((15&r)<<12|(63&n)<<6|(63&a)<<0)}}return o},e}();r._utf8ArrayToStr;t.a=r},function(e,t,i){"use strict";var r=i(0),n=i(1);var a=Math.pow(2,32)-1,o=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.remuxer=i}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,i,r,a){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t);null==i&&(i="mp4a.40.5"),null==r&&(r="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:i+","+r,initSegment:a?t:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:i,initSegment:a?t:null}),o.video&&(s.video={container:"video/mp4",codec:r,initSegment:a?t:null})),this.observer.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else i&&(this.audioCodec=i),r&&(this.videoCodec=r)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var i=e[t]<<8|e[t+1];return i<0?65536+i:i},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var i=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return i<0?4294967296+i:i},e.writeUint32=function(e,t,i){e.data&&(t+=e.start,e=e.data),e[t]=i>>24,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i},e.findBox=function(t,i){var r=[],n=void 0,a=void 0,o=void 0,s=void 0,d=void 0,l=void 0,u=void 0;if(t.data?(l=t.start,s=t.end,t=t.data):(l=0,s=t.byteLength),!i.length)return null;for(n=l;n<s;)a=e.readUint32(t,n),o=e.bin2str(t.subarray(n+4,n+8)),u=a>1?n+a:s,o===i[0]&&(1===i.length?r.push({data:t,start:n+8,end:u}):(d=e.findBox({data:t,start:n+8,end:u},i.slice(1))).length&&(r=r.concat(d))),n=u;return r},e.parseSegmentIndex=function(t){var i=e.findBox(t,["moov"])[0],r=i?i.end:null,n=0,a=e.findBox(t,["sidx"]),o=void 0;if(!a||!a[0])return null;o=[];var s=(a=a[0]).data[0];n=0===s?8:16;var d=e.readUint32(a,n);n+=4;n+=0===s?8:16,n+=2;var l=a.end+0,u=e.readUint16(a,n);n+=2;for(var c=0;c<u;c++){var h=n,f=e.readUint32(a,h);h+=4;var p=2147483647&f;if(1===(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var v=e.readUint32(a,h);h+=4,o.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/d,start:l,end:l+p-1}}),l+=p,n=h+=4}return{earliestPresentationTime:0,timescale:d,version:s,referencesCount:u,references:o,moovEndOffset:r}},e.parseInitSegment=function(t){var i=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var n=e.findBox(t,["tkhd"])[0];if(n){var a=n.data[n.start],o=0===a?12:20,s=e.readUint32(n,o),d=e.findBox(t,["mdia","mdhd"])[0];if(d){o=0===(a=d.data[d.start])?12:20;var l=e.readUint32(d,o),u=e.findBox(t,["mdia","hdlr"])[0];if(u){var c={soun:"audio",vide:"video"}[e.bin2str(u.data.subarray(u.start+8,u.start+12))];if(c){var h=e.findBox(t,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var f=e.bin2str(h.data.subarray(h.start+12,h.start+16));r.b.log("MP4Demuxer:"+c+":"+f+" found")}i[s]={timescale:l,type:c},i[c]={timescale:l,id:s}}}}}}),i},e.getStartDTS=function(t,i){var r,n,a=void 0;return a=e.findBox(i,["moof","traf"]),r=[].concat.apply([],a.map(function(i){return e.findBox(i,["tfhd"]).map(function(r){var n,a;return n=e.readUint32(r,4),a=t[n].timescale||9e4,e.findBox(i,["tfdt"]).map(function(t){var i,r=void 0;return i=t.data[t.start],r=e.readUint32(t,4),1===i&&(r*=Math.pow(2,32),r+=e.readUint32(t,8)),r})[0]/a})})),n=Math.min.apply(null,r),isFinite(n)?n:0},e.offsetStartDTS=function(t,i,r){e.findBox(i,["moof","traf"]).map(function(i){return e.findBox(i,["tfhd"]).map(function(n){var o=e.readUint32(n,4),s=t[o].timescale||9e4;e.findBox(i,["tfdt"]).map(function(t){var i=t.data[t.start],n=e.readUint32(t,4);if(0===i)e.writeUint32(t,4,n-r*s);else{n*=Math.pow(2,32),n+=e.readUint32(t,8),n-=r*s,n=Math.max(n,0);var o=Math.floor(n/(a+1)),d=Math.floor(n%(a+1));e.writeUint32(t,4,o),e.writeUint32(t,8,d)}})})})},e.prototype.append=function(t,i,r,a){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,d=this.initPTS;if(d===undefined){var l=e.getStartDTS(o,t);this.initPTS=d=l-i,this.observer.trigger(n.a.INIT_PTS_FOUND,{initPTS:d})}e.offsetStartDTS(o,t,d),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,r,a,t)},e.prototype.destroy=function(){},e}();t.a=o},function(e,t,i){"use strict";var r=i(1),n=i(2);var a=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.aesIV=i}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();var o=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.key=i}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),i=new Uint32Array(4),r=0;r<4;r++)i[r]=t.getUint32(4*r);return i},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,i=this.subMix,r=i[0],n=i[1],a=i[2],o=i[3],s=this.invSubMix,d=s[0],l=s[1],u=s[2],c=s[3],h=new Uint32Array(256),f=0,p=0,v=0;for(v=0;v<256;v++)h[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var y=p^p<<1^p<<2^p<<3^p<<4;y=y>>>8^255&y^99,e[f]=y,t[y]=f;var g=h[f],m=h[g],A=h[m],_=257*h[y]^16843008*y;r[f]=_<<24|_>>>8,n[f]=_<<16|_>>>16,a[f]=_<<8|_>>>24,o[f]=_,_=16843009*A^65537*m^257*g^16843008*f,d[y]=_<<24|_>>>8,l[y]=_<<16|_>>>16,u[y]=_<<8|_>>>24,c[y]=_,f?(f=g^h[h[h[A^g]]],p^=h[h[p]]):f=p=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),i=!0,r=0;r<t.length&&i;)i=t[r]===this.key[r],r++;if(!i){this.key=t;var n=this.keySize=t.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var a=this.ksRows=4*(n+6+1),o=void 0,s=void 0,d=this.keySchedule=new Uint32Array(a),l=this.invKeySchedule=new Uint32Array(a),u=this.sBox,c=this.rcon,h=this.invSubMix,f=h[0],p=h[1],v=h[2],y=h[3],g=void 0,m=void 0;for(o=0;o<a;o++)o<n?g=d[o]=t[o]:(m=g,o%n==0?(m=u[(m=m<<8|m>>>24)>>>24]<<24|u[m>>>16&255]<<16|u[m>>>8&255]<<8|u[255&m],m^=c[o/n|0]<<24):n>6&&o%n==4&&(m=u[m>>>24]<<24|u[m>>>16&255]<<16|u[m>>>8&255]<<8|u[255&m]),d[o]=g=(d[o-n]^m)>>>0);for(s=0;s<a;s++)o=a-s,m=3&s?d[o]:d[o-4],l[s]=s<4||o<=4?m:f[u[m>>>24]]^p[u[m>>>16&255]]^v[u[m>>>8&255]]^y[u[255&m]],l[s]=l[s]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,i,r){for(var n,a,o,s=this.keySize+6,d=this.invKeySchedule,l=this.invSBox,u=this.invSubMix,c=u[0],h=u[1],f=u[2],p=u[3],v=this.uint8ArrayToUint32Array_(i),y=v[0],g=v[1],m=v[2],A=v[3],_=new Int32Array(e),E=new Int32Array(_.length),T=void 0,b=void 0,w=void 0,x=void 0,S=void 0,C=void 0,I=void 0,D=void 0,k=void 0,L=void 0,R=void 0,P=void 0,O=void 0,N=void 0,V=this.networkToHostOrderSwap;t<_.length;){for(k=V(_[t]),L=V(_[t+1]),R=V(_[t+2]),P=V(_[t+3]),S=k^d[0],C=P^d[1],I=R^d[2],D=L^d[3],O=4,N=1;N<s;N++)T=c[S>>>24]^h[C>>16&255]^f[I>>8&255]^p[255&D]^d[O],b=c[C>>>24]^h[I>>16&255]^f[D>>8&255]^p[255&S]^d[O+1],w=c[I>>>24]^h[D>>16&255]^f[S>>8&255]^p[255&C]^d[O+2],x=c[D>>>24]^h[S>>16&255]^f[C>>8&255]^p[255&I]^d[O+3],S=T,C=b,I=w,D=x,O+=4;T=l[S>>>24]<<24^l[C>>16&255]<<16^l[I>>8&255]<<8^l[255&D]^d[O],b=l[C>>>24]<<24^l[I>>16&255]<<16^l[D>>8&255]<<8^l[255&S]^d[O+1],w=l[I>>>24]<<24^l[D>>16&255]<<16^l[S>>8&255]<<8^l[255&C]^d[O+2],x=l[D>>>24]<<24^l[S>>16&255]<<16^l[C>>8&255]<<8^l[255&I]^d[O+3],O+=3,E[t]=V(T^y),E[t+1]=V(x^g),E[t+2]=V(w^m),E[t+3]=V(b^A),y=k,g=L,m=R,A=P,t+=4}return r?(n=E.buffer,a=n.byteLength,(o=a&&new DataView(n).getUint8(a-1))?n.slice(0,a-o):n):E.buffer},e.prototype.destroy=function(){this.key=undefined,this.keySize=undefined,this.ksRows=undefined,this.sBox=undefined,this.invSBox=undefined,this.subMix=undefined,this.invSubMix=undefined,this.keySchedule=undefined,this.invKeySchedule=undefined,this.rcon=undefined},e}(),d=i(0),l=i(4);var u=Object(l.a)(),c=function(){function e(t,i){var r=(arguments.length>2&&arguments[2]!==undefined?arguments[2]:{}).removePKCS7Padding,n=r===undefined||r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logEnabled=!0,this.observer=t,this.config=i,this.removePKCS7Padding=n,n)try{var a=u.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(o){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,i,r){var n=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(d.b.log("JS AES decrypt"),this.logEnabled=!1);var l=this.decryptor;l||(this.decryptor=l=new s),l.expandKey(t),r(l.decrypt(e,0,i,this.removePKCS7Padding))}else{this.logEnabled&&(d.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var u=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new o(u,t)),this.fastAesKey.expandKey().then(function(o){new a(u,i).decrypt(e,o)["catch"](function(a){n.onWebCryptoError(a,e,t,i,r)}).then(function(e){r(e)})})["catch"](function(a){n.onWebCryptoError(a,e,t,i,r)})}},e.prototype.onWebCryptoError=function(e,t,i,a,o){this.config.enableSoftwareAES?(d.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,i,a,o)):(d.b.error("decrypting error : "+e.message),this.observer.trigger(r.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=undefined)},e}();function h(e,t){return 255===e[t]&&240==(246&e[t+1])}function f(e,t){return 1&e[t+1]?7:9}function p(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function v(e,t){return!!(t+1<e.length&&h(e,t))}function y(e,t){if(t+1<e.length&&h(e,t)){var i=f(e,t);t+5<e.length&&(i=p(e,t));var r=t+i;if(r===e.length||r+1<e.length&&h(e,r))return!0}return!1}function g(e,t,i,a,o){if(!e.samplerate){var s=function(e,t,i,a){var o,s=void 0,l=void 0,u=void 0,c=void 0,h=navigator.userAgent.toLowerCase(),f=a,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(s=1+((192&t[i+2])>>>6),!((o=(60&t[i+2])>>>2)>p.length-1))return u=(1&t[i+2])<<2,u|=(192&t[i+3])>>>6,d.b.log("manifest codec:"+a+",ADTS data:type:"+s+",sampleingIndex:"+o+"["+p[o]+"Hz],channelConfig:"+u),/firefox/i.test(h)?o>=6?(s=5,c=new Array(4),l=o-3):(s=2,c=new Array(2),l=o):-1!==h.indexOf("android")?(s=2,c=new Array(2),l=o):(s=5,c=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&o>=6?l=o-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(o>=6&&1===u||/vivaldi/i.test(h))||!a&&1===u)&&(s=2,c=new Array(2)),l=o)),c[0]=s<<3,c[0]|=(14&o)>>1,c[1]|=(1&o)<<7,c[1]|=u<<3,5===s&&(c[1]|=(14&l)>>1,c[2]=(1&l)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:p[o],channelCount:u,codec:"mp4a.40."+s,manifestCodec:f};e.trigger(r.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o})}(t,i,a,o);e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,d.b.log("parsed codec:"+e.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)}}function m(e){return 9216e4/e}function A(e,t,i,r,n){var a=function(e,t,i,r,n){var a,o=void 0,s=e.length;return a=f(e,t),o=p(e,t),(o-=a)>0&&t+a+o<=s?{headerLength:a,frameLength:o,stamp:i+r*n}:undefined}(t,i,r,n,m(e.samplerate));if(a){var o=a.stamp,s=a.headerLength,d=a.frameLength,l={unit:t.subarray(i+s,i+s+d),pts:o,dts:o};return e.samples.push(l),e.len+=d,{sample:l,length:d+s}}return undefined}var _=i(7);var E=function(){function e(t,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=r,this.remuxer=i}return e.prototype.resetInitSegment=function(e,t,i,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(_.a.getID3Data(e,0)||[]).length,i=e.length;t<i;t++)if(y(e,t))return d.b.log("ADTS sync word found !"),!0;return!1},e.prototype.append=function(e,t,i,r){for(var n=this._audioTrack,a=_.a.getID3Data(e,0)||[],o=_.a.getTimeStamp(a),s=o?90*o:9e4*t,l=0,u=s,c=e.length,h=a.length,f=[{pts:u,dts:u,data:a}];h<c-1;)if(v(e,h)&&h+5<c){g(n,this.observer,e,h,n.manifestCodec);var p=A(n,e,h,s,l);if(!p){d.b.log("Unable to parse AAC frame");break}h+=p.length,u=p.sample.pts,l++}else _.a.isHeader(e,h)?(a=_.a.getID3Data(e,h),f.push({pts:u,dts:u,data:a}),h+=a.length):h++;this.remuxer.remux(n,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},t,i,r)},e.prototype.destroy=function(){},e}(),T=i(8),b={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,i,r,n){if(i+24>t.length)return undefined;var a=this.parseHeader(t,i);if(a&&i+a.frameLength<=t.length){var o=r+n*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(i,i+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),e.len+=a.frameLength,{sample:s,length:a.frameLength}}return undefined},parseHeader:function(e,t){var i=e[t+1]>>3&3,r=e[t+1]>>1&3,n=e[t+2]>>4&15,a=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==i&&0!==n&&15!==n&&3!==a){var s=3===i?3-r:3===r?3:4,d=1e3*b.BitratesMap[14*s+n-1],l=3===i?0:2===i?1:2,u=b.SamplingRateMap[3*l+a],c=e[t+3]>>6==3?1:2,h=b.SamplesCoefficients[i][r],f=b.BytesInSlot[r],p=8*h*f;return{sampleRate:u,channelCount:c,frameLength:parseInt(h*d/u+o,10)*f,samplesPerFrame:p}}return undefined},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var i=this.parseHeader(e,t),r=4;i&&i.frameLength&&(r=i.frameLength);var n=t+r;if(n===e.length||n+1<e.length&&this.isHeaderPattern(e,n))return!0}return!1}},w=b;var x=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,i=e.byteLength-t,r=new Uint8Array(4),n=Math.min(4,t);if(0===n)throw new Error("no bytes available");r.set(e.subarray(i,i+n)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},e.prototype.skipBits=function(e){var t=void 0;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),i=this.word>>>32-t;return e>32&&d.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?i<<t|this.readBits(t):i},e.prototype.skipLZ=function(){var e=void 0;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t=8,i=8,r=void 0;for(r=0;r<e;r++)0!==i&&(i=(t+this.readEG()+256)%256),t=0===i?t:i},e.prototype.readSPS=function(){var e,t,i,r,n=0,a=0,o=0,s=0,d=void 0,l=void 0,u=void 0,c=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),y=this.skipEG.bind(this),g=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(c(),e=c(),h(5),v(3),c(),g(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var A=f();if(3===A&&v(1),g(),g(),v(1),p())for(l=3!==A?8:12,u=0;u<l;u++)p()&&m(u<6?16:64)}g();var _=f();if(0===_)f();else if(1===_)for(v(1),y(),y(),d=f(),u=0;u<d;u++)y();g(),v(1),t=f(),i=f(),0===(r=h(1))&&v(1),v(1),p()&&(n=f(),a=f(),o=f(),s=f());var E=[1,1];if(p()&&p())switch(c()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[c()<<8|c(),c()<<8|c()]}return{width:Math.ceil(16*(t+1)-2*n-2*a),height:(2-r)*(i+1)*16-(r?2:4)*(o+s),pixelRatio:E}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();var S=function(){function e(t,i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.decryptdata=r,this.discardEPB=n,this.decrypter=new c(t,i,{removePKCS7Padding:!1})}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,i,r){var n=e[t].unit,a=n.subarray(16,n.length-n.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,function(a){a=new Uint8Array(a),n.set(a,16),r||s.decryptAacSamples(e,t+1,i)})},e.prototype.decryptAacSamples=function(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,i,r),!r)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t),r=0,n=32;n<=e.length-16;n+=160,r+=16)i.set(e.subarray(n,n+16),r);return i},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var i=0,r=32;r<=e.length-16;r+=160,i+=16)e.set(t.subarray(i,i+16),r);return e},e.prototype.decryptAvcSample=function(e,t,i,r,n,a){var o=this.discardEPB(n.data),s=this.getAvcEncryptedData(o),d=this;this.decryptBuffer(s.buffer,function(s){n.data=d.getAvcDecryptedUnit(o,s),a||d.decryptAvcSamples(e,t,i+1,r)})},e.prototype.decryptAvcSamples=function(e,t,i,r){for(;;t++,i=0){if(t>=e.length)return void r();for(var n=e[t].units;!(i>=n.length);i++){var a=n[i];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,i,r,a,o),!o)return}}}},e}();var C={video:1,audio:2,id3:3,text:4},I=function(){function e(t,i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=r,this.typeSupported=n,this.remuxer=i,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new S(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var i=e._syncOffset(t);return!(i<0)&&(i&&d.b.warn("MPEG2-TS detected but first sync word found @ offset "+i+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),i=0;i<t;){if(71===e[i]&&71===e[i+188]&&71===e[i+376])return i;i++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":undefined,type:e,id:C[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:undefined,isAAC:"audio"===e||undefined,duration:"audio"===e?t:undefined}},e.prototype.resetInitSegment=function(t,i,r,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",n),this._audioTrack=e.createTrack("audio",n),this._id3Track=e.createTrack("id3",n),this._txtTrack=e.createTrack("text",n),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=i,this.videoCodec=r,this._duration=n},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,i,a,o){var s=void 0,l=t.length,u=void 0,c=void 0,h=void 0,f=void 0,p=!1;this.contiguous=a;var v=this.pmtParsed,y=this._avcTrack,g=this._audioTrack,m=this._id3Track,A=y.pid,_=g.pid,E=m.pid,T=this._pmtId,b=y.pesData,w=g.pesData,x=m.pesData,S=this._parsePAT,C=this._parsePMT,I=this._parsePES,D=this._parseAVCPES.bind(this),k=this._parseAACPES.bind(this),L=this._parseMPEGPES.bind(this),R=this._parseID3PES.bind(this),P=e._syncOffset(t);for(l-=(l+P)%188,s=P;s<l;s+=188)if(71===t[s]){if(u=!!(64&t[s+1]),c=((31&t[s+1])<<8)+t[s+2],(48&t[s+3])>>4>1){if((h=s+5+t[s+4])===s+188)continue}else h=s+4;switch(c){case A:u&&(b&&(f=I(b))&&f.pts!==undefined&&D(f,!1),b={data:[],size:0}),b&&(b.data.push(t.subarray(h,s+188)),b.size+=s+188-h);break;case _:u&&(w&&(f=I(w))&&f.pts!==undefined&&(g.isAAC?k(f):L(f)),w={data:[],size:0}),w&&(w.data.push(t.subarray(h,s+188)),w.size+=s+188-h);break;case E:u&&(x&&(f=I(x))&&f.pts!==undefined&&R(f),x={data:[],size:0}),x&&(x.data.push(t.subarray(h,s+188)),x.size+=s+188-h);break;case 0:u&&(h+=t[h]+1),T=this._pmtId=S(t,h);break;case T:u&&(h+=t[h]+1);var O=C(t,h,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(A=O.avc)>0&&(y.pid=A),(_=O.audio)>0&&(g.pid=_,g.isAAC=O.isAAC),(E=O.id3)>0&&(m.pid=E),p&&!v&&(d.b.log("reparse from beginning"),p=!1,s=P-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(r.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});b&&(f=I(b))&&f.pts!==undefined?(D(f,!0),y.pesData=null):y.pesData=b,w&&(f=I(w))&&f.pts!==undefined?(g.isAAC?k(f):L(f),g.pesData=null):(w&&w.size&&d.b.log("last AAC PES packet truncated,might overlap between fragments"),g.pesData=w),x&&(f=I(x))&&f.pts!==undefined?(R(f),m.pesData=null):m.pesData=x,null==this.sampleAes?this.remuxer.remux(g,y,m,this._txtTrack,i,a,o):this.decryptAndRemux(g,y,m,this._txtTrack,i,a,o)},e.prototype.decryptAndRemux=function(e,t,i,r,n,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,i,r,n,a,o)})}else this.decryptAndRemuxAvc(e,t,i,r,n,a,o)},e.prototype.decryptAndRemuxAvc=function(e,t,i,r,n,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,i,r,n,a,o)})}else this.remuxer.remux(e,t,i,r,n,a,o)},e.prototype.destroy=function(){this._initPTS=this._initDTS=undefined,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,i,r){var n,a=void 0,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(n=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<n;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){d.b.log("unkown stream type:"+e[t]);break}case 15:-1===o.audio&&(o.audio=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 219:if(!r){d.b.log("unkown stream type:"+e[t]);break}case 27:-1===o.avc&&(o.avc=a);break;case 3:case 4:i?-1===o.audio&&(o.audio=a,o.isAAC=!1):d.b.log("MPEG audio found, not supported in this browser for now");break;case 36:d.b.warn("HEVC stream type found, not supported for now");break;default:d.b.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return o},e.prototype._parsePES=function(e){var t=0,i=void 0,r=void 0,n=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=e.data;if(!e||0===e.size)return null;for(;c[0].length<19&&c.length>1;){var h=new Uint8Array(c[0].length+c[1].length);h.set(c[0]),h.set(c[1],c[0].length),c[0]=h,c.splice(1,1)}if(1===((i=c[0])[0]<<16)+(i[1]<<8)+i[2]){if((n=(i[4]<<8)+i[5])&&n>e.size-6)return null;192&(r=i[7])&&((s=536870912*(14&i[9])+4194304*(255&i[10])+16384*(254&i[11])+128*(255&i[12])+(254&i[13])/2)>4294967295&&(s-=8589934592),64&r?((l=536870912*(14&i[14])+4194304*(255&i[15])+16384*(254&i[16])+128*(255&i[17])+(254&i[18])/2)>4294967295&&(l-=8589934592),s-l>54e5&&(d.b.warn(Math.round((s-l)/9e4)+"s delta between PTS and DTS, align them"),s=l)):l=s),u=(a=i[8])+9,e.size-=u,o=new Uint8Array(e.size);for(var f=0,p=c.length;f<p;f++){var v=(i=c[f]).byteLength;if(u){if(u>v){u-=v;continue}i=i.subarray(u),v-=u,u=0}o.set(i,t),t+=v}return n&&(n-=a+3),{data:o,pts:s,dts:l,len:n}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var i=t.samples,r=i.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,i.push(e)):t.dropped++}e.debug.length&&d.b.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var i=this,r=this._avcTrack,n=this._parseAVCNALu(e.data),a=void 0,o=this.avcSample,s=void 0,d=!1,l=void 0,u=this.pushAccesUnit.bind(this),c=function(e,t,i,r){return{key:e,pts:t,dts:i,units:[],debug:r}};e.data=null,o&&n.length&&!r.audFound&&(u(o,r),o=this.avcSample=c(!1,e.pts,e.dts,"")),n.forEach(function(t){switch(t.type){case 1:s=!0,o||(o=i.avcSample=c(!0,e.pts,e.dts,"")),o.frame=!0;var n=t.data;if(d&&n.length>4){var h=new x(n).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(o.key=!0)}break;case 5:s=!0,o||(o=i.avcSample=c(!0,e.pts,e.dts,"")),o.key=!0,o.frame=!0;break;case 6:s=!0,(a=new x(i.discardEPB(t.data))).readUByte();for(var f=0,p=0,v=!1,y=0;!v&&a.bytesAvailable>1;){f=0;do{f+=y=a.readUByte()}while(255===y);p=0;do{p+=y=a.readUByte()}while(255===y);if(4===f&&0!==a.bytesAvailable){if(v=!0,181===a.readUByte())if(49===a.readUShort())if(1195456820===a.readUInt())if(3===a.readUByte()){var g=a.readUByte(),m=31&g,A=[g,a.readUByte()];for(l=0;l<m;l++)A.push(a.readUByte()),A.push(a.readUByte()),A.push(a.readUByte());i._insertSampleInOrder(i._txtTrack.samples,{type:3,pts:e.pts,bytes:A})}}else if(p<a.bytesAvailable)for(l=0;l<p;l++)a.readUByte()}break;case 7:if(s=!0,d=!0,!r.sps){var _=(a=new x(t.data)).readSPS();r.width=_.width,r.height=_.height,r.pixelRatio=_.pixelRatio,r.sps=[t.data],r.duration=i._duration;var E=t.data.subarray(1,4),T="avc1.";for(l=0;l<3;l++){var b=E[l].toString(16);b.length<2&&(b="0"+b),T+=b}r.codec=T}break;case 8:s=!0,r.pps||(r.pps=[t.data]);break;case 9:s=!1,r.audFound=!0,o&&u(o,r),o=i.avcSample=c(!1,e.pts,e.dts,"");break;case 12:s=!1;break;default:s=!1,o&&(o.debug+="unknown NAL "+t.type+" ")}o&&s&&o.units.push(t)}),t&&o&&(u(o,r),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var i=e.length;if(i>0){if(t.pts>=e[i-1].pts)e.push(t);else for(var r=i-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var i=this._avcTrack.samples;e=i[i.length-1]}if(e){var r=e.units;t=r[r.length-1]}return t},e.prototype._parseAVCNALu=function(e){var t=0,i=e.byteLength,r=void 0,n=void 0,a=this._avcTrack,o=a.naluState||0,s=o,d=[],l=void 0,u=-1,c=void 0;for(-1===o&&(u=0,c=31&e[0],o=0,t=1);t<i;)if(r=e[t++],o)if(1!==o)if(r)if(1===r){if(u>=0)l={data:e.subarray(u,t-o-1),type:c},d.push(l);else{var h=this._getLastNalUnit();if(h&&(s&&t<=4-s&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-s)),(n=t-o-1)>0)){var f=new Uint8Array(h.data.byteLength+n);f.set(h.data,0),f.set(e.subarray(0,n),h.data.byteLength),h.data=f}}t<i?(u=t,c=31&e[t],o=0):o=-1}else o=0;else o=3;else o=r?0:2;else o=r?0:1;if(u>=0&&o>=0&&(l={data:e.subarray(u,i),type:c,state:o},d.push(l)),0===d.length){var p=this._getLastNalUnit();if(p){var v=new Uint8Array(p.data.byteLength+e.byteLength);v.set(p.data,0),v.set(e,p.data.byteLength),p.data=v}}return a.naluState=o,d},e.prototype.discardEPB=function(e){for(var t,i=e.byteLength,r=[],n=1,a=void 0;n<i-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(r.push(n+2),n+=2):n++;if(0===r.length)return e;t=i-r.length,a=new Uint8Array(t);var o=0;for(n=0;n<t;o++,n++)o===r[0]&&(o++,r.shift()),a[n]=e[o];return a},e.prototype._parseAACPES=function(e){var t,i,a=this._audioTrack,o=e.data,s=e.pts,l=this.aacOverFlow,u=this.aacLastPTS,c=void 0,h=void 0,f=void 0;if(l){var p=new Uint8Array(l.byteLength+o.byteLength);p.set(l,0),p.set(o,l.byteLength),o=p}for(h=0,i=o.length;h<i-1&&!v(o,h);h++);if(h){var y=void 0,_=void 0;if(h<i-1?(y="AAC PES did not start with ADTS header,offset:"+h,_=!1):(y="no ADTS header found in AAC PES",_=!0),d.b.warn("parsing error:"+y),this.observer.trigger(r.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:_,reason:y}),_)return}if(g(a,this.observer,o,h,this.audioCodec),c=0,t=m(a.samplerate),l&&u){var E=u+t;Math.abs(E-s)>1&&(d.b.log("AAC: align PTS for overlapping frames by "+Math.round((E-s)/90)),s=E)}for(;h<i;)if(v(o,h)&&h+5<i){var T=A(a,o,h,s,c);if(!T)break;h+=T.length,f=T.sample.pts,c++}else h++;l=h<i?o.subarray(h,i):null,this.aacOverFlow=l,this.aacLastPTS=f},e.prototype._parseMPEGPES=function(e){for(var t=e.data,i=t.length,r=0,n=0,a=e.pts;n<i;)if(w.isHeader(t,n)){var o=w.appendFrame(this._audioTrack,t,n,a,r);if(!o)break;n+=o.length,r++}else n++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();var D=function(){function e(t,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=r,this.remuxer=i}return e.prototype.resetInitSegment=function(e,t,i,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t=void 0,i=void 0,r=_.a.getID3Data(e,0);if(r&&_.a.getTimeStamp(r)!==undefined)for(t=r.length,i=Math.min(e.length-1,t+100);t<i;t++)if(w.probe(e,t))return d.b.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,i,r){for(var n=_.a.getID3Data(e,0),a=_.a.getTimeStamp(n),o=a?90*a:9e4*t,s=n.length,d=e.length,l=0,u=0,c=this._audioTrack,h=[{pts:o,dts:o,data:n}];s<d;)if(w.isHeader(e,s)){var f=w.appendFrame(c,e,s,o,l);if(!f)break;s+=f.length,u=f.sample.pts,l++}else _.a.isHeader(e,s)?(n=_.a.getID3Data(e,s),h.push({pts:u,dts:u,data:n}),s+=n.length):s++;this.remuxer.remux(c,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,i,r)},e.prototype.destroy=function(){},e}();var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();var L=Math.pow(2,32)-1,R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.init=function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t=void 0;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:i,audio:r};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),d=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,d,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,n))},e.box=function(e){for(var t=Array.prototype.slice.call(arguments,1),i=8,r=t.length,n=r,a=void 0;r--;)i+=t[r].byteLength;for((a=new Uint8Array(i))[0]=i>>24&255,a[1]=i>>16&255,a[2]=i>>8&255,a[3]=255&i,a.set(e,4),r=0,i=8;r<n;r++)a.set(t[r],i),i+=t[r].byteLength;return a},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,i){i*=t;var r=Math.floor(i/(L+1)),n=Math.floor(i%(L+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,i,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,i))},e.moov=function(t){for(var i=t.length,r=[];i--;)r[i]=e.trak(t[i]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))},e.mvex=function(t){for(var i=t.length,r=[];i--;)r[i]=e.trex(t[i]);return e.box.apply(null,[e.types.mvex].concat(r))},e.mvhd=function(t,i){i*=t;var r=Math.floor(i/(L+1)),n=Math.floor(i%(L+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var i=t.samples||[],r=new Uint8Array(4+i.length),n=void 0,a=void 0;for(a=0;a<i.length;a++)n=i[a].flags,r[a+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,r)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var i=[],r=[],n=void 0,a=void 0,o=void 0;for(n=0;n<t.sps.length;n++)o=(a=t.sps[n]).byteLength,i.push(o>>>8&255),i.push(255&o),i=i.concat(Array.prototype.slice.call(a));for(n=0;n<t.pps.length;n++)o=(a=t.pps[n]).byteLength,r.push(o>>>8&255),r.push(255&o),r=r.concat(Array.prototype.slice.call(a));var s=e.box(e.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|t.sps.length].concat(i).concat([t.pps.length]).concat(r))),d=t.width,l=t.height,u=t.pixelRatio[0],c=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>8&255,255&d,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var i=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var i=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var i=t.id,r=t.duration*t.timescale,n=t.width,a=t.height,o=Math.floor(r/(L+1)),s=Math.floor(r%(L+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,i){var r=e.sdtp(t),n=t.id,a=Math.floor(i/(L+1)),o=Math.floor(i%(L+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,r.length+16+20+8+16+8+8),r)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var i=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,i){var r=t.samples||[],n=r.length,a=12+16*n,o=new Uint8Array(a),s=void 0,d=void 0,l=void 0,u=void 0,c=void 0,h=void 0;for(i+=8+a,o.set([0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,i>>>24&255,i>>>16&255,i>>>8&255,255&i],0),s=0;s<n;s++)l=(d=r[s]).duration,u=d.size,c=d.flags,h=d.cts,o.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,u>>>24&255,u>>>16&255,u>>>8&255,255&u,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSync,61440&c.degradPrio,15&c.degradPrio,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*s);return e.box(e.types.trun,o)},e.initSegment=function(t){e.types||e.init();var i=e.moov(t),r=void 0;return(r=new Uint8Array(e.FTYP.byteLength+i.byteLength)).set(e.FTYP),r.set(i,e.FTYP.byteLength),r},e}();var P=function(){function e(t,i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=i,this.typeSupported=r;var a=navigator.userAgent;this.isSafari=n&&n.indexOf("Apple")>-1&&a&&!a.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,i,n,a,o,s){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated){var l=e.samples.length,u=t.samples.length,c=a,h=a;if(l&&u){var f=(e.samples[0].dts-t.samples[0].dts)/t.inputTimeScale;c+=Math.max(0,f),h+=Math.max(0,-f)}if(l){e.timescale||(d.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var p=this.remuxAudio(e,c,o,s);if(u){var v=void 0;p&&(v=p.endPTS-p.startPTS),t.timescale||(d.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,h,o,v,s)}}else if(u){var y=this.remuxVideo(t,h,o,0,s);y&&e.codec&&this.remuxEmptyAudio(e,c,o,y)}}i.samples.length&&this.remuxID3(i,a),n.samples.length&&this.remuxText(n,a),this.observer.trigger(r.a.FRAG_PARSED)},e.prototype.generateIS=function(e,t,i){var a=this.observer,o=e.samples,s=t.samples,l=this.typeSupported,u="audio/mp4",c={},h={tracks:c},f=this._initPTS===undefined,p=void 0,v=void 0;if(f&&(p=v=Infinity),e.config&&o.length&&(e.timescale=e.samplerate,d.b.log("audio sampling rate : "+e.samplerate),e.isAAC||(l.mpeg?(u="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3")),c.audio={container:u,codec:e.codec,initSegment:!e.isAAC&&l.mpeg?new Uint8Array:R.initSegment([e]),metadata:{channelCount:e.channelCount}},f&&(p=v=o[0].pts-e.inputTimeScale*i)),t.sps&&t.pps&&s.length){var y=t.inputTimeScale;t.timescale=y,c.video={container:"video/mp4",codec:t.codec,initSegment:R.initSegment([t]),metadata:{width:t.width,height:t.height}},f&&(p=Math.min(p,s[0].pts-y*i),v=Math.min(v,s[0].dts-y*i),this.observer.trigger(r.a.INIT_PTS_FOUND,{initPTS:p}))}Object.keys(c).length?(a.trigger(r.a.FRAG_PARSING_INIT_SEGMENT,h),this.ISGenerated=!0,f&&(this._initPTS=p,this._initDTS=v)):a.trigger(r.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,i,a,o){var s,l,u,c=8,h=e.timescale,f=void 0,p=void 0,v=void 0,y=void 0,g=e.samples,m=[],A=g.length,_=this._PTSNormalize,E=this._initDTS,T=this.nextAvcDts,b=this.isSafari;if(0!==A){b&&(i|=g.length&&T&&(o&&Math.abs(t-T/h)<.1||Math.abs(g[0].pts-T-E)<h/5)),i||(T=t*h),g.forEach(function(e){e.pts=_(e.pts-E,T),e.dts=_(e.dts-E,T)}),g.sort(function(e,t){var i=e.dts-t.dts,r=e.pts-t.pts;return i||r||e.id-t.id});var w=g.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(w<0){d.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(w/90)+" ms to overcome this issue");for(var x=0;x<g.length;x++)g[x].dts+=w}var S=g[0];y=Math.max(S.dts,0),v=Math.max(S.pts,0);var C=Math.round((y-T)/90);i&&C&&(C>1?d.b.log("AVC:"+C+" ms hole between fragments detected,filling it"):C<-1&&d.b.log("AVC:"+-C+" ms overlapping between fragments detected"),y=T,g[0].dts=y,v=Math.max(v-C,T),g[0].pts=v,d.b.log("Video/PTS/DTS adjusted: "+Math.round(v/90)+"/"+Math.round(y/90)+",delta:"+C+" ms")),y,S=g[g.length-1],u=Math.max(S.dts,0),l=Math.max(S.pts,0,u),b&&(f=Math.round((u-y)/(g.length-1)));for(var I=0,D=0,k=0;k<A;k++){for(var L=g[k],P=L.units,O=P.length,N=0,V=0;V<O;V++)N+=P[V].data.length;D+=N,I+=O,L.length=N,L.dts=b?y+k*f:Math.max(L.dts,y),L.pts=Math.max(L.pts,L.dts)}var M=D+4*I+8;try{p=new Uint8Array(M)}catch(re){return void this.observer.trigger(r.a.ERROR,{type:n.b.MUX_ERROR,details:n.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:M,reason:"fail allocating video mdat "+M})}var U=new DataView(p.buffer);U.setUint32(0,M),p.set(R.types.mdat,4);for(var B=0;B<A;B++){for(var F=g[B],G=F.units,j=0,K=void 0,z=0,$=G.length;z<$;z++){var Y=G[z],H=Y.data,q=Y.data.byteLength;U.setUint32(c,q),c+=4,p.set(H,c),c+=q,j+=4+q}if(b)K=Math.max(0,f*Math.round((F.pts-F.dts)/f));else{if(B<A-1)f=g[B+1].dts-F.dts;else{var W=this.config,X=F.dts-g[B>0?B-1:B].dts;if(W.stretchShortVideoTrack){var Q=W.maxBufferHole,Z=Math.floor(Q*h),J=(a?v+a*h:this.nextAudioPts)-F.pts;J>Z?((f=J-X)<0&&(f=X),d.b.log("It is approximately "+J/90+" ms to the next segment; using duration "+f/90+" ms for the last video frame.")):f=X}else f=X}K=Math.round(F.pts-F.dts)}m.push({size:j,duration:f,cts:K,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:F.key?2:1,isNonSync:F.key?0:1}})}this.nextAvcDts=u+f;var ee=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,m.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var te=m[0].flags;te.dependsOn=2,te.isNonSync=0}e.samples=m,s=R.moof(e.sequenceNumber++,y,e),e.samples=[];var ie={data1:s,data2:p,startPTS:v/h,endPTS:(l+f)/h,startDTS:y/h,endDTS:this.nextAvcDts/h,type:"video",hasAudio:!1,hasVideo:!0,nb:m.length,dropped:ee};return this.observer.trigger(r.a.FRAG_PARSING_DATA,ie),ie}},e.prototype.remuxAudio=function(e,t,i,a){var o=e.inputTimeScale,s=e.timescale,l=o/s,u=(e.isAAC?1024:1152)*l,c=this._PTSNormalize,h=this._initDTS,f=!e.isAAC&&this.typeSupported.mpeg,p=void 0,v=void 0,y=void 0,g=void 0,m=void 0,A=void 0,_=void 0,E=e.samples,T=[],b=this.nextAudioPts;if(i|=E.length&&b&&(a&&Math.abs(t-b/o)<.1||Math.abs(E[0].pts-b-h)<20*u),E.forEach(function(e){e.pts=e.dts=c(e.pts-h,t*o)}),0!==(E=E.filter(function(e){return e.pts>=0})).length){if(i||(b=a?t*o:E[0].pts),e.isAAC)for(var w=this.config.maxAudioFramesDrift,x=0,S=b;x<E.length;){var C,I=E[x];C=I.pts-S;var D=Math.abs(1e3*C/o);if(C<=-w*u)d.b.warn("Dropping 1 audio frame @ "+(S/o).toFixed(3)+"s due to "+Math.round(D)+" ms overlap."),E.splice(x,1),e.len-=I.unit.length;else if(C>=w*u&&D<1e4&&S){var L=Math.round(C/u);d.b.warn("Injecting "+L+" audio frame @ "+(S/o).toFixed(3)+"s due to "+Math.round(1e3*C/o)+" ms gap.");for(var P=0;P<L;P++){var O=Math.max(S,0);(y=k.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(d.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),y=I.unit.subarray()),E.splice(x,0,{unit:y,pts:O,dts:O}),e.len+=y.length,S+=u,x++}I.pts=I.dts=S,S+=u,x++}else Math.abs(C),I.pts=I.dts=S,S+=u,x++}for(var N=0,V=E.length;N<V;N++){var M=E[N],U=M.unit,B=M.pts;if(_!==undefined)v.duration=Math.round((B-_)/l);else{var F=Math.round(1e3*(B-b)/o),G=0;if(i&&e.isAAC&&F){if(F>0&&F<1e4)G=Math.round((B-b)/u),d.b.log(F+" ms hole between AAC samples detected,filling it"),G>0&&((y=k.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(y=U.subarray()),e.len+=G*y.length);else if(F<-12){d.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(b/o).toFixed(3)+"s/"+(B/o).toFixed(3)+"s/"+-F+"ms"),e.len-=U.byteLength;continue}B=b}if(A=B,!(e.len>0))return;var j=f?e.len:e.len+8;p=f?0:8;try{g=new Uint8Array(j)}catch(X){return void this.observer.trigger(r.a.ERROR,{type:n.b.MUX_ERROR,details:n.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating audio mdat "+j})}f||(new DataView(g.buffer).setUint32(0,j),g.set(R.types.mdat,4));for(var K=0;K<G;K++)(y=k.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(d.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),y=U.subarray()),g.set(y,p),p+=y.byteLength,v={size:y.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(v)}g.set(U,p);var z=U.byteLength;p+=z,v={size:z,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(v),_=B}var $=0,Y=T.length;if(Y>=2&&($=T[Y-2].duration,v.duration=$),Y){this.nextAudioPts=b=_+l*$,e.len=0,e.samples=T,m=f?new Uint8Array:R.moof(e.sequenceNumber++,A/l,e),e.samples=[];var H=A/o,q=b/o,W={data1:m,data2:g,startPTS:H,endPTS:q,startDTS:H,endDTS:q,type:"audio",hasAudio:!0,hasVideo:!1,nb:Y};return this.observer.trigger(r.a.FRAG_PARSING_DATA,W),W}return null}},e.prototype.remuxEmptyAudio=function(e,t,i,r){var n=e.inputTimeScale,a=n/(e.samplerate?e.samplerate:n),o=this.nextAudioPts,s=(o!==undefined?o:r.startDTS*n)+this._initDTS,l=r.endDTS*n+this._initDTS,u=1024*a,c=Math.ceil((l-s)/u),h=k.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(d.b.warn("remux empty Audio"),h){for(var f=[],p=0;p<c;p++){var v=s+p*u;f.push({unit:h,pts:v,dts:v}),e.len+=h.length}e.samples=f,this.remuxAudio(e,t,i)}else d.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e,t){var i=e.samples.length,n=void 0,a=e.inputTimeScale,o=this._initPTS,s=this._initDTS;if(i){for(var d=0;d<i;d++)(n=e.samples[d]).pts=(n.pts-o)/a,n.dts=(n.dts-s)/a;this.observer.trigger(r.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t},e.prototype.remuxText=function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var i=e.samples.length,n=void 0,a=e.inputTimeScale,o=this._initPTS;if(i){for(var s=0;s<i;s++)(n=e.samples[s]).pts=(n.pts-o)/a;this.observer.trigger(r.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t},e.prototype._PTSNormalize=function(e,t){var i=void 0;if(t===undefined)return e;for(i=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=i;return e},e}();var O=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,i,n,a,o,s,d){var l=this.observer,u="";e&&(u+="audio"),t&&(u+="video"),l.trigger(r.a.FRAG_PARSING_DATA,{data1:d,startPTS:a,startDTS:a,type:u,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(r.a.FRAG_PARSED)},e}();var N=Object(l.a)(),V=function(){function e(t,i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.typeSupported=i,this.config=r,this.vendor=n}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,i,n,a,o,s,d,l,u,h,f){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var p=this.decrypter;null==p&&(p=this.decrypter=new c(this.observer,this.config));var v=this,y=void 0;try{y=N.now()}catch(g){y=Date.now()}p.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var c=void 0;try{c=N.now()}catch(g){c=Date.now()}v.observer.trigger(r.a.FRAG_DECRYPTED,{stats:{tstart:y,tdecrypt:c}}),v.pushDecrypted(new Uint8Array(e),t,new Uint8Array(i),n,a,o,s,d,l,u,h,f)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(i),n,a,o,s,d,l,u,h,f)},e.prototype.pushDecrypted=function(e,t,i,a,o,s,d,l,u,c,h,f){var p=this.demuxer;if(!p||(d||l)&&!this.probe(e)){for(var v=this.observer,y=this.typeSupported,g=this.config,m=[{demux:I,remux:P},{demux:T.a,remux:O},{demux:E,remux:P},{demux:D,remux:P}],A=0,_=m.length;A<_;A++){var b=m[A],w=b.demux.probe;if(w(e)){var x=this.remuxer=new b.remux(v,g,y,this.vendor);p=new b.demux(v,x,g,y),this.probe=w;break}}if(!p)return void v.trigger(r.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var S=this.remuxer;(d||l)&&(p.resetInitSegment(i,a,o,c),S.resetInitSegment()),d&&(p.resetTimeStamp(f),S.resetTimeStamp(f)),"function"==typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,s,u,h)},e}();t.a=V},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(5),n=i.n(r),a=i(2),o=i(1),s=i(0),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var l=new Set(["hlsEventGeneric","hlsHandlerDestroying","hlsHandlerDestroyed"]),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.prototype.onHandlerDestroying=function(){},e.prototype.onHandlerDestroyed=function(){},e.prototype.isEventHandler=function(){return"object"===d(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(l.has(e))throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){try{(function(e,t){var i="on"+e.replace("hls","");if("function"!=typeof this[i])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+i+")");return this[i].bind(this,t)}).call(this,e,t).call()}catch(i){s.b.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),this.hls.trigger(o.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:i})}},e}(),c=i(8),h=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return h(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=n.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var v=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this._elementaryStreams=((t={})[e.ElementaryStreamTypes.AUDIO]=!1,t[e.ElementaryStreamTypes.VIDEO]=!1,t)}return e.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},e.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},e.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t},e.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var i=e;return e&&e.method&&e.uri&&!e.iv&&((i=new f).method=e.method,i.baseuri=e.baseuri,i.reluri=e.reluri,i.iv=this.createInitializationVector(t)),i},p(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=n.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var i=this.lastByteRangeEndOffset;e[0]=i||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}],[{key:"ElementaryStreamTypes",get:function(){return{AUDIO:"audio",VIDEO:"video"}}}]),e}();var y=/^(\d+)x(\d+)$/,g=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,m=function(){function e(t){for(var i in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(i)&&(this[i]=t[i])}return e.prototype.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?Infinity:t},e.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var i=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)i[r]=parseInt(t.slice(2*r,2*r+2),16);return i}return null},e.prototype.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?Infinity:t},e.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},e.prototype.enumeratedString=function(e){return this[e]},e.prototype.decimalResolution=function(e){var t=y.exec(this[e]);return null===t?undefined:{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t=void 0,i={};for(g.lastIndex=0;null!==(t=g.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),i[t[1]]=r}return i},e}(),A={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function _(e,t){return window.MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var E=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,T=/#EXT-X-MEDIA:(.*)/g,b=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),w=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,x=/\.(mp4|m4s|m4v|m4a)$/i,S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.findGroup=function(e,t){if(!e)return null;for(var i=null,r=0;r<e.length;r++){var n=e[r];n.id===t&&(i=n)}return i},e.convertAVC1ToAVCOTI=function(e){var t=void 0,i=e.split(".");return i.length>2?(t=i.shift()+".",t+=parseInt(i.shift()).toString(16),t+=("000"+parseInt(i.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return n.a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,i){var r=[],n=void 0;function a(e,t){["video","audio"].forEach(function(i){var r=e.filter(function(e){return function(e,t){var i=A[t];return!!i&&!0===i[e.slice(0,4)]}(e,i)});if(r.length){var n=r.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[i+"Codec"]=n.length>0?n[0]:r[0],e=e.filter(function(e){return-1===r.indexOf(e)})}}),t.unknownCodecs=e}for(E.lastIndex=0;null!=(n=E.exec(t));){var o={},s=o.attrs=new m(n[1]);o.url=e.resolve(n[2],i);var d=s.decimalResolution("RESOLUTION");d&&(o.width=d.width,o.height=d.height),o.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),o.name=s.NAME,a([].concat((s.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=e.convertAVC1ToAVCOTI(o.videoCodec)),r.push(o)}return r},e.parseMasterPlaylistMedia=function(t,i,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[],a=void 0,o=[],s=0;for(T.lastIndex=0;null!==(a=T.exec(t));){var d={},l=new m(a[1]);if(l.TYPE===r){if(d.groupId=l["GROUP-ID"],d.name=l.NAME,d.type=r,d["default"]="YES"===l.DEFAULT,d.autoselect="YES"===l.AUTOSELECT,d.forced="YES"===l.FORCED,l.URI&&(d.url=e.resolve(l.URI,i)),d.lang=l.LANGUAGE,d.name||(d.name=d.lang),n.length){var u=e.findGroup(n,d.groupId);d.audioCodec=u?u.codec:n[0].codec}d.id=s++,o.push(d)}}return o},e.parseLevelPlaylist=function(e,t,i,r,n){var a=0,o=0,d={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},l=new f,u=0,c=null,h=new v,p=void 0,y=void 0;for(b.lastIndex=0;null!==(p=b.exec(e));){var g=p[1];if(g){h.duration=parseFloat(g);var A=(" "+p[2]).slice(1);h.title=A||null,h.tagList.push(A?["INF",g,A]:["INF",g])}else if(p[3]){if(!isNaN(h.duration)){var _=a++;h.type=r,h.start=o,h.levelkey=l,h.sn=_,h.level=i,h.cc=u,h.urlId=n,h.baseurl=t,h.relurl=(" "+p[3]).slice(1),d.programDateTime&&(c?h.rawProgramDateTime?h.pdt=Date.parse(h.rawProgramDateTime):h.pdt=c.pdt+1e3*c.duration:h.pdt=Date.parse(d.programDateTime),h.endPdt=h.pdt+1e3*h.duration),d.fragments.push(h),c=h,o+=h.duration,h=new v}}else if(p[4]){if(h.rawByteRange=(" "+p[4]).slice(1),c){var E=c.byteRangeEndOffset;E&&(h.lastByteRangeEndOffset=E)}}else if(p[5])h.rawProgramDateTime=(" "+p[5]).slice(1),h.tagList.push(["PROGRAM-DATE-TIME",h.rawProgramDateTime]),d.programDateTime===undefined&&(d.programDateTime=new Date(new Date(Date.parse(p[5]))-1e3*o));else{for(p=p[0].match(w),y=1;y<p.length&&p[y]===undefined;y++);var T=(" "+p[y+1]).slice(1),S=(" "+p[y+2]).slice(1);switch(p[y]){case"#":h.tagList.push(S?[T,S]:[T]);break;case"PLAYLIST-TYPE":d.type=T.toUpperCase();break;case"MEDIA-SEQUENCE":a=d.startSN=parseInt(T);break;case"TARGETDURATION":d.targetduration=parseFloat(T);break;case"VERSION":d.version=parseInt(T);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"DIS":u++,h.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":u=parseInt(T);break;case"KEY":var C=new m(T),I=C.enumeratedString("METHOD"),D=C.URI,k=C.hexadecimalInteger("IV");I&&(l=new f,D&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(I)>=0&&(l.method=I,l.baseuri=t,l.reluri=D,l.key=null,l.iv=k));break;case"START":var L=new m(T).decimalFloatingPoint("TIME-OFFSET");isNaN(L)||(d.startTimeOffset=L);break;case"MAP":var R=new m(T);h.relurl=R.URI,h.rawByteRange=R.BYTERANGE,h.baseurl=t,h.level=i,h.type=r,h.sn="initSegment",d.initSegment=h,h=new v;break;default:s.b.warn("line parsed but not handled: "+p)}}}return(h=c)&&!h.relurl&&(d.fragments.pop(),o-=h.duration),d.totalduration=o,d.averagetargetduration=o/d.fragments.length,d.endSN=a-1,d.startCC=d.fragments[0]?d.fragments[0].cc:0,d.endCC=u,!d.initSegment&&d.fragments.length&&d.fragments.every(function(e){return x.test(e.relurl)})&&(s.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(h=new v).relurl=d.fragments[0].relurl,h.baseurl=t,h.level=i,h.type=r,h.sn="initSegment",d.initSegment=h,d.needSidxRanges=!0),d},e}(),C=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var I=window.performance,D={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},k={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},L=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,o.a.MANIFEST_LOADING,o.a.LEVEL_LOADING,o.a.AUDIO_TRACK_LOADING,o.a.SUBTITLE_TRACK_LOADING));return r.loaders={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.canHaveQualityLevels=function(e){return e!==D.AUDIO_TRACK&&e!==D.SUBTITLE_TRACK},t.mapContextToLevelType=function(e){switch(e.type){case D.AUDIO_TRACK:return k.AUDIO;case D.SUBTITLE_TRACK:return k.SUBTITLE;default:return k.MAIN}},t.getResponseUrl=function(e,t){var i=e.url;return i!==undefined&&0!==i.indexOf("data:")||(i=t.url),i},t.prototype.createInternalLoader=function(e){var t=this.hls.config,i=t.pLoader,r=t.loader,n=new(i||r)(t);return e.loader=n,this.loaders[e.type]=n,n},t.prototype.getInternalLoader=function(e){return this.loaders[e.type]},t.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.prototype.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},t.prototype.onManifestLoading=function(e){e.m3u8||this.load(e.url,{type:D.MANIFEST,level:0,id:null})},t.prototype.onLevelLoading=function(e){this.load(e.url,{type:D.LEVEL,level:e.level,id:e.id})},t.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:D.AUDIO_TRACK,level:0,id:e.id})},t.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:D.SUBTITLE_TRACK,level:0,id:e.id})},t.prototype.load=function(e,t){var i=this.hls.config;s.b.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var r=this.getInternalLoader(t);if(r){var n=r.context;if(n&&n.url===e)return s.b.trace("playlist request ongoing"),!1;s.b.warn("aborting previous loader for type: "+t.type),r.abort()}var a=void 0,o=void 0,d=void 0,l=void 0;switch(t.type){case D.MANIFEST:a=i.manifestLoadingMaxRetry,o=i.manifestLoadingTimeOut,d=i.manifestLoadingRetryDelay,l=i.manifestLoadingMaxRetryTimeout;break;case D.LEVEL:a=0,o=i.levelLoadingTimeOut;break;default:a=i.levelLoadingMaxRetry,o=i.levelLoadingTimeOut,d=i.levelLoadingRetryDelay,l=i.levelLoadingMaxRetryTimeout}r=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"";var u={timeout:o,maxRetry:a,retryDelay:d,maxRetryDelay:l},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return s.b.debug("Calling internal loader delegate for URL: "+e),r.load(t,u,c),!0},t.prototype.loadsuccess=function(e,t,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(i.isSidxRequest)return this._handleSidxRequest(e,i),void this._handlePlaylistLoaded(e,t,i,r);this.resetInternalLoader(i.type);var n=e.data;t.tload=I.now(),0===n.indexOf("#EXTM3U")?n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,i,r):this._handleMasterPlaylist(e,t,i,r):this._handleManifestParsingError(e,i,"no EXTM3U delimiter",r)},t.prototype.loaderror=function(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this._handleNetworkError(t,i)},t.prototype.loadtimeout=function(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this._handleNetworkError(t,i,!0)},t.prototype._handleMasterPlaylist=function(e,i,r,n){var a=this.hls,d=e.data,l=t.getResponseUrl(e,r),u=S.parseMasterPlaylist(d,l);if(u.length){var c=u.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),h=S.parseMasterPlaylistMedia(d,l,"AUDIO",c),f=S.parseMasterPlaylistMedia(d,l,"SUBTITLES");if(h.length){var p=!1;h.forEach(function(e){e.url||(p=!0)}),!1===p&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(s.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main"}))}a.trigger(o.a.MANIFEST_LOADED,{levels:u,audioTracks:h,subtitles:f,url:l,stats:i,networkDetails:n})}else this._handleManifestParsingError(e,r,"no level found in manifest",n)},t.prototype._handleTrackOrLevelPlaylist=function(e,i,r,n){var a=this.hls,s=r.id,d=r.level,l=r.type,u=t.getResponseUrl(e,r),c=isNaN(s)?0:s,h=isNaN(d)?c:d,f=t.mapContextToLevelType(r),p=S.parseLevelPlaylist(e.data,u,h,f,c);if(p.tload=i.tload,l===D.MANIFEST){var v={url:u,details:p};a.trigger(o.a.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:u,stats:i,networkDetails:n})}if(i.tparsed=I.now(),p.needSidxRanges){var y=p.initSegment.url;this.load(y,{isSidxRequest:!0,type:l,level:d,levelDetails:p,id:s,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else r.levelDetails=p,this._handlePlaylistLoaded(e,i,r,n)},t.prototype._handleSidxRequest=function(e,t){var i=c.a.parseSegmentIndex(new Uint8Array(e.data));i.references.forEach(function(e,i){var r=e.info,n=t.levelDetails.fragments[i];0===n.byteRange.length&&(n.rawByteRange=String(1+r.end-r.start)+"@"+String(r.start))}),t.levelDetails.initSegment.rawByteRange=String(i.moovEndOffset)+"@0"},t.prototype._handleManifestParsingError=function(e,t,i,r){this.hls.trigger(o.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:i,networkDetails:r})},t.prototype._handleNetworkError=function(e,t){var i=arguments.length>2&&arguments[2]!==undefined&&arguments[2];s.b.info("A network error occured while loading a "+e.type+"-type playlist");var r=void 0,n=void 0,d=this.getInternalLoader(e);switch(e.type){case D.MANIFEST:r=i?a.a.MANIFEST_LOAD_TIMEOUT:a.a.MANIFEST_LOAD_ERROR,n=!0;break;case D.LEVEL:r=i?a.a.LEVEL_LOAD_TIMEOUT:a.a.LEVEL_LOAD_ERROR,n=!1;break;case D.AUDIO_TRACK:r=i?a.a.AUDIO_TRACK_LOAD_TIMEOUT:a.a.AUDIO_TRACK_LOAD_ERROR,n=!1;break;default:n=!1}d&&(d.abort(),this.resetInternalLoader(e.type)),this.hls.trigger(o.a.ERROR,{type:a.b.NETWORK_ERROR,details:r,fatal:n,url:d.url,loader:d,context:e,networkDetails:t})},t.prototype._handlePlaylistLoaded=function(e,i,r,n){var a=r.type,s=r.level,d=r.id,l=r.levelDetails;if(l.targetduration)if(t.canHaveQualityLevels(r.type))this.hls.trigger(o.a.LEVEL_LOADED,{details:l,level:s||0,id:d||0,stats:i,networkDetails:n});else switch(a){case D.AUDIO_TRACK:this.hls.trigger(o.a.AUDIO_TRACK_LOADED,{details:l,id:d,stats:i,networkDetails:n});break;case D.SUBTITLE_TRACK:this.hls.trigger(o.a.SUBTITLE_TRACK_LOADED,{details:l,id:d,stats:i,networkDetails:n})}else this._handleManifestParsingError(e,r,"invalid target duration",n)},C(t,null,[{key:"ContextType",get:function(){return D}},{key:"LevelType",get:function(){return k}}]),t}(u);var R=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,o.a.FRAG_LOADING));return r.loaders={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){var t=this.loaders;for(var i in t){var r=t[i];r&&r.destroy()}this.loaders={},e.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag,i=t.type,r=this.loaders,n=this.hls.config,a=n.fLoader,o=n.loader;t.loaded=0;var d=r[i];d&&(s.b.warn("abort previous fragment loader for type: "+i),d.abort()),d=r[i]=t.loader=n.fLoader?new a(n):new o(n);var l,u,c=void 0;c={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var h=t.byteRangeStartOffset,f=t.byteRangeEndOffset;isNaN(h)||isNaN(f)||(c.rangeStart=h,c.rangeEnd=f),l={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},d.load(c,l,u)},t.prototype.loadsuccess=function(e,t,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,n=e.data,a=i.frag;a.loader=undefined,this.loaders[a.type]=undefined,this.hls.trigger(o.a.FRAG_LOADED,{payload:n,frag:a,stats:t,networkDetails:r})},t.prototype.loaderror=function(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,r=t.loader;r&&r.abort(),this.loaders[t.type]=undefined,this.hls.trigger(o.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:i})},t.prototype.loadtimeout=function(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,r=t.loader;r&&r.abort(),this.loaders[t.type]=undefined,this.hls.trigger(o.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:i})},t.prototype.loadprogress=function(e,t,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,n=t.frag;n.loaded=e.loaded,this.hls.trigger(o.a.FRAG_LOAD_PROGRESS,{frag:n,stats:e,networkDetails:r})},t}(u);var P=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,o.a.KEY_LOADING));return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},u.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,i=t.type,r=this.loaders[i],n=t.decryptdata,a=n.uri;if(a!==this.decrypturl||null===this.decryptkey){var d=this.hls.config;r&&(s.b.warn("abort previous key loader for type:"+i),r.abort()),t.loader=this.loaders[i]=new d.loader(d),this.decrypturl=a,this.decryptkey=null;var l,u,c;l={url:a,frag:t,responseType:"arraybuffer"},u={timeout:d.fragLoadingTimeOut,maxRetry:d.fragLoadingMaxRetry,retryDelay:d.fragLoadingRetryDelay,maxRetryDelay:d.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(l,u,c)}else this.decryptkey&&(n.key=this.decryptkey,this.hls.trigger(o.a.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,i){var r=i.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=undefined,this.loaders[r.type]=undefined,this.hls.trigger(o.a.KEY_LOADED,{frag:r})},t.prototype.loaderror=function(e,t){var i=t.frag,r=i.loader;r&&r.abort(),this.loaders[t.type]=undefined,this.hls.trigger(o.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.KEY_LOAD_ERROR,fatal:!1,frag:i,response:e})},t.prototype.loadtimeout=function(e,t){var i=t.frag,r=i.loader;r&&r.abort(),this.loaders[t.type]=undefined,this.hls.trigger(o.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})},t}(u);var O="NOT_LOADED",N="APPENDING",V="PARTIAL",M="OK",U=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,o.a.BUFFER_APPENDED,o.a.FRAG_BUFFERED,o.a.FRAG_LOADED));return r.bufferPadding=.2,r.fragments=Object.create(null),r.timeRanges=Object.create(null),r.config=i.config,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,u.prototype.destroy.call(this),e.prototype.destroy.call(this)},t.prototype.getBufferedFrag=function(e,t){var i=this.fragments,r=Object.keys(i).filter(function(r){var n=i[r];if(n.body.type!==t)return!1;if(!n.buffered)return!1;var a=n.body;return a.startPTS<=e&&e<=a.endPTS});if(0===r.length)return null;var n=r.pop();return i[n].body},t.prototype.detectEvictedFragments=function(e,t){var i=this,r=void 0,n=void 0;Object.keys(this.fragments).forEach(function(a){var o=i.fragments[a];if(!0===o.buffered){var s=o.range[e];if(s){r=s.time;for(var d=0;d<r.length;d++)if(n=r[d],!1===i.isTimeBuffered(n.startPTS,n.endPTS,t)){i.removeFragment(o.body);break}}}})},t.prototype.detectPartialFragments=function(e){var t=this,i=this.getFragmentKey(e),r=this.fragments[i];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach(function(i){if(!0===e.hasElementaryStream(i)){var n=t.timeRanges[i];r.range[i]=t.getBufferedTimes(e.startPTS,e.endPTS,n)}}))},t.prototype.getBufferedTimes=function(e,t,i){for(var r=[],n=void 0,a=void 0,o=!1,s=0;s<i.length;s++){if(n=i.start(s)-this.bufferPadding,a=i.end(s)+this.bufferPadding,e>=n&&t<=a){r.push({startPTS:Math.max(e,i.start(s)),endPTS:Math.min(t,i.end(s))});break}if(e<a&&t>n)r.push({startPTS:Math.max(e,i.start(s)),endPTS:Math.min(t,i.end(s))}),o=!0;else if(t<=n)break}return{time:r,partial:o}},t.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},t.prototype.getPartialFragment=function(e){var t=this,i=void 0,r=void 0,n=void 0,a=null,o=0;return Object.keys(this.fragments).forEach(function(s){var d=t.fragments[s];t.isPartial(d)&&(r=d.body.startPTS-t.bufferPadding,n=d.body.endPTS+t.bufferPadding,e>=r&&e<=n&&(i=Math.min(e-r,n-e),o<=i&&(a=d.body,o=i)))}),a},t.prototype.getState=function(e){var t=this.getFragmentKey(e),i=this.fragments[t],r=O;return i!==undefined&&(r=i.buffered?!0===this.isPartial(i)?V:M:N),r},t.prototype.isPartial=function(e){return!0===e.buffered&&(e.range.video!==undefined&&!0===e.range.video.partial||e.range.audio!==undefined&&!0===e.range.audio.partial)},t.prototype.isTimeBuffered=function(e,t,i){for(var r=void 0,n=void 0,a=0;a<i.length;a++){if(r=i.start(a)-this.bufferPadding,n=i.end(a)+this.bufferPadding,e>=r&&t<=n)return!0;if(t<=r)return!1}return!1},t.prototype.onFragLoaded=function(e){var t=e.frag;if(!isNaN(t.sn)&&!t.bitrateTest){var i=this.getFragmentKey(t),r={body:t,range:Object.create(null),buffered:!1};this.fragments[i]=r}},t.prototype.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var i=t.timeRanges[e];t.detectEvictedFragments(e,i)})},t.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},t.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return this.fragments[t]!==undefined},t.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},t.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},t}(u),B={search:function(e,t){for(var i=0,r=e.length-1,n=null,a=null;i<=r;){var o=t(a=e[n=(i+r)/2|0]);if(o>0)i=n+1;else{if(!(o<0))return a;r=n-1}}return null}};var F=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.isBuffered=function(e,t){try{if(e)for(var i=e.buffered,r=0;r<i.length;r++)if(t>=i.start(r)&&t<=i.end(r))return!0}catch(n){}return!1},e.bufferInfo=function(e,t,i){try{if(e){var r=e.buffered,n=[],a=void 0;for(a=0;a<r.length;a++)n.push({start:r.start(a),end:r.end(a)});return this.bufferedInfo(n,t,i)}}catch(o){}return{len:0,start:t,end:t,nextStart:undefined}},e.bufferedInfo=function(e,t,i){var r=[],n=void 0,a=void 0,o=void 0,s=void 0,d=void 0;for(e.sort(function(e,t){var i=e.start-t.start;return i||t.end-e.end}),d=0;d<e.length;d++){var l=r.length;if(l){var u=r[l-1].end;e[d].start-u<i?e[d].end>u&&(r[l-1].end=e[d].end):r.push(e[d])}else r.push(e[d])}for(d=0,n=0,a=o=t;d<r.length;d++){var c=r[d].start,h=r[d].end;if(t+i>=c&&t<h)a=c,n=(o=h)-t;else if(t+i<c){s=c;break}}return{len:n,start:a,end:o,nextStart:s}},e}(),G=i(6),j=i.n(G),K=i(11),z=i.n(K),$=i(9);function Y(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}var H=i(4);var q=Object(H.a)(),W=Y(),X=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.id=i;var r=this.observer=new j.a,n=t.config;r.trigger=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];r.emit.apply(r,[e,e].concat(i))},r.off=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];r.removeListener.apply(r,[e].concat(i))};var d=function(e,i){(i=i||{}).frag=this.frag,i.id=this.id,t.trigger(e,i)}.bind(this);r.on(o.a.FRAG_DECRYPTED,d),r.on(o.a.FRAG_PARSING_INIT_SEGMENT,d),r.on(o.a.FRAG_PARSING_DATA,d),r.on(o.a.FRAG_PARSED,d),r.on(o.a.ERROR,d),r.on(o.a.FRAG_PARSING_METADATA,d),r.on(o.a.FRAG_PARSING_USERDATA,d),r.on(o.a.INIT_PTS_FOUND,d);var l={mp4:W.isTypeSupported("video/mp4"),mpeg:W.isTypeSupported("audio/mpeg"),mp3:W.isTypeSupported('audio/mp4; codecs="mp3"')},u=navigator.vendor;if(n.enableWorker&&"undefined"!=typeof Worker){s.b.log("demuxing in webworker");var c=void 0;try{c=this.w=z()(12),this.onwmsg=this.onWorkerMessage.bind(this),c.addEventListener("message",this.onwmsg),c.onerror=function(e){t.trigger(o.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},c.postMessage({cmd:"init",typeSupported:l,vendor:u,id:i,config:JSON.stringify(n)})}catch(h){s.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),c&&q.URL.revokeObjectURL(c.objectURL),this.demuxer=new $.a(r,l,n,u),this.w=undefined}}else this.demuxer=new $.a(r,l,n,u)}return e.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var i=this.observer;i&&(i.removeAllListeners(),this.observer=null)},e.prototype.push=function(e,t,i,r,n,a,o,d){var l=this.w,u=isNaN(n.startDTS)?n.start:n.startDTS,c=n.decryptdata,h=this.frag,f=!(h&&n.cc===h.cc),p=!(h&&n.level===h.level),v=h&&n.sn===h.sn+1,y=!p&&v;if(f&&s.b.log(this.id+":discontinuity detected"),p&&s.b.log(this.id+":switch detected"),this.frag=n,l)l.postMessage({cmd:"demux",data:e,decryptdata:c,initSegment:t,audioCodec:i,videoCodec:r,timeOffset:u,discontinuity:f,trackSwitch:p,contiguous:y,duration:a,accurateTimeOffset:o,defaultInitPTS:d},e instanceof ArrayBuffer?[e]:[]);else{var g=this.demuxer;g&&g.push(e,c,t,i,r,u,f,p,y,a,o,d)}},e.prototype.onWorkerMessage=function(e){var t=e.data,i=this.hls;switch(t.event){case"init":q.URL.revokeObjectURL(this.w.objectURL);break;case o.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data)}},e}();function Q(e,t,i){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(i);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(i)}}function Z(e,t,i){var r=e[t],n=e[i],a=n.startPTS;isNaN(a)?n.start=i>t?r.start+r.duration:Math.max(r.start-n.duration,0):i>t?(r.duration=a-r.start,r.duration<0&&s.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(n.duration=r.start-a,n.duration<0&&s.b.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!"))}function J(e,t,i,r,n,a){var o=i;if(!isNaN(t.startPTS)){var s=Math.abs(t.startPTS-i);isNaN(t.deltaPTS)?t.deltaPTS=s:t.deltaPTS=Math.max(s,t.deltaPTS),o=Math.max(i,t.startPTS),i=Math.min(i,t.startPTS),r=Math.max(r,t.endPTS),n=Math.min(n,t.startDTS),a=Math.max(a,t.endDTS)}var d=i-t.start;t.start=t.startPTS=i,t.maxStartPTS=o,t.endPTS=r,t.startDTS=n,t.endDTS=a,t.duration=r-i;var l=t.sn;if(!e||l<e.startSN||l>e.endSN)return 0;var u,c=void 0,h=void 0;for(u=l-e.startSN,(c=e.fragments)[u]=t,h=u;h>0;h--)Z(c,h,h-1);for(h=u;h<c.length-1;h++)Z(c,h,h+1);return e.PTSKnown=!0,d}var ee={toString:function(e){for(var t="",i=e.length,r=0;r<i;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}};function te(e,t){t.fragments.forEach(function(t){if(t){var i=t.start+e;t.start=t.startPTS=i,t.endPTS=i+t.duration}}),t.PTSKnown=!0}function ie(e,t,i){if(function(e,t,i){var r=!1;return t&&t.details&&i&&(i.endCC>i.startCC||e&&e.cc<i.startCC)&&(r=!0),r}(e,t,i)){var r=function(e,t){var i=e.fragments,r=t.fragments;if(r.length&&i.length){var n=function(e,t){for(var i=null,r=0;r<e.length;r+=1){var n=e[r];if(n&&n.cc===t){i=n;break}}return i}(i,r[0].cc);if(n&&(!n||n.startPTS))return n;s.b.log("No frag in previous level to align on")}else s.b.log("No fragments to align")}(t.details,i);r&&(s.b.log("Adjusting PTS using last level due to CC increase within current level"),te(r.start,i))}if(!1===i.PTSKnown&&t&&t.details&&t.details.fragments&&t.details.fragments.length){var n=t.details.programDateTime,a=(i.programDateTime-n)/1e3+t.details.fragments[0].start;isNaN(a)||(s.b.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),te(a,i))}}var re=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call.apply(e,[this,i].concat(n)));return o._tickInterval=null,o._tickTimer=null,o._tickCallCount=0,o._boundTick=o.tick.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.prototype.hasInterval=function(){return!!this._tickInterval},t.prototype.hasNextTick=function(){return!!this._tickTimer},t.prototype.setInterval=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,e),!0)}),t.prototype.clearInterval=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)}),t.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.prototype.doTick=function(){},t}(u);function ne(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!Array.isArray(e)||!e.length||null===t)return null;if(t<e[0].pdt)return null;if(t>=e[e.length-1].endPdt)return null;for(var i=0;i<e.length;++i){var r=e[i];if(t<r.endPdt)return r}return null}function ae(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,n=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0,a=void 0,o=e?t[e.sn-t[0].sn+1]:null;return i<r&&(i>r-n&&(n=0),a=o&&!oe(i,n,o)?o:B.search(t,oe.bind(null,i,n))),a}function oe(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,i=arguments[2],r=Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-r<=e?1:i.start-r>e&&i.start?-1:0}var se=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var de={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},le=function(e){function t(i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.MANIFEST_LOADING,o.a.MANIFEST_PARSED,o.a.LEVEL_LOADED,o.a.KEY_LOADED,o.a.FRAG_LOADED,o.a.FRAG_LOAD_EMERGENCY_ABORTED,o.a.FRAG_PARSING_INIT_SEGMENT,o.a.FRAG_PARSING_DATA,o.a.FRAG_PARSED,o.a.ERROR,o.a.AUDIO_TRACK_SWITCHING,o.a.AUDIO_TRACK_SWITCHED,o.a.BUFFER_CREATED,o.a.BUFFER_APPENDED,o.a.BUFFER_FLUSHED));return n.fragmentTracker=r,n.config=i.config,n.audioCodecSwap=!1,n._state=de.STOPPED,n.stallReported=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},t.prototype.onHandlerDestroyed=function(){this.state=de.STOPPED,this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this)},t.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=i.startLevel;-1===r&&(r=0,this.bitrateTest=!0),this.level=i.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(s.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=de.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=de.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=de.STOPPED,this.forceStartLoad=!1},t.prototype.doTick=function(){switch(this.state){case de.BUFFER_FLUSHING:this.fragLoadError=0;break;case de.IDLE:this._doTickIdle();break;case de.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=de.IDLE);break;case de.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),i=this.retryDate;(!i||t>=i||this.media&&this.media.seeking)&&(s.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=de.IDLE);break;case de.ERROR:case de.STOPPED:case de.FRAG_LOADING:case de.PARSING:case de.PARSED:case de.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},t.prototype._doTickIdle=function(){var e=this.hls,t=e.config,i=this.media;if(this.levelLastLoaded!==undefined&&(i||!this.startFragRequested&&t.startFragPrefetch)){var r=void 0;r=this.loadedmetadata?i.currentTime:this.nextLoadPosition;var n=e.nextLoadLevel,a=this.levels[n];if(a){var d=a.bitrate,l=void 0;l=d?Math.max(8*t.maxBufferSize/d,t.maxBufferLength):t.maxBufferLength,l=Math.min(l,t.maxMaxBufferLength);var u=F.bufferInfo(this.mediaBuffer?this.mediaBuffer:i,r,t.maxBufferHole),c=u.len;if(!(c>=l)){s.b.trace("buffer length of "+c.toFixed(3)+" is below max of "+l.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=n;var h=a.details;if(!h||h.live&&this.levelLastLoaded!==n)this.state=de.WAITING_LEVEL;else{var f=this.fragPrevious;if(!h.live&&f&&!f.backtracked&&f.sn===h.endSN&&!u.nextStart)if(Math.min(i.duration,f.start+f.duration)-Math.max(u.end,f.start)<=Math.max(.2,f.duration)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(o.a.BUFFER_EOS,p),void(this.state=de.ENDED)}this._fetchPayloadOrEos(r,u,h)}}}}},t.prototype._fetchPayloadOrEos=function(e,t,i){var r=this.fragPrevious,n=this.level,a=i.fragments,o=a.length;if(0!==o){var d=a[0].start,l=a[o-1].start+a[o-1].duration,u=t.end,c=void 0;if(i.initSegment&&!i.initSegment.data)c=i.initSegment;else if(i.live){var h=this.config.initialLiveManifestSize;if(o<h)return void s.b.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+h);if(null===(c=this._ensureFragmentAtLivePoint(i,u,d,l,r,a,o)))return}else u<d&&(c=a[0]);c||(c=this._findFragment(d,r,o,a,u,l,i)),c&&(c.encrypted?(s.b.log("Loading key for "+c.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+n),this._loadKey(c)):(s.b.log("Loading "+c.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+n+", currentTime:"+e.toFixed(3)+",bufferEnd:"+u.toFixed(3)),this._loadFragment(c)))}},t.prototype._ensureFragmentAtLivePoint=function(e,t,i,r,n,a,o){var d=this.hls.config,l=this.media,u=void 0,c=d.liveMaxLatencyDuration!==undefined?d.liveMaxLatencyDuration:d.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(i-d.maxFragLookUpTolerance,r-c)){var h=this.liveSyncPosition=this.computeLivePosition(i,e);s.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),t=h,l&&l.readyState&&l.duration>h&&(l.currentTime=h),this.nextLoadPosition=h}if(e.PTSKnown&&t>r&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(n)if(e.programDateTime)u=ne(a,n.endPdt+1);else{var f=n.sn+1;if(f>=e.startSN&&f<=e.endSN){var p=a[f-e.startSN];n.cc===p.cc&&(u=p,s.b.log("live playlist, switching playlist, load frag with next SN: "+u.sn))}u||(u=B.search(a,function(e){return n.cc-e.cc}))&&s.b.log("live playlist, switching playlist, load frag with same CC: "+u.sn)}u||(u=a[Math.min(o-1,Math.round(o/2))],s.b.log("live playlist, switching playlist, unknown, load middle frag : "+u.sn))}return u},t.prototype._findFragment=function(e,t,i,r,n,a,o){var d=this.hls.config,l=void 0,u=void 0;if(n<a?o.programDateTime?(u=ne(r,function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,i=arguments[2],r=0;if(i.programDateTime){var n=Date.parse(i.programDateTime);isNaN(n)||(r=1e3*t+n-1e3*e)}return r}(e,n,o)))&&!oe(n,d.maxFragLookUpTolerance,u)||(s.b.warn("Frag found by PDT search did not fit within tolerance; falling back to finding by SN"),u=ae(t,r,n,a,d.maxFragLookUpTolerance)):u=ae(t,r,n,a,d.maxFragLookUpTolerance):u=r[i-1],u){var c=(l=u).sn-o.startSN,h=t&&l.level===t.level,f=r[c-1],p=r[c+1];if(t&&l.sn===t.sn)if(h&&!l.backtracked)if(l.sn<o.endSN){var v=t.deltaPTS;v&&v>d.maxBufferHole&&t.dropped&&c?(l=f,s.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(l=p,s.b.log("SN just loaded, load next one: "+l.sn))}else l=null;else l.backtracked&&(p&&p.backtracked?(s.b.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+p.sn),l=p):(s.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,f?(l=f).backtracked=!0:c&&(l=null)))}return l},t.prototype._loadKey=function(e){this.state=de.KEY_LOADING,this.hls.trigger(o.a.KEY_LOADING,{frag:e})},t.prototype._loadFragment=function(e){var t=this.fragmentTracker.getState(e);this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||e.bitrateTest||(this.nextLoadPosition=e.start+e.duration),e.backtracked||t===O||t===V?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(o.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new X(this.hls,"main")),this.state=de.FRAG_LOADING):t===N&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},t.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,L.LevelType.MAIN)},t.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},t.prototype._checkFragmentChanged=function(){var e=void 0,t=void 0,i=this.media;if(i&&i.readyState&&!1===i.seeking&&((t=i.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),F.isBuffered(i,t)?e=this.getBufferedFrag(t):F.isBuffered(i,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var r=e;if(r!==this.fragPlaying){this.hls.trigger(o.a.FRAG_CHANGED,{frag:r});var n=r.level;this.fragPlaying&&this.fragPlaying.level===n||this.hls.trigger(o.a.LEVEL_SWITCHED,{level:n}),this.fragPlaying=r}}},t.prototype.immediateLevelSwitch=function(){if(s.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var i=this.fragCurrent;i&&i.loader&&i.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,F.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},t.prototype.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,i=void 0,r=void 0;if((t=this.getBufferedFrag(e.currentTime))&&t.startPTS>1&&this.flushMainBuffer(0,t.startPTS-1),e.paused)i=0;else{var n=this.hls.nextLoadLevel,a=this.levels[n],o=this.fragLastKbps;i=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if((r=this.getBufferedFrag(e.currentTime+i))&&(r=this.followingBufferedFrag(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.maxStartPTS,Number.POSITIVE_INFINITY)}}},t.prototype.flushMainBuffer=function(e,t){this.state=de.BUFFER_FLUSHING;var i={startOffset:e,endOffset:t};this.altAudio&&(i.type="video"),this.hls.trigger(o.a.BUFFER_FLUSHING,i)},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.hls.startLoad(i.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(s.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=undefined})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){var e=this.media,t=e?e.currentTime:undefined,i=this.config;isNaN(t)||s.b.log("media seeking to "+t.toFixed(3));var r=this.mediaBuffer?this.mediaBuffer:e,n=F.bufferInfo(r,t,this.config.maxBufferHole);if(this.state===de.FRAG_LOADING){var a=this.fragCurrent;if(0===n.len&&a){var o=i.maxFragLookUpTolerance,d=a.start-o,l=a.start+a.duration+o;t<d||t>l?(a.loader&&(s.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=de.IDLE):s.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===de.ENDED&&(0===n.len&&(this.fragPrevious=0),this.state=de.IDLE);e&&(this.lastCurrentTime=t),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()},t.prototype.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:undefined;isNaN(t)||s.b.log("media seeked to "+t.toFixed(3)),this.tick()},t.prototype.onMediaEnded=function(){s.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestLoading=function(){s.b.log("trigger BUFFER_RESET"),this.hls.trigger(o.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestParsed=function(e){var t=!1,i=!1,r=void 0;e.levels.forEach(function(e){(r=e.audioCodec)&&(-1!==r.indexOf("mp4a.40.2")&&(t=!0),-1!==r.indexOf("mp4a.40.5")&&(i=!0))}),this.audioCodecSwitch=t&&i,this.audioCodecSwitch&&s.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var n=this.config;(n.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(n.startPosition)},t.prototype.onLevelLoaded=function(e){var t=e.details,i=e.level,r=this.levels[this.levelLastLoaded],n=this.levels[i],a=t.totalduration,d=0;if(s.b.log("level "+i+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var l=n.details;l&&t.fragments.length>0?(!function(e,t){var i=Math.max(e.startSN,t.startSN)-t.startSN,r=Math.min(e.endSN,t.endSN)-t.startSN,n=t.startSN-e.startSN,a=e.fragments,o=t.fragments,d=0,l=void 0;if(t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment),r<i)t.PTSKnown=!1;else{for(var u=i;u<=r;u++){var c=a[n+u],h=o[u];h&&c&&(d=c.cc-h.cc,isNaN(c.startPTS)||(h.start=h.startPTS=c.startPTS,h.endPTS=c.endPTS,h.duration=c.duration,h.backtracked=c.backtracked,h.dropped=c.dropped,l=h))}if(d)for(s.b.log("discontinuity sliding from playlist, take drift into account"),u=0;u<o.length;u++)o[u].cc+=d;if(l)J(t,l,l.startPTS,l.endPTS,l.startDTS,l.endDTS);else if(n>=0&&n<a.length){var f=a[n].start;for(u=0;u<o.length;u++)o[u].start+=f}t.PTSKnown=e.PTSKnown}}(l,t),d=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(d,l),t.PTSKnown&&!isNaN(d)?s.b.log("live playlist sliding:"+d.toFixed(3)):(s.b.log("live playlist - outdated PTS, unknown sliding"),ie(this.fragPrevious,r,t))):(s.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,ie(this.fragPrevious,r,t))}else t.PTSKnown=!1;if(n.details=t,this.levelLastLoaded=i,this.hls.trigger(o.a.LEVEL_UPDATED,{details:t,level:i}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=t.startTimeOffset;isNaN(u)?t.live?(this.startPosition=this.computeLivePosition(d,t),s.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(u<0&&(s.b.log("negative start time offset "+u+", count from end of last fragment"),u=d+a+u),s.b.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===de.WAITING_LEVEL&&(this.state=de.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===de.KEY_LOADING&&(this.state=de.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,i=e.frag;if(this.state===de.FRAG_LOADING&&t&&"main"===i.type&&i.level===t.level&&i.sn===t.sn){var r=e.stats,n=this.levels[t.level],a=n.details;if(s.b.log("Loaded  "+t.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=r,!0===i.bitrateTest&&this.hls.nextLoadLevel)this.state=de.IDLE,this.startFragRequested=!1,r.tparsed=r.tbuffered=window.performance.now(),this.hls.trigger(o.a.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else if("initSegment"===i.sn)this.state=de.IDLE,r.tparsed=r.tbuffered=window.performance.now(),a.initSegment.data=e.payload,this.hls.trigger(o.a.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else{this.state=de.PARSING;var d=a.totalduration,l=t.level,u=t.sn,c=this.config.defaultAudioCodec||n.audioCodec;this.audioCodecSwap&&(s.b.log("swapping playlist audio codec"),c===undefined&&(c=this.lastAudioCodec),c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,s.b.log("Parsing "+u+" of ["+a.startSN+" ,"+a.endSN+"],level "+l+", cc "+t.cc);var h=this.demuxer;h||(h=this.demuxer=new X(this.hls,"main"));var f=this.media,p=!(f&&f.seeking)&&(a.PTSKnown||!a.live),v=a.initSegment?a.initSegment.data:[];h.push(e.payload,v,c,n.videoCodec,t,d,p,undefined)}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,i=e.frag;if(t&&"main"===e.id&&i.sn===t.sn&&i.level===t.level&&this.state===de.PARSING){var r=e.tracks,n=void 0,a=void 0;if(r.audio&&this.altAudio&&delete r.audio,a=r.audio){var d=this.levels[this.level].audioCodec,l=navigator.userAgent.toLowerCase();d&&this.audioCodecSwap&&(s.b.log("swapping playlist audio codec"),d=-1!==d.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&-1===l.indexOf("firefox")&&(d="mp4a.40.5"),-1!==l.indexOf("android")&&"audio/mpeg"!==a.container&&(d="mp4a.40.2",s.b.log("Android: force audio codec to "+d)),a.levelCodec=d,a.id=e.id}for(n in(a=r.video)&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=e.id),this.hls.trigger(o.a.BUFFER_CODECS,r),r){a=r[n],s.b.log("main track:"+n+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var u=a.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(o.a.BUFFER_APPENDING,{type:n,data:u,parent:"main",content:"initSegment"}))}this.tick()}},t.prototype.onFragParsingData=function(e){var t=this,i=this.fragCurrent,r=e.frag;if(i&&"main"===e.id&&r.sn===i.sn&&r.level===i.level&&("audio"!==e.type||!this.altAudio)&&this.state===de.PARSING){var n=this.levels[this.level],a=i;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+i.duration,e.endDTS=e.startDTS+i.duration),!0===e.hasAudio&&a.addElementaryStream(v.ElementaryStreamTypes.AUDIO),!0===e.hasVideo&&a.addElementaryStream(v.ElementaryStreamTypes.VIDEO),s.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)s.b.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var d=n.details;if(!d||a.sn!==d.startSN)return s.b.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=de.IDLE,this.fragPrevious=a,void this.tick();s.b.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var l=J(n.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),u=this.hls;u.trigger(o.a.LEVEL_PTS_UPDATED,{details:n.details,level:this.level,drift:l,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(i){i&&i.length&&t.state===de.PARSING&&(t.appended=!0,t.pendingBuffering=!0,u.trigger(o.a.BUFFER_APPENDING,{type:e.type,data:i,parent:"main",content:"data"}))}),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,i=e.frag;t&&"main"===e.id&&i.sn===t.sn&&i.level===t.level&&this.state===de.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=de.PARSED,this._checkAppendedParsed())},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url,i=e.id;if(!t){if(this.mediaBuffer!==this.media){s.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(s.b.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=de.IDLE}var n=this.hls;n.trigger(o.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),n.trigger(o.a.AUDIO_TRACK_SWITCHED,{id:i}),this.altAudio=!1}},t.prototype.onAudioTrackSwitched=function(e){var t=e.id,i=!!this.hls.audioTracks[t].url;if(i){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(s.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=i,this.tick()},t.prototype.onBufferCreated=function(e){var t=e.tracks,i=void 0,r=void 0,n=!1;for(var a in t){var o=t[a];"main"===o.id?(r=a,i=o,"video"===a&&(this.videoBuffer=t[a].buffer)):n=!0}n&&i?(s.b.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},t.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==de.PARSING&&t!==de.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!(this.state!==de.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;s.b.log("main buffered : "+ee.toString(t.buffered)),this.fragPrevious=e;var i=this.stats;i.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*i.total/(i.tbuffered-i.tfirst)),this.hls.trigger(o.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.state=de.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var i=!!this.media&&F.isBuffered(this.media,this.media.currentTime)&&F.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:case a.a.KEY_LOAD_ERROR:case a.a.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);s.b.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=window.performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=de.FRAG_LOADING_WAITING_RETRY}else s.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=de.ERROR;break;case a.a.LEVEL_LOAD_ERROR:case a.a.LEVEL_LOAD_TIMEOUT:this.state!==de.ERROR&&(e.fatal?(this.state=de.ERROR,s.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==de.WAITING_LEVEL||(this.state=de.IDLE));break;case a.a.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==de.PARSING&&this.state!==de.PARSED||(i?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=de.IDLE):(s.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},t.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,s.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},t.prototype._checkBuffer=function(){var e=this.config,t=this.media;if(t&&0!==t.readyState){var i=t.currentTime,r=(this.mediaBuffer?this.mediaBuffer:t).buffered;if(!this.loadedmetadata&&r.length)this.loadedmetadata=!0,this._seekToStartPos();else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var n=!(t.paused&&t.readyState>1||t.ended||0===t.buffered.length),a=window.performance.now();if(i!==this.lastCurrentTime)this.stallReported&&(s.b.warn("playback not stuck anymore @"+i+", after "+Math.round(a-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0;else if(n){var o=a-this.stalled,d=F.bufferInfo(t,i,e.maxBufferHole);if(!this.stalled)return void(this.stalled=a);o>=1e3&&this._reportStall(d.len),this._tryFixBufferStall(d,o)}}}},t.prototype.onFragLoadEmergencyAborted=function(){this.state=de.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},t.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(v.ElementaryStreamTypes.VIDEO,e.buffered),this.state=de.IDLE,this.fragPrevious=null},t.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},t.prototype.computeLivePosition=function(e,t){var i=this.config.liveSyncDuration!==undefined?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-i)},t.prototype._tryFixBufferStall=function(e,t){var i=this.config,r=this.media.currentTime,n=this.fragmentTracker.getPartialFragment(r);n&&this._trySkipBufferHole(n),e.len>.5&&t>1e3*i.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},t.prototype._reportStall=function(e){var t=this.hls,i=this.media;this.stallReported||(this.stallReported=!0,s.b.warn("Playback stalling at @"+i.currentTime+" due to low buffer"),t.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t.prototype._trySkipBufferHole=function(e){for(var t=this.hls,i=this.media,r=i.currentTime,n=0,d=0;d<i.buffered.length;d++){var l=i.buffered.start(d);if(r>=n&&r<l)return i.currentTime=Math.max(l,i.currentTime+.1),s.b.warn("skipping hole, adjusting currentTime from "+r+" to "+i.currentTime),this.stalled=null,void t.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+i.currentTime,frag:e});n=i.buffered.end(d)}},t.prototype._tryNudgeBuffer=function(){var e=this.config,t=this.hls,i=this.media,r=i.currentTime,n=(this.nudgeRetry||0)+1;if(this.nudgeRetry=n,n<e.nudgeMaxRetry){var d=r+n*e.nudgeOffset;s.b.log("adjust currentTime from "+r+" to "+d),i.currentTime=d,t.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else s.b.error("still stuck in high buffer @"+r+" after "+e.nudgeMaxRetry+", raise fatal error"),t.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_STALLED_ERROR,fatal:!0})},t.prototype._seekToStartPos=function(){var e=this.media,t=e.currentTime,i=e.seeking?t:this.startPosition;t!==i&&(s.b.log("target start position not buffered, seek to buffered.start(0) "+i+" from current time "+t+" "),e.currentTime=i)},se(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,s.b.log("main stream:"+t+"->"+e),this.hls.trigger(o.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(re),ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var he=window.performance,fe=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,o.a.MANIFEST_LOADED,o.a.LEVEL_LOADED,o.a.AUDIO_TRACK_SWITCHED,o.a.FRAG_LOADED,o.a.ERROR));return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},t.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=undefined)}),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t=[],i=void 0,r={},n=null,d=!1,l=!1,u=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),c=[];if(e.levels.forEach(function(e){e.loadError=0,e.fragmentError=!1,d=d||!!e.videoCodec,l=l||!!e.audioCodec||!(!e.attrs||!e.attrs.AUDIO),u&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=undefined),(n=r[e.bitrate])?n.url.push(e.url):(e.url=[e.url],e.urlId=0,r[e.bitrate]=e,t.push(e)),e.attrs&&e.attrs.AUDIO&&Q(n||e,"audio",e.attrs.AUDIO),e.attrs&&e.attrs.SUBTITLES&&Q(n||e,"text",e.attrs.SUBTITLES)}),d&&l&&(t=t.filter(function(e){return!!e.videoCodec})),t=t.filter(function(e){var t=e.audioCodec,i=e.videoCodec;return(!t||_(t))&&(!i||_(i))}),e.audioTracks&&(c=e.audioTracks.filter(function(e){return!e.audioCodec||_(e.audioCodec,"audio")})),t.length>0){i=t[0].bitrate,t.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=t;for(var h=0;h<t.length;h++)if(t[h].bitrate===i){this._firstLevel=h,s.b.log("manifest loaded,"+t.length+" level(s) found, first bitrate:"+i);break}this.hls.trigger(o.a.MANIFEST_PARSED,{levels:t,audioTracks:c,firstLevel:this._firstLevel,stats:e.stats,audio:l,video:d,altAudio:c.length>0&&d})}else this.hls.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},t.prototype.setLevelInternal=function(e){var t=this._levels,i=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){s.b.log("switching to level "+e),this.currentLevelIndex=e;var r=t[e];r.level=e,i.trigger(o.a.LEVEL_SWITCHING,r)}var n=t[e],d=n.details;if(!d||d.live){var l=n.urlId;i.trigger(o.a.LEVEL_LOADING,{url:n.url[l],level:e,id:l})}}else i.trigger(o.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},t.prototype.onError=function(e){if(e.fatal)e.type===a.b.NETWORK_ERROR&&this.clearTimer();else{var t=!1,i=!1,r=void 0;switch(e.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:case a.a.KEY_LOAD_ERROR:case a.a.KEY_LOAD_TIMEOUT:r=e.frag.level,i=!0;break;case a.a.LEVEL_LOAD_ERROR:case a.a.LEVEL_LOAD_TIMEOUT:r=e.context.level,t=!0;break;case a.a.REMUX_ALLOC_ERROR:r=e.level,t=!0}r!==undefined&&this.recoverLevel(e,r,t,i)}},t.prototype.recoverLevel=function(e,t,i,r){var n=this,a=this.hls.config,o=e.details,d=this._levels[t],l=void 0,u=void 0,c=void 0;if(d.loadError++,d.fragmentError=r,i){if(!(this.levelRetryCount+1<=a.levelLoadingMaxRetry))return s.b.error("level controller, cannot recover from "+o+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);u=Math.min(Math.pow(2,this.levelRetryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return n.loadLevel()},u),e.levelRetry=!0,this.levelRetryCount++,s.b.warn("level controller, "+o+", retry in "+u+" ms, current retry count is "+this.levelRetryCount)}(i||r)&&((l=d.url.length)>1&&d.loadError<l?(d.urlId=(d.urlId+1)%l,d.details=undefined,s.b.warn("level controller, "+o+" for level "+t+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(c=0===t?this._levels.length-1:t-1,s.b.warn("level controller, "+o+": switch to "+c),this.hls.nextAutoLevel=this.currentLevelIndex=c):r&&(s.b.warn("level controller, "+o+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(t!==undefined&&"main"===t.type){var i=this._levels[t.level];i!==undefined&&(i.fragmentError=!1,i.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,i=e.level;if(i===this.currentLevelIndex){var r=this._levels[i];r.fragmentError||(r.loadError=0,this.levelRetryCount=0);var n=e.details;if(n.live){var a=1e3*(n.averagetargetduration?n.averagetargetduration:n.targetduration),o=a,d=r.details;d&&n.endSN===d.endSN&&(o/=2,s.b.log("same live playlist, reload twice faster")),o-=he.now()-e.stats.trequest,o=Math.max(a/2,Math.round(o)),s.b.log("live playlist, reload in "+Math.round(o)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},o)}else this.clearTimer()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,i=this.hls.levels[this.currentLevelIndex];if(i&&i.audioGroupIds){var r=i.audioGroupIds.findIndex(function(e){return e===t});r!==i.urlId&&(i.urlId=r,this.startLoad())}},t.prototype.loadLevel=function(){if(s.b.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"===(void 0===e?"undefined":ue(e))&&e.url.length>0){var t=this.currentLevelIndex,i=e.urlId,r=e.url[i];s.b.log("Attempt loading level index "+t+" with URL-id "+i),this.hls.trigger(o.a.LEVEL_LOADING,{url:r,level:t,id:i})}}},ce(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,this._startLevel===undefined&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(this._startLevel===undefined){var e=this.hls.config.startLevel;return e!==undefined?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),t}(u),pe=i(7);function ve(e,t){var i=null;try{i=new window.Event("addtrack")}catch(r){(i=document.createEvent("Event")).initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)}var ye=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.FRAG_PARSING_METADATA));return r.id3Track=undefined,r.media=undefined,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){u.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){!function(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}(this.id3Track),this.id3Track=undefined,this.media=undefined},t.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var i=e[t];if("metadata"===i.kind&&"id3"===i.label)return ve(i,this.media),i}return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,i=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,n=0;n<i.length;n++){var a=pe.a.getID3Frames(i[n].data);if(a){var o=i[n].pts,s=n<i.length-1?i[n+1].pts:t.endPTS;o===s&&(s+=1e-4);for(var d=0;d<a.length;d++){var l=a[d];if(!pe.a.isTimeStampFrame(l)){var u=new r(o,s,"");u.value=l,this.id3Track.addCue(u)}}}}},t}(u);var ge=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();var me=function(){function e(t,i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ge(i),this.fast_=new ge(r)}return e.prototype.sample=function(e,t){var i=8e3*t/(e=Math.max(e,this.minDelayMs_)),r=e/1e3;this.fast_.sample(r,i),this.slow_.sample(r,i)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}(),Ae=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var _e=window.performance,Ee=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,o.a.FRAG_LOADING,o.a.FRAG_LOADED,o.a.FRAG_BUFFERED,o.a.ERROR));return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=i,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.clearTimer(),u.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var i=this.hls,r=i.config,n=t.level,a=void 0,o=void 0;i.levels[n].details.live?(a=r.abrEwmaFastLive,o=r.abrEwmaSlowLive):(a=r.abrEwmaFastVoD,o=r.abrEwmaSlowVoD),this._bwEstimator=new me(i,o,a,r.abrEwmaDefaultEstimate)}},t.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,i=this.fragCurrent;if(i){var r=i.loader,n=e.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return s.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=r.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&i.autoLevel&&i.level){var d=_e.now()-a.trequest,l=Math.abs(t.playbackRate);if(d>500*i.duration/l){var u=e.levels,c=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/d),h=u[i.level],f=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,p=a.total?a.total:Math.max(a.loaded,Math.round(i.duration*f/8)),v=t.currentTime,y=(p-a.loaded)/c,g=(F.bufferInfo(t,v,e.config.maxBufferHole).end-v)/l;if(g<2*i.duration/l&&y>g){var m=void 0,A=void 0;for(A=i.level-1;A>n;A--){var _=u[A].realBitrate?Math.max(u[A].realBitrate,u[A].bitrate):u[A].bitrate;if((m=i.duration*_/(6.4*c))<g)break}m<y&&(s.b.warn("loading too slow, abort fragment loading and switch to level "+A+":fragLoadedDelay["+A+"]<fragLoadedDelay["+(i.level-1)+"];bufferStarvationDelay:"+m.toFixed(1)+"<"+y.toFixed(1)+":"+g.toFixed(1)),e.nextLoadLevel=A,this._bwEstimator.sample(d,a.loaded),r.abort(),this.clearTimer(),e.trigger(o.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,stats:a}))}}}}},t.prototype.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var i=this.hls.levels[t.level],r=(i.loaded?i.loaded.bytes:0)+e.stats.loaded,n=(i.loaded?i.loaded.duration:0)+e.frag.duration;i.loaded={bytes:r,duration:n},i.realBitrate=Math.round(8*r/n)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},t.prototype.onFragBuffered=function(e){var t=e.stats,i=e.frag;if(!(!0===t.aborted||"main"!==i.type||isNaN(i.sn)||i.bitrateTest&&t.tload!==t.tbuffered)){var r=t.tparsed-t.trequest;s.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(r,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}},t.prototype.onError=function(e){switch(e.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},t.prototype._findBestLevel=function(e,t,i,r,n,a,o,d,l){for(var u=n;u>=r;u--){var c=l[u].details,h=c?c.totalduration/c.fragments.length:t,f=!!c&&c.live,p=void 0;p=u<=e?o*i:d*i;var v=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,y=v*h/p;if(s.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(p)+"/"+v+"/"+h+"/"+a+"/"+y),p>v&&(!y||f&&!this.bitrateTestDelay||y<a))return u}return-1},Ae(t,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var i=this._nextABRAutoLevel;return-1!==e&&(i=Math.min(e,i)),i},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,i=e.levels,r=e.config,n=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,d=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,h=(F.bufferInfo(a,l,r.maxBufferHole).end-l)/u,f=this._findBestLevel(o,d,c,n,t,h,r.abrBandWidthFactor,r.abrBandWidthUpFactor,i);if(f>=0)return f;s.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=d?Math.min(d,r.maxStarvationDelay):r.maxStarvationDelay,v=r.abrBandWidthFactor,y=r.abrBandWidthUpFactor;if(0===h){var g=this.bitrateTestDelay;if(g)p=(d?Math.min(d,r.maxLoadingDelay):r.maxLoadingDelay)-g,s.b.trace("bitrate test took "+Math.round(1e3*g)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),v=y=1}return f=this._findBestLevel(o,d,c,n,t,h+p,v,y,i),Math.max(f,0)}}]),t}(u);var Te=Y(),be=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,o.a.MEDIA_ATTACHING,o.a.MEDIA_DETACHING,o.a.MANIFEST_PARSED,o.a.BUFFER_RESET,o.a.BUFFER_APPENDING,o.a.BUFFER_CODECS,o.a.BUFFER_EOS,o.a.BUFFER_FLUSHING,o.a.LEVEL_PTS_UPDATED,o.a.LEVEL_UPDATED));return r._msDuration=null,r._levelDuration=null,r._live=null,r._objectUrl=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){u.prototype.destroy.call(this)},t.prototype.onLevelPtsUpdated=function(e){var t=e.type,i=this.tracks.audio;if("audio"===t&&i&&"audio/mpeg"===i.container){var r=this.sourceBuffer.audio;if(Math.abs(r.timestampOffset-e.start)>.1){var n=r.updating;try{r.abort()}catch(a){n=!0,s.b.warn("can not abort audio buffer: "+a)}n?this.audioTimestampOffset=e.start:(s.b.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}},t.prototype.onManifestParsed=function(e){var t=e.audio,i=e.video||e.levels.length&&e.altAudio,r=0;e.altAudio&&(t||i)&&(r=(t?1:0)+(i?1:0),s.b.log(r+" sourceBuffer(s) expected")),this.sourceBufferNb=r},t.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var i=this.mediaSource=new Te;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),i.addEventListener("sourceopen",this.onmso),i.addEventListener("sourceended",this.onmse),i.addEventListener("sourceclose",this.onmsc),t.src=window.URL.createObjectURL(i),this._objectUrl=t.src}},t.prototype.onMediaDetaching=function(){s.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(t){s.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):s.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(o.a.MEDIA_DETACHED)},t.prototype.onMediaSourceOpen=function(){s.b.log("media source opened"),this.hls.trigger(o.a.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},t.prototype.checkPendingTracks=function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},t.prototype.onMediaSourceClose=function(){s.b.log("media source closed")},t.prototype.onMediaSourceEnded=function(){s.b.log("media source ended")},t.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;s.b.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,i=this.segments.reduce(function(e,i){return i.parent===t?e+1:e},0),r={},n=this.sourceBuffer;for(var a in n)r[a]=n[a].buffered;this.hls.trigger(o.a.BUFFER_APPENDED,{parent:t,pending:i,timeRanges:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},t.prototype.onSBUpdateError=function(e){s.b.error("sourceBuffer error:",e),this.hls.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var i=e[t];try{this.mediaSource.removeSourceBuffer(i),i.removeEventListener("updateend",this.onsbue),i.removeEventListener("error",this.onsbe)}catch(r){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},t.prototype.onBufferCodecs=function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var i=this.mediaSource;i&&"open"===i.readyState&&this.checkPendingTracks()}},t.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,i=this.mediaSource;for(var r in e)if(!t[r]){var n=e[r],d=n.levelCodec||n.codec,l=n.container+";codecs="+d;s.b.log("creating sourceBuffer("+l+")");try{var u=t[r]=i.addSourceBuffer(l);u.addEventListener("updateend",this.onsbue),u.addEventListener("error",this.onsbe),this.tracks[r]={codec:d,container:n.container},n.buffer=u}catch(c){s.b.error("error while trying to add sourceBuffer:"+c.message),this.hls.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:c,mimeType:l})}}this.hls.trigger(o.a.BUFFER_CREATED,{tracks:e})},t.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},t.prototype.onBufferAppendFail=function(e){s.b.error("sourceBuffer error:",e.event),this.hls.trigger(o.a.ERROR,{type:a.b.MEDIA_ERROR,details:a.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferEos=function(e){var t=this.sourceBuffer,i=e.type;for(var r in t)i&&r!==i||t[r].ended||(t[r].ended=!0,s.b.log(r+" sourceBuffer now EOS"));this.checkEos()},t.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var i in e){var r=e[i];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}s.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(n){s.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},t.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},t.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._live=t.live,this.updateMediaElementDuration())},t.prototype.updateMediaElementDuration=function(){var e,t=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var i in this.sourceBuffer)if(!0===this.sourceBuffer[i].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(s.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=Infinity):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===Infinity||isNaN(e))&&(s.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},t.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,i=this.sourceBuffer;try{for(var r in i)t+=i[r].buffered.length}catch(n){s.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(o.a.BUFFER_FLUSHED)}},t.prototype.doAppending=function(){var e=this.hls,t=this.sourceBuffer,i=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void s.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(i&&i.length){var r=i.shift();try{var n=t[r.type];n?n.updating?i.unshift(r):(n.ended=!1,this.parent=r.parent,n.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(l){s.b.error("error while trying to append buffer:"+l.message),i.unshift(r);var d={type:a.b.MEDIA_ERROR,parent:r.parent};22!==l.code?(this.appendError?this.appendError++:this.appendError=1,d.details=a.a.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry?(s.b.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),i=[],d.fatal=!0,e.trigger(o.a.ERROR,d)):(d.fatal=!1,e.trigger(o.a.ERROR,d))):(this.segments=[],d.details=a.a.BUFFER_FULL_ERROR,d.fatal=!1,e.trigger(o.a.ERROR,d))}}}},t.prototype.flushBuffer=function(e,t,i){var r=void 0,n=void 0,a=void 0,o=void 0,d=void 0,l=void 0,u=this.sourceBuffer;if(Object.keys(u).length){if(s.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var c in u)if(!i||c===i){if((r=u[c]).ended=!1,r.updating)return s.b.warn("cannot flush, sb updating in progress"),!1;try{for(n=0;n<r.buffered.length;n++)if(a=r.buffered.start(n),o=r.buffered.end(n),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(d=e,l=t):(d=Math.max(a,e),l=Math.min(o,t)),Math.min(l,o)-d>.5)return this.flushBufferCounter++,s.b.log("flush "+c+" ["+d+","+l+"], of ["+a+","+o+"], pos:"+this.media.currentTime),r.remove(d,l),!1}catch(h){s.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else s.b.warn("abort flushing too many retries");s.b.log("buffer flushed")}return!0},t}(u),we=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var xe=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,o.a.FPS_DROP_LEVEL_CAPPING,o.a.MEDIA_ATTACHING,o.a.MANIFEST_PARSED,o.a.BUFFER_CODECS));return r.autoLevelCapping=Number.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},t.prototype.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},t.prototype.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},t.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&(e.video||e.levels.length&&e.altAudio)&&this._startCapping()},t.prototype.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this._startCapping()},t.prototype.onLevelsUpdated=function(e){this.levels=e.levels},t.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.prototype.getMaxLevel=function(e){var i=this;if(!this.levels)return-1;var r=this.levels.filter(function(r,n){return t.isLevelAllowed(n,i.restrictedLevels)&&n<=e});return t.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},t.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},t.isLevelAllowed=function(e){return-1===(arguments.length>1&&arguments[1]!==undefined?arguments[1]:[]).indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,i){if(!e||e&&!e.length)return-1;for(var r,n,a=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=i)&&(r=s,!(n=e[o+1])||r.width!==n.width||r.height!==n.height)){a=o;break}}return a},we(t,[{key:"mediaWidth",get:function(){var e=void 0,i=this.media;return i&&(e=i.width||i.clientWidth||i.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,i=this.media;return i&&(e=i.height||i.clientHeight||i.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(t){}return e}}]),t}(u);var Se=window.performance,Ce=function(e){function t(i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,o.a.MEDIA_ATTACHING))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,i){var r=Se.now();if(t){if(this.lastTime){var n=r-this.lastTime,a=i-this.lastDroppedFrames,d=t-this.lastDecodedFrames,l=1e3*a/n,u=this.hls;if(u.trigger(o.a.FPS_DROP,{currentDropped:a,currentDecoded:d,totalDroppedFrames:i}),l>0&&a>u.config.fpsDroppedMonitoringThreshold*d){var c=u.currentLevel;s.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=c)&&(c-=1,u.trigger(o.a.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,u.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=i,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(u);var Ie=window,De=Ie.performance,ke=Ie.XMLHttpRequest,Le=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,i){this.context=e,this.config=t,this.callbacks=i,this.stats={trequest:De.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e=void 0,t=this.context;e=this.loader=new ke;var i=this.stats;i.tfirst=0,i.loaded=0;var r=this.xhrSetup;try{if(r)try{r(e,t.url)}catch(n){e.open("GET",t.url,!0),r(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,i=t.readyState,r=this.stats,n=this.context,a=this.config;if(!r.aborted&&i>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(De.now(),r.trequest)),4===i){var o=t.status;if(o>=200&&o<300){r.tload=Math.max(r.tfirst,De.now());var d=void 0,l=void 0;l="arraybuffer"===n.responseType?(d=t.response).byteLength:(d=t.responseText).length,r.loaded=r.total=l;var u={url:t.responseURL,data:d};this.callbacks.onSuccess(u,r,n,t)}else r.retry>=a.maxRetry||o>=400&&o<499?(s.b.error(o+" while loading "+n.url),this.callbacks.onError({code:o,text:t.statusText},n,t)):(s.b.warn(o+" while loading "+n.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},e.prototype.loadtimeout=function(){s.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,i=this.stats;i.loaded=e.loaded,e.lengthComputable&&(i.total=e.total);var r=this.callbacks.onProgress;r&&r(i,this.context,null,t)},e}(),Re=(i(3),"undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null),Pe={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:undefined,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:Infinity,liveSyncDuration:undefined,liveMaxLatencyDuration:undefined,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:undefined,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Le,fLoader:undefined,pLoader:undefined,xhrSetup:undefined,licenseXhrSetup:undefined,abrController:Ee,bufferController:be,capLevelController:xe,fpsController:Ce,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:undefined,requestMediaKeySystemAccessFunc:Re};var Oe=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();i(13);var Ne=function(){function e(){var t=this,i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=e.DefaultConfig;if((i.liveSyncDurationCount||i.liveMaxLatencyDurationCount)&&(i.liveSyncDuration||i.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var n in r)n in i||(i[n]=r[n]);if(i.liveMaxLatencyDurationCount!==undefined&&i.liveMaxLatencyDurationCount<=i.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(i.liveMaxLatencyDuration!==undefined&&(i.liveMaxLatencyDuration<=i.liveSyncDuration||i.liveSyncDuration===undefined))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(s.a)(i.debug),this.config=i,this._autoLevelCapping=-1;var a=this.observer=new j.a;a.trigger=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];a.emit.apply(a,[e,e].concat(i))},a.off=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];a.removeListener.apply(a,[e].concat(i))},this.on=a.on.bind(a),this.off=a.off.bind(a),this.once=a.once.bind(a),this.trigger=a.trigger.bind(a);var o=this.abrController=new i.abrController(this),d=new i.bufferController(this),l=new i.capLevelController(this),u=new i.fpsController(this),c=new L(this),h=new R(this),f=new P(this),p=new ye(this),v=this.levelController=new fe(this),y=new U(this),g=[v,this.streamController=new le(this,y)],m=i.audioStreamController;m&&g.push(new m(this,y)),this.networkControllers=g;var A=[c,h,f,o,d,l,u,p,y];if(m=i.audioTrackController){var _=new m(this);this.audioTrackController=_,A.push(_)}if(m=i.subtitleTrackController){var E=new m(this);this.subtitleTrackController=E,A.push(E)}if(m=i.emeController){var T=new m(this);this.emeController=T,A.push(T)}[i.subtitleStreamController,i.timelineController].forEach(function(e){e&&A.push(new e(t))}),this.coreComponents=A}return e.isSupported=function(){return e=Y(),t=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove,!!i&&!!r;var e,t,i,r},Oe(e,null,[{key:"version",get:function(){return"0.10.1"}},{key:"Events",get:function(){return o.a}},{key:"ErrorTypes",get:function(){return a.b}},{key:"ErrorDetails",get:function(){return a.a}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:Pe},set:function(t){e.defaultConfig=t}}]),e.prototype.destroy=function(){s.b.log("destroy"),this.trigger(o.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},e.prototype.attachMedia=function(e){s.b.log("attachMedia"),this.media=e,this.trigger(o.a.MEDIA_ATTACHING,{media:e})},e.prototype.detachMedia=function(){s.b.log("detachMedia"),this.trigger(o.a.MEDIA_DETACHING),this.media=null},e.prototype.loadSource=function(e){e=n.a.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),s.b.log("loadSource:"+e),this.url=e,this.trigger(o.a.MANIFEST_LOADING,{url:e})},e.prototype.startLoad=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;s.b.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},e.prototype.stopLoad=function(){s.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},e.prototype.swapAudioCodec=function(){s.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.prototype.recoverMediaError=function(){s.b.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},Oe(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){s.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){s.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){s.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){s.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){s.b.log("set startLevel:"+e);-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){s.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,i=e?e.length:0,r=0;r<i;r++){if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>t)return r}return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),e}();t["default"]=Ne},function(e,t,i){function r(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.i=function(e){return e},i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var r=i(i.s=ENTRY_MODULE);return r["default"]||r}var n="[\\.|\\-|\\+|\\w|/|@]+",a="\\((/\\*.*?\\*/)?s?.*?("+n+").*?\\)";function o(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e,t,r){var s={};s[r]=[];var d=t.toString(),l=d.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return s;for(var u,c=l[1],h=new RegExp("(\\\\n|\\W)"+o(c)+a,"g");u=h.exec(d);)"dll-reference"!==u[3]&&s[r].push(u[3]);for(h=new RegExp("\\("+o(c)+'\\("(dll-reference\\s('+n+'))"\\)\\)'+a,"g");u=h.exec(d);)e[u[2]]||(s[r].push(u[1]),e[u[2]]=i(u[1]).m),s[u[2]]=s[u[2]]||[],s[u[2]].push(u[4]);return s}function d(e){return Object.keys(e).reduce(function(t,i){return t||e[i].length>0},!1)}e.exports=function(e,t){t=t||{};var n={main:i.m},a=t.all?{main:Object.keys(n)}:function(e,t){for(var i={main:[t]},r={main:[]},n={main:{}};d(i);)for(var a=Object.keys(i),o=0;o<a.length;o++){var l=a[o],u=i[l].pop();if(n[l]=n[l]||{},!n[l][u]&&e[l][u]){n[l][u]=!0,r[l]=r[l]||[],r[l].push(u);for(var c=s(e,e[l][u],l),h=Object.keys(c),f=0;f<h.length;f++)i[h[f]]=i[h[f]]||[],i[h[f]]=i[h[f]].concat(c[h[f]])}}return r}(n,e),o="";Object.keys(a).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;a[e][t];)t++;a[e].push(t),n[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a[e].map(function(t){return JSON.stringify(t)+": "+n[e][t].toString()}).join(",")+"});\n"}),o=o+"("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.main.map(function(e){return JSON.stringify(e)+": "+n.main[e].toString()}).join(",")+"})(self);";var l=new window.Blob([o],{type:"text/javascript"});if(t.bare)return l;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),c=new window.Worker(u);return c.objectURL=u,c}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(9),n=i(1),a=i(0),o=i(6),s=i.n(o);t["default"]=function(e){var t=new s.a;t.trigger=function(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];t.removeListener.apply(t,[e].concat(r))};var i=function(t,i){e.postMessage({event:t,data:i})};e.addEventListener("message",function(n){var o=n.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new r.a(t,o.typeSupported,s,o.vendor);try{Object(a.a)(!0===s.debug)}catch(d){console.warn("demuxerWorker: unable to enable logs")}i("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),t.on(n.a.FRAG_DECRYPTED,i),t.on(n.a.FRAG_PARSING_INIT_SEGMENT,i),t.on(n.a.FRAG_PARSED,i),t.on(n.a.ERROR,i),t.on(n.a.FRAG_PARSING_METADATA,i),t.on(n.a.FRAG_PARSING_USERDATA,i),t.on(n.a.INIT_PTS_FOUND,i),t.on(n.a.FRAG_PARSING_DATA,function(t,i){var r=[],n={event:t,data:i};i.data1&&(n.data1=i.data1.buffer,r.push(i.data1.buffer),delete i.data1),i.data2&&(n.data2=i.data2.buffer,r.push(i.data2.buffer),delete i.data2),e.postMessage(n,r)})}},function(e,t){String.prototype.endsWith||function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(r){}return i}(),t={}.toString,i=function(e){if(null==this)throw TypeError();var i=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var r=i.length,n=String(e),a=n.length,o=r;if(arguments.length>1){var s=arguments[1];s!==undefined&&(o=s?Number(s):0)!=o&&(o=0)}var d=Math.min(Math.max(o,0),r)-a;if(d<0)return!1;for(var l=-1;++l<a;)if(i.charCodeAt(d+l)!=n.charCodeAt(l))return!1;return!0};e?e(String.prototype,"endsWith",{value:i,configurable:!0,writable:!0}):String.prototype.endsWith=i}()}])["default"]},e.exports=r()},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(74),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"requestVideoUrlsByVid",value:function(e){var t=this;e=e||{};var i=function(e){if("string"==typeof e){var t=document.createElement("a");return t.href=e,t.protocol+"//"+t.host+t.pathname}},r=function(e){var t=[];for(var i in e)t.push(i+"="+e[i]);return t.join("&")},a=function(e){var t="";try{window.localStorage&&(t=window.localStorage[e])}catch(i){}return t},o=function(e){e=e||10;var t=parseInt(+new Date)+"";if(t.length===e)return t;if(t.length>e)return t.substring(0,e);for(var i=e-t.length;i>0;)t="0"+t,i--;return t}(),s=(new Date).getDay(),d="7."+(0==s?7:s),l=n.$xx("10201",e.vid,"v1010",1,o,d),u="";try{u=location.href.replace(location.search,"")}catch(y){}var c=window!=top?i(document.referrer||""):document.location.host,h=function(i){if(i&&0==i.errCode&&i.vinfo){var r,n,a;try{r=JSON.parse(i.vinfo)}catch(y){console.log("requestVideoUrlsByVid parse json:",y)}r&&"o"==r.s&&r.vl&&r.vl.vi&&(3==r.dltype||8==r.dltype?(n=t.parseHls(r),a="hls"):1==r.dltype&&(n=t.parseMp4(r,{guid:e.guid}),a="mp4")),n?e.onSucc({urls:n.urls,m3u8:n.m3u8,type:a}):e.onFail()}else e.onFail()},f="//vd.l.qq.com/proxyhttp",p={buid:"onlyvinfo",vinfoparam:r({appVer:"3.5.57",cKey:l,charge:0,defaultfmt:"auto",defn:"",defnpayver:0,defsrc:2,dtype:3,ehost:i(u),encryptVer:d,fhdswitch:0,flowid:e.flowid,guid:e.guid,host:c,isHLS:1,onlyGetinfo:!0,otype:"ojson",platform:"10201",refer:u,sdtfrom:"v1010",show1080p:0,sphttps:"https:"===location.protocol?1:0,spwm:4,tm:o,unid:a("txp-unid"),vid:e.vid,sphls:2,spgzip:1,dlver:2})};if(window.$&&window.$.ajax)$.ajax({method:"GET",type:"GET",url:f,crossDomain:!0,xhrFields:{withCredentials:!0},timeout:8e3,dataType:"jsonp",contentType:"application/javascript",data:p}).done(function(e){h(e)}).fail(function(t,i){e.onFail({err:i})});else{var v=new XMLHttpRequest;v.open("POST",f,!0),v.responseType="text",v.timeout="8000",v.withCredentials=!0,v.setRequestHeader("Content-type","text/plain"),v.send(JSON.stringify(p)),v.onload=function(){if(200===v.status&&v.response){var t;try{t=JSON.parse(v.response)}catch(y){console.log("requestVideoUrlsByVid parse json:",y)}h(t)}else e.onFail()},v.onerror=function(t){e.onFail({err:t})}}}},{key:"parseHls",value:function(e){var t=[],i=void 0,r=e.vl.vi[0]||void 0;if(r&&r.ul&&r.ul.ui&&r.ul.ui.length)for(var n,a=0,o=r.ul.ui.length;a<o;a++)(n=r.ul.ui[a]).url&&n.hls&&n.hls.pt?t.push(n.url+n.hls.pt):8==e.dltype&&t.push(n.url);return 8===e.dltype&&r&&r.ul&&(i=r.ul.m3u8),{urls:t,m3u8:i}}},{key:"parseMp4",value:function(e,t){var i,r=[],n=e.vl.vi[0]||void 0,a=n.cl.fc;if(!n.cl.ci&&n.fvkey&&n.fn&&n.ul&&n.ul.ui&&n.ul.ui.length)return r;if(!n.cl.ci||a!==n.cl.ci.length)return r;t.vkey=n.fvkey;for(var o=0;o<a;o++){i=this.getSplitFileName(n.fn,o+1),r=this.getInfoPath(n.ul,n.lnk,i,t);break}return{urls:r}}},{key:"getSplitFileName",value:function(e,t){if(0===t)return e;var i=e.lastIndexOf(".");return e.substr(0,i)+"."+t+e.substring(i)}},{key:"getInfoPath",value:function(e,t,i,r){for(var n=[],a={},o={},s=e.ui.length,d=0;d<s;d++)if(o={},(a=e.ui[d]).url){a.url&&-1===a.url.indexOf(t+".flv")&&-1===a.url.indexOf(t+".mp4")?o.url=a.url+i:o.url=a.url,a.vt&&(o.vt=parseInt(a.vt));var l=o.url.indexOf("?")>-1?"&":"?";o.url+=l+"guid="+r.guid+"&sdtfrom=&vkey="+r.vkey,n.push(o.url)}return n}}]),e}();e.exports=a},function(e,t,i){"use strict";var r={};r.ha=function(e){for(var t=[],i=0;i<64;)t[i]=0|4294967296*Math.abs(Math.sin(++i));function r(e,t){return((e>>1)+(t>>1)<<1)+(1&e)+(1&t)}return function(e){for(var i,n,a,o,s=[],d=unescape(encodeURI(e)),l=d.length,u=[i=1732584193,n=-271733879,~i,~n],c=0;c<=l;)s[c>>2]|=(d.charCodeAt(c)||128)<<c++%4*8;for(s[e=16*(l+8>>6)+14]=8*l,c=0;c<e;c+=16){for(l=u,o=0;o<64;)l=[a=l[3],r(i=l[1],(a=r(r(l[0],[i&(n=l[2])|~i&a,a&i|~a&n,i^n^a,n^(i|~a)][l=o>>4]),r(t[o],s[[o,5*o+1,3*o+5,7*o][l]%16+c])))<<(l=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*l+o++%4])|a>>>32-l),i,n];for(o=4;o;)u[--o]=r(u[o],l[o])}for(e="";o<32;)e+=(u[o>>3]>>4*(1^7&o++)&15).toString(16);return e}}(),r.stringToHex=function(e){for(var t="",i=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),r=0;r<e.length;r++)t+=i[e.charCodeAt(r)>>4]+i[15&e.charCodeAt(r)];return t},r.hexToString=function(e){for(var t="",i="0x"==e.substr(0,2)?2:0;i<e.length;i+=2)t+=String.fromCharCode(parseInt(e.substr(i,2),16));return t},r._Seed="#$#@#*ad",r.tempcalc=function(e,t){for(var i="",r=0;r<e.length;r++)i+=String.fromCharCode(e.charCodeAt(r)^t.charCodeAt(r%4));return i},r.u1=function(e,t){for(var i="",r=t;r<e.length;r+=2)i+=e.charAt(r);return i},r._urlStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r.urlenc=function(e,t,i){for(var n,a,o,s,d,l,u,c="",h=0;h<e.length;)n=e.charCodeAt(h++),a=e.charCodeAt(h++),o=e.charCodeAt(h++),15==h&&(c+="A",c+=t,c+=i),s=n>>2,d=(3&n)<<4|a>>4,l=(15&a)<<2|o>>6,u=63&o,isNaN(a)?l=u=64:isNaN(o)&&(u=64),c=c+r._urlStr.charAt(s)+r._urlStr.charAt(d)+r._urlStr.charAt(l)+r._urlStr.charAt(u);return c},r.$xx=function(e,t,i,n,a,o){var s="123456";if(o.length<3)return"err";if("7."!=o.substr(0,2))return"err";var d=o.substr(2);"1"==d&&(s="06fc1464"),"2"==d&&(s="4244ce1b"),"3"==d&&(s="77de31c5"),"4"==d&&(s="e0149fa2"),"5"==d&&(s="60394ced"),"6"==d&&(s="2da639f0"),"7"==d&&(s="c2f0cf9f");a=a||parseInt(+new Date/1e3),n=(""+n).charAt(0);return r.ha(s+t+a+"*#06#"+e)},e.exports=r},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(5);e.exports=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lsKey="gp-cacdc",this.conf=t,this.$dom=i,this.reset(),this.bindPlayerEvent()}return r(e,[{key:"bindPlayerEvent",value:function(){var e=this;this._filmFirstPlayListener=function(){e.onFilmFirstPlayListener()},this.conf.playerMsg&&this.conf.playerMsg.on("filmFirstPlay",this._filmFirstPlayListener)}},{key:"onFilmFirstPlayListener",value:function(){if(!this.filmFirstPlay){this.filmFirstPlay=!0;var e=this.getLSValue();if(this.errorByADBlock&&0==e)this.setLSValue(1);else if(this.hasShow){var t=Math.min(4,e+1);this.setLSValue(t)}this.reset()}}},{key:"unBindPlayerEvent",value:function(){this.conf.playerMsg&&this._filmFirstPlayListener&&this.conf.playerMsg.off("filmFirstPlay",this._filmFirstPlayListener)}},{key:"onAdPlaying",value:function(){this.setLSValue(this.getLSValue()-1)}},{key:"isNeedShow",value:function(e){if(!this.showing){var t=this.getLSValue();this.errorByADBlock&&1==t?this.startDowndown(e,30):this.errorByADBlock&&2==t?this.startDowndown(e,45):this.errorByADBlock&&t>=3?this.startDowndown(e,60):e()}}},{key:"startDowndown",value:function(e,t){var i=this;this.hasShow=!0,this.showing=!0;var r=t,a=this.$dom.querySelector(".txp_cac_black_screen_em");n.removeClass(this.$dom,"txp_none"),a.innerHTML=""+t,this.conf.playerMsg&&this.conf.playerMsg.broadcast("blackScreenEvt",{bc:this.getLSValue()}),this.startDowndownID=setInterval(function(){console.log("back screen>>",r),r>0?(r--,a.innerHTML=""+r):(i.startDowndownID>0&&(clearInterval(i.startDowndownID),i.startDowndownID=0),e(),n.addClass(i.$dom,"txp_none"),i.showing=!1)},1e3)}},{key:"reset",value:function(){this.unBindPlayerEvent(),this.filmFirstPlay=!1,this.errorByADBlock=!1,this.hasShow=!1,this.showing=!1,this.$dom&&n.addClass(this.$dom,"txp_none"),this.startDowndownID>0&&(clearInterval(this.startDowndownID),this.startDowndownID=0)}},{key:"getLSValue",value:function(){try{if(window.localStorage)return+window.localStorage.getItem(this.lsKey)}catch(e){return 0}return 0}},{key:"setLSValue",value:function(e){try{window.localStorage&&window.localStorage.setItem(this.lsKey,e)}catch(t){}}}]),e}()},function(e,t,i){"use strict";var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,a=undefined;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(d){n=!0,a=d}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=function h(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:h(n,t,i)}if("value"in r)return r.value;var a=r.get;return a===undefined?undefined:a.call(i)};var o=i(4),s=i(6),d=i(26),l=i(27),u=i(1),c=i(0)("base/embedAd");e.exports=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.message=e.message,i.ready=!0,i.loadStatus=!1,i.startTime=new Date,i.getRes(),i.write(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s),n(t,[{key:"getRes",value:function(){var e=this.info.creative||[];if(!e.length)return{};var t=e[0],i=t.material&&t.material.length&&t.material[0]||{};this.material=i}},{key:"write",value:function(){var e=this;this.$dom&&Promise.all([this.loadRes(),l()]).then(function(i){var n=r(i,2),o=(n[0],n[1]);e.$dom.html(e.generateDom(o[e.info.adtype])),e.show(),"PVL"===e.info.adtype&&e.message.emit(u.REPORT_EVENT.AD_VIEW,{adInfo:e.info}),e.firstview=parseInt(window.performance.now(),10),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_loadReadyHandler",e).call(e)})["catch"](function(t){c.log(t),e.destroy()})}},{key:"loadRes",value:function(){var e=this;return this.material.url?(this.imageMaterial=new d({url:this.material.url}),new Promise(function(t,i){e.imageMaterial.load().then(function(i){var r=new Date;e.message.emit(u.REPORT_EVENT.AD_LOAD_COMPLETE,{adInfo:e.info,adload:r-e.startTime,tpindex:1,oid:e.info.order_id}),e.loadStatus=!0,t(i)})["catch"](function(){e.message.emit(u.REPORT_EVENT.AD_LOAD_COMPLETE,{adInfo:e.info,errorcode:2301}),i("image load failed")})})):Promise.reject("no url")}},{key:"generateDom",value:function(e){var t="",i=this.material.url,r=this.info.adtype,n="1"==e?"":"txp_none";switch(r){case"PPB":t='\n                    <img src="'+i+'" class="">\n                    <txpdiv class="txp_ad_mark '+n+'">\u5e7f\u544a</txpdiv>\n                ';break;case"PVL":t='\n                    <img src="'+i+'" width="200" class="txp_img">\n                    <txpdiv class="txp_ad_mark '+n+'">\u5e7f\u544a</txpdiv>\n                ';break;case"PDF":var a=this.info.extParams&&this.info.extParams.richdata;if(!a){var o=this.info.extParams&&Object.keys(this.info.extParams)[0];a=o&&decodeURIComponent(o)||"";try{a=Txplayer.util.getUrlParam("richdata",a),a=JSON.parse(a)}catch(s){a={}}}t='\n                    <img src="'+i+'" class="txp_definition_ad" style="width: 40px; height: 23px;">\n                    <txpdiv class="txp_definition_ad_text">'+(a.plugins&&a.plugins.title||"")+'</txpdiv>\n                    <txpdiv class="txp_ad_mark '+n+'">\u5e7f\u544a</txpdiv>\n                '}return t}},{key:"play",value:function(){this.show()}},{key:"stop",value:function(e){this.state!=o.END&&(this.hide(),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this,e))}},{key:"show",value:function(){this.isShow||(this.$dom&&this.$dom.removeClass("txp_none"),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this))}},{key:"hide",value:function(){this.isShow&&(this.$dom&&(this.$dom.addClass("txp_none"),this.material&&this.material.url&&(this.message.emit(u.REPORT_EVENT.AD_END,{adInfo:this.info,adtt:new Date-this.startTime,firstview:this.firstview}),this.material=null)),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this))}},{key:"destroy",value:function(){this.imageMaterial&&this.imageMaterial.destroy(),this.stop()}}]),t}()},function(e,t,i){"use strict";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function l(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var n=Object.getPrototypeOf(e);return null===n?undefined:l(n,t,i)}if("value"in r)return r.value;var a=r.get;return a===undefined?undefined:a.call(i)};var a=i(0)("base/zcAd"),o=i(1),s=i(5),d=i(21);e.exports=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._name=e._name,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d),r(t,[{key:"_loadReadyHandler",value:function(e){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_loadReadyHandler",this).call(this,e),this.startEnterCountdown(e)}},{key:"stop",value:function(e){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this,e),s.text(this.$dom.$enterCountdown.$countdownNum,""),s.hide(this.$dom.$enterCountdown.$countdown),s.hide(this.$dom.$enterCountdown.layer),clearInterval(this.enterCountdownTimer)}},{key:"startEnterCountdown",value:function(e){var t=10,i=this,r=this.$dom.$enterCountdown.$countdown,n=this.$dom.$enterCountdown.$countdownNum;s.text(n,t),"VipDisplay"!=e.displayCode&&s.show(r),s.show(this.$dom.$enterCountdown.layer),this.message.emit(o.TXPLAYER_EVENT.AD_ENTER_COUNTDOWN,e),this.enterCountdownTimer=setInterval(function(){(t-=1)>=0&&s.text(n,t),0==t&&(clearInterval(i.enterCountdownTimer),s.text(n,""),s.hide(r),s.hide(i.$dom.$enterCountdown.layer),i.message.emit(o.TXPLAYER_EVENT.AD_ENTER_COUNTDOWN_COMPLETE,e)),a.log("\u4e2d\u63d2\u5f00\u59cb\u5012\u8ba1\u65f6\uff1a",t)},1e3)}}]),t}()},function(e,t,i){"use strict";i(0)("base/endingAd");var r=i(21);e.exports=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._name=e._name,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r),t}()}]);!function(s){var a={};function i(t){if(a[t])return a[t].exports;var e=a[t]={i:t,l:!1,exports:{}};return s[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=s,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=139)}({139:function(t,e,s){t.exports=s(140)},140:function(t,e,s){var r=s(141),l=s(142),d=s(143),h=s(144),a=s(37),p=Txplayer.util,c=Txplayer.$;function i(t){if(c=Txplayer.$,this.dataset={},this.context=t,!p.mobile&&window.jQuery&&s(145),c.Deferred||s(49),c.Callbacks||s(50),c.jsonp||s(15),this.context.config.createPlayerAfterCssLoaded)return this.init();this.init()}i.prototype={init:function(){return this.dataset.defer=Txplayer.$.Deferred(),Txplayer.dataset.pluginsPreload&&!this.context.config.containerId?(this.dataset.defer.reject(),this.dataset.defer):this.context.config.containerId?(this.dataset.$container=c("#"+this.context.config.containerId),this.dataset.ipadClass="txp_player_pad",this.dataset.miniSkinClass="txp_player_desktop_mini",this.dataset.v4MiniSkinClass="txp_player_mini",this.dataset.v4XsSkinClass="txp_player_xs",this.context.dataset.isWindowFocus=!0,this.dataset.$container&&this.dataset.$container.length?(this.loadHTML5PlayerSkin(),this.write(),this.exportsModuleApis(),this.addEventListener(),void p.loadSubPlugins(this)):(p.showError("[HtmlFrame\u521d\u59cb\u5316\u9519\u8bef]","\u6ca1\u627e\u5230id="+this.context.config.containerId+"\u7684dom\u8282\u70b9!"),this.dataset.defer.reject(),this.dataset.defer)):(p.showError("[HtmlFrame\u521d\u59cb\u5316\u9519\u8bef]","\u53c2\u6570containerId\u6ca1\u627e\u5230!"),this.dataset.defer.reject(),this.dataset.defer)},getModStyle:function(){var t=[];function e(t){return"number"!=typeof(t=t||"100%")&&("string"!=typeof t||-1<t.indexOf("%"))?t:parseInt(t)+"px"}return t.push("width:"+e(this.context.config.width)),t.push("height:"+e(this.context.config.height)),t.join(";")},loadHTML5PlayerSkin:function(){var t,e;"flash"!==this.context.config.playerType?Txplayer.dataset.disableLoadTxplayerCss||(t=this,(e=Txplayer.dataset.H5PlayerStyleUrl[this.context.config.playerType])?p.loadCss(e).done(function(){t.dataset.defer.resolve()}).fail(function(){p.showError("\u627e\u4e0d\u5230\u64ad\u653e\u5668\u7684\u76ae\u80a4\u6837\u5f0f\u6587\u4ef6",Txplayer.dataset.HdPlayerStyleUrl)}):t.dataset.defer.resolve()):this.dataset.defer.resolve()},write:function(){var t=this.context.config.useSVG||-1<Txplayer.$.inArray(this.context.config.playerType,["html5hd","nintendo","ipadh5","chromehls","safarihls","touch"])?1:0,e="flash"!==this.context.config.playerType?'tabindex="-1"':"";
// if (Txplayer.dataset.maxId > 1 && Txplayer.$('.txp_svg_sprite').length) useSVG = false;
t&&document.createElement("txpdiv");var s,a={useSVG:t,ie:p.browser.ie,playerid:"txplayer_"+this.context.config.playerId,mod_stype:this.getModStyle(),tabindex:e,gradient_top:"txp-frame-gradient-top"};t&&(s=p.isTouchPlayer(this.context)?h:d,0===Txplayer.$("body ._txplayer_svg_sprite").length&&Txplayer.$("body").append(Txplayer.$.tmpl(s,{})));var i,n=["HtmlFrame.write Error:"],o=this;try{var c=Txplayer.$.tmpl(p.isTouchPlayer(this.context)?l:r,a);this.dataset.$container.html(c),this.dataset.$playermod=this.dataset.$container.find("#"+a.playerid),this.context.dataset.$playermod=this.dataset.$playermod,this.dataset.$gradientTop=this.dataset.$container.find('[data-role="'+a.gradient_top+'"]'),this.dataset.$gradientTop.addClass(Txplayer.dataset.hideClass),"v.qq.com"===location.hostname&&!0!==this.context.config.showLogo||this.dataset.$playermod.addClass("txp_player_external"),Txplayer.dataset.maxId++}catch(t){n.push(t.message),i=t.stack}if(1<n.length)return n=n.join("\n"),void o.context.msg.broadcast(Txplayer.apiList.privateApi.reportError,{msg:n,code:Txplayer.define.reportCode.JS_ERROR,stack:i});"ipadh5"===this.context.config.playerType&&this.dataset.$playermod.addClass(this.dataset.ipadClass),this.dataset.defer.then(function(){o.updateMiniSkinClass()}),this.context.msg.on("ready",function(){o.context.dataset.playerWidth=o.context.dataset.$playermod.width(),o.context.dataset.playerHeight=o.context.dataset.$playermod.height()})},updateMiniSkinClass:function(){if(this.context.config.useMiniSkin)if("v4"===this.context.config.version){var t=this.context.dataset.$playermod.width(),e=this.context.dataset.$playermod.height();if(0===t&&0===e)return;e<=255||t<=400?this.dataset.$playermod.addClass(this.dataset.v4XsSkinClass).addClass(this.dataset.v4MiniSkinClass):e<=265||t<=470?this.dataset.$playermod.removeClass(this.dataset.v4XsSkinClass).addClass(this.dataset.v4MiniSkinClass):(this.dataset.$playermod.removeClass(this.dataset.v4XsSkinClass).removeClass(this.dataset.v4MiniSkinClass),this.context.config.useMiniSkin=!1)}else this.dataset.$playermod.addClass(this.dataset.miniSkinClass);else"v4"===this.context.config.version?this.dataset.$playermod.removeClass(this.dataset.v4XsSkinClass).removeClass(this.dataset.v4MiniSkinClass):this.dataset.$playermod.removeClass(this.dataset.miniSkinClass),this.context.config.useMiniSkin=!1},resize:function(t){"object"!==c.type(t)||c.isEmptyObject(t)||!t.hasOwnProperty("width")&&!t.hasOwnProperty("height")||(this.dataset.$playermod.css(t),this.context.dataset.playerWidth=this.dataset.$container.width(),this.context.dataset.playerHeight=this.dataset.$container.height(),this.broadCaseResizeMsg())},autoResize:function(t){t=t||"width";var e,s,a={width:this.context.dataset.videoWidth,height:this.context.dataset.videoHeight};if(!a.width||!a.height)return!1;"width"===t?(e=this.dataset.$playermod.width(),this.resize({height:parseInt(e*(a.height/a.width))})):(s=this.dataset.$playermod.height(),this.resize({width:parseInt(s*(a.width/a.height))}))},broadCaseResizeMsg:function(){var t={width:this.context.dataset.$playermod.width(),height:this.context.dataset.$playermod.height()};this.context.dataset.playerWidth=t.width,this.context.dataset.playerHeight=t.height,this.context.msg.broadcast("resize",t);try{this.context.userMsg.broadcast("resize",t)}catch(t){}this.autoToggleMiniSkin()},autoToggleMiniSkin:function(){if(this.context.config.miniSkinAdaptive){function t(t){t!=e.context.config.useMiniSkin&&(e.context.config.useMiniSkin=t,e.updateMiniSkinClass(),e.context.msg.broadcast("miniSkinChange"))}var e=this;if("v4"===this.context.config.version){var s=this.context.dataset.$playermod.width(),a=this.context.dataset.$playermod.height();if(0===s&&0===a)return;t(a<=255||s<=400||a<=265||s<=470)}else this.context.dataset.playerWidth<=470?t(!0):t(!1)}},destroy:function(t){p.v4log("destroy:",t);var e,s=this;if("all"===t)for(var a in Txplayer.dataset._instance)Txplayer.dataset._instance[a]&&"function"===Txplayer.$.type(Txplayer.dataset._instance[a].destroy)&&Txplayer.dataset._instance[a].destroy();else"HtmlFrame"===t?(Txplayer.$.each(this.dataset.moduleApis,function(t,e){s.context.msg.off(t,e)}),Txplayer.$.each(this,function(t,e){})):"string"===Txplayer.$.type(t)?s.context.msg.broadcast("destroyPlugin",t):(s.dataset.$container.html(""),e=s.context.dataset.playerId,s.context.msg.broadcast("destroyPlugin"),Txplayer.dataset._instance[e]&&(Txplayer.dataset._instance[e]=null,delete Txplayer.dataset._instance[e]))},getPlayerSize:function(){return{width:this.context.dataset.playerWidth,height:this.context.dataset.playerHeight}},isPlayerInScreen:function(){return!!p.isInScreen(this.dataset.$container)},isWindowFocus:function(){return this.context.dataset.isWindowFocus},addEventListener:function(){var t,o=this;function e(){o.context.dataset.isWindowFullscreen||o.context.dataset.isBrowserFullscreen?(o.context.dataset.isControlShow&&o.dataset.$playermod.css({cursor:"auto"}),clearTimeout(t),t=setTimeout(function(){p.v4log("timeout hide mouse",o.context.dataset.isControlShow),!o.context.dataset.isWindowFullscreen&&!o.context.dataset.isBrowserFullscreen||o.context.dataset.isControlShow?o.dataset.$playermod.css({cursor:"auto"}):o.dataset.$playermod.css({cursor:"none"})},5e3)):o.dataset.$playermod.css({cursor:"auto"})}this.dataset.$playermod.on("click",function(t){var e=t.target,s=c(e),a=s.attr("data-report");(a=(a=a||s.parent().attr("data-report"))||s.parent().parent().attr("data-report"))&&o.context.msg.broadcast("reportUsrAction",{usr_action:a});var i=s.attr("data-action");if(e.nodeName&&e.nodeName.toLowerCase&&"a"===e.nodeName.toLowerCase()&&i)if("openTxVideo"===i){var n=p.getTxVideoPageURLByVid(o.context.dataset.vid);n&&window.open(n)}else if("openVIP"===i){o.context.msg.broadcast("pause"),o.context.msg.broadcast("showUIVipGuide",{openvip:!0});try{o.context.userMsg.broadcast("showUIVipGuide",{openvip:!0})}catch(t){}}else if("shareVIP"===i)try{o.context.dataset.openAccountData&&o.context.dataset.openAccountData[s.attr("data-click")]&&o.context.userMsg.broadcast("playerEmitCommonMsg",{type:"accountBannedTip",data:o.context.dataset.openAccountData[s.attr("data-click")]})}catch(t){}else"clickTips"===i?o.context.msg.broadcast("uiTipsClicked",{type:"html5",target:t.target}):"customTips"===i?o.context.userMsg.broadcast("customTipsClicked",{target:t.target}):"refresh"==i&&window.location.reload()}).on("mousemove",e),c(document).on(p.getNSEventName("show",o.context),function(){o.context.dataset.isWindowFocus=!0}),c(document).on(p.getNSEventName("hide",o.context),function(){o.context.dataset.isWindowFocus=!1}),this.context.msg.on("windowFullscreenChange",function(t){o.dataset.playerFullScreenChangeTimer&&(clearTimeout(o.dataset.playerFullScreenChangeTimer),o.dataset.playerFullScreenChangeTimer=null),o.dataset.playerFullScreenChangeTimer=setTimeout(function(){o.broadCaseResizeMsg()},300),t?o.dataset.$gradientTop.removeClass(Txplayer.dataset.hideClass):o.dataset.$gradientTop.addClass(Txplayer.dataset.hideClass),e()}),this.context.msg.on("browserFullscreenChange",function(t){o.dataset.playerFullScreenChangeTimer&&(clearTimeout(o.dataset.playerFullScreenChangeTimer),o.dataset.playerFullScreenChangeTimer=null),o.dataset.playerFullScreenChangeTimer=setTimeout(function(){o.broadCaseResizeMsg()},100),t?o.dataset.$gradientTop.removeClass(Txplayer.dataset.hideClass):o.dataset.$gradientTop.addClass(Txplayer.dataset.hideClass),e()}),c(window).on(p.getNSEventName("resize",o.context),function(){o.dataset.documentResizeTimer&&(clearTimeout(o.dataset.documentResizeTimer),o.dataset.documentResizeTimer=null),o.dataset.documentResizeTimer=setTimeout(function(){o.broadCaseResizeMsg()},150),o.dataset.psjResizeTimer&&(clearTimeout(o.dataset.psjResizeTimer),o.dataset.psjResizeTimer=null),o.dataset.psjResizeTimer=setTimeout(function(){o.broadCaseResizeMsg(),clearTimeout(o.dataset.psjResizeTimer)},600)}),this.context.msg.on(p.getUniqueMsgKey("videoPlay"),function(t){"film"!==t.playListType||o.dataset.hasTrigger||(o.dataset.hasTrigger=!0,o.broadCaseResizeMsg())}),this.context.msg.on(p.getUniqueMsgKey("beforeVideoPlay"),function(t){o.dataset.hasTrigger||(o.dataset.hasTrigger=!0,o.broadCaseResizeMsg())})},exportsModuleApis:function(){var s=this;this.dataset.moduleApis={},this.dataset.moduleApis.resize=function(){return s.resize.apply(s,arguments)},this.dataset.moduleApis.destroy=function(){return s.destroy.apply(s,arguments)},this.dataset.moduleApis.getPlayerSize=function(){return s.getPlayerSize.apply(s,arguments)},this.dataset.moduleApis.autoResize=function(){return s.autoResize.apply(s,arguments)},this.dataset.moduleApis.isPlayerInScreen=function(){return s.isPlayerInScreen.apply(s,arguments)},this.dataset.moduleApis.isWindowFocus=function(){return s.isWindowFocus.apply(s,arguments)},c.extend(this.context.userApi,this.dataset.moduleApis),this.dataset.dataApis={},this.dataset.dataApis.isPlayerInScreen=function(t,e){e.data=s.isPlayerInScreen()},c.each(this.dataset.dataApis,function(t,e){s.context.msg.setData(t,e)})}},Txplayer.v4errcode=a,Txplayer.register("HtmlFrame",i)},141:function(t,e){t.exports='<% if(!useSVG){ %>\n  <div class="txp_player" id="<%=playerid%>" style="<%=mod_stype%>">\n    <div style="width:1px;height:1px;display:block;-webkit-user-select: auto;user-select: auto;"></div>\n  </div>\n<% }else{%>\n  <txpdiv class="txp_player txp_player_desktop txp_autohide_progress" id="<%=playerid%>" style="<%=mod_stype%>" <%=tabindex%>>\n  <div style="width:1px;height:1px;display:block;-webkit-user-select: auto;user-select: auto;"></div>\n  <txpdiv class="txp_gradient_top" data-role="<%=gradient_top%>"></txpdiv>\n  <txpdiv class="txp_gradient_bottom"></txpdiv>\n  </txpdiv>\n<% } %>'},142:function(t,e){t.exports='<% if(!useSVG){ %>\n  <div class="txp_touch_player" id="<%=playerid%>" style="<%=mod_stype%>">\n    <div style="width:1px;height:1px;display:block;-webkit-user-select: auto;user-select: auto;"></div>\n  </div>\n<% }else{%>\n  <txpdiv class="txp_touch_player txp_touch_player_desktop txp_touch_autohide_progress" id="<%=playerid%>" style="<%=mod_stype%>" <%=tabindex%>>\n  <div style="width:1px;height:1px;display:block;-webkit-user-select: auto;user-select: auto;"></div>\n  <txpdiv class="txp_touch_gradient_top" data-role="<%=gradient_top%>"></txpdiv>\n  <txpdiv class="txp_touch_gradient_bottom"></txpdiv>\n  </txpdiv>\n<% } %>'},143:function(t,e){t.exports='<svg class="_txplayer_svg_sprite txp_svg_sprite" display="none" version="1.1" xmlns="http://www.w3.org/2000/svg">\n\n\t<symbol id="txp_svg_collect" viewBox="0 0 36 36">\n\t\t<path d="M32.5 26H29v3.5a1.5 1.5 0 0 1-3 0V26h-3.5a1.5 1.5 0 1 1 0-3H26v-3.469a1.5 1.5 0 1 1 3 0V23h3.5a1.5 1.5 0 1 1 0 3zm.319-11.407c-.139.684-.716 1.209-1.442 1.209a1.5 1.5 0 0 1-1.5-1.5c0-.083.035-.154.048-.234l-.014-.002c.243-1.122.145-2.386-.598-3.584-.655-1.055-2.288-2.461-3.803-2.461-2.045 0-3.443.622-4.661 1.806l-3.358 3.182-3.485-3.207c-1.113-1.054-3.172-1.786-4.736-1.786-1.259 0-2.803.987-3.654 2.57-.975 1.809-.986 4.04.755 5.962l11.116 9.485.001-.001 1.015.928c.02.019.041.035.06.054l.004.004-.001.001c.256.269.419.629.419 1.03a1.5 1.5 0 0 1-1.5 1.5c-.435 0-.819-.191-1.093-.487L4.46 18.931c-3.285-3.209-3.285-8.357-.049-11.52C5.998 5.857 8.116 5 10.371 5c2.257 0 4.374.856 5.963 2.411l1.153 1.128 1.152-1.128C20.227 5.856 22.345 5 24.602 5c2.256 0 4.374.856 5.962 2.411a7.992 7.992 0 0 1 2.283 7.187l-.028-.005z"/>\n\t</symbol>\n\t<symbol id="txp_svg_collected" viewBox="0 0 36 36">\n\t\t<path d="M27 14.5a9.5 9.5 0 0 0-9.5 9.5c0 1.515.364 2.941.994 4.211l-1.507 1.28L3.96 18.431C.675 15.222.675 10.074 3.911 6.911 5.498 5.357 7.616 4.5 9.871 4.5c2.257 0 4.374.856 5.963 2.411l1.153 1.128 1.152-1.128C19.727 5.356 21.845 4.5 24.102 4.5c2.256 0 4.374.856 5.962 2.411a7.99 7.99 0 0 1 1.755 8.912A9.445 9.445 0 0 0 27 14.5zm0 2a7.5 7.5 0 1 1 0 15 7.5 7.5 0 0 1 0-15zm-4.042 9.485l1.811 1.81c.054.082.09.172.161.244a1.45 1.45 0 0 0 1.075.421 1.44 1.44 0 0 0 1.067-.418c.066-.066.097-.148.147-.222l3.851-3.851a1.463 1.463 0 1 0-2.069-2.07l-3.008 3.007-.978-.978a1.455 1.455 0 0 0-2.057 2.057z"/>\n\t</symbol>\n\t<symbol id="txp_svg_share" viewBox="0 0 36 36">\n\t\t<path d="M32.946 23.601l.023.009C30.694 29.675 24.86 34 18 34 9.163 34 2 26.837 2 18c0-6.095 3.42-11.372 8.435-14.072a1.48 1.48 0 0 1 .982-.387 1.5 1.5 0 0 1 1.5 1.5c0 .557-.317 1.023-.767 1.282l.032.064C7.927 8.523 5 12.915 5 18c0 7.18 5.82 13 13 13 5.577 0 10.319-3.518 12.165-8.45l.047.017c.154-.665.722-1.171 1.434-1.171a1.5 1.5 0 0 1 1.5 1.5c0 .26-.084.492-.2.705zM32 14.5a1.5 1.5 0 1 1-3 0V9.086l-9.455 9.455a1.498 1.498 0 0 1-2.117-2.117L26.852 7H21.5a1.5 1.5 0 0 1 0-3h8.929a1.47 1.47 0 0 1 .64.115c.546.224.931.758.931 1.385v9z"/>\n\t</symbol>\n\t<symbol id="txp_svg_play" viewBox="0 0 36 36">\n\t\t<path d="M25.8 18c0 .6-.3 1.1-.8 1.3L12.5 27c-.2.1-.5.2-.8.2-.8 0-1.5-.6-1.5-1.5V10c0-.8.7-1.5 1.5-1.5.3 0 .5.1.8.2l12.7 7.9c.4.5.6.9.6 1.4z"/>\n\t</symbol>\n\t<symbol id="txp_svg_replay" viewBox="0 0 36 36">\n\t\t<path d="M17.9 28c-4.9 0-9-3.6-9.8-8.3V19.4c0-.8.7-1.4 1.5-1.4s1.5.6 1.5 1.4c.8 3.8 4.5 6.2 8.3 5.4s6.2-4.5 5.4-8.3c-.7-3.2-3.5-5.6-6.9-5.6-1.8 0-3.6.7-4.8 2h1.3c.8 0 1.5.7 1.5 1.5s-.6 1.6-1.5 1.6h-4c-.8 0-1.5-.7-1.5-1.5v-4c0-.8.7-1.5 1.5-1.5.7 0 1.2.5 1.4 1.1C13.6 8.7 15.7 8 17.9 8c5.5 0 10 4.5 10 10s-4.4 10-10 10z" />\n\t</symbol>\n\t<symbol id="txp_svg_pause" viewBox="0 0 36 36">\n        <path d="M12 9h1c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1h-1c-.6 0-1-.4-1-1V10c0-.6.4-1 1-1zm11 0h1c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1h-1c-.6 0-1-.4-1-1V10c0-.6.4-1 1-1z" />\n    </symbol>\n\t<symbol id="txp_svg_search" viewBox="0 0 24 24">\n        <path d="M19.4 17.2L17.2 15c0.8-1.1 1.3-2.5 1.3-4 0-3.9-3.1-7-7-7s-7 3.1-7 7 3.1 7 7 7c1.5 0 2.8-0.4 3.9-1.2l2.2 2.2c0.5 0.5 1.3 0.5 1.8 0S19.9 17.7 19.4 17.2zM6.5 11c0-2.8 2.2-5 5-5s5 2.2 5 5 -2.2 5-5 5S6.5 13.8 6.5 11z"></path>\n    </symbol>\n\t<symbol id="svg_icon_refresh" viewBox="0 0 20 20">\n\t\t<path d="M10 19a9 9 0 0 1-9-8.999V10a1 1 0 1 1 2 0 7 7 0 1 0 7-7 6.952 6.952 0 0 0-4.877 2H7a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V2a1 1 0 0 1 2 0v1.314A8.935 8.935 0 0 1 10 1c4.971 0 9 4.029 9 9s-4.029 9-9 9z"/>\n\t</symbol>\n\t<symbol id="txp_svg_next" viewBox="0 0 36 36">\n        <path d="M26 9h1c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1h-1c-.6 0-1-.4-1-1V10c0-.6.4-1 1-1zm-14.8 1.3l9.2 6.6c.6.4.8 1.3.3 2-.1.1-.2.3-.3.3l-9.2 6.6c-.6.4-1.5.3-1.9-.3-.2-.3-.3-.6-.3-.9V11.4c0-.8.6-1.4 1.4-1.4.3 0 .6.1.8.3z" />\n    </symbol>\n    <symbol id="txp_svg_stop" viewBox="0 0 36 36">\n        <path d="M24 26H12c-1.1 0-2-0.9-2-2V12c0-1.1 0.9-2 2-2h12c1.1 0 2 0.9 2 2v12C26 25.1 25.1 26 24 26z"/>\n    </symbol>\n\t<symbol id="txp_svg_shop" viewBox="0 0 24 24">\n\t\t<path d="M18 13.836V14H8.793l-.552 2H18a2 2 0 1 1-2 2c0-.368.106-.707.278-1H8.722c.172.294.278.633.278 1a2 2 0 1 1-2-2h.206l.552-2H7v-.223L5.34 5H3V4h3v.01L6.147 4l.377 2H20v1h-.206L18 13.835zM18 19a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM7 17a1 1 0 1 0 0 1.998 1 1 0 0 0 0-2zM6.714 7l1.134 6h9.357l1.575-6H6.714z"/>\n\t</symbol>\n\t<symbol id="txp_svg_eye" viewBox="0 0 24 24">\n\t\t<path d="M12 18c-5.468 0-9-6-9-6s3.533-6 9-6c5.467 0 9 6 9 6s-3.533 6-9 6zm0-11c-5.033 0-8 5-8 5s2.967 5 8 5c5.033 0 8-5 8-5s-2.967-5-8-5zm0 8a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0-5a2 2 0 1 0 0 3.998 2 2 0 0 0 0-4z"/>\n\t</symbol>\n\t<symbol id="txp_svg_volume" viewBox="0 0 20 20">\n        <path d="M16.714 15.593l-.01-.01a1 1 0 0 1-1.705-.708c0-.287.124-.542.317-.724C16.354 13.073 17 11.614 17 10s-.645-3.072-1.682-4.151A.993.993 0 0 1 15 5.125a1 1 0 0 1 1-1c.3 0 .561.139.744.348l.017-.016A7.969 7.969 0 0 1 19 10c0 2.178-.874 4.15-2.286 5.593zm-3.999 3.122a.956.956 0 0 1-.688.28c-.009 0-.018.005-.027.005a.984.984 0 0 1-.75-.357L5.818 15H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h3.818l5.432-3.643A.984.984 0 0 1 12 1c.009 0 .017.005.026.005a.954.954 0 0 1 .968.967c.001.01.006.018.006.028v16c0 .009-.005.017-.005.026a.959.959 0 0 1-.28.689zM6.75 6.643A.984.984 0 0 1 6 7H3v6h3c.304 0 .567.143.75.357l4.25 2.85V3.792L6.75 6.643z"></path>\n    </symbol>\n\t<symbol id="txp_svg_volume_mute" viewBox="0 0 20 20">\n\t\t<path d="M16.394 12.566A5.88 5.88 0 0 0 17 10a5.97 5.97 0 0 0-1.682-4.151.993.993 0 0 1-.318-.724 1 1 0 0 1 1-1c.3 0 .561.139.745.348l.016-.016A7.969 7.969 0 0 1 19 10a7.934 7.934 0 0 1-1.116 4.055l-1.49-1.489zM11 3.792L8.978 5.149 7.62 3.792l3.63-2.435A.984.984 0 0 1 12 1c.009 0 .017.005.026.005a.954.954 0 0 1 .968.967c.001.01.006.018.006.028v7.171l-2-2V3.792zm7.864 14.072a.999.999 0 0 1-1.414 0L2.136 2.55a1 1 0 1 1 1.415-1.415L18.864 16.45a1 1 0 0 1 0 1.414zM3.171 5l2 2H3v6h3c.304 0 .567.143.75.357l4.25 2.85v-3.379l2 2V18c0 .009-.005.017-.005.027a.955.955 0 0 1-.967.968c-.01 0-.019.005-.028.005a.984.984 0 0 1-.75-.357L5.818 15H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.171z"></path>\n\t</symbol>\n\n\t<symbol id="txp_svg_setting" viewBox="0 0 24 24">\n\t\t<path d="M21 11v2l-2 1v-.3c-.2.7-.5 1.5-.9 2.1l.2-.2.7 2.1-1.4 1.4-2.1-.7.2-.2c-.7.4-1.4.7-2.1.9h.4l-1 2h-2l-1-2h.3c-.7-.2-1.5-.5-2.1-.9l.2.2-2.1.7-1.4-1.4.7-2.1.2.2c-.4-.7-.7-1.4-.9-2.1v.3l-2-1v-2l2-1v.4c.2-.8.5-1.6 1-2.3l-.3.4-.7-2.2 1.4-1.4 2.1.7-.3.4c.7-.5 1.5-.8 2.3-1H10l1-2h2l1 2h-.4c.8.2 1.6.5 2.3.9l-.3-.3 2.1-.7 1.4 1.4-.7 2.1-.3-.3c.4.7.7 1.4.9 2.2V10l2 1zm-9-4c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5z"/>\n\t</symbol>\n\t<symbol id="txp_svg_bulb" viewBox="0 0 24 24">\n\t\t<path d="M15 16.317V17c0 .186-.065.35-.153.5.088.15.153.313.153.5v2a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-2c0-.186.064-.35.153-.5A.97.97 0 0 1 9 17v-.683A6.994 6.994 0 0 1 5 10a7 7 0 0 1 14 0 6.994 6.994 0 0 1-4 6.317zM10 20h4v-2h-4v2zm2-16a6 6 0 0 0-6 6c0 2.215 1.214 4.128 3 5.167V15c.452.36 1 .593 1 .593V17h4v-1.5s.462-.096 1-.5v.167c1.786-1.04 3-2.953 3-5.167a6 6 0 0 0-6-6z"/>\n\t</symbol>\n\t<symbol id="txp_svg_window" viewBox="0 0 24 24">\n\t\t<path d="M19 16H9a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zm0-11H9v10h10V5zM5 19h10v-2h1v2a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h2v1H5v10z"/>\n\t</symbol>\n\t<symbol id="txp_svg_size_true" viewBox="0 0 24 24">\n\t\t<path d="M20 19H4c-.6 0-1-.4-1-1V6c0-.6.4-1 1-1h16c.6 0 1 .4 1 1v12c0 .6-.4 1-1 1zM5 7v10h14V7H5z"/>\n\t</symbol>\n\t<symbol id="txp_svg_size" viewBox="0 0 24 24">\n\t\t<path d="M20 19H4c-.6 0-1-.4-1-1V6c0-.6.4-1 1-1h16c.6 0 1 .4 1 1v12c0 .6-.4 1-1 1zM5 17h10V7H5v10zM19 7h-2v10h2V7z"/>\n\t</symbol>\n\t<symbol id="txp_svg_fake" viewBox="0 0 24 24">\n\t\t<path d="M20 20H4c-.6 0-1-.4-1-1V5c0-.6.4-1 1-1h16c.6 0 1 .4 1 1v14c0 .6-.4 1-1 1zM5 6v12h14V6H5zm12 11h-2c-.6 0-1-.4-1-1s.4-1 1-1h1v-1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zm0-6c-.6 0-1-.4-1-1V9h-1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1zm-8 6H7c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v1h1c.6 0 1 .4 1 1s-.4 1-1 1zm0-8H8v1c0 .6-.4 1-1 1s-1-.4-1-1V8c0-.6.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1z"/>\n\t</symbol>\n\t<symbol id="txp_svg_fake_true" viewBox="0 0 24 24">\n\t\t<path d="M20 20H4c-.6 0-1-.4-1-1V5c0-.6.4-1 1-1h16c.6 0 1 .4 1 1v14c0 .6-.4 1-1 1zM5 6v12h14V6H5zm12 9h-1v1c0 .6-.4 1-1 1s-1-.4-1-1v-2c0-.6.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zm0-4h-2c-.6 0-1-.4-1-1V8c0-.6.4-1 1-1s1 .4 1 1v1h1c.6 0 1 .4 1 1s-.4 1-1 1zm-8 6c-.6 0-1-.4-1-1v-1H7c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1zm0-6H7c-.6 0-1-.4-1-1s.4-1 1-1h1V8c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1z"/>\n\t</symbol>\n\t<symbol id="txp_svg_fullscreen" viewBox="0 0 24 24">\n\t\t<path d="M19.7 19.7c-.2.2-.5.3-.7.3h-4c-.6 0-1-.4-1-1s.4-1 1-1h1.6l-3.3-3.3c-.4-.4-.3-1.1.1-1.4.4-.4 1-.4 1.4 0l3.3 3.3V15c0-.6.4-1 1-1s1 .4 1 1v4c-.1.2-.2.5-.4.7zM19 10c-.6 0-1-.4-1-1V7.4l-3.3 3.3c-.4.4-1 .4-1.4 0-.4-.4-.4-1 0-1.4L16.6 6H15c-.6 0-1-.4-1-1s.4-1 1-1h4c.3 0 .5.1.7.3.2.2.3.5.3.7v4c0 .6-.4 1-1 1zM7.4 18H9c.6 0 1 .4 1 1s-.4 1-1 1H5c-.3 0-.5-.1-.7-.3-.2-.2-.3-.5-.3-.7v-4c0-.6.4-1 1-1s1 .4 1 1v1.6l3.3-3.3c.4-.4 1.1-.3 1.4.1.4.4.4 1 0 1.4L7.4 18zm1.9-7.3L6 7.4V9c0 .6-.4 1-1 1s-1-.4-1-1V5c0-.3.1-.5.3-.7.2-.2.5-.3.7-.3h4c.6 0 1 .4 1 1s-.4 1-1 1H7.4l3.3 3.3c.4.4.4 1 0 1.4-.4.4-1 .4-1.4 0z"/>\n\t</symbol>\n\t<symbol id="txp_svg_fullscreen_true" viewBox="0 0 24 24">\n\t\t<path d="M16.4 9H18c.6 0 1 .4 1 1s-.4 1-1 1h-4c-.3 0-.5-.1-.7-.3-.2-.2-.3-.5-.3-.7V6c0-.6.4-1 1-1s1 .4 1 1v1.6l3.3-3.3c.4-.4 1.1-.3 1.4.1.4.4.4 1 0 1.4L16.4 9zM10 19c-.6 0-1-.4-1-1v-1.6l-3.3 3.3c-.4.4-1 .4-1.4 0-.4-.4-.4-1 0-1.4L7.6 15H6c-.6 0-1-.4-1-1s.4-1 1-1h4c.3 0 .5.1.7.3.2.2.3.5.3.7v4c0 .5-.4 1-1 1zm0-8H6c-.6 0-1-.4-1-1s.4-1 1-1h1.6L4.3 5.7c-.4-.4-.4-1 .1-1.4.4-.4 1-.4 1.4 0L9 7.6V6c0-.6.4-1 1-1s1 .4 1 1v4c0 .3-.1.5-.3.7-.2.2-.5.3-.7.3zm4 2h4c.6 0 1 .4 1 1s-.4 1-1 1h-1.6l3.3 3.3c.4.4.4 1 0 1.4s-1 .4-1.4 0L15 16.4V18c0 .6-.4 1-1 1s-1-.4-1-1v-4c0-.3.1-.5.3-.7.2-.2.5-.3.7-.3z"/>\n\t</symbol>\n\t<symbol id="txp_svg_select" viewBox="0 0 12 12">\n\t\t<path d="M6 12c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zM6 .9C3.2.9.9 3.2.9 6s2.3 5.1 5.1 5.1 5.1-2.3 5.1-5.1S8.8.9 6 .9z"/>\n\t</symbol>\n\t<symbol id="txp_svg_select_true" viewBox="0 0 12 12">\n\t\t<path d="M6 12c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zM6 .9C3.2.9.9 3.2.9 6s2.3 5.1 5.1 5.1 5.1-2.3 5.1-5.1S8.8.9 6 .9zm-.3 7.4c-.3.3-.8.3-1.2 0L2.8 6.6c-.3-.3-.3-.8 0-1.2.3-.3.8-.3 1.2 0l1.2 1.2L8 3.7c.3-.3.8-.3 1.2 0 .3.3.3.8 0 1.2L5.7 8.3z"/>\n\t</symbol>\n\t<symbol id="txp_svg_link" viewBox="0 0 36 36">\n\t\t<path d="M26.5 26h-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h5c2.5 0 4.5-2 4.5-4.5S29 14 26.5 14h-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h5c4.1 0 7.5 3.4 7.5 7.5S30.6 26 26.5 26zM12 18.5c0-.8.7-1.5 1.5-1.5h9c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5h-9c-.8 0-1.5-.7-1.5-1.5zm2.5-4.5h-5C7 14 5 16 5 18.5S7 23 9.5 23h5c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5h-5C5.4 26 2 22.6 2 18.5S5.4 11 9.5 11h5c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5z"/>\n\t</symbol>\n\t<symbol id="txp_svg_icon_like" viewBox="0 0 20 20">\n\t\t<path d="M18.4 8.5l-2 9.4c-0.2 0.6-0.2 1.1-0.6 1.3 -0.4 0.3-1 0.2-1.9 0.2 -2.9 0-10.4 0-10.4 0l0-12 2.1-5c0 0 0.6-2 1.7-2 1.4 0 1.2 2 1.2 2s0 1.3 0 3c0 0.7 0.2 1 1 1 6.5 0 6.9 0 6.9 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0 1.6-0.2 1.9 0.5C18.5 7.4 18.6 7.9 18.4 8.5zM1.5 19.5c-0.6 0-1-0.4-1-1v-10c0-0.6 0.4-1 1-1s1 0.4 1 1v10C2.5 19.1 2.1 19.5 1.5 19.5z"></path>\n\t</symbol>\n\t<symbol id="txp_svg_loop" viewBox="0 0 36 36">\n        <path d="M13 13h8l-3-3-.8-.8c-.1-.1-.3-.2-.4-.2h-.5c-.2 0-.3.1-.3.3V11h-3c-2.8 0-5 2.2-5 5v4c0 2.4 1.7 4.4 4 4.9v-2.1c-1.2-.4-2-1.5-2-2.8v-4c0-1.7 1.3-3 3-3zm11-1.9v2.1c1.2.4 2 1.5 2 2.8v4c0 1.7-1.3 3-3 3h-8l3.1 3.1.8.8c.1.1.3.2.4.2h.5c.2 0 .3-.1.3-.3V25h3c2.8 0 5-2.2 5-5v-4c-.1-2.4-1.8-4.4-4.1-4.9z"/>\n    </symbol> \n\t<symbol id="txp_svg_loop_off" viewBox="0 0 36 36">\n        <path d="M16 11V9.3c0-.2.1-.3.3-.3h.5c.2 0 .3.1.4.2L21 13h-8c-1.7 0-3 1.3-3 3v4c0 1.7 1.3 3 3 3h1v2h-1c-2.8 0-5-2.2-5-5v-4c0-2.8 2.2-5 5-5h3zm4.1 11.2l2.8 2.8c.2.3.2.7 0 .9-.3.2-.7.2-.9 0l-2.8-2.8c-.2-.3-.2-.7 0-.9.3-.2.7-.2.9 0zM21 19c2.8 0 5 2.2 5 5s-2.2 5-5 5-5-2.2-5-5 2.2-5 5-5zm0 9c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4zm3-16.9c2.3.5 4 2.5 4 4.9v4c0 .6-.1 1.2-.3 1.8-.4-1-1-1.9-1.7-2.7V16c0-1.3-.8-2.4-2-2.8v-2.1z"></path>\n    </symbol>\n\t<symbol id="txp_svg_selected" viewBox="0 0 16 16">\n\t\t<path d="M1 8l5 5 9-10 -1-1 -8 9.2L2 7 1 8z"></path>\n\t</symbol>\n\t<symbol id="txp_svg_icon_hot" viewBox="0 0 16 16">\n\t\t<path d="M8.5 4.25c-.547-1.879.5-3.11.5-3.11s-2.25.891-2.25 3.11c0 2.104 1.517 3.45-.068 3.45-.723-.022-1.228-.365-1.228-1.312 0-.851.546-1.619.546-1.619-1.313.696-3 2.153-3 5.556 0 2.517 2.289 4.811 4.5 4.811s4.5-2.105 4.5-4.622c0-4.046-2.975-4.493-3.5-6.264z"></path>\n\t</symbol>\n\t<symbol id="txp_svg_popup" viewBox="0 0 20 20">\n\t\t<path d="M17 18H3c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h5c.6 0 1 .4 1 1s-.4 1-1 1H3v12h14v-3c0-.6.4-1 1-1s1 .4 1 1v3c0 1.1-.9 2-2 2zm2-10c0 .6-.4 1-1 1s-1-.4-1-1V5.4l-4.4 4.4c-.4.4-1 .4-1.4 0-.4-.4-.4-1 0-1.3L15.6 4H13c-.6 0-1-.4-1-1s.4-1 1-1h5c.5 0 .9.4 1 .9V8z"></path>\n\t</symbol>\n    <symbol id="txp_svg_hd" viewBox="0 0 28 28">\n        <path d="M13 6h-2.8c0.1 0.7 0.2 1.4 0.2 2.4v3.6H2.8V8.5c0-1 0-1.6 0.2-2.4H0.1c0.1 0.7 0.2 1.3 0.2 2.4v10.1c0 1.1 0 1.7-0.2 2.4h2.8c-0.1-0.8-0.2-1.3-0.2-2.4v-4.3h7.6v4.3c0 1.1 0 1.7-0.2 2.4H13c-0.1-0.8-0.2-1.3-0.2-2.4V8.5C12.8 7.4 12.9 6.8 13 6z"/>\n        <path d="M25.8 7.7C24.6 6.5 23.1 6 20.7 6h-3.4c-1.2 0-1.6 0-2.4-0.1 0.1 0.8 0.2 1.4 0.2 2.4v10.2c0 1.1 0 1.7-0.2 2.5 0.8 0 1.2-0.1 2.4-0.1h3.4c2.2 0 3.7-0.5 4.9-1.6 1.5-1.4 2.2-3.4 2.2-6C27.9 11 27.2 9 25.8 7.7zM23.9 17.6c-0.8 0.8-1.8 1.2-3.3 1.2h-3V8.3h3c1.6 0 2.6 0.3 3.4 1.1 0.9 0.9 1.3 2.2 1.3 4C25.3 15.2 24.8 16.6 23.9 17.6z"/>\n    </symbol>\n    <symbol id="txp_svg_lightning" viewBox="0 0 28 28">\n        <path d="M24 12.3c-0.1-0.1-0.1-0.1-0.2-0.1C23.7 12 23.5 12 23.4 12h-6.9l2.3-10c0-0.1 0-0.2 0-0.3 0-0.2-0.1-0.3-0.2-0.5 -0.3-0.3-0.7-0.3-1 0L4.2 14.8C4.1 14.9 4 15.1 4 15.3c0 0.2 0.1 0.4 0.2 0.5 0.1 0.1 0.3 0.2 0.5 0.2h7.1l-2.4 9.9c0 0.1 0 0.1 0 0.2 -0.1 0.3 0 0.5 0.2 0.7 0.1 0.1 0.3 0.2 0.5 0.2 0.2 0 0.4-0.1 0.5-0.2L24 13.2c0.1-0.1 0.2-0.3 0.2-0.5C24.2 12.6 24.1 12.4 24 12.3L24 12.3z"/>\n    </symbol>\n    <symbol id="txp_svg_vip_star_lg" viewBox="0 0 28 28">\n        <path d="M7.5 19.5C8.4 19.9 9.2 20 10 20c2.4 0 4.7-1 6.5-2.8 1.9-1.9 2.8-4.6 2.6-7.1l-1.4-0.2 -3.6-7.3L14 2.5c0 0-0.1 0-0.1 0.1l-3.6 7.3 -8.2 1.2c0 0-0.1 0-0.1 0.1v0.1l5.9 5.8L7.5 19.5zM7.3 20.6L6.6 25v0.1c0 0 0 0 0.1 0 0 0 0 0 0.1 0l6.5-3.5c-0.5 0.1-0.8 0.1-1.3 0.1C10.3 21.9 8.7 21.5 7.3 20.6zM18.7 19.2c-1.2 1.2-2.8 2-4.3 2.5l7 3.6c0 0 0 0 0.1 0h0.1c0 0 0.1-0.1 0-0.1l-1.3-7.9C19.8 17.9 19.3 18.6 18.7 19.2zM25.9 11.1l-4.7-0.7c0.5 2.2 0.1 4.4-1 6.5l5.8-5.5C26 11.3 26 11.3 25.9 11.1 26 11.1 25.9 11.1 25.9 11.1z"/>\n    </symbol>\n    <symbol id="txp_svg_clock" viewBox="0 0 28 28">\n        <path d="M14 0.5c-6.6 0-12 5.4-12 12 0 6.6 5.4 12 12 12 0.4 0 0.7 0 1.1-0.1 0.1 0 0.3 0.1 0.4 0.1 0.8 0 1.5-0.7 1.5-1.5 0-0.8-0.7-1.5-1.5-1.5 -0.1 0-0.1 0-0.2 0l0-0.1c-0.4 0.1-0.9 0.1-1.3 0.1 -5 0-9-4-9-9 0-5 4-9 9-9 5 0 9 4 9 9 0 2-0.7 3.9-1.8 5.4l0.2 0.1C21.1 18.3 21 18.6 21 19c0 0.8 0.7 1.5 1.5 1.5 0.8 0 1.4-0.6 1.5-1.4 1.3-1.9 2-4.2 2-6.6C26 5.9 20.6 0.5 14 0.5zM18.4 12.5h-3.1l-2.5-4.3c-0.4-0.7-1.3-0.9-2-0.5 -0.7 0.4-0.9 1.2-0.5 1.9l3 5.2c0.2 0.4 0.6 0.6 1 0.7 0.1 0 0.3 0.1 0.4 0.1h3.8c0.9 0 1.6-0.7 1.6-1.5C20 13.2 19.3 12.5 18.4 12.5z"/>\n    </symbol>\n    <symbol id="txp_svg_update" viewBox="0 0 28 28">\n        <path d="M13 16.4l0-5.9C13 9.7 13.7 9 14.5 9c0.8 0 1.5 0.6 1.4 1.4l0 4.6h2.4c0.9 0 1.6 0.7 1.6 1.5 0 0.8-0.7 1.5-1.6 1.5h-3.8c0 0-0.1 0-0.1 0 0 0 0 0 0 0 -0.8 0-1.5-0.6-1.5-1.4v0C13 16.5 13 16.5 13 16.4 13 16.5 13 16.5 13 16.4zM15 26c-6.7 0-12-5.4-12-12 0-1.9 0.4-3.7 1.2-5.2L2.9 9.1C2.1 9.3 1.3 8.8 1.1 8 0.9 7.2 1.3 6.4 2.1 6.2L7 4.9c0.8-0.2 1.6 0.3 1.8 1.1l1.3 4.8c0.2 0.8-0.3 1.6-1.1 1.8 -0.8 0.2-1.6-0.3-1.8-1.1l-0.4-1.4c-0.6 1.2-0.9 2.5-0.9 3.9 0 5 4 9 9 9 5 0 9-4 9-9 0-5-4-9-9-9 -0.1 0-0.1 0-0.2 0l0-0.1C14.6 5 14.6 5 14.5 5 13.6 5 13 4.3 13 3.5 13 2.7 13.6 2 14.5 2c0 0 0.1 0 0.1 0 0.1 0 0.3 0 0.4 0 6.7 0 12 5.4 12 12C27 20.6 21.6 26 15 26z"/>\n\t </symbol>\n\t <symbol id="txp_svg_close" viewBox="0 0 16 16">\n\t\t<path d="M9.275 8l4.461-4.461c0.352-0.352 0.352-0.923 0-1.275 -0.352-0.352-0.923-0.352-1.275 0L8 6.725 3.539 2.264c-0.352-0.352-0.923-0.352-1.275 0 -0.352 0.352-0.352 0.923 0 1.275L6.725 8l-4.461 4.461c-0.352 0.352-0.352 0.923 0 1.275 0.352 0.352 0.923 0.352 1.275 0L8 9.275l4.461 4.461c0.352 0.352 0.923 0.352 1.275 0 0.352-0.352 0.352-0.923 0-1.275L9.275 8z"></path>\n\t</symbol>\n\t<symbol id="txp_svg_icon_report" viewBox="0 0 20 20">\n\t\t<path d="M8 9c-.552 0-1-.448-1-1v-3c0-.552.448-1 1-1s1 .448 1 1v3c0 .552-.448 1-1 1zm0 3c-.552 0-1-.448-1-1s.448-1 1-1 1 .448 1 1-.448 1-1 1zm6.323-1.086c-.116.424-.487.742-.948.742-.552 0-1-.448-1-1 0-.148.036-.285.094-.412l-.019-.01c.34-.675.55-1.427.55-2.235 0-2.762-2.239-5-5-5-2.762 0-5 2.238-5 5 0 2.761 2.239 5 5 5 .766 0 1.484-.186 2.133-.494l.013.03c.128-.059.267-.097.417-.097.552 0 1 .448 1 1 0 .471-.332.847-.771.954-.858.378-1.795.608-2.792.608-3.866 0-7-3.134-7-7s3.134-7 7-7 7 3.134 7 7c-.001 1.047-.261 2.024-.677 2.914z"></path>\n\t</symbol>\n\t<symbol id="txp_svg_right_xs" viewBox="0 0 12 12">\n\t\t<path d="M4.4 10.4l-.8-.8L7.3 6 3.6 2.4l.8-.8 4 4L8 6l.4.4z"></path>\n\t</symbol>\n\t<symbol id="txp_svg_refresh" viewBox="0 0 20 20">\n\t\t<path d="M10 19a9 9 0 0 1-9-8.999V10a1 1 0 1 1 2 0 7 7 0 1 0 7-7 6.952 6.952 0 0 0-4.877 2H7a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V2a1 1 0 0 1 2 0v1.314A8.935 8.935 0 0 1 10 1c4.971 0 9 4.029 9 9s-4.029 9-9 9z"></path>\n\t</symbol>\n\t<symbol id="txp_svg_left_xs" viewBox="0 0 12 12">\n\t\t<path d="M7.7 10.4l-4-4 .4-.4-.4-.4 4-4 .8.8L4.8 6l3.7 3.6z"></path>\n\t</symbol>\n</svg>'},144:function(t,e){t.exports='<svg class="txp_touch_svg_sprite" display="none" version="1.1" xmlns="http://www.w3.org/2000/svg">\n\t<symbol id="txp_touch_svg_play_lg" viewBox="0 0 100 100">\n\t\t<circle cx="50" cy="50" r="50" style="fill:#222;fill-opacity:0.75"></circle>\n\t\t<path transform="translate(36, 33)" d="M0.6,2C0.6,2,0,3.5,0,16.9C0,30.3,0.6,32,0.6,32c0,1.5,1.6,2.5,2.9,1.8c0,0,3-0.5,15.2-6.6c12.2-6.1,14.2-8.4,14.2-8.4c1.5-0.7,1.5-2.8,0-3.6c0,0-3.3-3.1-14.2-8.6C7.9,1.1,3.5,0.2,3.5,0.2C2.1-0.5,0.6,0.5,0.6,2z" style="\n\t\tfill:#fff;" />\n\t</symbol>\n\t<symbol id="txp_touch_svg_play" viewBox="0 0 56 56">\n\t\t<path d="M14.569 13.867s-.563 1.42-.563 14.059.563 14.188.563 14.188a1.925 1.925 0 0 0 2.8 1.677s2.938-.442 14.763-6.211 13.8-7.914 13.8-7.914a1.859 1.859 0 0 0 0-3.352s-3.24-2.875-13.8-8.095c-10.444-5.165-14.767-6.029-14.767-6.029a1.924 1.924 0 0 0-2.796 1.677z" style="fill:#fff" />\n\t</symbol>\n\t<symbol id="txp_touch_svg_fullscreen" viewBox="0 0 48 48">\n\t\t<path d="M9.5 37h10a1.5 1.5 0 0 1 0 3h-10a1.5 1.5 0 0 1 0-3zm0-10a1.5 1.5 0 0 1 1.5 1.5v10a1.5 1.5 0 0 1-3 0v-10A1.5 1.5 0 0 1 9.5 27zM8.43 37.353L19.353 26.43a1.545 1.545 0 1 1 2.185 2.184L10.614 39.538a1.545 1.545 0 1 1-2.184-2.185zM28.5 8h10a1.5 1.5 0 0 1 0 3h-10a1.5 1.5 0 0 1 0-3zm10 0A1.5 1.5 0 0 1 40 9.5v10a1.5 1.5 0 0 1-3 0v-10A1.5 1.5 0 0 1 38.5 8zM26.43 19.354L37.353 8.43a1.545 1.545 0 0 1 2.185 2.184L28.614 21.538a1.545 1.545 0 0 1-2.184-2.184z"/>\n\t</symbol>\n\t<symbol id="txp_touch_svg_fullscreen_true" viewBox="0 0 48 48">\n\t\t<path d="M39.538 10.615L31.153 19H37.5a1.5 1.5 0 0 1 0 3h-10a1.5 1.5 0 0 1-1.386-.937 1.52 1.52 0 0 1-.114-.735V10.5a1.5 1.5 0 0 1 3 0v6.283l8.353-8.353a1.545 1.545 0 1 1 2.185 2.185zM20.5 39a1.5 1.5 0 0 1-1.5-1.5v-6.347l-8.386 8.385a1.545 1.545 0 1 1-2.184-2.184L16.783 29H10.5a1.5 1.5 0 0 1 0-3h9.828a1.518 1.518 0 0 1 .733.113A1.5 1.5 0 0 1 22 27.5v10a1.5 1.5 0 0 1-1.5 1.5z"/>\n\t</symbol>\n\t<symbol id="txp_touch_svg_pause" viewBox="0 0 56 56">\n\t\t<path d="M39 49a4 4 0 0 1-4-4V11a4 4 0 0 1 4-4 4 4 0 0 1 4 4v34a4 4 0 0 1-4 4zm-22 0a4 4 0 0 1-4-4V11a4 4 0 0 1 4-4 4 4 0 0 1 4 4v34a4 4 0 0 1-4 4z"/>\n\t</symbol>\n\t<symbol id="txp_touch_svg_replay" viewBox="0 0 60 60">\n\t\t<path d="M30,8.57142857 C37.515649,8.57142857 44.3465359,12.4754297 48.2139737,18.7058283 L48.2142857,11.7142857 C48.2142857,11.162001 48.662001,10.7142857 49.2142857,10.7142857 L51.5,10.7142857 C52.0522847,10.7142857 52.5,11.162001 52.5,11.7142857 L52.5,24.7142857 C52.5,25.2271216 52.1139598,25.6497929 51.6166211,25.707558 L51.5,25.7142857 L51.5,25.7142857 L38.5,25.7142857 C37.9477153,25.7142857 37.5,25.2665705 37.5,24.7142857 L37.5,22.4285714 C37.5,21.8762867 37.9477153,21.4285714 38.5,21.4285714 L44.8498426,21.4284542 C41.8105044,16.1729208 36.1977337,12.8571429 30,12.8571429 C20.5322614,12.8571429 12.8571429,20.5322614 12.8571429,30 C12.8571429,39.4677386 20.5322614,47.1428571 30,47.1428571 C37.8607066,47.1428571 44.6590839,41.8063755 46.598376,34.3048717 C46.8945883,33.1590737 48.0635686,32.4703483 49.2093667,32.7665605 C50.3551647,33.0627727 51.0438901,34.231753 50.7476779,35.3775511 C48.3222507,44.7595061 39.8262366,51.4285714 30,51.4285714 C18.1653268,51.4285714 8.57142857,41.8346732 8.57142857,30 C8.57142857,18.1653268 18.1653268,8.57142857 30,8.57142857 Z"/>\n\t</symbol>\n\t<symbol id="txp_touch_svg_download" viewBox="0 0 32 32">\n\t\t<path d="M25 31H8a6 6 0 0 1-6-6V8a6 6 0 0 1 6-6h1v3a4 4 0 0 0-4 4v15a4 4 0 0 0 4 4h15a4 4 0 0 0 4-4V9a4 4 0 0 0-4-4V2h1a6 6 0 0 1 6 6v17a6 6 0 0 1-6 6zm-7.32-7.616A1.473 1.473 0 0 1 16.5 24a1.307 1.307 0 0 1-.227-.052 1.389 1.389 0 0 1-.352-.081 1.445 1.445 0 0 1-.239-.16 1.356 1.356 0 0 1-.209-.139c-.013-.013-.016-.03-.028-.043s-.045-.025-.061-.047L9.4 17.458a1.445 1.445 0 0 1 0-2.036 1.424 1.424 0 0 1 2.024 0L15 19.019V1.5a1.5 1.5 0 1 1 3 0v17.489l3.546-3.567a1.424 1.424 0 0 1 2.024 0 1.445 1.445 0 0 1 0 2.036z"/>\n\t</symbol>\n\t<symbol id="txp_touch_svg_vip" viewBox="0 0 32 32">\n\t\t<path d="M30.988 11.688l-4.482 3.949A13.979 13.979 0 0 0 27 12c0-0.312-0.027-0.616-0.047-0.923Zm-7.321 9.367L25.263 29l-7.349-3.9A14.012 14.012 0 0 0 23.667 21.055ZM13 24a11.955 11.955 0 0 1-8.857-3.924 11.987 11.987 0 0 0 16.7-17.142A11.991 11.991 0 0 1 13 24Zm8.99-13A9.972 9.972 0 0 1 8.473 20.358l0.358-1.78L2.154 12.694a10.051 10.051 0 0 1-0.127-1.16l9.411-1.425L15.995 1 16.01 1.009l4.553 9.1 1.394 0.211C21.971 10.547 21.99 10.773 21.99 11ZM12.437 25.972L6.737 29 7.56 24.9A13.946 13.946 0 0 0 12.437 25.972Z"></path>\n\t</symbol>\n\t<symbol id="txp_touch_svg_next" viewBox="0 0 60 60">\n\t\t<path d="M47.13825,15.0141429 C45.3628929,15.0141429 43.9239643,16.4530714 43.9239643,18.2284286 L43.9239643,41.7998571 C43.9239643,43.5752143 45.3628929,45.0141429 47.13825,45.0141429 C48.9136071,45.0141429 50.3525357,43.5752143 50.3525357,41.7998571 L50.3525357,18.2284286 C50.3525357,16.4530714 48.9136071,15.0141429 47.13825,15.0141429 M39.7389643,28.4327143 C39.7389643,28.4327143 36.7936071,25.737 27.1946786,20.8437857 C17.6986071,16.002 13.7686071,15.192 13.7686071,15.192 C12.6050357,14.5995 11.2261071,15.4502143 11.2261071,16.7637857 C11.2261071,16.7637857 10.7139643,18.0955714 10.7139643,29.9455714 C10.7139643,41.7945 11.2261071,43.2462857 11.2261071,43.2462857 C11.2261071,44.5598571 12.6050357,45.4116429 13.7686071,44.8180714 C13.7686071,44.8180714 16.4396786,44.4034286 27.1893214,38.9948571 C37.9411071,33.5852143 39.7389643,31.5762857 39.7389643,31.5762857 C41.0171786,30.9248571 41.0171786,29.0852143 39.7389643,28.4327143" id="Fill-1"></path>\n\t</symbol>\n\n</svg>'},145:function(t,e){(function(t,s,e){"use strict";var a=t.document,i,n=["webkit","o","ms","moz",""],o=s.support||{},c="onfocusin"in a&&"hasFocus"in a?"focusin focusout":"focus blur",r;while((r=n.pop())!==e){i=(r?r+"H":"h")+"idden";o.pageVisibility=a[i]!==e;if(o.pageVisibility){c=r+"visibilitychange";break}}function l(){if(i!=="hidden"){a.hidden=o.pageVisibility?a[i]:e}}l(),s(/blur$/.test(c)?t:a).on(c,function(t){var e=t.type;s(a).triggerHandler(i&&a[i]||/^(?:blur|focusout)$/.test(e)?"hide":"show");l()})})("undefined"!=typeof window?window:this,jQuery)},15:function(t,e){function z(){}function C(t){V=[t]}function w(t,e,s){return t&&t.apply(e.context||e,s)}function M(t){return/\?/.test(t)?"&":"?"}function s(e){var t,s,a,i,n,o=(e=T.extend({},O,e)).success,c=e.error,r=e.complete,l=e.dataFilter,d=e.callbackParameter,h=e.callback,p=e.cache,u=e.pageCache,y=e.charset,v=e.url,m=e.data,x=e.timeout,f=0,g=z;if(R&&R(function(t){t.done(o).fail(c),o=t.resolve,c=t.reject}).promise(e),!(e.abort=function(){f++||g()})===w(e.beforeSend,e,[e])||f)return e;function _(t){f++||(g(),u&&(W[v]={s:[t]}),l&&(t=l.apply(e,[t])),w(o,e,[t,F,e]),w(r,e,[e,F]))}function b(t){f++||(g(),u&&t!=P&&(W[v]=t),w(c,e,[e,t]),w(r,e,[e,t]))}return v=v||"",m=m?"string"==typeof m?m:T.param(m,e.traditional):"",v+=m?M(v)+m:"",d&&(v+=M(v)+encodeURIComponent(d)+"=?"),p||u||(v+=M(v)+"_"+(new Date).getTime()+"="),v=v.replace(/=\?(&|$)/,"="+h+"$1"),u&&(t=W[v])?t.s?_(t.s[0]):b(t):(j[h]=C,(a=T(A)[0]).id="_jqjsp"+E++,y&&(a.charset=y),D&&D.version()<11.6?(i=T(A)[0]).text="document.getElementById('"+a.id+"')."+k+"()":a.async="async",N&&(a.htmlFor=a.id,a.event=S),a.onload=a[k]=a[H]=function(t){if(!a[$]||!/i/.test(a[$])){try{a[S]&&a[S]()}catch(t){}t=V,V=0,t?_(t[0]):b("error")}},a.src=v,g=function(){n&&clearTimeout(n),a[H]=a.onload=a[k]=null,I[B](a),i&&I[B](i)},I[L](a,s=I.firstChild),i&&I[L](i,s),n=0<x&&setTimeout(function(){b(P)},x)),e}var T,V,L,S,k,H,$,B,A,F,P,j,R,I,W,E,O,D,N;T=Txplayer.$,L="insertBefore",S="onclick",k="onerror",H="onreadystatechange",$="readyState",B="removeChild",A="<script>",F="success",P="timeout",j=window,R=T.Deferred,I=T("head")[0]||document.documentElement,W={},E=0,O={callback:"_jqjsp",url:location.href},D=j.opera,N=!!T("<div>").html("\x3c!--[if IE]><i><![endif]--\x3e").find("i").length,s.setup=function(t){T.extend(O,t)},T.jsonp=s},37:function(t,e){var s={};s[445]=s[444]="\u7f51\u7edc\u8fde\u63a5\u4f3c\u4e4e\u51fa\u73b0\u95ee\u9898\uff0c",s[10001]=s[1]=s[2]=s[3]=s[4]=s[5]=s[30]=s[40]=s[41]=s[42]=s[50]=s[68]="\u89c6\u9891\u83b7\u53d6\u9014\u4e2d\u51fa\u73b0\u95ee\u9898\uff0c",s.defaultMsg=s[51]=s[52]=s[61]=s[62]=s[63]=s[65]=s[66]=s[69]=s[71]=s[73]=s[74]=s[76]=s[77]=s[81]=s[82]=s[86]=s["80.10"]=s[94]="\u8fd9\u4e2a\u89c6\u9891\u88ab\u5916\u661f\u4eba\u52ab\u8d70\uff0c\u6682\u65f6\u770b\u4e0d\u4e86\u4e86~",s[64]=s[100]="\u5f88\u9057\u61be\uff0c\u5bf9\u6b64\u89c6\u9891\u7684\u8bbf\u95ee\u6682\u65f6\u53d7\u9650",s[80.3]=s["80.10"]=s[80.11]=s[84]="\u6b64\u89c6\u9891\u5305\u542b\u654f\u611f\u4fe1\u606f\uff0c\u5df2\u88ab\u7ba1\u7406\u5458\u6349\u62ff~",s[80]=s[83]="\u6682\u65f6\u6ca1\u6709\u83b7\u5f97\u8be5\u89c6\u9891\u7248\u6743\uff0c\u52aa\u529b\u4e3a\u60a8\u4e89\u53d6\u4e2d~",s[80.1]="\u5f88\u62b1\u6b49\uff0c\u7531\u4e8e\u7248\u6743\u9650\u5236\uff0c\u60a8\u6240\u5728\u7684\u5730\u533a\u6682\u65f6\u65e0\u6cd5\u64ad\u653e\u8be5\u89c6\u9891",s[80.2]="\u5f88\u62b1\u6b49\uff0c\u8be5\u89c6\u9891\u6682\u65e0\u64ad\u653e\u7248\u6743",s[80.7]=s[80.9]="\u6682\u65f6\u6ca1\u6709\u83b7\u5f97\u8be5\u89c6\u9891\u7248\u6743\uff0c\u52aa\u529b\u4e3a\u60a8\u4e89\u53d6\u4e2d~",s[69.4]=s[80.14]=s[-11111]="\u5e94\u7248\u6743\u65b9\u8981\u6c42\u672c\u7247\u91c7\u7528\u52a0\u5bc6\u683c\u5f0f\uff0c\u6b64\u6d4f\u89c8\u5668\u6682\u4e0d\u652f\u6301\u64ad\u653e",s.adblock="\u64ad\u653e\u5185\u5bb9\u88abadblock\u8bef\u62e6\u622a\u4e86\uff0c\u8bf7\u60a8\u5173\u95ed\u63d2\u4ef6\uff0c\u6216\u4f7f\u7528\u4e0b\u5217\u65b9\u5f0f\u89c2\u770b\uff1a",s.getPlatformErrorCode=function(t,e,s){var a="-",i="-",n="-";return s=s||"00",a=Txplayer.util.os.mac?"62":Txplayer.util.os.windows?"61":"66","getinfo"===t?i="101":"getkey"===t?i="102":"ad"===t?i="215":"player"===t&&(i="200"),"neterror"===e?n="140":"cgiInnerError"===e?(n="13",2===(s=s&&""+s).length&&(s="0"+s)):"h5video"===e?n="111":"aderror"===e&&(n="150"),Txplayer.util.localLog&&Txplayer.util.localLog("VIDEO_ERROR",{platform:a,type:i,module:n,code:s}),a+i+"."+n+s},t.exports=s},49:function(t,e){function d(t){var i=[["resolve","done",h.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",h.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",h.Callbacks({memory:1})]],n="pending",o={state:function(){return n},always:function(){return c.done(arguments).fail(arguments),this},then:function(){var e=arguments;return d(function(n){h.each(i,function(t,a){var i=h.isFunction(e[t])&&e[t];c[a[1]](function(){var t,e,s=i&&i.apply(this,arguments);s&&h.isFunction(s.promise)?s.promise().done(n.resolve).fail(n.reject).progress(n.notify):(t=this===o?n.promise():this,e=i?[s]:arguments,n[a[0]+"With"](t,e))})}),e=null}).promise()},promise:function(t){return null!=t?h.extend(t,o):o}},c={};return h.each(i,function(t,e){var s=e[2],a=e[3];o[e[1]]=s.add,a&&s.add(function(){n=a},i[1^t][2].disable,i[2][2].lock),c[e[0]]=function(){return c[e[0]+"With"](this===c?o:this,arguments),this},c[e[0]+"With"]=s.fireWith}),o.promise(c),t&&t.call(c,c),c}var h,p;"function"!=typeof(h=Zepto).Deferred&&(p=Array.prototype.slice,h.when=function(t){function e(e,s,a){return function(t){s[e]=this,a[e]=1<arguments.length?p.call(arguments):t,a===i?l.notifyWith(s,a):--r||l.resolveWith(s,a)}}var i,s,a,n=p.call(arguments),o=n.length,c=0,r=1!==o||t&&h.isFunction(t.promise)?o:0,l=1===r?t:d();if(1<o)for(i=new Array(o),s=new Array(o),a=new Array(o);c<o;++c)n[c]&&h.isFunction(n[c].promise)?n[c].promise().done(e(c,a,n)).fail(l.reject).progress(e(c,s,i)):--r;return r||l.resolveWith(a,n),l.promise()},h.Deferred=d)},50:function(t,e){var u;"function"!=typeof(u=Zepto).Callbacks&&(u.Callbacks=function(a){a=u.extend({},a);function s(t){for(i=a.memory&&t,n=!0,l=c||0,c=0,r=d.length,o=!0;d&&l<r;++l)if(!1===d[l].apply(t[0],t[1])&&a.stopOnFalse){i=!1;break}o=!1,d&&(h?h.length&&s(h.shift()):i?d.length=0:p.disable())}var i,n,o,c,r,l,d=[],h=!a.once&&[],p={add:function(){var t,e;return d&&(t=d.length,e=function s(t){u.each(t,function(t,e){"function"==typeof e?a.unique&&p.has(e)||d.push(e):e&&e.length&&"string"!=typeof e&&s(e)})},e(arguments),o?r=d.length:i&&(c=t,s(i))),this},remove:function(){return d&&u.each(arguments,function(t,e){for(var s;-1<(s=u.inArray(e,d,s));)d.splice(s,1),o&&(s<=r&&--r,s<=l&&--l)}),this},has:function(t){return!(!d||!(t?-1<u.inArray(t,d):d.length))},empty:function(){return r=d.length=0,this},disable:function(){return d=h=i=void 0,this},disabled:function(){return!d},lock:function(){return h=void 0,i||p.disable(),this},locked:function(){return!h},fireWith:function(t,e){return!d||n&&!h||(e=[t,(e=e||[]).slice?e.slice():e],o?h.push(e):s(e)),this},fire:function(){return p.fireWith(this,arguments)},fired:function(){return!!n}};return p})}});!function(a){var s={};function i(t){if(s[t])return s[t].exports;var e=s[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=a,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=428)}({428:function(t,e,a){t.exports=a(429)},429:function(t,e,a){var s=Txplayer.util,i=Txplayer.$;function o(t){i=Txplayer.$,this.msg=new Txplayer.Events,this.dataset={},this.context=t,this.init()}o.prototype={init:function(){this.updatePlayListIndex(0),this.setPlayState(-1),this.context.dataset.playbackRate=1,this.context.dataset.videoCurrentTime=0,this.dataset.retryTimes=0,this.dataset.saveRetryTimes=0,this.dataset.hlsRetryTimes=0,this.write(),this.addEventListener(),this.exportsModuleApis(),this.loadSubPlugins(),this.resetVideoStatus()},loadSubPlugins:function(){var t=[];this.context.pluginConfig&&"array"===i.type(this.context.pluginConfig.subPlugins)&&(t=this.context.pluginConfig.subPlugins.slice(0));var e={msg:this.context.msg,userMsg:this.context.userMsg,dataset:this.context.dataset,userApi:this.context.userApi,$mod:{$videomod:this.dataset.$videomod}};s.loadPlugins.call(this,t,e)},remove:function(){this.dataset.$videomod.remove()},addEventListener:function(){this.initVideoEvents(),this.dealFilmMsgMoudle()},exportsModuleApis:function(){this.initUserApis(),this.initPrivateMsg(),this.initDataApis()}},s.extend(o.prototype,a(79)),s.extend(o.prototype,a(82)),s.extend(o.prototype,a(83)),s.extend(o.prototype,a(84)),s.extend(o.prototype,a(85)),s.extend(o.prototype,a(86)),s.extend(o.prototype,a(87)),s.extend(o.prototype,a(88)),s.extend(o.prototype,a(89)),s.extend(o.prototype,a(90)),s.extend(o.prototype,a(91)),s.extend(o.prototype,a(92)),s.extend(o.prototype,a(93)),s.extend(o.prototype,a(94)),Txplayer.register("v4HdPlayer",o)},79:function(t,e,a){var s=Txplayer.util,i=a(80),o=a(81);t.exports={write:function(){this.dataset.hasVideoHtmlWrited=!0,this.context.dataset.$playermod.append(this.buildHTML()),this.dataset.$videomod=this.context.dataset.$playermod.find('[data-role="'+this.dataset.renderData.videomod+'"]'),this.context.dataset.$videomod=this.dataset.$videomod,this.dataset.$video=this.dataset.$videomod.find("video"),this.context.userMsg.emit("write")},buildHTML:function(){var t={videomod:"txp-video-wrapper",data:{attrs:this.getAttrs().join(" "),videoStyle:this.getVideoStyles()}};return this.dataset.renderData=t,Txplayer.$.tmpl(s.isTouchPlayer(this.context)?o:i,t)},getAttrs:function(){var t={isUsePlayinline:"webkit-playsinline",isUseAirplay:"x-webkit-airplay",isUseControl:'controls="controls"',isUsePreload:['preload="auto"','preload="none"'],muted:"muted",isUseCrossOrigin:'crossOrigin="anonymous"'};s.isTouchPlayer(this.context)&&(t.isUsePlayinline=['playsinline="isiPhoneShowPlaysinline" x5-video-player-type="h5-page" t7-video-player-type="inline" ']);var e=[];for(var a in t)Txplayer.$.isArray(t[a])?!0===this.context.config[a]?e.push(t[a][0]):e.push(t[a][1]):!0===this.context.config[a]&&e.push(t[a]);return e},setVideoClass:function(t){var a;t&&(a=this,"array"===Txplayer.$.type(t.removeList)&&Txplayer.$(t.removeList).each(function(t,e){a.dataset.$video.hasClass(e)&&a.dataset.$video.removeClass(e)}),"array"===Txplayer.$.type(t.addList)&&Txplayer.$(t.addList).each(function(t,e){a.dataset.$video.addClass(e)}))},getVideoStyles:function(){var t=[];return t.push("background-color:#000;width:100%;height:100%;"),t.join(";")}}},80:function(t,e){t.exports='<txpdiv data-role="<%=videomod%>" class="txp_video_container">\n  <video style="<%=data.videoStyle%>" <%=data.attrs%> data-role="txp_video_tag"></video>\n  <video style="<%=data.videoStyle%>" <%=data.attrs%> data-role="txp_video_tag"></video>\n</txpdiv>'},81:function(t,e){t.exports='<txpdiv data-role="<%=videomod%>" class="txp_touch_video_container">\n  <video style="<%=data.videoStyle%>" <%=data.attrs%> data-role="txp_video_tag" />\n  <video style="<%=data.videoStyle%>" <%=data.attrs%> data-role="txp_video_tag" />\n</txpdiv>'},82:function(t,e){var n=Txplayer.util,a={};a.checkHlsHole=function(e){var a,s,i,o,r=this;r.context.dataset.useChromeHls&&(i=s=a=0,(o=function(){0<r.dataset.intervalId&&(clearInterval(r.dataset.intervalId),r.dataset.intervalId=0)})(),r.context.msg.off("videoTimeUpdate.checkHoleOver"),r.context.msg.off("vidChange.checkHoleOver"),r.context.msg.off("error.checkHoleOver"),r.dataset.intervalId=setInterval(function(){var t;e.ended||0<e.buffered.length&&e.currentTime>e.buffered.start(0)?o():!(0===e.readyState||e.buffered.length<=0||e.paused)&&(i=e.buffered.start(0),e.currentTime<i&&.5<=i)&&(t=window.performance.now(),a?(s=t-a,n.v4log("\u68c0\u67e5hls\u8d77\u64adhole, stall "+s),5e3<s&&(o(),r.context.dataset.useChromeHls&&(n.v4log("\u68c0\u67e5hls\u8d77\u64adhole\uff0chole\u957f\u5ea6\u4e3a"+i+", \u73b0\u5728\u5f00\u59cb\u5207\u6362mp4\u64ad\u653e"),r.context.msg.broadcast("destroyHlsPlayer",{msg:""}),r.clearPlaylist(),r.context.dataset.currentTime&&(r.context.dataset.connectionPlayTime=r.context.dataset.currentTime),delete r.context.dataset.hlsLoadStartTime,r.context.msg.broadcast("chromehlsErrorSwitchToHtml5hd",{code:"11104.1"})))):a=t)},100),r.context.msg.on("videoTimeUpdate.checkHoleOver",o),r.context.msg.on("vidChange.checkHoleOver",o),r.context.msg.on("error.checkHoleOver",o))},t.exports=a},83:function(t,e){var n=Txplayer.util;t.exports={videoHelper:function(t,e,a){if(!(t&&t.error&&t.error.code&&"pause"===e)){a=a||[];function s(){if(!i||!t||t.paused)return a&&a.length?t[e].apply(t,a):t[e]()}var i="play"===e,o=this,r=s();if(r&&r.then)(this.dataset.videoDef=r).then(function(){o.dataset.videoDef=null}).catch(function(t){n.showError("[videoHelper error]",t),o.dataset.videoDef=null});else{if(this.dataset.videoDef)return;s()}return r}},stopVideo:function(t){t&&(Txplayer.$(t).removeAttr("src"),t.load&&t.load())},updateCurrentVideoUrl:function(t){t&&(-1<t.indexOf("blob:")||-1<t.indexOf("mediasource:")||(this.context.dataset.currentVideoUrl=t))},updateVideoStatus:function(t,e){t&&(t.status=e)},getVideoBufferedTime:function(t){if(t=t||{},this.isChrome56WithBugOfMp4())return 0;var e=t.video;if(!e||!e.buffered||!e.buffered.length)return 0;var a=0,s=e.currentTime,i=e.buffered.length;if(1===i)a=e.buffered.end(0);else for(var o=0,r=i;o<r;o++)if(s>=e.buffered.start(o)&&s<=e.buffered.end(o))if(o+1<r)for(var n=o+1;n<r;n++){var d=e.buffered.start(n)-e.buffered.end(n-1);if(!(0<=d&&d<=.2)){a=e.buffered.end(n-1);break}a=e.buffered.end(n)}else a=e.buffered.end(o);return a},resetVideoStatus:function(){var a=this;this.dataset.$video.each(function(t,e){e.index=t,e.isFocus=0===t,a.updateVideoStatus(e,"IDLE"),e.src&&a.stopVideo(e)}),this.updateVideoDisplay()},updateVideoDisplay:function(){this.dataset.$video.each(function(t,e){!0===e.isFocus?e.style.display="block":e.style.display="none"})},setVideoPlayTime:function(t,e,a){var s=Txplayer.$;if(a="undefined"===s.type(a)||a,"number"===s.type(e)&&!isNaN(e)){if(0==e&&a)return 0===this.context.dataset.playListIndex&&this.seekTo(t,e),void this.videoHelper(t,"play");this.seekTo(t,e),a&&this.videoHelper(t,"play")}}}},84:function(t,e){var a=Txplayer.util;t.exports={isFocusVideoBufferComplete:function(t){if(this.isChrome56WithBugOfMp4())return!1;var e=t||this.getFocusVideoTag(),a=this.getFocusVideoBuffer(t);return parseInt(e.duration)===parseInt(a)||parseInt(e.duration)===Math.ceil(a)},checkTimeisInBufferdRange:function(t){var e,a=this.getFocusVideoTag();if(!(a&&a.buffered&&a.buffered.length))return!1;if(this.isChrome56WithBugOfMp4()&&!this.context.dataset.useChromeHls)return 0==t||Math.abs(a.currentTime-t)<6&&2<Math.abs(a.currentTime-t);for(var s=0,i=a.buffered.length;s<i;s++)if(e=a.buffered.end(s),this.context.dataset.useHls?--e:e-=3,t>=a.buffered.start(s)&&t<=e)return!0;return!1},getFocusVideoTag:function(){var a;return this.dataset.$video.each(function(t,e){if(e.isFocus)return a=e,!1}),a},getFocusVideoBuffer:function(t){var e=t||this.getFocusVideoTag();return e&&e.buffered&&e.buffered.length?e.buffered.end(e.buffered.length-1):0},clearFocusVideoUrl:function(){var t=this.getFocusVideoTag();this.videoHelper(t,"pause"),this.stopVideo(t),this.updateVideoStatus(t,"IDLE")},isFocusVideoReady:function(){var t=this.getFocusVideoTag();return!(!t||!t.src)},setFocusVideoPlay:function(){var t=this.getFocusVideoTag();t.src?(this.videoHelper(t,"play"),this.updateVideoStatus(t,"PLAYING")):a.showInfo("play fail, video.src is null!")},setFocusVideoPause:function(){var t=this.getFocusVideoTag();t.src?(this.dataset.cachePauseAction=!1,this.videoHelper(t,"pause"),this.updateVideoStatus(t,"PAUSE")):(void 0===t.src&&(this.dataset.cachePauseAction=!0),a.showInfo("pause fail, video.src is null!"))},setFocusVideoCurrentTime:function(t){var e=Txplayer.$,a=Txplayer.util;a.v4log("setFocusVideoCurrentTime",t);var s=this.getFocusVideoTag(),i=this;if(!(t.time>s.duration)||i.context.dataset.useHls&&a.browser.safari&&t.time<=i.context.dataset.duration)return this.context.dataset.useChromeHls?(t.time&&(this.context.dataset.videoCurrentTime=t.time),void(i.context.dataset.hlsLoadStartTime&&i.context.dataset.hlsLoadStartTime==t.time?t.autoplay&&(i.dataset.cachePauseAction?i.setFocusVideoPause():i.videoHelper(s,"play")):this.context.msg.broadcast("setHlsCurrenTime",{video:s,currentTime:t.time,autoplay:t.autoplay}))):void("number"!==e.type(t.time)||isNaN(t.time)||(this.context.dataset.videoCurrentTime=t.time,this.setVideoPlayTime(s,t.time,t.autoplay)));a.showError("setFocusVideoCurrentTime Error","time="+t.time+",duration="+s.duration)},setFocusVideoUrl:function(s){var i=Txplayer.$,o=Txplayer.util;"string"===i.type(s)&&(s={url:s}),s.preload=s.preload||!0,s.autoplay=s.autoplay||!1;function e(t){var e="",e="string"===i.type(t)?t:t.url;if(r.startBufferControl({video:n,src:e,hlsLoadStartTime:r.context.dataset.hlsLoadStartTime}),r.updateCurrentVideoUrl(e),r.context.dataset.useChromeHls&&e&&"function"==i.type(e.indexOf)&&-1!=e.indexOf(".m3u8")){!s.currentTime&&r.context.dataset.hlsLoadStartTime&&(s.currentTime=r.context.dataset.hlsLoadStartTime);var a=[];r.context.dataset.filmVideoData[0].urlArray.forEach(function(t,e){a.push(t.url)}),r.context.msg.broadcast("loadHlsSource",{p2pConfig:o.getP2pConfig(r.context),src:e,m3u8:t.m3u8,byterate:s.byteRate,video:n,currentTime:s.currentTime,autoplay:s.autoplay,fromSetDefinition:s.fromSetDefinition,m3u8Urls:a,reason:"setFocusVideoUrl"}),s.currentTime&&(r.context.dataset.videoCurrentTime=s.currentTime)}else{if(r.context.dataset.hlsLoadStartTime&&r.context.dataset.useHls&&(s.currentTime=r.context.dataset.hlsLoadStartTime,r.context.dataset.videoCurrentTime=s.currentTime,e=e.split("#t=")[0]+"#t="+Math.ceil(s.currentTime),r.updateCurrentVideoUrl(e),o.v4log("safari-hls setFocusVideoUrl dataset.hlsLoadStartTime",{src:e,hlsLoadStartTime:r.context.dataset.hlsLoadStartTime})),n.src!==e&&i(n).attr("src",e),s.preload)try{r.videoHelper(n,"load")}catch(t){o.showInfo(t,t.stack)}n.isFocus&&(o.showInfo("setFocusVideoUrl.setUrlAndPlay.isFocus"),s.autoplay=!0),s.currentTime&&!r.context.dataset.hlsLoadStartTime?(r.context.dataset.videoCurrentTime=s.currentTime,r.setVideoPlayTime(n,s.currentTime,s.autoplay)):s.autoplay&&(r.context.dataset.videoCurrentTime=r.context.dataset.hlsLoadStartTime||0,r.dataset.cachePauseAction?r.setFocusVideoPause():r.videoHelper(n,"play"))}}var r=this,n=r.getFocusVideoTag();s&&s.hasOwnProperty("updateIndex")&&this.updatePlayListIndex(s.updateIndex),"string"===i.type(s.url)?e({url:s.url,m3u8:s.m3u8}):"function"!==i.type(s.getUrlSync)||s.preloading?s.preloading?(r.context.msg.broadcast("showLoading"),o.showInfo("\u6b63\u5728\u9884\u52a0\u8f7d\u4e2d",s)):o.showInfo("setFocusVideoUrl\u53c2\u6570\u9519\u8bef, \u627e\u4e0d\u5230getUrlSync",s):(o.showInfo("setFocusVideoUrl.getUrlSync","start"),s.getUrlSync().done(function(t){s.url=t,o.showInfo("setFocusVideoUrl.getUrlSync.setUrlAndPlay"),e(t)}).fail(function(t){}));var t=this.getPreloadVideoTag();t===n&&(t=this.dataset.$video[1]),t&&t.src&&this.clearPreloadVideoUrl()}}},85:function(t,e){var o=Txplayer.util;t.exports={isPreloadVideoBuffered:function(){var t=this.getPreloadVideoTag();return!!(t&&t.buffered&&t.buffered.length)},clearPreloadVideoUrl:function(){var t=this.getPreloadVideoTag();this.videoHelper(t,"pause"),this.stopVideo(t),this.updateVideoStatus(t,"IDLE")},getPreloadVideoTag:function(){var t=this.getFocusVideoTag(),e=this.dataset.$video.length,a=t.index;return e<=++a&&(a=0),this.dataset.$video[a]},isPreloadVideoReady:function(t){t=t||{};var e=this.getPreloadVideoTag();if(!e)return o.error("checkPreloadVideoStatus error: can not find preload video!"),!1;if(!e.src)return!1;if(this.context.dataset.playList[this.context.dataset.playListIndex+1]&&this.context.dataset.playList[this.context.dataset.playListIndex+1].error)return!1;if("PRELOADING"===e.status)return!0;if("PRELOAD"!==e.status)return!1;if(this.context.dataset.useChromeHls&&(-1<e.src.indexOf("blob:")||-1<e.src.indexOf("mediasource:")))return!0;var a=e.src,s=this.context.dataset.playListIndex+1;t.isPreloadFirstFilm&&(s=this.context.dataset.playListIndex),s>=this.context.dataset.playList.length&&(s=0);var i=this.context.dataset.playList[s];return(a=a.split("#t=")[0])===i.url},setPreloadVideoPlay:function(t){t=t||{};var e=this.getPreloadVideoTag(),a=this.getFocusVideoTag();a===e&&(a=this.dataset.$video[1]);var s=t.currentTime||e.currentTime;e&&a&&(e.src?(t.isPreloadFirstFilm||t.noUpdateIndex||this.updatePlayListIndex(this.context.dataset.playListIndex+1),this.updateCurrentVideoUrl(this.context.dataset.playList[this.context.dataset.playListIndex].url),this.resetPlayListStatus("preloading"),a.isFocus=!1,e.isFocus=!0,this.updateVideoDisplay(),this.updateVideoStatus(e,"PLAYING"),this.updateVideoStatus(a,"IDLE"),this.videoHelper(a,"pause"),Txplayer.$(a).removeAttr("src"),"number"===Txplayer.$.type(s)&&this.setFocusVideoCurrentTime({time:s,autoplay:!0}),this.context.dataset.hasCallShowUIVipGuide=!1):o.error("\u64ad\u653e\u5931\u8d25\uff1a\u9884\u52a0\u8f7d\u7684\u89c6\u9891\u6ca1\u627e\u5230\u64ad\u653e\u5730\u5740"))},setPreloadVideoUrl:function(s){var i,t,e,a,o,r=this,n=Txplayer.$,d=Txplayer.util;((s=s||{}).isPreloadFirstFilm||!this.isTheLastFilm()||"string"===n.type(s)||"object"===n.type(s)&&s.url)&&this.context.dataset.playList&&(i=this.getPreloadVideoTag(),t=this.context.dataset.playListIndex+1,s.isPreloadFirstFilm&&(t=0),t>=this.context.dataset.playList.length&&(t=this.context.dataset.playListIndex),e=function(t){var e="",e="string"===n.type(t)?t:t.url;if(r.startBufferControl({video:i,src:e,hlsLoadStartTime:r.context.dataset.hlsLoadStartTime}),r.updateVideoStatus(i,"PRELOAD"),r.context.dataset.useChromeHls&&e&&"function"==n.type(e.indexOf)&&-1!=e.indexOf(".m3u8")){r.context.dataset.hlsLoadStartTime&&(s.currentTime=r.context.dataset.hlsLoadStartTime);var a=[];r.context.dataset.filmVideoData[0].urlArray.forEach(function(t,e){a.push(t.url)}),r.context.msg.broadcast("loadHlsSource",{p2pConfig:d.getP2pConfig(r.context),src:e,m3u8:t.m3u8,currentTime:s.currentTime,video:i,m3u8Urls:a,reason:"setPreloadVideoUrl"})}else{s.isPreloadFirstFilm&&r.context.msg.broadcast("setPreloadVideoUrlReport"),r.context.dataset.hlsLoadStartTime&&r.context.dataset.useHls&&(s.currentTime=r.context.dataset.hlsLoadStartTime,r.context.dataset.videoCurrentTime=s.currentTime,e=e.split("#t=")[0]+"#t="+Math.ceil(s.currentTime),d.v4log("safari-hls setPreloadVideoUrl dataset.hlsLoadStartTime",{src:e,hlsLoadStartTime:r.context.dataset.hlsLoadStartTime})),n(i).attr("src",e);try{r.videoHelper(i,"load")}catch(t){d.showInfo(t,t.stack)}}i.isFocus&&(d.showInfo("setPreloadVideoUrl.setUrlAndPlay.videoIsFocus"),s.autoplay=!0),e!=r.context.dataset.playList[r.context.dataset.playListIndex].url||s.isPreloadFirstFilm||(s.autoplay=!0,s.noUpdateIndex=!0),s.autoplay&&r.setPreloadVideoPlay(s),r.context.dataset.preloadStartTime=+new Date},a=s.url||this.context.dataset.playList[t],o=s.m3u8||n.type("string"!==this.context.dataset.playList[t])&&this.context.dataset.playList[t].m3u8||"","string"===n.type(a)?e({url:a,m3u8:o}):a&&a.url&&!s.preload&&a.url!==i.src?(a.preloading=!0,e({url:a.url,m3u8:o})):a&&"function"===n.type(a.getUrlSync)&&"PRELOADING"!=i.status&&(r.updateVideoStatus(i,"PRELOADING"),a.getUrlSync().done(function(t){a.url=t,d.showInfo("setPreloadVideoUrl.setUrlAndPlay",s),e(t)}).fail(function(t){r.updateVideoStatus(i,"IDLE")})))}}},86:function(t,e){var u=Txplayer.util,a={},h={},f={1:"\u8bf7\u6c42\u4e2d\u6b62",2:"\u7f51\u7edc\u51fa\u9519",3:"\u89e3\u7801\u51fa\u9519",4:"\u8d44\u6e90\u4e0d\u652f\u6301"};function s(){var t=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};if(u.v4log("onPlaying",{isFocus:t.isFocus,src:t.src}),t.isFocus&&t.src){if(this.context.dataset.isPlayingAd)return u.v4log("pip pause>>>>"),void this.videoHelper(t,"pause");var e=this.context.dataset.playList[this.context.dataset.playListIndex];e&&(this.resetPlayListStatus("playing"),this.resetPlayListStatus("ended"),e.playing=!0),this.dataset.retryTimes=0,this.dataset.hlsRetryTimes=0,this.updateVideoStatus(t,"PLAYING"),this.setPlayState(1),this.context.msg.broadcast("videoPlaying",{videoTag:t,playListType:this.context.dataset.currentPlayListType,index:this.context.dataset.playListIndex}),this.setVideoPlaybackRate(),this.context.dataset.isSkippingTime||(this.context.dataset.isVideoSeeking=!1),this.context.dataset.isSkippingTime=!1}}function i(){var t=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};if(!t.isFocus)return u.v4log("\u9884\u52a0\u8f7d\u7684\u89c6\u9891\u53d1\u73b0\u64ad\u653e \u7acb\u9a6c\u6682\u505c"),void this.videoHelper(t,"pause");var e=parseInt(t.currentTime);if(e&&e!==this.dataset.prevCurrentTime){this.dataset.prevCurrentTime=e;var a=this.getPlayListDurationFromGetinfo();if((!this.context.dataset.useHls&&u.browser.chrome||u.isTouchPlayer(this.context))&&this.context.dataset.filmVideoData&&1<this.context.dataset.filmVideoData.length&&-1<a&&.2<t.currentTime-a&&!t.ended)return this.context.dataset.videoCurrentTime=a,this.videoHelper(t,"pause"),void Txplayer.$(t).trigger("ended",{from:"timeupdate"});this.context.dataset.videoCurrentTime=t.currentTime>a&&-1<a?a:t.currentTime,0==this.context.dataset.videoCurrentTime&&(this.context.dataset.videoCurrentTime=this.context.dataset.currentTime||0);var s=this.getVideoBufferedTime({video:t});this.context.dataset.bufferHealth=s-t.currentTime<0?0:parseInt(s-t.currentTime),this.context.dataset.videoBufferedTime=s,this.context.dataset.bufferedTime=this.getBufferdTime(),function(){var t=this.context.dataset.playList[this.context.dataset.playListIndex+1];if(t&&!t.preloading){var e=0;if(this.context.dataset.canPlayTime){for(var a=0;a<=this.context.dataset.playListIndex+1;a++)e+=parseInt(this.context.dataset.playList[a].data.duration,10);if(e>this.context.dataset.canPlayTime)return}(this.isFocusVideoBufferComplete()||this.isChrome56PlayAtTimeCount())&&(u.v4log("\u6b63\u5728\u81ea\u52a8\u9884\u52a0\u8f7d\u4e0b\u4e00\u8d34\u89c6\u9891"),this.setPreloadVideoUrl(),t.preloading=!0)}}.call(this);var i=this.isTheLastFilm(),o=this.context.dataset.useHls&&u.isTimeInHlsAdRange(this.context.dataset.videoCurrentTime,this.context,!0);this.context.msg.broadcast("videoTimeUpdateWithHlsAd",{videoTag:t,playListType:this.context.dataset.currentPlayListType,isTheLastFilm:i,time:this.context.dataset.currentTimeWithHlsAd}),o||this.context.msg.broadcast("videoTimeUpdate",{videoTag:t,playListType:this.context.dataset.currentPlayListType,isTheLastFilm:i}),o!==this.context.dataset.isPlayingHlsAd&&(this.context.dataset.isPlayingHlsAd=o,this.dataset.isFirstSwitchHls?(u.v4log("switchHlsAd: ",o),this.context.msg.broadcast("switchHlsAd",o)):this.dataset.isFirstSwitchHls=!0);try{this.context.userMsg.broadcast("timeupdate",{videoTag:t,currentTimeWithHlsAd:this.context.dataset.currentTimeWithHlsAd,currentTime:this.context.dataset.currentTime})}catch(t){}}}function o(){var t=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};this.context.dataset.videoWaitingReason=3,u.v4log("onError",t.error?t.error.code:"???",arguments);var e=arguments&&arguments[1]?arguments[1]:{},a=t.isFocus?this.context.dataset.playListIndex:this.context.dataset.playListIndex+1,s=t.error&&t.error.code,i=3===s;!i||this.context.dataset.vid===h.vid&&this.context.config.playerType===h.playerType||(h.vid=this.context.dataset.vid,h.playerType=this.context.config.playerType,h.errorCode=s,h.isDecodeError=i,h.decodeErrorCount=0),i&&void 0!==h.decodeErrorCount&&(h.decodeErrorCount++,h.decodeErrorCount,this.context.config.globalRetryTimes),!t.isFocus&&this.context.dataset.playList[this.context.dataset.playListIndex].preloading&&(a=this.context.dataset.playListIndex);var o=this.context.dataset.playList[a];if(o){var r,n,d,c,l=(r=e,n=t,d=this.context.dataset.currentPlayListType,c="",r&&r.detail?"manifestLoadError"===r.detail||"levelLoadError"===r.detail?(c="05",c=Txplayer.v4errcode.getPlatformErrorCode("player","h5video",c)):"fragLoadError"===r.detail?(c="08",c=Txplayer.v4errcode.getPlatformErrorCode("player","h5video",c)):"manifestLoadLoadTimeOut"===r.detail||"levelLoadTimeOut"===r.detail?(c="06",c=Txplayer.v4errcode.getPlatformErrorCode("player","h5video",c)):"fragLoadTimeOut"===r.detail?(c="09",c=Txplayer.v4errcode.getPlatformErrorCode("player","h5video",c)):"timeout"===r.detail?(c="04",c=Txplayer.v4errcode.getPlatformErrorCode("player","h5video",c)):"keyIdChange"===r.detail&&(c="10",c=Txplayer.v4errcode.getPlatformErrorCode("player","h5video",c)):"film"==d&&n.error&&(c=Txplayer.v4errcode.getPlatformErrorCode("player","h5video","0"+(n.error.code-1))),c);if(o.error=!0,o.errorCode=t.error&&t.error.code,(t.isFocus||(this.context.dataset.useChromeHls||this.stopVideo(t),this.context.dataset.useHls))&&(this.context.msg.broadcast("reportVideoError",{videoTag:t,type:this.context.dataset.currentPlayListType,index:this.context.dataset.playListIndex,code:l||t.error&&t.error.code||"",url:e.url||o.url||t.src||"",isFocus:t.isFocus}),!this.dataset.hasReportError))return this.dataset.retryTimes==this.context.config.globalRetryTimes||e.ckeyChange?(t._hlsDetail=e.detail||"",void this.triggerError(t,l,e)):void(t.isFocus&&i&&h.decodeErrorCount>this.context.config.globalRetryTimes?this.triggerError(t,l,e):(this.dataset.retryTimes++,1==this.dataset.retryTimes&&(this.dataset.saveRetryTimes++,this.saveRetryTimes(!0)),u.v4log("retryTimes",{retryTimes:this.dataset.retryTimes}),u.v4log("video\u51fa\u9519\u91cd\u8bd5\uff0c\u672c\u6b21\u91cd\u8bd5\u539f\u56e0\uff1a"+f[s]),o.error=!1,this.context.msg.broadcast("retryUrlsWhenErr",{currentTime:this.context.dataset.videoCurrentTime||0,index:this.context.dataset.playListIndex,isFocus:t.isFocus})))}}a.triggerError=function(t,e){if(this.context.dataset.useChromeHls||!this.context.dataset.useChromeHls&&this.context.dataset.useHls&&u.browser.chrome){var a=t.error&&t.error.code||"",s=t.error&&t.error.message||"";return this.context.msg.broadcast("destroyHlsPlayer",{msg:t._hlsDetail+", code: "+a+", message: "+s}),this.clearPlaylist(),this.context.dataset.currentTime&&(this.context.dataset.connectionPlayTime=this.context.dataset.currentTime),2<=this.dataset.hlsRetryTimes?(this.dataset.retryTimes=0,u.v4log("chromehlsErrorSwitchToHtml5hd",{connectionPlayTime:this.context.dataset.connectionPlayTime}),delete this.context.dataset.hlsLoadStartTime,this.context.dataset.emeEnabled?this.context.msg.broadcast("error",{type:"hls",code:-11111,errCode:"-11111.2",exem:-2}):this.context.msg.broadcast("chromehlsErrorSwitchToHtml5hd",{code:e})):(this.dataset.retryTimes=0,u.v4log("chromehlsErrorSwitchToChromehls",{connectionPlayTime:this.context.dataset.connectionPlayTime}),this.context.msg.broadcast("chromehlsErrorSwitchToChromehls",{code:e})),void this.dataset.hlsRetryTimes++}var i={};t&&t.error?i.code=t.error.code:i.code=5,i.msg=Txplayer.v4errcode[i.code],i.type=this.context.dataset.currentPlayListType,i.videoTag=t,i.index=this.context.dataset.playListIndex,e&&(i.errCode=e),i.flowId=this.context.dataset.flowid,u.v4log("broadcast:error",i),this.context.msg.broadcast("error",i);try{this.context.userMsg.broadcast("error",i)}catch(t){}this.dataset.hasReportError=!0},a.initVideoEvents=function(){this.dataset.$video.on("loadedmetadata",function(){var t=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};u.v4log("onLoadedmetadata",{isFocus:t.isFocus}),t.isFocus&&this.context.msg.broadcast("videoLoadedMetaData",{videoTag:t})}.bind(this)).on("canplay",function(){var t=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};u.v4log("onCanplay",{isFocus:t.isFocus}),this.context.msg.broadcast("videoCanplay",{videoTag:t,playListType:this.context.dataset.currentPlayListType,index:this.context.dataset.playListIndex,isFocus:t.isFocus,src:t.src}),u.browser.safari&&this.context.msg.broadcast("hideLoading"),this.context.dataset.videoDuration=t.duration}.bind(this)).on("canplaythrough",function(){var t=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};u.v4log("onCanplayThrough",{isFocus:t.isFocus}),t.isFocus&&this.context.msg.broadcast("onCanplayThrough",{videoTag:t})}.bind(this)).on("play",function(){var t=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};u.v4log("onPlay",{isFocus:t.isFocus,src:t.src}),t.src&&t.isFocus&&(this.context.msg.broadcast("videoPlay",{videoTag:t,playListType:this.context.dataset.currentPlayListType,index:this.context.dataset.playListIndex}),this.startWaitingFinder(),this.startVideoPlayingOnBadNet(),this.checkHlsHole(t))}.bind(this)).on("playing",s.bind(this)).on("progress",function(){var t=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};t.isFocus&&(this.context.msg.broadcast("videoProgress",{videoTag:t}),t.buffered&&t.buffered.length&&t.buffered.end(t.buffered.length-1)===t.duration&&this.dataset.prevBuffered!==t.buffered.end(t.buffered.length-1)&&(this.dataset.prevBuffered=t.buffered.end(t.buffered.length-1),u.v4log("videoProgressDone",{isFocus:t.isFocus,Buffered:this.dataset.prevBuffered}),this.context.msg.broadcast("videoProgressDone",{videoTag:t,playListIndex:this.context.dataset.playListIndex,playListType:this.context.dataset.currentPlayListType})))}.bind(this)).on("pause",function(){var t=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};u.v4log("onPause",{isFocus:t.isFocus}),t.isFocus&&(this.updateVideoStatus(t,"PAUSE"),this.context.dataset.isMinbufferControlPause||(this.context.msg.broadcast("videoPause",{videoTag:t,playListType:this.context.dataset.currentPlayListType,index:this.context.dataset.playListIndex,end:t.ended}),t.ended||this.setPlayState(2)))}.bind(this)).on("timeupdate",i.bind(this)).on("ended",function(){var t=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};u.v4log("onEnd",{isFocus:t.isFocus});var e,a,s=arguments&&arguments[1]?arguments[1]:{};t.isFocus&&(this.context.dataset.isVideoSeeking=!1,!(t.duration===t.currentTime&&t.currentTime<this.context.dataset.duration-1&&this.context.dataset.useHls&&u.browser.safari)||this.context.dataset.canPlayTime&&this.context.dataset.currentTime>=this.context.dataset.canPlayTime?((e=this.context.dataset.playList[this.context.dataset.playListIndex])&&(this.resetPlayListStatus("playing"),this.resetPlayListStatus("ended"),e.ended=!0),(a=this.isTheLastFilm())?s.from&&"skipPrelude"==s.from&&(u.v4log("\u8df3\u8fc7\u7247\u5c3e\u4e3b\u52a8end","video.pause"),t.pause()):this.playTheNext(),this.updateVideoStatus(t,"IDLE"),u.v4log("broadcast-videoEnd",{isTheLastFilm:a,noHdAdPlugin:this.context.dataset.noHdAdPlugin||""}),a&&(this.context.dataset.isFilmEnded=!0),this.context.msg.broadcast("videoEnd",{videoTag:t,index:this.context.dataset.playListIndex,playListType:this.context.dataset.currentPlayListType,isTheLastFilm:a,isAllEnd:!!(a&&this.context.dataset.noHdAdPlugin||this.context.dataset.isEndingAdEnded),from:s&&s.from||"videoEvent"})):Txplayer.$(t).trigger("error"))}.bind(this)).on("error",o.bind(this)).on("waiting",function(){var t=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};u.v4log("onWaiting",{isFocus:t.isFocus}),t.isFocus&&(this.context.msg.broadcast("videoWaiting",{videoTag:t,index:this.context.dataset.playListIndex,playListType:this.context.dataset.currentPlayListType,seeking:t.seeking}),this.setPlayState(3))}.bind(this)).on("seeking",function(){var t=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};u.v4log("onSeeking",{isFocus:t.isFocus}),t.isFocus&&(this.context.dataset.isVideoSeeking=!0,this.context.msg.broadcast("videoSeeking",{videoTag:t,index:this.context.dataset.playListIndex,playListType:this.context.dataset.currentPlayListType,seeking:!0}))}.bind(this)).on("seeked",function(){var t=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};u.v4log("onSeeked",{isFocus:t.isFocus}),t.isFocus&&(this.context.dataset.isVideoSeeking=!1,this.context.msg.broadcast("videoSeeked",{videoTag:t,index:this.context.dataset.playListIndex,playListType:this.context.dataset.currentPlayListType,seeking:!1}),(u.browser.ie&&"edge"===u.browser.ie.version||u.browser.safari)&&s.apply(this,Array.prototype.slice.call(arguments)))}.bind(this)).on("ratechange",function(){var t=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};t.isFocus&&this.context.dataset.playbackRate&&t.playbackRate!=this.context.dataset.playbackRate&&(t.playbackRate=this.context.dataset.playbackRate)}.bind(this))},t.exports=a},87:function(t,e){var s=Txplayer.util;t.exports={setVolume:function(t){var a;if("object"===Txplayer.$.type(t)?a=t.volume:(a=t,t={}),isNaN(a)||"number"!==Txplayer.$.type(a)||100<a&&a<0)s.showError("getVolume\u5931\u8d25","player.setVolume(volume),volume\u5fc5\u987b\u4e3a0-100\u7684\u6574\u6570");else{0==a?this.mute({broadcast:!1,isUserAction:t.isUserAction}):this.unMute({broadcast:!1,isUserAction:t.isUserAction}),this.dataset.$video.each(function(t,e){e.volume=a/100});var e=a!==this.context.dataset.volume;this.context.dataset.volume=a,this.context.msg.broadcast("volumeChange",{volume:a,isUserAction:!!t.isUserAction});try{e&&this.context.userMsg.broadcast("volumeChange",{volume:a,isUserAction:!!t.isUserAction})}catch(t){}t.showTips&&this.context.msg.broadcast("showUiVolumeTip",{volume:a})}},getVolume:function(){return this.context.dataset.volume},mute:function(t){if((t=t||{}).hasOwnProperty("broadcast")||(t.broadcast=!0),this.dataset.$video.each(function(t,e){e.muted=!0}),this.context.dataset.muted=!0,t.broadcast){try{this.context.userMsg.broadcast("volumeChange",{volume:0,isUserAction:!!t.isUserAction})}catch(t){}this.context.msg.broadcast("volumeChange",{volume:0,isUserAction:!!t.isUserAction})}t.showTips&&this.context.msg.broadcast("showUiVolumeTip",{mute:!0})},unMute:function(t){if((t=t||{}).hasOwnProperty("broadcast")||(t.broadcast=!0),this.dataset.$video.each(function(t,e){e.muted=!1,e.removeAttribute("muted")}),this.context.dataset.muted=!1,t.broadcast){try{this.context.userMsg.broadcast("volumeChange",{volume:this.context.dataset.volume,isUserAction:!!t.isUserAction})}catch(t){}this.context.msg.broadcast("volumeChange",{volume:this.context.dataset.volume,isUserAction:!!t.isUserAction})}t.showTips&&this.context.msg.broadcast("showUiVolumeTip",{mute:!1})},volumeUp:function(t){var e=5;"number"===Txplayer.$.type(t)&&(e=parseInt(t));var a=this.getVolume();100<(a+=e)&&(a=100),this.setVolume(a)},volumeDown:function(t){var e=5;"number"===Txplayer.$.type(t)&&(e=parseInt(t));var a=this.getVolume();(a-=e)<0&&(a=0),this.setVolume(a)}}},88:function(t,e){var r=Txplayer.util;t.exports={dealFilmMsgMoudle:function(){var o=this;this.context.msg.on(r.getUniqueMsgKey("beforeVideoPlay"),function(t,e){o.resetVideoStatus(),o.context.dataset.retryTimesInLast5Play=0,o.context.dataset.bufferTimesInLast5Play=0,o.updateMinBuffer(),o.dataset.saveRetryTimes=0,o.dataset.retryTimes=0,o.dataset.bufferTimes=0,o.dataset.hasReportError=null,o.dataset.BUFFERINGTIME=0,o.context.dataset.bufferHealth=null,o.context.dataset.videoCurrentTime=0,o.context.dataset.videoBufferedTime=0,o.context.dataset.bufferedTime=0,o.context.dataset.bfTimeStart4564=0,o.context.dataset.bfTimeEnd4564=0,o.context.dataset.isVideoSeeking=!1,o.dataset.minBufferSpan=1,o.context.dataset.isFilmEnded=!1,o.context.dataset.isEndingAdEnded=!1,o.context.dataset.loadEnoughBuffer=!1,o.context.dataset.isMinbufferControlPause=!1,o.context.dataset.ckeytimeoutRetryCount=0,o.context.dataset.adExtras=void 0,o.context.dataset.isPreloadFilm=!1,o.setPlayState(-1),o.context.msg.broadcast("destroyHlsPlayer",{msg:"player init"}),o.context.msg.off("videoWaiting.loadEnoughBuffer"),o.clearFocusVideoUrl(),o.clearPlaylist("vidEnd",e)}),this.context.msg.on(r.getUniqueMsgKey("beforeVideoRePlay"),function(){o.clearPlaylist("vidEnd",o.context.dataset.vid)}),this.context.msg.on("loadEnoughBuffer",function(){o.context.msg.off("videoWaiting.loadEnoughBuffer"),o.context.msg.on("videoWaiting.loadEnoughBuffer",function(t){var e,a,s,i;t.seeking||o.context.dataset.isVideoSeeking||o.context.dataset.isDefinitionSwitching||0<o.dataset.retryTimes||(o.dataset.bufferTimes++,(e=o.getFocusVideoTag())&&(o.context.dataset.bfTimeStart4564=o.getVideoBufferedTime({video:e}),s=(a=o.getVideoBufferedTime({video:e}))-e.currentTime<0?0:parseInt(a-e.currentTime),i=o.context.dataset.canPlayTime||e.duration,r.v4log("\u7f13\u51b2\u7b56\u7565 - videoWaiting ",{bufferHealth:s,duration:i,minBuffer:o.context.dataset.minBuffer,bufferedTime:a})),o.context.msg.off("videoCanplay.EndOfTs"),o.context.msg.on("videoCanplay.EndOfTs",function(){var t,e,a,s;o.context.msg.off("videoCanplay.EndOfTs"),o.context.dataset.useHls&&(o.context.dataset.isVideoSeeking||o.context.dataset.isDefinitionSwitching||0<o.dataset.retryTimes||(t=o.getFocusVideoTag())&&(a=(e=o.getVideoBufferedTime({video:t}))-t.currentTime<0?0:parseInt(e-t.currentTime),s=o.context.dataset.canPlayTime||t.duration,r.v4log("\u7f13\u51b2\u7b56\u7565 - videoCanplay ",{bufferHealth:a,duration:s,minBuffer:o.context.dataset.minBuffer,bufferedTime:e}),a<o.context.dataset.minBuffer&&s-e>o.context.dataset.minBuffer&&(o.context.msg.broadcast("pause",{from:"minbufferControl"}),o.context.dataset.isMinbufferControlPause=!0,o.context.msg.broadcast("minbufferControlStart"),o.context.msg.broadcast("showLoading"))))}),o.context.msg.off("videoPlaying.minbufferControl"),o.context.msg.on("videoPlaying.minbufferControl",function(t){var e,a;o.context.dataset.useHls&&(r.v4log("\u7f13\u51b2\u7b56\u7565-videoPlaying-before",{seeking:o.context.dataset.isVideoSeeking,isDefinitionSwitching:o.context.dataset.isDefinitionSwitching,retryTimes:o.dataset.retryTimes}),o.context.msg.off("videoPlaying.minbufferControl"),o.context.dataset.isVideoSeeking||o.context.dataset.isDefinitionSwitching||0<o.dataset.retryTimes||(o.dataset.endVideoWaitingTime=+new Date,e=t.videoTag,((a=o.getVideoBufferedTime({video:e}))-e.currentTime<0?0:parseInt(a-e.currentTime))>=o.context.dataset.minBuffer&&(o.context.dataset.isMinbufferControlPause=!1,o.context.dataset.bfTimeEnd4564=a,o.context.dataset.videoWaitingReason=1,o.context.msg.broadcast("minbufferControlEnd"))))}))})}),this.context.msg.on("minbufferControlStart",function(){r.v4log("\u7f13\u51b2\u7b56\u7565-\u624b\u52a8\u6682\u505c\u4ee5\u540e-\u5f00\u59cb\u76d1\u542c\u4e0b\u8f7d\u4e8b\u4ef6minbufferControlStart"),o.context.msg.off("videoProgress.minbufferControl"),o.context.msg.on("videoProgress.minbufferControl",function(t){if(o.context.dataset.isMinbufferControlPause){var e=t.videoTag;if(!o.context.dataset.useHls)return o.context.dataset.isMinbufferControlPause&&(o.context.dataset.isMinbufferControlPause=!1,o.context.msg.broadcast("play",{from:"minbufferControl"})),r.v4log("\u7f13\u51b2\u7b56\u7565-chromehlsTomp4"),void o.context.msg.off("videoProgress.minbufferControl");var a=o.getVideoBufferedTime({video:e});o.context.dataset.bufferHealth=a-e.currentTime<0?0:parseInt(a-e.currentTime),o.context.dataset.bufferHealth>=o.context.dataset.minBuffer?(o.context.dataset.isMinbufferControlPause=!1,o.context.dataset.videoWaitingReason=2,o.context.dataset.bfTimeEnd4564=a,o.context.msg.broadcast("minbufferControlEnd"),o.context.msg.broadcast("play",{from:"minbufferControl"})):o.context.msg.broadcast("showLoading"),r.v4log("\u7f13\u51b2\u7b56\u7565-\u4e0b\u8f7d\u8fdb\u5ea6videoProgress",{bufferHealth:o.context.dataset.bufferHealth,minBuffer:o.context.dataset.minBuffer,isMinbufferControlPause:o.context.dataset.isMinbufferControlPause})}})}),this.context.msg.on("minbufferControlEnd",function(){o.context.msg.broadcast("hideLoading"),r.v4log("\u7f13\u51b2\u7b56\u7565-\u624b\u52a8\u6682\u505c\u6062\u590d\u64ad\u653e\u4ee5\u540e-\u7ed3\u675f\u76d1\u542c\u4e0b\u8f7d\u4e8b\u4ef6minbufferControlEnd"),o.context.msg.off("videoProgress.minbufferControl"),o.saveBufferTimes(!0),r.v4log("\u7f13\u51b2\u7b56\u7565-videoWaiting: ",{minBuffer:o.context.dataset.minBuffer,minBufferSpan:o.dataset.minBufferSpan}),o.context.dataset.minBuffer<14&&(o.context.dataset.minBuffer+=o.dataset.minBufferSpan,1===o.dataset.minBufferSpan&&(o.dataset.minBufferSpan=2))}),this.context.msg.on(r.getUniqueMsgKey("videoEnd"),function(t){(t.isAllEnd||t.isTheLastFilm)&&(o.updatePlayListIndex(0),o.clearPlaylist("vidEnd",o.context.dataset.vid),o.context.dataset.videoCurrentTime=0,o.context.dataset.currentTime=0,o.context.dataset.currentTimeWithHlsAd=0,o.context.dataset.videoBufferedTime=0,o.context.dataset.bufferedTime=0),t.isAllEnd&&t.isTheLastFilm&&o.setPlayState(0),o.stopWaitingFinder(),o.stopVideoPlayingOnBadNet()}),this.context.msg.on(r.getUniqueMsgKey("error"),function(t){o.clearFocusVideoUrl(),o.clearPlaylist("vidEnd",o.context.dataset.vid),o.stopVideoPlayingOnBadNet(),o.stopWaitingFinder()}),this.context.msg.on("filmVideoShow",function(t){o.context.dataset.isPlayingAd=!1,o.context.msg.broadcast("isPlayingAdStatusChange",o.context.dataset.isPlayingAd,t),o.context.dataset.isPreloadFilm?o.setFocusVideoPlay():o.context.msg.broadcast("play",{isPreloadFirstFilm:!0})}),this.context.msg.on("filmVideoHide",function(t){o.context.dataset.isPlayingAd=!0,o.context.msg.broadcast("isPlayingAdStatusChange",o.context.dataset.isPlayingAd,t),o.context.msg.broadcast("pause")})}}},89:function(t,e){var a=Txplayer.util;t.exports={playTheNext:function(){if(!(this.context.dataset.canPlayTime>=this.context.dataset.currentTime))if(this.isPreloadVideoReady())this.setPreloadVideoPlay();else{var t=this.context.dataset.playListIndex,e=(this.context.dataset.playList[t],this.context.dataset.playList[t+1]);if(e){if(this.updatePlayListIndex(t+1),e.error)return Txplayer.$(this.getFocusVideoTag()).trigger("error",{error:e.errorCode}),void this.resetPlayListStatus("error");a.showInfo("playTheNext",e),e.autoplay=!0,this.setFocusVideoUrl(e),this.resetPlayListStatus("playing"),e.playing=!0}}},play:function(t){var e;this.context.dataset.playList&&0!=this.context.dataset.playList.length&&(this.context.dataset.disableHotKey||(e=this.context.dataset.playList[this.context.dataset.playListIndex])&&(t&&void 0!==t.autoplay?e.autoplay=t.autoplay:e.autoplay=!0,this.context.dataset.isDefinitionSwitching&&this.context.dataset.useChromeHls&&this.getFocusVideoTag().src&&(e.playing=!0),e.playing&&!e.error?this.setFocusVideoPlay():e.ended?this.playTheNext():e.error?Txplayer.$(this.getFocusVideoTag()).trigger("error"):e.preloading&&this.isPreloadVideoReady(t)?this.setPreloadVideoPlay(t):this.setFocusVideoUrl(e)))},stop:function(){this.setFocusVideoPause(),this.resetVideoStatus(),this.clearPlaylist(),this.setPlayState(0,{reason:"stop"});var e=this;["bufferedTime","currentTime","currentPlayListType","currentDefinitionFormat","currentDefinitionRate","currentVideoUrl","definition","bufferHealth","getinfoJSON","isLoadingAdEmpty","isDefinitionSwitching"].forEach(function(t){e.context.dataset[t]=null}),this.context.dataset.hasOwnProperty("isPlayingAd")&&(this.context.dataset.isPlayingAd=!1),this.context.msg.broadcast("userStopVideo",{})}}},90:function(t,e){var i=Txplayer.util;t.exports={resetFocusVideoUrl:function(t,e){var a=t.src;if(!this.context.dataset.useChromeHls&&!isNaN(e)){i.v4log("resetFocusVideoUrl",{time:e,src:a}),a=0==e?a.split("#t=")[0]:a.split("#t=")[0]+"#t="+Math.ceil(e),this.context.dataset.fairplay&&this.context.dataset.fairplay.init();try{t.src=a,i.showInfo("resetFocusVideoUrl",a)}catch(t){}}},seekTo:function(t,e){var a=this,s=Txplayer.$;if("safarihls"===a.context.config.playerType&&0<e&&3<=Math.abs(t.currentTime-e))return s(t).on("playing.SafariHdPlayerSeekToPlayingHandler",function(){s(t).off("playing.SafariHdPlayerSeekToPlayingHandler"),t.currentTime=e,a.videoHelper(t,"play")}),t.currentTime=e,void a.videoHelper(t,"play");!function(){try{if(a.checkTimeisInBufferdRange(e))return a.context.dataset.useChromeHls||(t.currentTime=e),a.videoHelper(t,"play");if(a.context.dataset.retrySeekTo||i.browser.ie)return delete a.context.dataset.retrySeekTo,t&&t.duration&&(t.currentTime=e,a.videoHelper(t,"play")),s(t).on("playing.HdPlayerSeekToPlayingHandler",function(){s(t).off("playing.HdPlayerSeekToPlayingHandler"),5<=Math.abs(t.currentTime-e)&&(t.currentTime=e,a.videoHelper(t,"play"))});i.v4log("seekTo resetFocusVideoUrl\u8bbe\u7f6ecurrentTime"),a.resetFocusVideoUrl(t,e),a.videoHelper(t,"play")}catch(t){}}()}}},91:function(t,e){var o=Txplayer.util;t.exports={getPlayListDurationFromGetinfo:function(){var t=-1,e=this.context.dataset.playList[this.context.dataset.playListIndex];return e&&e.data&&e.data.duration&&(t=parseFloat(e.data.duration)),t},resetPlayListStatus:function(a){a&&Txplayer.$.each(this.context.dataset.playList||[],function(t,e){e.hasOwnProperty(a)&&(e[a]=!1)})},isTheLastOfPlayList:function(){return!this.context.dataset.playList||0===this.context.dataset.playList.length||!this.context.dataset.playList[this.context.dataset.playListIndex+1]},isTheLastFilm:function(){if(!this.context.dataset.playList||0===this.context.dataset.playList.length)return!0;var t=this.context.dataset.playList[this.context.dataset.playListIndex+1];return!t||(t.vid!=this.context.dataset.vid||!!(this.context.dataset.canPlayTime&&this.context.dataset.canPlayTime>=this.context.dataset.currentTime))},updatePlayListIndex:function(t){o.showInfo("updatePlayListIndex",t),"number"!==Txplayer.$.type(t)||t<0||this.context.dataset.playList&&this.context.dataset.playList.length&&t>=this.context.dataset.playList.length||(this.context.dataset.playListIndex=t,this.context.dataset.currentPlayListType="film")},addUrls2Player:function(t){var e,a,s={},i=this;"array"===Txplayer.$.type(t)&&(s.data=t),"object"===Txplayer.$.type(t)&&"array"===Txplayer.$.type(t.data)&&(s=t),"array"===Txplayer.$.type(s.data)?(i.context.dataset.playList&&!s.clear||(i.context.dataset.playList=[],0!==i.context.dataset.playListIndex&&i.updatePlayListIndex(0)),s.data&&!0===s.repalcePlayList?(e=i.context.dataset.playList.length,s.data.length===e?(a=0,Txplayer.$(i.context.dataset.playList).each(function(t,e){i.context.dataset.playList[t]=s.data[a],a++})):i.context.dataset.playList=0===e?i.context.dataset.playList.concat(s.data):s.data):i.context.dataset.playList=i.context.dataset.playList.concat(s.data)):o.showInfo("addUrls2Player \u53c2\u6570\u9519\u8bef")},clearPlaylist:function(t,a){if(this.context.dataset.playList){if("vidEnd"===t&&a){var s=[];return Txplayer.$.each(this.context.dataset.playList,function(t,e){e.vid!==a&&s.push(e)}),this.context.dataset.playList=s,void this.updatePlayListIndex(0)}t||(this.context.dataset.playList=[]),0!==this.context.dataset.playListIndex&&this.updatePlayListIndex(0)}else this.context.dataset.playList=[]}}},92:function(t,e){var i=Txplayer.util;t.exports={setPlayState:function(t,e){if(e=e||{},"number"===Txplayer.$.type(t)&&t!==this.context.dataset.playState){this.context.dataset.playState=t,this.context.msg.broadcast("playStateChange",{state:t,vid:this.context.dataset.vid,reason:e.reason||""});try{this.context.userMsg.broadcast("playStateChange",{state:t,vid:this.context.dataset.vid,reason:e.reason||""})}catch(t){}}},getPlayState:function(){return this.context.dataset.playState},setInternalPlaybackRate:function(t){if(4<=t||t<=.4)this.context.msg.broadcast("showUiPlaybackRateTip",t);else if(this.context.dataset.playbackRate!==t){t=Math.round(100*t)/100,this.context.dataset.playbackRate=t,this.setVideoPlaybackRate(t),this.context.msg.broadcast("showUiPlaybackRateTip",t),this.context.msg.broadcast("playbackRateChange",t);try{this.context.userMsg.broadcast("playbackRateChange",t)}catch(t){}}},setVideoPlaybackRate:function(a){a=a||this.context.dataset.playbackRate,this.dataset.$video.each(function(t,e){e.playbackRate=a})},getPlaybackRate:function(){return this.context.dataset.playbackRate},setPlaybackRate:function(t){this.context.msg.broadcast("setPlaybackRate",t)},getAccurateTime:function(){var t=this.getFocusVideoTag();return t?t.currentTime:0},isChrome56WithBugOfMp4:function(){return"chromehls"!==this.context.config.playerType&&(this.context.dataset&&this.context.dataset.filmVideoData&&1<this.context.dataset.filmVideoData.length&&i.browser.chrome&&0<i.compareVersion(i.browser.chrome.version,"56.0.2924.10"))},isChrome56PlayAtTimeCount:function(){var t;return!!(this.isChrome56WithBugOfMp4()&&(t=this.getPlayListDurationFromGetinfo())-30<=this.getFocusVideoTag().currentTime&&0<t)},getBufferdTime:function(){if(this.context.dataset.isPlayingAd)return 0;if(this.isChrome56WithBugOfMp4())return 0;var a=this.context.dataset.playListIndex,s=0;return Txplayer.$(this.context.dataset.filmVideoData).each(function(t,e){return t!==a&&void(s+=e.duration)}),s+=this.context.dataset.videoBufferedTime},saveRetryTimes:function(t){if(this.context.dataset.useHls){var e=i.getData(Txplayer.dataset.localStorageKey.retryTimes)||"[]",a=JSON.parse(e);if(t){a[0==a.length?0:a.length-1]=this.dataset.saveRetryTimes}else{6==a.length&&a.shift();for(var s=this.context.dataset.retryTimesInLast5Play=0;s<a.length;s++)this.context.dataset.retryTimesInLast5Play+=a[s];a.push(0)}i.v4log("\u7f13\u51b2\u7b56\u7565-saveRetryTimes",{retryArray:a,err:t}),i.setData(Txplayer.dataset.localStorageKey.retryTimes,JSON.stringify(a))}},saveBufferTimes:function(t){if(this.context.dataset.useHls){var e=i.getData(Txplayer.dataset.localStorageKey.bufferTimes)||"[]",a=JSON.parse(e);if(t){a[0==a.length?0:a.length-1]=this.dataset.bufferTimes}else{6==a.length&&a.shift();for(var s=this.context.dataset.bufferTimesInLast5Play=0;s<a.length;s++)this.context.dataset.bufferTimesInLast5Play+=a[s];a.push(0)}i.v4log("\u7f13\u51b2\u7b56\u7565-savebufferTimes",{bufferTimes:a,update:t}),i.setData(Txplayer.dataset.localStorageKey.bufferTimes,JSON.stringify(a))}}}},93:function(t,e){t.exports={initUserApis:function(){var e=this;this.dataset.moduleApis={},this.dataset.moduleApis.mute=this.mute.bind(this),this.dataset.moduleApis.unMute=this.unMute.bind(this),this.dataset.moduleApis.isMuted=function(){return!!e.context.dataset.muted},this.dataset.moduleApis.getPlayerState=this.getPlayState.bind(this),this.dataset.moduleApis.setVolume=this.setVolume.bind(this),this.dataset.moduleApis.getVolume=this.getVolume.bind(this),this.dataset.moduleApis.volumeUp=this.volumeUp.bind(this),this.dataset.moduleApis.volumeDown=this.volumeDown.bind(this),this.dataset.moduleApis.getPlaybackRate=this.getPlaybackRate.bind(this),this.dataset.moduleApis.setPlaybackRate=this.setPlaybackRate.bind(this),this.dataset.moduleApis.setVideoPlaybackRate=this.setInternalPlaybackRate.bind(this),this.dataset.moduleApis.getAccurateTime=this.getAccurateTime.bind(this),this.dataset.moduleApis.stop=this.stop.bind(this),this.dataset.moduleApis.showPcClientPop=function(t){e.context&&e.context.msg.broadcast("showPcClientPop",t)},Txplayer.$.extend(this.context.userApi,this.dataset.moduleApis)},initPrivateMsg:function(){var a=this;this.dataset.privateApis={},this.dataset.privateApis.setVolume=this.setVolume.bind(this),this.dataset.privateApis.mute=this.mute.bind(this),this.dataset.privateApis.unMute=this.unMute.bind(this),this.dataset.privateApis.setInternalPlaybackRate=this.setInternalPlaybackRate.bind(this),this.dataset.privateApis.addUrls2Player=this.addUrls2Player.bind(this),this.dataset.privateApis.play=this.play.bind(this),this.dataset.privateApis.pause=this.setFocusVideoPause.bind(this),this.dataset.privateApis.setFocusVideoCurrentTime=this.setFocusVideoCurrentTime.bind(this),this.dataset.privateApis.setFocusVideoUrl=this.setFocusVideoUrl.bind(this),this.dataset.privateApis.setPreloadVideoUrl=this.setPreloadVideoUrl.bind(this),this.dataset.privateApis.setVideoClass=this.setVideoClass.bind(this),Txplayer.$.each(this.dataset.privateApis,function(t,e){a.context.msg.on(t,e)})},initDataApis:function(){var a=this;this.dataset.dataApis={},this.dataset.dataApis.getFocusVideoTag=function(t,e){e.data=a.getFocusVideoTag()},this.dataset.dataApis.checkTimeisInBufferdRange=function(t,e){e.data=a.checkTimeisInBufferdRange(t)},Txplayer.$.each(this.dataset.dataApis,function(t,e){a.context.msg.setData(t,e)})}}},94:function(t,e){var n=Txplayer.util;t.exports={startBufferControl:function(e){var a,s,i=this;i.context.dataset.useHls?(a=Txplayer.util,i.context.dataset.loadEnoughBuffer?i.stopBufferControl():(a.v4log("\u7f13\u51b2\u7b56\u7565-\u5f00\u59cb\u5b9a\u65f6\u5224\u65ad\u662f\u5426\u5230\u9996\u6b21\u53ef\u64ad\u72b6\u6001",e),s=e.video||i.getFocusVideoTag(),i.stopBufferControl(),this.dataset.bufferControl_TIMER=setInterval(function(){var t;s.buffered&&s.buffered.length&&(t=s.buffered.end(s.buffered.length-1)-s.buffered.start(s.buffered.length-1),a.v4log("\u7f13\u51b2\u7b56\u7565-\u9996\u6b21\u52a0\u8f7dBuffer\u8fdb\u5ea6",{hasBuffer:t,minBuffer:i.context.dataset.minBuffer}),a.v4log("step30-\u9996\u6b21\u52a0\u8f7dbuffer\u8fdb\u5ea6",{hasBuffer:t,minBuffer:i.context.dataset.minBuffer}),3<t&&(a.v4log("\u7f13\u51b2\u7b56\u7565-\u9996\u6b21\u52a0\u8f7dBuffer\u5b8c\u6210-\u629b\u51faloadEnoughBuffer\u4e8b\u4ef6"),i.context.msg.broadcast("loadEnoughBuffer",{src:e.src}),i.context.dataset.loadEnoughBuffer=!0,i.stopBufferControl()))},100))):i.stopBufferControl()},stopBufferControl:function(){this.dataset.bufferControl_TIMER&&(clearInterval(this.dataset.bufferControl_TIMER),this.dataset.bufferControl_TIMER=null)},updateMinBuffer:function(){var t=this;t.context.dataset.useHls&&(0==this.context.dataset.retryTimesInLast5Play&&this.context.dataset.bufferTimesInLast5Play<=3?this.context.dataset.minBuffer=5:this.context.dataset.retryTimesInLast5Play<=2&&this.context.dataset.bufferTimesInLast5Play<=6?this.context.dataset.minBuffer=6:this.context.dataset.retryTimesInLast5Play<=3&&this.context.dataset.bufferTimesInLast5Play<=10?this.context.dataset.minBuffer=8:(3<this.context.dataset.retryTimesInLast5Play||9<this.context.dataset.bufferTimesInLast5Play)&&(this.context.dataset.minBuffer=10),t.context.msg.off("getVideoUrlSuccess.updateMinBuffer"),t.context.msg.once("getVideoUrlSuccess.updateMinBuffer",function(){t.context.dataset.useHls&&t.context.dataset.duration&&t.context.dataset.duration<600&&(t.context.dataset.minBuffer-=2,n.v4log("\u7f13\u51b2\u7b56\u7565-updateMinBuffer-\u51cf2",{minBuffer:t.context.dataset.minBuffer,duration:t.context.dataset.duration||{}}))}),n.v4log("\u7f13\u51b2\u7b56\u7565-updateMinBuffer",{minBuffer:this.context.dataset.minBuffer,duration:this.context.dataset.duration||{}}))},startWaitingFinder:function(){this.dataset.waitingFinder_TIMER&&this.stopWaitingFinder();var t,e,a=this.getFocusVideoTag();a&&((e=this).dataset.waitingFinder_TIMER=setInterval(function(){if(a.isFocus||(a=e.getFocusVideoTag()),t!==a.currentTime||a.paused||a.ended)e.dataset.isBadNetWork&&e.context.msg.broadcast("networkBadEnd",{videoTag:a,playListType:e.context.dataset.currentPlayListType,index:e.context.dataset.playListIndex}),e.dataset.isBadNetWork=!1;else{if(e.dataset.isBadNetWork)return;e.context.msg.broadcast("networkBadStart",{videoTag:a,playListType:e.context.dataset.currentPlayListType,isOnWaiting:3===e.getPlayState(),index:e.context.dataset.playListIndex}),e.dataset.isBadNetWork=!0}t=a.currentTime},1500))},stopWaitingFinder:function(){this.dataset.waitingFinder_TIMER&&(clearInterval(this.dataset.waitingFinder_TIMER),this.dataset.waitingFinder_TIMER=null)},startVideoPlayingOnBadNet:function(){this.dataset.keepPlaying_TIMER&&this.stopVideoPlayingOnBadNet();var t,e,a,s=0,i=this,o=0,r=0;this.dataset.keepPlaying_TIMER=setInterval(function(){a=i.getFocusVideoTag(),0!=i.context.dataset.playState&&-1!=i.context.dataset.playState&&2!=i.context.dataset.playState&&(a.error||!a.src||a.paused&&!i.context.dataset.isMinbufferControlPause||a.ended||("BUFFERING"!==a.status?(t=i.getFocusVideoBuffer(),e=i.context.dataset.videoCurrentTime||0,r===t&&o===e?(i.updateVideoStatus(a,"BUFFER-CONFORM"),s++):(r=t,o=e,s=0,i.updateVideoStatus(a,"PLAYING")),s<5||(i.updateVideoStatus(a,"BUFFERING"),i.context.dataset.useChromeHls||(n.v4log("\u7f13\u51b2\u63a7\u5236-startVideoPlayingOnBadNet-\u5361\u987f\u76d1\u542c\u8d85\u8fc75s-reloadFocusVideoUrl",{status:a.status}),i.resetFocusVideoUrl(a,e),i.videoHelper(a,"load"),i.videoHelper(a,"play")),s=0,i.dataset.BUFFERINGTIME=0)):i.addBufferingTime(a)))},1e3)},addBufferingTime:function(t){this.dataset.BUFFERINGTIME||(this.dataset.BUFFERINGTIME=0),this.dataset.BUFFERINGTIME++,30<=this.dataset.BUFFERINGTIME&&(Txplayer.util.v4log("triggererror","startVideoPlayingOnBadNet"),Txplayer.$(t).trigger("error",{detail:"timeout"}),this.dataset.BUFFERINGTIME=0)},stopVideoPlayingOnBadNet:function(){this.dataset.keepPlaying_TIMER&&(clearInterval(this.dataset.keepPlaying_TIMER),this.dataset.keepPlaying_TIMER=null)}}}});!function(o){var n={};function a(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return o[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=o,a.c=n,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=168)}({168:function(t,e,o){t.exports=o(169)},169:function(t,e,o){var n=Txplayer.$,a=Txplayer.util,r=o(170);function i(t){n=Txplayer.$,this.dataset={},this.context=t,this.init()}i.prototype={init:function(){this.write(),this.addEventListerner()},write:function(){var t={shadow:"txp-shadow-mod"};this.dataset.renderData=t;var e=n.tmpl(r,t);this.context.$mod.$videomod.append(e),this.context.dataset.$shadow=this.context.$mod.$videomod.find("[data-role="+t.shadow+"]")},remove:function(){this.context.dataset.$shadow.remove()},initHDPlayerEvent:function(){var e=0,o=!1,n=this;this.context.dataset.$shadow.off("click.uishadow").off("dblclick.uishadow").on("click.uishadow",function(t){n.context.dataset.isRightClickMenu||(a.v4log("clickTigger: "),clearTimeout(e),e=setTimeout(function(){o||n.handlerClick(),o=!1},400))}).on("dblclick.uishadow",function(t){o=!0,n.handlerDblClick()})},handlerClick:function(){a.v4log("handlerClick: ");var t=this;try{t.context.userMsg.broadcast("userClickPlayBtn")}catch(t){}if(!t.context.dataset.getinfoJSON)return t.context.msg.broadcast("beforeVideoRePlay"),t.context.msg.broadcast("playControl",{playStartTime:t.context.dataset.playStartTime,playEndTime:t.context.dataset.playEndTime,vid:t.context.dataset.vid,connectionPlayType:1}),void t.context.msg.broadcast("userPlayPlayer");1===t.context.dataset.playState?(t.context.msg.broadcast("pause"),t.context.msg.broadcast("userPausePlayer"),t.context.userMsg.broadcast("pause")):(t.context.msg.broadcast("playControl",{connectionPlayType:1}),t.context.msg.broadcast("userPlayPlayer"))},handlerDblClick:function(){a.v4log("handlerDblClick: "),this.context.msg.broadcast("UiShadownDblClick")},addEventListerner:function(){a.mobile||this.initHDPlayerEvent()}},Txplayer.register("UiShadow",i)},170:function(t,e){t.exports='<txpdiv data-role="<%=shadow%>" class="txp_shadow"></txpdiv>'}});!function(a){var d={};function r(t){if(d[t])return d[t].exports;var e=d[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=a,r.c=d,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var d in e)r.d(a,d,function(t){return e[t]}.bind(null,d));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=150)}({150:function(t,e,a){t.exports=a(151)},151:function(t,e,a){var p,l=Txplayer.util,c=a(152),d=a(16),r=a(153),y=c.getPfEx(l),u=d.AD_TYPE,s=d.PLAYER_STATE,f=d.AD_EVENT,g=l.getUniqueMsgKey;function h(){var t=Array.prototype.slice.call(arguments);t.unshift("[adapter]"),/debug|debugad/.test(location.search)&&window.console&&window.console.log&&window.console.log.apply(window.console,t)}function o(t){p=Txplayer.$,this.context=t,this.context.adApi={},this.dataset={loadingAdReporter:new r,adCreateParams:{},currentAdType:"",currentVideoAdType:"",videoEndForInsertAd:!1,adFirstPlay:!0,adMsg:new Txplayer.Events,adapterApi:{},adapterEvent:{},adEvent:{},adPlayer:null,waitForReport:{},adplayerLoadError:!1,startLoadAdMap:{}},this.context.dataset.isPlayingAd=!1,this.init()}var n=o.prototype;n.init=function(){this.render(p),this.initAdapterApi(),this.initAdapterEvent(),this.initAdEvent(),this.exportsAdApis()},n.render=a(154),n.initAdapterApi=function(){var o=this.dataset.adapterApi,A=this,n=this.context;o.makeAdPlayer=function(t,e){function a(){if(!A.dataset.adPlayer){t.authData=A.context.dataset.txplayerAuth.raw();try{e(new window.TxpCreativePlayer(t))}catch(t){h(t)}}}void 0!==window.TxpCreativePlayer?a():(h("pluginReady: ",window.TxpCreativePlayer),A.context.msg.on(g("pluginReady"),function(t){h("pluginReady: ",t),"TxpCreativePlayer"===t.name&&void 0!==window.TxpCreativePlayer&&a()}),A.dataset.adplayerLoadTimeHandler_TIMER||(A.dataset.adplayerLoadTimeHandler_TIMER=setTimeout(function(){Txplayer.dataset.ready&&void 0===window.TxpCreativePlayer&&(A.dataset.adplayerLoadError=!0,e())},5e3)))},o.initAd=function(){var t=c.getPu(A.context.config);try{A.dataset.adPlayer&&"function"===p.type(A.dataset.adPlayer.init)&&(A.dataset.adPlayer.init({playerData:{playerPlatform:n.dataset.platform,playerWidth:n.dataset.playerWidth,playerHeight:n.dataset.playerHeight,playerLeft:0,playerTop:0,playtime:0,playerEndTime:A.context.dataset.playEndTime||n.dataset.duration,playerDuration:n.dataset.duration,playerFrom:c.getPlayerFrom(l),playerPf:c.getPf(A.getAdChannelId()),playerPfEx:y,playerVersion:Txplayer.dataset.ver,playerCid:n.dataset.cid||"",playerVid:n.dataset.vid,playerFlowid:n.dataset.flowid||"",playerGuid:n.dataset.guid||"",playerChid:A.getAdChannelId(),playerTpid:n.dataset.tpid,playerPt:n.dataset.businessId||"",playerPu:t,playerTrailerMode:n.dataset.trailerMode||!1,playerAdExt:n.dataset.adext||n.config.adext,playerType:n.config.playerType,playerIsSkipPrelude:n.dataset.skipPrelude,playerVptag:l.getPTAG()}}),l.isTouchPlayer(A.context)&&(A.context.dataset.$playermod.find(".txp_ad_control").addClass("txp_touch_ad_control"),A.context.dataset.$playermod.find(".txp_ad_more").css("display","none"),A.context.dataset.$playermod.find(".txp_ad_skip").addClass("txp_touch_ad_skip"),A.context.dataset.$playermod.find(".txp_ad_countdown").addClass("txp_touch_ad_countdown"),A.context.dataset.$playermod.find(".txp_ad_countdown:after").addClass(".txp_touch_ad_countdown:after"),A.context.dataset.$playermod.find(".txp_ad_skip_text").addClass("txp_touch_ad_skip_text"),A.context.dataset.$playermod.find(".txp_btn_close").addClass("txp_touch_btn_close")))}catch(t){h(t)}},o.requestAdOrder=function(t){if(!n.dataset.noHdAdPlugin){var e=t.adtype;if(!e)return l.showError("\u5e7f\u544a\u8bf7\u6c42\u53c2\u6570\u9519\u8bef\uff0c\u6ca1\u6709adtype");var a=c.getDefaultAdRequestParams(A.getAdRequestParam(e));void 0!==t.zcindex&&(a.zcindex=t.zcindex),n.config.usePreviewDomain&&(a.domain="l.cm.com",a.ehost=location.origin,a.auth_from=1);n.getinfo;var d,r,o=c.getRequestor(t.adtype);o&&n.getinfo[o]&&(d=e,r=+new Date,n.getinfo[o](a).always(function(t){var e=t.adcost||new Date-r;t.adcost||(t.adcost=e);var a=A.getAdErrorCode(t);a?(n.msg.broadcast(c.getAdMsgName(d)+"End"),A.context.msg.broadcast("adPluginMsg",{name:"reportAd",adtype:d,reportData:{info:!0,data:{adcost:2101==a?-1:e||"",errorCode:a,adtype:d}}})):(t.adtype=d,h("broadcast: ",f.AD_ORDER_DATA_READY,", type: ",d),n.msg.broadcast(f.AD_ORDER_DATA_READY,t))}))}},o.loadAd=function(e){if(e.adtype!==u.ZT||A.context.dataset.playState!=s.PLAYING)try{var t,a,d,r;A.dataset.adFirstPlay&&(o.initAd(),A.dataset.adFirstPlay=!1),A.updateAdInfo(),A.dataset.adPlayer.setOrder(e),e.adtype!==u.VIDEO_MARK&&(d=A.dataset.adPlayer.getOrdersByType(e.adtype)||[],e.adtype===u.LD&&((t=A.dataset.adPlayer.getOrdersByType(u.PVL)||[]).length&&(t.adtype="PVL",t.adcost=e.adcost,t.errorcode=e.errorcode,A.dataset.adPlayer.loadAd(t)),a=A.dataset.adPlayer.getOrdersByType(u.KB)||[],d=d.concat(a)),d.adtype=e.adtype,d.adcost=e.adcost,d.errorcode=e.errorcode,d.errMsg=e.orginStr||"",r=0,r=e.videoErrorCode?(444===e.videoErrorCode&&(r=2103),2100):e.errorcode,A.reportAd({actionType:"info",step:1,adtype:e.adtype,errorCode:r,stepDuration:32e3<e.adcost?32e3:e.adcost}),e.adList&&"nintendo"!==A.context.config.playerType?(A.context.config.browserDisableAutoPlay&&A.dataset.adPlayer.muteAd(),A.dataset.adPlayer.loadAd(d)):(A.context.msg.broadcast("adPluginMsg",{name:"reportAd",adtype:e.adtype,reportData:{info:!0,data:{errMsg:e.orginStr,adcost:2101==e.errorcode?-1:e.adcost||"",errorCode:e.errorcode,adtype:e.adtype}}}),A.context.msg.broadcast(c.getAdMsgName(e.adtype)+"End")))}catch(t){A.context.msg.broadcast(c.getAdMsgName(e.adtype)+"End"),h(t)}},o.playAd=function(t){A.dataset.adPlayer&&A.dataset.adPlayer.playAd(t)},o.pauseAd=function(t){A.dataset.adPlayer&&A.dataset.adPlayer.pauseAd(t)},o.stopAd=function(t){t!==u.LD&&t!==u.ZC&&t!==u.HT||(A.context.dataset.isPlayingAd=!1),A.dataset.adPlayer&&A.dataset.adPlayer.stopAd(t)},o.stopAllAd=function(){try{A.context.dataset.isPlayingAd=!1,A.dataset.adPlayer&&A.dataset.adPlayer.stopAllAd()}catch(t){h(t),A.dataset.$videoAdLayer.empty().addClass(Txplayer.dataset.hideClass)}},o.setVolume=function(t){A.dataset.adPlayer&&A.dataset.adPlayer.setAdVolume(t)},o.mute=function(t){A.dataset.adPlayer&&(t?A.dataset.adPlayer.muteAd():A.dataset.adPlayer.unMuteAd())},o.resize=function(t,e,a,d){var r,o,n,i,s,p,l,c=A.context.dataset.$playermod,y=c.width(),u=c.height(),f=c.find("video"),g=A.context.dataset.originalHwRate;g?(s=f.width(),l=((p=f.height())/s).toFixed(3),parseFloat(l)>=parseFloat(g)?o=(r=s)*g:r=(o=p)/g,a=(y-r)/2,d=(u-o)/2,n=r,i=o):(a=(y-(r=f.width()))/2,d=(u-(o=f.height()))/2),A.dataset.adPlayer&&(A.dataset.adPlayer.resizeAd({width:t,height:e,oWidth:n,oHeight:i,left:a,top:d}),A.dataset.adPlayer.init({playerData:{playerOWidth:n,playerOHeight:i,playerWidth:t,playerHeight:e,playerLeft:a,playerTop:d}}))},o.hideAdBeforeResize=function(){A.dataset.adPlayer&&A.dataset.adPlayer.hideAdBeforeResize()},o.setFullScreen=function(t){A.dataset.adPlayer&&A.dataset.adPlayer.setAdFullscreen(t)},o.setSmallWindow=function(a){setTimeout(function(){var t=A.context.dataset.$playermod.width(),e=A.context.dataset.$playermod.height();A.dataset.adPlayer&&A.dataset.adPlayer.resizeAd({width:t,height:e,oWidth:t,oHeight:e,left:0,top:0}),A.dataset.adPlayer&&A.dataset.adPlayer.setAdSmallWindow({isSmallWindow:a,width:t,height:e})},50)},o.setPosition=function(t){A.dataset.adPlayer&&A.dataset.adPlayer.setAdPosition(t)},o.report=function(t,e){A.dataset.adPlayer&&A.dataset.adPlayer.reportAd(t,e)},o.setPageWatchBuyData=function(){A.dataset.adPlayer&&A.dataset.adPlayer.setPageWatchBuyData()},o.clearPageWatchBuyData=function(){A.dataset.adPlayer&&A.dataset.adPlayer.clearPageWatchBuyData()},o.seekStart=function(t){A.dataset.adPlayer&&A.dataset.adPlayer.seekStart(t)},o.setPlayerData=function(t,e){var a={};a[t]=e,A.dataset.adPlayer&&A.dataset.adPlayer.setConf({playerData:a})}},n.initAdapterEvent=function(){var t=this.dataset.adapterEvent,i=this.dataset.adapterApi,d=this.context,s=this;t[g(f.VIDEO_AD_LAYER_SHOW)]=function(){s.dataset.$videoAdLayer.removeClass(Txplayer.dataset.hideClass)},t[g(f.VIDEO_AD_LAYER_HIDE)]=function(){s.context.dataset.disableHotKey=!1,s.dataset.$videoAdLayer.addClass(Txplayer.dataset.hideClass)},t[f.AD_ORDER_PPB_DATA_READY]=function(t){h(e," \u8ba2\u5355\u6570\u636e: ",t);var e=(t=t||{}).adtype;t.adtype||(e=u.PPB);var a=t;a.adtype=e,a.vid="",d.dataset.nextVid&&d.dataset.nextVideoInfo&&d.dataset.nextVideoInfo.vid&&(a.vid=d.dataset.nextVideoInfo.vid),a.errorcode=s.getAdErrorCode(t),0==a.errorcode&&(d.dataset.hasPpbRequest=!0),a.channel=c.getVideoType(),a.live=0,s.dataset.adPlayer?(s.context.dataset.$ppbAdLayer=s.context.dataset.$playermod.find('[data-role="txp-ui-control-preview-ad"]'),s.dataset.adPlayer.init({playerDom:{ppbAdLayer:s.context.dataset.$ppbAdLayer}}),i.loadAd(a)):s.createAdPlayer(a)},t[f.AD_ORDER_PDF_DATA_READY]=function(t){h(e," \u8ba2\u5355\u6570\u636e: ",t);var e=(t=t||{}).adtype;t.adtype||(e=u.PDF);var a=t;a.adtype=e,a.vid="",d.dataset.nextVid&&d.dataset.nextVideoInfo&&d.dataset.nextVideoInfo.vid&&(a.vid=d.dataset.nextVideoInfo.vid),a.errorcode=s.getAdErrorCode(t),a.channel=c.getVideoType(),a.live=0,s.dataset.adPlayer?(s.context.dataset.$pdfAdLayer=s.context.dataset.$playermod.find('[data-role="ui-definition-ad"]'),s.dataset.adPlayer.init({playerDom:{pdfAdLayer:s.context.dataset.$pdfAdLayer}}),i.loadAd(a)):s.createAdPlayer(a)},t[f.AD_ORDER_DATA_READY]=function(t){h(e," \u8ba2\u5355\u6570\u636e: ",t);var e=(t=t||{}).adtype;t.adtype||(e=u.LD);var a=t;a.adtype=e,a.vid="",d.dataset.nextVid&&d.dataset.nextVideoInfo&&d.dataset.nextVideoInfo.vid&&(a.vid=d.dataset.nextVideoInfo.vid),a.errorcode=s.getAdErrorCode(t),a.videoErrorCode=t.videoErrorCode,a.channel=c.getVideoType(),a.live=0,a.orginStr=t.orginStr||"",s.dataset.adPlayer?i.loadAd(a):s.createAdPlayer(a)},t[g("videoTimeUpdateWithHlsAd")]=function(t){var e;s.dataset.adPlayer&&(e=s.context.dataset.currentTimeWithHlsAd,s.context.dataset.useHls&&s.context.userApi.getAccurateTime&&(e=parseInt(s.context.userApi.getAccurateTime(),10)),s.dataset.adPlayer.setPlaytime(e))},t[g("videoEnd")]=function(t){try{s.dataset.endingAdEmpty&&!t.isAllEnd&&t.isTheLastFilm?(d.msg.broadcast("endingAdEnd"),s.dataset.videoEndForInsertAd=!1,s.resetData()):!t.isAllEnd&&t.isTheLastFilm?(s.dataset.videoEndForInsertAd=!0,d.msg.broadcast("endingAdStart"),i.playAd(u.HT)):t.isAllEnd&&s.resetData()}catch(t){h(t)}},t[g("userSeekStart")]=function(){},t[g("seekStart")]=function(t){i.seekStart(t)},t[g("userPausePlayer")]=function(){s.context.dataset.currentTime&&(s.context.dataset.isPlayingAd||s.context.dataset.disableHotKey||(i.requestAdOrder({adtype:u.ZT}),i.setPlayerData("playerIsPausing",!0),i.pauseAd(u.PSJ),i.pauseAd(u.CZC)))},t[g("videoPlaying")]=function(){i.setPlayerData("playerIsPausing",!1),i.stopAd(u.ZT),void 0!==window.TxpCreativePlayer&&window.TxpCreativePlayer.loadNextPart(),s.dataset.adPlayer&&s.dataset.adPlayer.init({playerData:{playerEndTime:s.context.dataset.playEndTime||s.context.dataset.duration}}),s.dataset.adMsg.broadcast("filmFirstPlay")},t[g("userStopVideo")]=function(){s.dataset.adapterApi.stopAllAd(),s.resetData()},t[g("beforeVideoRePlay")]=function(){s.dataset.adapterApi.stopAllAd(),s.resetData()},t[g("vidChange")]=function(){s.dataset.adapterApi.stopAllAd(),s.resetData(),s.updateAdInfo()},t[g("skipPreludeChange")]=function(t){s.dataset.adPlayer&&"function"===p.type(s.dataset.adPlayer.init)&&s.dataset.adPlayer.init({playerData:{playerIsSkipPrelude:s.context.dataset.skipPrelude}})},t[g("error")]=function(){s.dataset.adapterApi.stopAllAd(),s.resetData()},t[g("smallWindowModeChange")]=function(t){i.setSmallWindow(t.isSmallWindow)},t[g("windowFullscreenChange")]=function(t){i.setFullScreen(t)},t[g("videoScreenPercentChange")]=function(n){n/=100,setTimeout(function(){var t=s.context.dataset.$playermod.width(),e=s.context.dataset.$playermod.height(),a=t*n,d=e*n,r=(a/n-a)/2,o=(d/n-d)/2;i.resize(a,d,r,o),h("videoScreenPercentChange resize: ",a,d)},250)},t[g("resize")]=function(t){var e=t.width,a=t.height,d=t.left||0,r=t.top||0;e<a&&(a=parseInt(9*e/16,10),r=parseInt((t.height-a)/2,10)),h("resize resize: ",t.width,t.height),i.resize(e,a,d,r)},t[g("beforeResize")]=function(){i.hideAdBeforeResize()},t[g("beforeUiControlShow")]=function(){s.context.dataset.isControlShow||i.setPosition({bottom:50})},t[g("hideUiControl")]=function(){s.context.dataset.isControlShow&&i.setPosition({bottom:5})},t[g("volumeChange")]=function(t){var e;t&&"undefined"!==p.type(t.volume)&&(e=Math.min(80,t.volume),i.setVolume(e))},t[g("adPluginMsg")]=function(t){var d;if("requestCgi"===t.name&&t.params){var r=(d=t.params).toLowerCase()+"AdDataReady",e=c.getDefaultAdRequestParams(s.getAdRequestParam(d));s.context.config.usePreviewDomain&&(e.domain="l.cm.com",e.ehost=location.origin,e.auth_from=1);s.context.getinfo;var o,a=c.getRequestor(d);"function"===p.type(s.context.getinfo[a])&&(o=+new Date,s.context.getinfo[a](e).always(function(t){var e=t.adcost||new Date-o;t.adcost||(t.adcost=e);var a=s.getAdErrorCode(t);a?s.context.msg.broadcast("adPluginMsg",{name:"reportAd",adtype:d,reportData:{info:!0,data:{adcost:2101==a?-1:e||"",errorCode:a,adtype:d}}}):s.context.msg.broadcast(r,t)}))}else if("reportAd"===t.name){if(!(d=t.adtype||""))return;t.reportData.info&&(t.reportData.data.playerData={playerFrom:c.getPlayerFrom(l),playerPf:c.getPf(s.getAdChannelId()),playerPfEx:y,playerVersion:Txplayer.dataset.ver,playerDuration:s.context.dataset.duration,playerChid:s.getAdChannelId(),playerVid:s.context.dataset.vid,playerCid:s.context.dataset.cid,playerTpid:s.context.dataset.tpid,playerFlowid:s.context.dataset.flowid,playerGuid:s.context.dataset.guid}),i.report(d,t.reportData)||(s.dataset.waitForReport[d]=t)}else if("stopAd"===t.name){if(!t.adtype)return;i.stopAd(t.adtype)}},t[g("relevanceAd_close")]=function(){i.stopAd(u.BS)},t[g("watchAndBuyList")]=function(){i.setPageWatchBuyData()},p.each(t,function(t,e){d.msg.on(t,e)}),this.context.userMsg.on("1080pVipGuideClose.hdplayerad",function(t){t&&"closeSkipAd"===t.action&&s.dataset.currentVideoAdType&&i.playAd(s.dataset.currentVideoAdType)})},n.initAdEvent=function(){var o=this.context,t=this.dataset.adEvent,n=this.dataset.adapterApi,i=this,d=this.dataset.loadingAdReporter;t.requestOrderEvt=function(t){t&&t.adtype&&n.requestAdOrder({adtype:t.adtype})},t.showAdEvt=function(t){t&&t.adtype===u.PSJ&&n.resize&&n.resize(i.context.dataset.playerWidth,i.context.dataset.playerHeight),t&&t.adtype===u.BS&&o.msg.broadcast("adShowToClosePlayPoint",t)},t.getAdInfoEvt=function(t){var e=t.adtype,a=c.getAdMsgName(t.adtype);i.dataset[a+"Empty"]=t.isEmpty,e===u.LD&&(i.context.dataset.isLoadingAdEmpty=t.isEmpty),t.isEmpty||e!==u.LD||(i.context.dataset.isPlayingAd=!0,i.dataset.canPreloadP2P=!1)},t.loadStartEvt=function(t){t.index=+t.index;var e=+new Date;i.dataset.startLoadAdMap[t.adtype]||(i.dataset.startLoadAdMap[t.adtype]=[]),i.dataset.startLoadAdMap[t.adtype].push({vid:t.vid,duration:t.duration,index:t.index,time:e}),t.adtype===u.LD&&d.addStep25({vid:t.vid,duration:parseInt(t.duration/1e3,10),index:t.index,loadStartTime:e})},t.loadReadyEvt=function(t){var e,a,d=t.adtype,r=c.getAdMsgName(t.adtype);d===u.LD?o.msg.broadcast(r+"Start"):d===u.ZC?e=setTimeout(function(){i.context.dataset.$shadow.css("pointer-events","none"),i.context.dataset.disableHotKey=!0,i.context.msg.broadcast("disableProgress"),i.context.msg.broadcast("disablePlayBtn"),i.context.msg.broadcast("disableDefinitionBtn"),clearTimeout(e)},500):d===u.HT&&i.dataset.videoEndForInsertAd&&(o.msg.broadcast(r+"Start"),n.playAd(u.HT)),i.dataset.waitForReport[d]&&(a=i.dataset.waitForReport[d],i.dataset.adapterApi.report(a.adtype,a.reportData),delete i.dataset.waitForReport[d])},t.loadProgressEvt=function(t){t.adtype===u.LD&&i.context.msg.broadcast("adLoadProgress",{speed:t.speed})},t.loadCompleteEvt=function(t){t.index=+t.index,t.adtype===u.LD&&(d.step25({index:t.index,loadCompleteTime:+new Date}),t.isAllEnd&&!o.dataset.hasTriggerPreload&&(o.dataset.hasTriggerPreload=!0,i.context.msg.broadcast("loadingAdLoadComplete",t)))},t.enterCountdownEvt=function(t){t.adtype===u.ZC&&(i.context.dataset.isDuringZcCountdown=!0)},t.enterCountdownCompleteEvt=function(t){t.adtype===u.ZC&&(i.context.dataset.isDuringZcCountdown=!1,o.dataset.$shadow.css("pointer-events","initial"),o.dataset.playState!==s.NOT_START&&o.dataset.playState!==s.END&&(o.msg.broadcast("insertAdStart"),n.playAd(u.ZC)))},t.playStartEvt=function(t){t.index=+t.index,t.actionType="playStart",i.reportAd(t),i.context.msg.broadcast("hideUiTips"),t.adtype===u.LD&&(i.context.dataset.hasLdAd=!0,i.context.dataset.isLoadingAdEmpty=!1),-1<[u.LD,u.ZC,u.HT,u.ZT].indexOf(t.adtype)&&(i.dataset.currentVideoAdType=t.adtype),i.dataset.currentAdType=t.adtype,i.context.dataset.currentAdType=t.adtype,t.adtype===u.LD&&d.step25({index:t.index,vid:t.vid,playStartTime:+new Date})},t.playEndEvt=function(t){var e,a;t.adtype===u.LD&&(e=d.getItem({step:25,index:t.index}),a=+new Date,d.step25({index:t.index,playEndTime:a,playduration:e&&e.playStartTime?parseFloat((a-e.playStartTime)/1e3,10):""}))},t.playErrorEvt=function(t){t.actionType="playError",i.reportAd(t);var e=d.getItem({step:25,index:t.index}),a=+new Date;d.step25({index:t.index,playEndTime:+new Date,errorCode:t.errorCode||"",playduration:e&&e.playStartTime?parseInt((a-e.playStartTime)/1e3,10):""}),t.isAllEnd&&(i.context.dataset.hasLdAd||(i.context.dataset.isLoadingAdEmpty=!0)),Txplayer.util.localLog("AD_PLAY_ERROR","ERROR_CODE:"+t.errorCode)},t.blackScreenEvt=function(t){i.context.msg.broadcast("adVideoShow"),i.context.msg.broadcast("filmVideoHide","loadingad"),i.context.dataset.adblockWaringCount=t?t.bc:0},t.stopAdEvt=function(t){try{var e,a;i.context.dataset.currentAdType="",t.adtype!==u.LD&&t.adtype!==u.HT&&t.adtype!==u.ZC||i.context.msg.broadcast(c.getAdMsgName(t.adtype)+"End"),t.adtype===u.LD&&(e=+new Date,a=d.getItem({step:25,index:-1}),d.addStep35({loadingAdEndTime:e}),d.step25({index:-1,playEndTime:+new Date,playduration:a&&a.playStartTime?parseInt((e-a.playStartTime)/1e3,10):""}))}catch(t){h(t)}},p.each(t,function(t,e){i.dataset.adMsg.on(t,e)})},n.reportAd=function(t){var e=(t=t||{}).adtype,a=0,d=+new Date,r=this.dataset.startLoadAdMap[e];if(!t.stepDuration&&r&&0<r.length)for(var o=0,n=r.length;o<n;o++)if(r[o].index==t.index){"number"==typeof(a=d-r[o].time)&&1e4<a&&1===t.index&&(a=1e4);break}if(1==t.step){if(t.stepDuration<=0)return}else if(t.stepDuration<=0||a<=0)return;var i=window.performance&&window.performance.now()||0,s=t.adtype,p=void 0!==t.errorMessage?t.errorMessage:"",p=void 0!==t.actionType?p+";actionType:"+t.actionType:p;p=void 0!==t.preload?p+";preload:"+t.preload:p,p=void 0!==t.vid?p+";vid:"+t.vid:p,this.context.msg.broadcast("reportAdInfo",{version:Txplayer.appVersion,adtype:s,step:t.step||2,step_duration:t.stepDuration||a,step_code:t.errorCode||0,step_index:t.index||1,firstview_duration:parseInt(i,10),ext_info:p,src:t.src,step_dcode:t.detailErrCode||0})},n.exportsAdApis=function(){var r=this;this.dataset.adApis={};var t=this.dataset.adApis;t.getAdRequestParam=function(t){t=t||u.LD;var e=c.getDefaultAdRequestParams(r.getAdRequestParam(t));return r.context.config.usePreviewDomain&&(e.ehost=location.origin,e.auth_from=1),e},t.getAdCreateParams=function(){return r.dataset.adCreateParams},t.getAdReportData=function(){var a=r.dataset.loadingAdReporter,d={adtype:u.LD,adDuration:0,playAdDuration:0,list:[]};return a&&a.map&&p.each(a.map,function(t,e){"step25"===t?(a.map.step25||[]).forEach(function(t){t.loadCompleteTime||(t.loadCompleteTime=t.playStartTime||""),d.list.push(t),t.duration&&(d.adDuration+=t.duration),t.playduration&&(d.playAdDuration+=t.playduration)}):"step35"===t&&(a.map.step35||[]).forEach(function(t){d.loadingAdEndTime=t.loadingAdEndTime})}),d},p.extend(this.context.adApi,t)},n.createAdPlayer=function(e){var a=this,d=this.dataset.adapterApi,t=this.dataset,r=this.context,o={playerDom:{player:r.dataset.$videomod[0],pvlAdLayer:r.dataset.$pvlAdLayer,ppbAdLayer:r.dataset.$ppbAdLayer,pdfAdLayer:r.dataset.$pdfAdLayer,videoAdLayer:t.$videoAdLayer[0],videoAdCountdownLayer:t.$videoAdCountdownLayer[0],interactiveAdLayer:t.$interactiveAdLayer[0]},playerMsg:this.dataset.adMsg,playerMethod:{showOpenVIPGuide:l.mobile&&!l.os.ipad?function(){l.txLoginOnMobile&&"function"===p.type(l.txLoginOnMobile.isLogin)&&l.txLoginOnMobile.isLogin(function(t){0===t?l.txLoginOnMobile.goLogin():location.href="http://film.qq.com/weixin/upay.html?aid=V0$$4:1"})}:"function"===p.type(r.config.showOpenVIPGuide)?function(t){a.context.dataset.isWindowFullscreen&&a.context.msg.broadcast("exitWindowFullscreen"),a.context.dataset.isBrowserFullscreen&&a.context.msg.broadcast("exitBrowserFullscreen"),r.config.showOpenVIPGuide(t)}:void 0,getUserType:r.config.getUserType||function(){},getAdChannelId:a.getAdChannelId,getControlStatus:function(){return a.context.dataset.isControlShow},getPlayState:function(){return a.context.dataset.playState},userPlay:function(){a.context.userApi.play&&a.context.userApi.play()},userPausePlayer:function(){a.context.msg.broadcast("pause"),a.context.msg.broadcast("userPausePlayer")},toggleWindowFullScreen:function(){a.context.userApi.toggleWindowFullScreen&&a.context.userApi.toggleWindowFullScreen()},isLogin:function(t){a.context.config.loginHandler&&"function"==p.type(a.context.config.loginHandler.isLogin)&&a.context.config.loginHandler.isLogin(t)},isSmallWindow:function(){return a.context.dataset.isSmallWindowMode},isWindowFullscreen:function(){return a.context.userApi.isWindowFullscreen&&a.context.userApi.isWindowFullscreen()},upBarrageZindex:function(){a.context.dataset.$barrageMod&&a.context.dataset.$barrageMod.css("z-index",5)},resetBarrageZindex:function(){a.context.dataset.$barrageMod&&a.context.dataset.$barrageMod.css("z-index",3)},getVolume:function(){return r.dataset.muted?0:Math.min(80,r.dataset.volume)},getBrowserDisableIframeAutoPlay:function(){var t=Txplayer.util.browser,e=Txplayer.util.os,a=Txplayer.util.compareVersion;return e.mac&&t.safari&&1<=a(t.safari.version,"11.0")||t.chrome&&1<=a(t.chrome.version,"66.0")}},playerData:{playerVolume:Math.min(80,r.dataset.volume),playerPf:c.getPf(a.getAdChannelId()),playerChid:a.getAdChannelId(),playerVid:r.dataset.vid,playerCid:r.dataset.cid,playerTpid:r.dataset.tpid,playerPt:r.dataset.businessId||"",playerTrailerMode:r.dataset.trailerMode||!1,playerType:r.config.playerType,playerWidth:r.dataset.$playermod&&r.dataset.$playermod.width()||r.dataset.playerWidth,playerHeight:r.dataset.$playermod&&r.dataset.$playermod.height()||r.dataset.playerHeight,playerIsControlShow:r.dataset.isControlShow,playerIsBrowserFullscreen:r.dataset.isBrowserFullscreen,playerEndTime:r.dataset.playEndTime||r.dataset.duration,playerIsSkipPrelude:r.dataset.skipPrelude,playerVptag:l.getPTAG()},forbidLinkJump:l.isTouchPlayer(r),touchPlayer:l.isTouchPlayer(r),util:l};this.dataset.adCreateParams=o,d.makeAdPlayer(o,function(t){t?(a.dataset.adPlayer=t,d.loadAd(e)):a.context.msg.broadcast(c.getAdMsgName(e.adtype)+"End")})},n.destroy=function(){this.dataset&&this.dataset.adPlayer&&"function"==typeof this.dataset.adPlayer.destroy&&this.dataset.adPlayer.destroy()},n.resetData=function(){var t=this.dataset;t.adFirstPlay=!0,t.currentAdType="",t.currentVideoAdType="",t.videoEndForInsertAd=!1,t.playedTime=0,t.loadingAdReporter.clear(),t.startLoadAdMap={},this.context.dataset.hasLdAd=!1,this.context.dataset.currentAdType="",clearTimeout(t.endingAdTimeoutHandler),clearTimeout(t.adplayerLoadTimeHandler_TIMER),this.context.dataset.hasTriggerPreload=!1,this.context.dataset.$shadow.css("pointer-events","initial"),this.dataset.waitForReport={},this.dataset.adapterApi.clearPageWatchBuyData()},n.getAdChannelId=function(){return this.context.config&&this.context.config.hasOwnProperty("chid")&&""!==this.context.config.chid?this.context.config.chid:l.getAdChannelId()},n.getAdErrorCode=function(t){var e=0;return(t=t||{}).requestOk?t.adList&&t.adLoc||(e=2102):e=2101,e},n.updateAdInfo=function(){try{this.dataset.adapterApi;var t=this.context.dataset.currentPercent?this.context.dataset.currentPercent/100:1,e=this.context.dataset.$playermod.width(),a=this.context.dataset.$playermod.height(),d=e*t,r=a*t,o=(d/t-d)/2,n=(r/t-r)/2;this.dataset.adPlayer.init({playerData:{playerOWidth:d,playerOHeight:r,playerWidth:d,playerHeight:r,playerLeft:o,playerTop:n,playerIsSkipPrelude:this.context.dataset.playerIsSkipPrelude}})}catch(t){}},n.getAdRequestParam=function(t){var e={};e.adtype=t,e.ad_type=t===u.LD?u[e.adtype]+"|"+u.KB+"|"+u.PVL:u[e.adtype],e.chid=this.getAdChannelId()||0,e.channelId=this.context.config.channelId,e.pf=c.getPf(e.chid),e.pf_ex=y,e.adaptor=2,e.live=0,e.cid=e.cid||this.context.dataset.cid||"",e.vid=e.vid||this.context.dataset.vid||"",e.rfid=l.getData(d.RFID),e.pt=this.context.dataset.businessId||"",e.flowid=this.context.dataset.flowid||"",e.trailerMode=this.context.dataset.trailerMode,e.isAnNewPlayAction=this.context.dataset.isAnNewPlayAction,e.adext=this.context.dataset.adext||this.context.config.adext,e.playerType=this.context.config.playerType,e.vptag=l.getPTAG(),e.guid=this.context.dataset.guid,e.platform=this.context.dataset.platform,e.adPage=this.context.config.adPage,e.tpid=this.context.config.tpid,e.pu=c.getPu(this.context.config)||0,e.from=c.getPlayerFrom(l);var a=this.context.dataset.txplayerAuth.ad();return l.extend(e,a),e},Txplayer.register("HdAdAdapter",o)},152:function(t,e,a){var d=a(16),s=(d.AD_STATUS,d.AD_LOC_TIME,d.AD_TYPE);t.exports={getVideoType:function(){var t="";return window.COVER_INFO&&window.COVER_INFO.typeid?t=+window.COVER_INFO.typeid:window.VIDEO_INFO&&window.VIDEO_INFO.type&&(t=+window.VIDEO_INFO.type),t},removeUrlParams:function(t){if("string"==typeof t){var e=document.createElement("a");return e.href=t,e.protocol+"//"+e.host+e.pathname}},getDefaultAdRequestParams:function(t){var e=this.removeUrlParams(document.referrer)||"";if(!e&&top!==window)try{e=this.removeUrlParams(top.location.href)||""}catch(t){}var a={pf:t.pf,ad_type:t.ad_type,pf_ex:t.pf_ex,url:this.removeUrlParams(location.href),refer:e,ty:"web",plugin:"1.0.0",v:Txplayer.dataset.ver,coverid:t.cid,vid:t.vid,pt:t.pt,flowid:t.flowid,vptag:t.vptag,pu:t.pu,chid:t.chid,adaptor:t.adaptor,dtype:1,live:t.live,resp_type:"json",guid:t.guid,req_type:1,from:t.from,appversion:Txplayer.appVersion};if(t.uid&&(a.uid=t.uid),t.tkn&&(a.tkn=t.tkn),t.lt&&(a.lt=t.lt),t.platform&&(a.platform=t.platform),t.opid&&(a.opid=t.opid),t.atkn&&(a.atkn=t.atkn),t.appid&&(a.appid=t.appid),t.adauthext&&(a.adauthext=t.adauthext),t.tpid&&(a.tpid=t.tpid),t.adtype===s.LD&&t.rfid&&(a.rfid=t.rfid),t.trailerMode&&(a.page="traileMode",a.trailerMode=1),"coolOpen"===t.playerType&&(a.page="coolOpen",t.isAnNewPlayAction?a.channelId=1:a.channelId=2),"page_langSwitch"===t.adext)a.page="langSwitch";else if(t.adext)for(var d=t.adext,r=/(\w+)\_(\w+)/,o=0,n=(d=d.split("|")).length;o<n;o++){var i=d[o].match(r);3===i.length&&(a[i[1]]=i[2])}return t.adPage&&(a.page=t.adPage),t.channelId&&(a.channelId=t.channelId),a},getAdMsgName:function(t){var e="";switch(t){case"LD":e="loadingAd";break;case"HT":e="endingAd";break;case"ZC":e="insertAd";break;case"ZT":e="pauseAd";break;case"IVB":e="ivbAd";break;case"PVL":e="pvlAd";break;case"PSJ":e="yaliuAd"}return e},getRequestor:function(t){var e="";switch(t){case"LD":e="loadingAd";break;case"HT":e="requestEndingAd";break;case"ZC":e="requestInsertAd";break;case"ZT":e="requestPauseAd";break;case"PPB":e="requestPpbAd";break;case"PDF":e="requestPdfAd";break;case"IVB":e="requestIvbAd";break;case"PSJ":e="requestYaliuAd"}return e},getPfEx:function(t){var e=this.getExtensionPlatform(t);return"mac"===e||"pc"===e?"pc":e},getPu:function(t){return"function"===Txplayer.$.type(t.getUserType)?t.getUserType():""},getExtensionPlatform:function(t){return t.os.iphone?"iphone":t.os.ipad?"ipad":t.os.android?"android":t.os.mac?"mac":t.os.windows?"pc":""},getPlayerFrom:function(t){return"ipad"===this.getExtensionPlatform(t)?6:0},getPf:function(t){if(Txplayer.util.inNewIframe())return"out";var e=location.hostname;return-1!==e.indexOf("v.qq.com")||"v.qq.com"===e||"film.qq.com"===e||8===t?"in":"out"}}},153:function(t,e){function a(){this.map={}}var d=a.prototype;d.add=function(a){var t="step"+a.step;this.map[t]||(this.map[t]=[]),delete a.step;var e=this.map[t],d=0;e.forEach(function(t,e){t.index===a.index&&(d=1)}),d||e.push(a)},d.clear=function(){this.map={}},d.addStep25=function(t){t.step=25,this.add(t)},d.addStep35=function(t){t.step=35,this.add(t)},d.getItem=function(e){var t=this.map["step"+e.step]||[],a={};return-1===e.index?0<t.length?t[t.length-1]:{}:(t.forEach(function(t){if(t.index===e.index)return a=t,!1}),a)},d.step25=function(d){var t=this.map.step25||[],e=t[t.length-1];if(t.forEach(function(t,e){if(t.index===d.index)for(var a in d)d.hasOwnProperty(a)&&(t[a]=d[a])}),-1===d.index&&e)for(var a in d)d.hasOwnProperty(a)&&"index"!==a&&(e[a]=d[a])},t.exports=a},154:function(t,e){t.exports=function(t){var e="hd-ad-adapter-adlayer",a="hd-ad-adapter-videoadcountdownlayer",d="hd-ad-adapter-interactivelayer",r=this.context.dataset.$videomod;r.after('<txpdiv data-role="'+e+'"></txpdiv>'),r.after('<txpdiv data-role="'+d+'"></txpdiv>'),r.after('<txpdiv data-role="'+a+'">');var o=this.context.dataset.$videomod.parent();this.dataset.$videoAdLayer=o.find('[data-role="'+e+'"]'),this.dataset.$interactiveAdLayer=o.find('[data-role="'+d+'"]'),this.dataset.$videoAdCountdownLayer=o.find('[data-role="'+a+'"]'),this.dataset.$videoAdLayer.css({position:"absolute",top:0,right:0,width:"100%",height:"100%",zIndex:4,backgroundColor:"#000"}).addClass(Txplayer.dataset.hideClass),this.dataset.$interactiveAdLayer.css({position:"absolute",top:0,right:0,width:"100%",height:"100%",zIndex:4,pointerEvents:"none"}).addClass(Txplayer.dataset.hideClass),this.dataset.$videoAdCountdownLayer.css({position:"absolute",top:0,right:0,width:"100%",height:"100%",zIndex:4,pointerEvents:"none"}).addClass(Txplayer.dataset.hideClass)}},16:function(t,e){t.exports={RFID:"TxpCreativePlayer-rfid",AD_EVENT:{AD_ORDER_DATA_READY:"onAdOrderDataReady",AD_ORDER_PPB_DATA_READY:"ppbAdDataReady",AD_ORDER_PDF_DATA_READY:"pdfAdDataReady",VIDEO_AD_LAYER_SHOW:"adVideoShow",VIDEO_AD_LAYER_HIDE:"adVideoHide"},PLAYER_STATE:{NOT_START:-1,END:0,PLAYING:1,PAUSE:2,LOADING:3},AD_TYPE:{LD:"LD",HT:"HT",ZC:"ZC",ZT:"ZT",KB:"KB",PSJ:"PSJ",PPB:"PPB",PVL:"PVL",ZI:"ZI",BS:"BS",PDF:"PDF",VIDEO_MARK:"PSJ|BS|ZC|CZC|VIN|PHLS",PHLS:"PHLS",CZC:"CZC"},LD_AD_REG:/LD|KB/,VIDEO_AD_REG:/LD|KB|ZC|HT/}}});!function(s){var i={};function o(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return s[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=s,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(s,i,function(t){return e[t]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=252)}({252:function(t,e,s){t.exports=s(253)},253:function(t,e,s){var i=Txplayer.$,o=Txplayer.util,n=s(29),a=s(254);function r(t){i=Txplayer.$,this.dataset={},this.context=t,this.init()}r.prototype={init:function(){!(this.dataset.showPoster=!0)===this.context.config.poster?this.dataset.showPoster=!1:"string"===i.type(this.context.config.poster)&&(this.context.dataset.poster=this.context.config.poster),this.write(),this.initDisplay(),this.addEventListerner(),this.exportsModuleApis()},initDisplay:function(){var e,s;function t(){var t;s.context.dataset.poster||(o.mobile?s.context.dataset.poster=o.getMobileVideoPosterByVid(e,0):s.context.dataset.poster=o.getPcVideoPosterByVid(e)),s.context.dataset.poster&&(t={"background-image":"url("+s.context.dataset.poster+")","background-size":"cover"},s.dataset.$poster.css(t),s.show())}this.context.config.official&&(this.context.dataset.autoplay||this.context.config.autoplay)||this.dataset.showPoster&&(e=this.context.dataset.vid||this.context.config.vid,s=this,e?t():this.context.msg.on("ready",function(){e=s.context.dataset.vid,t()}))},write:function(){var t={poster:"txp-ui-poster"};this.dataset.renderData=t;var e=i.tmpl(o.isTouchPlayer(this.context)?a:n,t);this.context.dataset.$playermod.append(e),this.dataset.$poster=this.context.dataset.$playermod.find('[data-role="'+t.poster+'"]')},remove:function(){this.dataset.$poster.remove&&this.dataset.$poster.remove()},setPoster:function(t){"string"===i.type(t)&&(this.context.dataset.poster=t,this.initDisplay())},getPoster:function(){return this.context.dataset.poster},hide:function(){this.dataset.$poster.addClass(Txplayer.dataset.hideClass)},show:function(){this.dataset.$poster.removeClass(Txplayer.dataset.hideClass)},addEventListerner:function(){var s=this,t=this.context.dataset.playState,e=this.context.dataset.isPlayingAd;(-1<i.inArray(t,[0,1,3])||e)&&this.hide(),this.dataset.eventsList={},this.dataset.eventsList[o.getUniqueMsgKey("videoPlaying")]=function(){s.hide()},this.dataset.eventsList[o.getUniqueMsgKey("videoPlay")]=function(){o.mobile||s.hide()},this.dataset.eventsList[o.getUniqueMsgKey("vidChange")]=function(){s.context.dataset.poster=null,s.initDisplay(),s.context.dataset.autoplay&&s.hide()},this.dataset.eventsList[o.getUniqueMsgKey("playStateChange")]=function(t){0===(t=t||{}).state&&(o.mobile||(s.context.dataset.poster=null),s.initDisplay())},i.each(this.dataset.eventsList,function(t,e){s.context.msg.on(t,e)}),this.dataset.$poster.on("click",function(){s.context.dataset.$shadow.trigger("click")}).on("dblclick",function(){s.context.dataset.$shadow.trigger("dblclick")})},exportsModuleApis:function(){this.dataset.moduleApis={},this.dataset.moduleApis.getPoster=this.getPoster.bind(this),this.dataset.moduleApis.setPoster=this.setPoster.bind(this),i.extend(this.context.userApi,this.dataset.moduleApis)}},Txplayer.register("UiPoster",r)},254:function(t,e){t.exports='<txpdiv data-role="<%=poster%>" class="txp_touch_poster"></txpdiv>'},29:function(t,e){t.exports='<txpdiv data-role="<%=poster%>" class="txp_poster"></txpdiv>'}});!function(a){var i={};function s(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=a,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=458)}({458:function(t,e,a){t.exports=a(459)},459:function(t,e){var o=Txplayer.$,d=Txplayer.util;function a(t){o=Txplayer.$,this.dataset={},this.context=t,this.init()}a.prototype={init:function(){this.addEventListener()},getDefaultParams:function(){this.dataset.format=this.context.dataset.currentDefinitionFormat||"",this.dataset.rate=this.context.dataset.currentDefinitionRate||"",this.dataset.cdnID=this.context.dataset.cdnID;var t,e=d.getLoginID(),a=this.context.dataset.txplayerAuth.raw(),i=this.context.dataset.platform,s={hc_main_login:a.main_login,hc_vuserid:a.vuserid||Txplayer.util.cookie.get("vuserid"),hc_openid:a.openid,hc_appid:a.appid,loginid:e.loginId,loginex:e.loginIdEx,logintype:e.logintype,guid:this.context.dataset.guid||"",longitude:"",latitude:"",vip:this.isVip(),online:navigator.onLine?1:0,p2p:this.context.dataset.useP2P?1:0,downloadkit:this.context.dataset.useP2P?1:0,resolution:[screen.width,screen.height,window.devicePixelRatio||1].join("*"),testid:this.context.dataset.reportTestId||"",osver:[d.os.name,d.os.version].join(" "),playerver:"",playertype:1,uip:this.context.dataset.reportUsrIP||"",confid:"",cdnip:this.context.dataset.hlsServerIP||"",cdnid:this.dataset.cdnID||"",cdnuip:this.context.dataset.hlsClientIP||"",freetype:"",sstrength:"",network:"",speed:"",device:"",appver:this.context.dataset.testVer,
// appver: Txplayer.dataset.ver,
p2pver:Txplayer.Hls&&"function"==typeof Txplayer.Hls.GetP2PVersion?Txplayer.Hls.GetP2PVersion():"",url:location.href,refer:document.referrer,ua:d.getReportUA(),ptag:d.getPTAG(),flowid:this.context.dataset.flowid,platform:i||"",dltype:this.context.dataset.useHls?this.context.dataset.dltype||3:1,vid:this.context.dataset.vid||this.context.config.vid,cid:this.context.dataset.cid||"",fmt:this.dataset.format||"",rate:this.dataset.rate||"",clip:this.context.dataset.reportClip||"",status:this.context.dataset.reportStatus||"",type:this.context.dataset.reportType||"",duration:this.context.dataset.originDuration||"",ext:{dltype:this.context.dataset.useHls?this.context.dataset.dltype||3:1,m3u8:0},drm:this.context.dataset.emeEnabled?1:0};return this.context.dataset.getinfoJSON&&(s.ext.dltype=this.context.dataset.getinfoJSON.dltype,(t=this.context.dataset.getinfoJSON.vl)&&t.vi&&t.vi[0]&&t.vi[0].ul&&t.vi[0].ul.m3u8&&(s.ext.m3u8=1)),s.ext.dltype&&(s.ext=JSON.stringify(s.ext)),1==this.context.dataset.isQuic?(s.proto="libquic",s.protover=this.context.dataset.quicVer||""):(s.proto="tcp",s.protover="tcp00"),s},isVip:function(){var t="";return this.context&&this.context.config&&"function"===o.type(this.context.config.getUserType)&&(t=2==this.context.config.getUserType()?1:0),t},resetDataset:function(){this.dataset={},this.context.dataset.cdnID="",this.context.dataset.currentVideoUrl="",this.context.dataset.urlIndex=0,this.context.dataset.isQuic=0,this.context.dataset.quicVer=""},report:function(t,e){if(e=e||"4501",this.dataset.hasOwnProperty("sequence")||(this.dataset.sequence=-1),"4564"!=e&&++this.dataset.sequence,t.hasOwnProperty("seq")&&""!==t.seq||(t.seq=this.dataset.sequence||0),"4564"==e)for(var a in t)(70!=t.step&&-1==o.inArray(a,["step","flowid","data"])||70==t.step&&-1==o.inArray(a,["step","flowid","data","ftime","vid","url","refer","loginid","logintype","ua"]))&&delete t[a];var i="4564"==e?"//btrace.video.qq.com/kvcollect?BossId=4564&Pwd=213967996&":"//btrace.video.qq.com/kvcollect?BossId=4501&Pwd=142347456&";i+=o.param(t),Txplayer.imgRpt?d.requestViaImage(i):d.fetch({url:i,credentials:"include"})},step0:function(){var t={code:"",quic:this.context.dataset.isQuic||0,quicver:this.context.dataset.quicVer||"",stime:this.context.config.pageInitTime};(t=o.extend(this.getDefaultParams(),{data:JSON.stringify(t)})).step=0,this.report(t)},step5:function(){var t=this.context.config.playerInitTime||this.context.dataset.playerCreateStartTime,e={quic:this.context.dataset.isQuic||0,quicver:this.context.dataset.quicVer||"",stime:t,etime:this.context.dataset.playerCreateEndTime,code:this.context.dataset.errorCodeOfStep5||""};(e=o.extend(this.getDefaultParams(),{data:JSON.stringify(e)})).step=5,this.report(e)},step15:function(t){t=t||{};var e={ip:this.context.dataset.reportUsrIP,quic:this.context.dataset.isQuic||0,quicver:this.context.dataset.quicVer||"",stime:t.startTime,etime:t.endTime,code:""};"timeout"===t.err?e.code=Txplayer.v4errcode.getPlatformErrorCode("getinfo","neterror","03"):t.err&&!t.hasOwnProperty("code")?e.code=Txplayer.v4errcode.getPlatformErrorCode("getinfo","neterror","01"):t.err&&t.hasOwnProperty("code")&&(e.code=Txplayer.v4errcode.getPlatformErrorCode("getinfo","cgiInnerError",t.code+"")),(e=o.extend(this.getDefaultParams(),{data:JSON.stringify(e)})).step=15,this.report(e)},step20:function(t){t=t||{};var e={ip:this.context.dataset.reportUsrIP,quic:this.context.dataset.isQuic||0,quicver:this.context.dataset.quicVer||"",stime:t.startTime,etime:t.endTime,code:t.errCode||""};(e=o.extend(this.getDefaultParams(),{data:JSON.stringify(e)})).step=20,this.report(e)},step25:function(){var a,i,t;this.dataset.adReportData&&this.dataset.adReportData.list&&0!=this.dataset.adReportData.list.length&&(a=[],(i=this).dataset.adReportData.list.forEach(function(t,e){t.playStartTime&&t.loadStartTime&&t.playStartTime-t.loadStartTime<=200&&(t.loadStartTime=t.loadCompleteTime=t.playStartTime),a.push({vid:t.vid||"",format:"",stime:t.loadStartTime||"",letime:t.loadCompleteTime||"",pstime:t.playStartTime||"",petime:t.playEndTime||"",playduration:t.playduration||0,duration:t.duration||0,quic:i.context.dataset.isQuic||0,quicver:i.context.dataset.quicVer||"",code:t.errorCode||""})}),(t=o.extend(this.getDefaultParams(),{data:JSON.stringify(a)})).step=25,this.report(t))},step30:function(t){t=t||{};var e={stime:this.dataset.playTime||"",etime:this.dataset.playingTime||+new Date,p2p_ctime:this.context.dataset.connectionPlayTime,p2p_pretime:this.context.dataset.skipPrelude?this.context.dataset.playStartTime:0,bufferduration:"",vt:this.context.dataset.cdnID||"",url:t.url||this.context.dataset.currentVideoUrl||"",urlindex:this.context.dataset.urlIndex,quic:this.context.dataset.isQuic||0,quicver:this.context.dataset.quicVer||"",code:this.dataset.errorCodeOfStep30||""};this.dataset.hlsPlayTimeTheFirstTime&&(e.stime=this.dataset.hlsPlayTimeTheFirstTime),this.dataset.hlsFirstFragementLoadEndTime&&(this.context.dataset.hasLdAd&&(e.etime=this.dataset.hlsFirstFragementLoadEndTime),d.v4log("step30-\u9996\u6b21\u52a0\u8f7d\u89c6\u9891\u8017\u65f6(m3u8\u5f00\u59cb\u5230\u7b2c\u4e00\u4e2ats30%\u4e0b\u8f7d\u5b8c)",{stime:this.dataset.hlsPlayTimeTheFirstTime,etiem:this.dataset.hlsFirstFragementLoadEndTime,costtime:this.dataset.hlsFirstFragementLoadEndTime-this.dataset.hlsPlayTimeTheFirstTime})),d.v4log("step30-\u9996\u6b21\u52a0\u8f7d\u89c6\u9891\u8017\u65f6(\u6bcf\u9694100ms\u8f6e\u8be2video\u7684buffer\uff0c\u7b49buffer\u65f6\u957f\u5927\u4e8e3\u79d2",{stime:this.dataset.hlsPlayTimeTheFirstTime,etiem:this.dataset.playingTime,costtime:this.dataset.playingTime-this.dataset.hlsPlayTimeTheFirstTime}),void 0!==this.context.dataset.adblockWaringCount&&(e.cacdc=this.context.dataset.adblockWaringCount,this.context.dataset.adblockWaringCount=void 0),(e=o.extend(this.getDefaultParams(),{data:JSON.stringify(e)})).step=30,this.report(e)},step31:function(){var t={type:this.context.dataset.useChromeHls?2:1,stime:this.dataset.switchDefnPlayTime,etime:this.dataset.switchDefnPlayingTime,bufferduration:"",url:"",urlindex:this.context.dataset.urlIndex,vt:this.context.dataset.cdnID,quic:this.context.dataset.isQuic||0,quicver:this.context.dataset.quicVer||"",code:this.dataset.errorCodeOfStep31||""};(t=o.extend(this.getDefaultParams(),{data:JSON.stringify(t)})).step=31,this.report(t)},step35:function(){var t,e,a;this.dataset.waitingStartTime&&this.dataset.waitingEndTime&&this.dataset.waitingEndTime-this.dataset.waitingStartTime<=200||this.dataset.waitingDuration<200||this.context.dataset.currentTime&&(this.context.dataset.bfTimeStart4564&&5<=this.context.dataset.bfTimeStart4564-this.context.dataset.currentTime||(this.context.dataset.useChromeHls&&(this.context.msg.broadcast("reportChromeHlsError",0),t=this.context.dataset.definition,this.context.msg.broadcast("setChromeHlsData",{k:"__stuck__",v:{defn:t&&t.replace("auto-","")||"",vid:this.context.dataset.vid}})),e=this.context.dataset.currentVideoUrl,a={val:[{reason:"",scene:1!=this.context.dataset.playbackRate?2:1,format:this.context.dataset.currentDefinitionFormat||"",ptime:this.context.dataset.currentTime||"",stime:this.dataset.waitingStartTime||"",etime:this.dataset.waitingEndTime||"",code:this.dataset.errorCodeOfStep35||"",quic:this.context.dataset.isQuic||0,quicver:this.context.dataset.quicVer||"",url:e}],tcount:1,tduration:this.dataset.waitingDuration||""},d.v4log("\u7f13\u51b2\u7b56\u7565-reportstep35",a),(a=o.extend(this.getDefaultParams(),{data:JSON.stringify(a)})).step=35,this.report(a)))},step40:function(t){t=t||{};var e={tcount:1,tbcount:0,tbduration:this.dataset.seekWaitingDuration||0,quic:this.context.dataset.isQuic||0,quicver:this.context.dataset.quicVer||"",val:{format:this.context.dataset.currentDefinitionFormat,pstime:t.currentTimeWhenSeekStart||this.dataset.currentTimeWhenSeekStart||"",petime:t.currentTimeWhenSeekEnd||"",code:this.dataset.errorCodeOfStep40||""}};this.dataset.seekWaitingStartTime&&t.isSeekOfWaiting?(e.val.lstime=this.dataset.seekWaitingStartTime,e.val.letime=this.dataset.seekEndTime,e.tbcount=1):(e.val.lstime=0,e.val.letime=0,e.tbduration=0),e.val=[e.val],(e=o.extend(this.getDefaultParams(),{data:JSON.stringify(e)})).step=40,this.report(e),delete this.dataset.seekWaitingDuration},step45:function(){var t={reason:"",auto:1,format:this.context.dataset.currentDefinitionFormat||"",pstime:this.dataset.switchDefnStartVideoTime||"",petime:this.dataset.switchDefnEndVideoTime||"",lstime:this.dataset.switchDefnPlayTime||"",letime:this.dataset.switchDefnPlayingTime||+new Date,url:this.context.dataset.currentVideoUrl||"",urlindex:this.context.dataset.urlIndex,vt:this.context.dataset.cdnID,quic:this.context.dataset.isQuic||0,quicver:this.context.dataset.quicVer||"",code:this.dataset.errorCodeOfStep45||""};(t=o.extend(this.getDefaultParams(),{data:JSON.stringify(t)})).step=45,this.report(t)},step50:function(t){var e=t||this.getStep50Data();try{var a=JSON.parse(e.data);a.code&&0<a.code.indexOf("13083")?(this.report(e,"4564"),a.code="",e.data=JSON.stringify(a)):(e.data.quic=this.context.dataset.isQuic||0,e.data.quicver=this.context.dataset.quicVer||""),this.report(e)}catch(t){}this.handlerStep50Data("delete",e.vid)},getStep50Data:function(t){var e={reason:(t=t||{}).reason||0,etime:+new Date,playduration:this.dataset.userPlayedTime,quic:this.context.dataset.isQuic||0,quicver:this.context.dataset.quicVer||"",code:this.dataset.errorCodeOfStep50||""};return(e=o.extend(this.getDefaultParams(),{data:JSON.stringify(e)})).step=50,e.seq=this.dataset.sequence?this.dataset.sequence+1:1,e},autoReportStep50:function(t){(t=t||{}).hasOwnProperty("limitTime")||(t.limitTime=!0);var e=this.handlerStep50Data("get");if("object"==o.type(e))for(var a in e)if("object"===o.type(e[a])&&(!t.prevVid||t.prevVid===a)){if(t.limitTime&&new Date-e[a].updateTime<3e4)continue;delete e[a].updateTime,this.step50(e[a]),this.handlerStep50Data("delete",e[a].vid)}},autoSaveStep50Data:function(){var t=this.getStep50Data({reason:1});t&&t.vid&&(t.updateTime=+new Date,this.handlerStep50Data("save",this.context.dataset.vid,t))},handlerStep50Data:function(t,e,a){if("delete"!==t&&"save"!==t||e){var i,s,r=Txplayer.dataset.localStorageKey.userPlayedTime,n=d.getData(r);n=n||"{}";try{i=JSON.parse(n)}catch(t){s=!0}if(!s&&i&&"object"==o.type(i))if("delete"===t&&i[e])delete i[e],d.setData(r,JSON.stringify(i));else{if("get"===t)return e?i[e]:i;"save"===t&&a&&(i[e]=a,d.setData(r,JSON.stringify(i)))}else d.delData(r)}},deleteErrorCodes:function(){for(var t in this.dataset)t&&0==t.indexOf("errorCodeOfStep")&&delete this.dataset[t]},step36:function(t){var e={type:(t=t||{}).type,format:this.context.dataset.currentDefinitionFormat,tcount:t.retryTimes,ptime:this.context.dataset.currentTime,stime:this.dataset.playTime,etime:+new Date,url:t.url||"",code:t.code||"",appver:Txplayer.dataset.ver,guid:this.context.dataset.guid||""};this.dataset.hlsPlayTime&&(e.stime=this.dataset.hlsPlayTime),(e=o.extend(this.getDefaultParams(),{data:JSON.stringify(e)})).step=36,this.report(e,"4564")},step15_4564:function(t){var e={stime:(t=t||{}).startTime,etime:t.endTime,code:t.errCode||"",ip:this.context.dataset.reportUsrIP||"",url:t.url||""};(e=o.extend(this.getDefaultParams(),{data:JSON.stringify(e)})).step=15,this.report(e,"4564")},step20_4564:function(t){var e={stime:(t=t||{}).startTime,etime:t.endTime,code:t.errCode||"",ip:this.context.dataset.reportUsrIP||"",url:t.url||""};(e=o.extend(this.getDefaultParams(),{data:JSON.stringify(e)})).step=20,this.report(e,"4564")},step35_4564:function(){var t;this.dataset.waitingStartTime&&this.dataset.waitingEndTime&&this.dataset.waitingEndTime-this.dataset.waitingStartTime<=200||this.dataset.waitingDuration<200||this.context.dataset.currentTime&&(t={reason:"1."+this.context.dataset.videoWaitingReason||"",appver:Txplayer.dataset.ver,stime:this.dataset.waitingStartTime||"",etime:this.dataset.waitingEndTime||"",ptime:this.context.dataset.currentTime||"",btime:this.context.dataset.bfTimeStart4564||"",betime:this.context.dataset.bfTimeEnd4564||"",duration:this.dataset.waitingDuration||"",code:this.dataset.errorCodeOfStep35||"",ip:this.context.dataset.reportUsrIP||"",url:this.context.dataset.currentVideoUrl||"",format:this.context.dataset.currentDefinitionFormat||"",scene:this.context.dataset.playbackRate||"",dltype:this.context.dataset.useHls?this.context.dataset.dltype||3:1},(t=o.extend(this.getDefaultParams(),{data:JSON.stringify(t)})).step=35,this.context.dataset.bfTimeStart4564=0,this.context.dataset.bfTimeEnd4564=0,this.context.dataset.videoWaitingReason="",this.report(t,"4564"))},addEventListener:function(){var s=this,a=0;this.autoReportStep50(),this.context.msg.on("beforeVideoPlay",function(){s.dataset.hlsPlayTimeTheFirstTime=null,s.dataset.hlsPlayTime=null,s.dataset.hasReportAd=!1,s.dataset.hlsFirstFragementLoadStartTime=null,s.dataset.hlsFirstFragementLoadEndTime=null}),this.context.msg.on("getVideoUrlSuccess",function(){delete s.dataset.switchDefnPlayingTime,delete s.dataset.switchDefnPlayTime}),this.context.config.pageInitTime&&this.step0(),this.context.dataset.isReady?s.step5():this.context.msg.on("ready",function(){s.step5()}),this.context.msg.on("getinfoFinish",function(t){s.step15_4564({startTime:t.startTime,endTime:t.endTime,url:t.getinfoURL,errCode:t.errCode||""}),t&&t.err&&!t.isLastRetry||s.step15(t)}),this.context.msg.on("getkeyFinish",function(t){s.step20_4564({startTime:t.startTime,endTime:t.endTime,url:t.getkeyURL,errCode:t.errCode||""}),t&&t.err&&!t.isLastRetry&&!t.em||s.step20(t)}),this.context.msg.on("videoPlaying",function(t){if("film"===(t=t||{}).playListType){if(s.dataset.hasReportAd)return;s.dataset.adReportData=s.context.adApi&&s.context.adApi.getAdReportData(),s.step25(),s.dataset.hasReportAd=!0;var e=s.dataset.playTime||"",a=s.dataset.playingTime||+new Date;s.dataset.hlsPlayTimeTheFirstTime&&(e=s.dataset.hlsPlayTimeTheFirstTime),s.dataset.hlsFirstFragementLoadEndTime&&s.context.dataset.hasLdAd&&(a=s.dataset.hlsFirstFragementLoadEndTime);var i=a-e;s.context.msg.broadcast("setChromeHlsData",{k:"onplay",v:{start_play_cost:i||""}})}}),this.context.msg.on("videoPlay.h5report-step30",function(t){"film"===t.playListType&&(s.dataset.playTime||(s.dataset.playTime=+new Date,d.v4log("videoPlay.h5report-step30",{playTime:s.dataset.playTime})),s.dataset.currentVideoIndex=t.index)}),this.context.msg.on("setPreloadVideoUrlReport.h5report-step30",function(){s.dataset.playTime||(s.dataset.playTime=+new Date,d.v4log("setPreloadVideoUrlReport.h5report-step30",{playTime:s.dataset.playTime}))}),this.context.msg.on("hlsStartPlay.h5report-step30",function(t){s.dataset.hlsPlayTimeTheFirstTime||(s.dataset.hlsPlayTimeTheFirstTime=+new Date),t.forceUpdate&&(s.dataset.hlsPlayTimeTheFirstTime=t.stime),d.v4log("hlsStartPlay",{hlsPlayTime:s.dataset.hlsPlayTimeTheFirstTime}),s.dataset.hlsPlayTime=+new Date}),this.context.msg.on("hlsFirstFragementLoadFinish",function(t){s.dataset.hlsFirstFragementLoadEndTime||(d.v4log("step30-\u52a0\u8f7d\u5b8c\u7b2c\u4e00\u5e27\u753b\u9762",{time:t.time,loaded:t.loaded}),s.dataset.hlsFirstFragementLoadEndTime=t.time)}),this.context.msg.on("loadEnoughBuffer.h5report-step30",function(t){var e=s.dataset.hasOwnProperty("playingTime");d.v4log("loadEnoughBuffer",+new Date),s.dataset.playingTime=+new Date,d.v4log("loadEnoughBuffer",{playingTime:s.dataset.playingTime}),d.v4log("step30-loadEnoughBuffer: ",{time:s.dataset.playingTime}),s.deleteErrorCodes(),e||s.step30({url:t.src})}),this.context.msg.on("videoCanplay.h5report-step30",function(t){var e;d.v4log("videoCanplay",+new Date),a=0,"film"===t.playListType&&(s.context.dataset.useHls||(e=s.dataset.hasOwnProperty("playingTime"),s.dataset.playingTime=+new Date,s.deleteErrorCodes(),e||(d.v4log("MP4videoCanplay",{playingTime:s.dataset.playingTime}),s.step30({url:t.src}))))}),this.context.msg.on("setDefinitionStart",function(t){s.dataset.switchDefnStartVideoTime=s.context.dataset.currentTime;s.context.msg.once("videoPlay.h5report-step31",function(t){s.dataset.switchDefnPlayTime=+new Date}),s.context.msg.once("videoPlaying.h5report-step31",function(t){s.dataset.switchDefnHasReported=s.dataset.hasOwnProperty("switchDefnPlayingTime"),s.dataset.switchDefnPlayingTime=+new Date,s.dataset.currentVideoIndex=t.index,s.context.msg.off("videoPlay.h5report-step31"),s.context.msg.off("videoPlaying.h5report-step31"),s.context.msg.off("reportVideoError.h5report-step31")})}),this.context.msg.on("setDefinitionDone",function(t){t&&t.hasOwnProperty("hlsDefinitionEndTime")&&(s.dataset.switchDefnPlayTime=s.dataset.switchDefnPlayingTime=t.hlsDefinitionEndTime),s.dataset.switchDefnEndVideoTime=s.context.dataset.currentTime,s.step45(),s.dataset.switchDefnHasReported||s.step31()}),this.context.msg.on("setDefinitionFail",function(t){s.dataset.switchDefnEndVideoTime=s.context.dataset.currentTime,t.errCode&&(s.dataset.errorCodeOfStep45=t.errCode,s.step45(),delete s.dataset.errorCodeOfStep45)});function e(){var t=s.dataset.waitingEndTime-s.dataset.waitingStartTime;3e4<t&&(t=3e4),"number"!==o.type(s.dataset.waitingDuration)&&(s.dataset.waitingDuration=0),s.dataset.waitingDuration=t}function i(){d.v4log("\u7f13\u51b2\u63a7\u5236-step35\u66f4\u65b0\u7f13\u51b2\u5f00\u59cb\u65f6\u95f4",{waitingTimes:s.dataset.waitingTimes}),20<s.dataset.waitingTimes||(s.dataset.waitingStartTime=+new Date,s.dataset.hasOwnProperty("waitingTimes")||(s.dataset.waitingTimes=0),s.dataset.waitingTimes++,s.context.dataset.loadEnoughBuffer||(s.context.msg.off("videoPlaying.h5report-step35"),s.context.msg.once("videoPlaying.h5report-step35",function(){s.dataset.waitingEndTime=+new Date,e(),delete s.dataset.errorCodeOfStep35,s.step35(),s.context.dataset.videoWaitingReason=8,s.step35_4564()})))}this.context.msg.on("videoWaiting",function(t){d.v4log("videoWaiting",{isVideoSeeking:s.context.dataset.isVideoSeeking}),t&&!t.seeking&&"film"===t.playListType&&s.dataset.hasOwnProperty("playingTime")&&(s.context.dataset.isVideoSeeking||s.context.dataset.isDefinitionSwitching||i())}),this.context.msg.on("networkBadStart",function(t){"film"===t.playListType&&(t.isOnWaiting||s.context.dataset.isVideoSeeking||s.context.dataset.isDefinitionSwitching||s.dataset.hasOwnProperty("playingTime")&&i())}),this.context.msg.on("minbufferControlEnd",function(t){s.context.dataset.loadEnoughBuffer&&(s.dataset.hasOwnProperty("waitingTimes")&&20<s.dataset.waitingTimes||s.dataset.hasOwnProperty("waitingStartTime")&&(s.dataset.waitingEndTime=+new Date,e(),delete s.dataset.errorCodeOfStep35,s.step35(),s.step35_4564()))});function r(){return 32<s.dataset.userSeekTimes||(s.dataset.hasOwnProperty("userSeekTimes")||(s.dataset.userSeekTimes=1),!1)}this.context.msg.on("seekStart",function(t){t&&!1===t.isUserAction||r()||(t.currentTimeWhenSeekStart&&(s.dataset.currentTimeWhenSeekStart=t.currentTimeWhenSeekStart),s.dataset.seekStartTime=+new Date,"number"!==o.type(s.dataset.seekTimes)&&(s.dataset.seekTimes=0),s.dataset.seekTimes+=1,s.context.msg.off("videoWaiting.h5report-step40"),s.context.msg.off("reportVideoError.h5report-step40"),s.context.msg.once("videoPlaying.h5report-step40",function(t){t&&t.seeking&&"film"===t.playListType&&(s.context.msg.off("videoWaiting.h5report-step40"),s.context.msg.off("reportVideoError.h5report-step40"))}))}),this.context.msg.on("seekEnd",function(t){var e,a;t&&!1===t.isUserAction||r()||(s.dataset.seekEndTime=+new Date,s.context.msg.off("videoWaiting.h5report-step40"),s.context.msg.off("reportVideoError.h5report-step40"),t&&t.seekStartTime&&t.seekEndTime&&((a=200<(e=t.seekEndTime-t.seekStartTime))&&(s.dataset.seekWaitingDuration=e,s.dataset.seekWaitingStartTime=t.seekStartTime),delete s.dataset.errorCodeOfStep40,s.step40({currentTimeWhenSeekStart:t.currentTimeWhenSeekStart,currentTimeWhenSeekEnd:t.currentTimeWhenSeekEnd,isSeekOfWaiting:a}),delete s.dataset.seekWaitingStartTime,s.dataset.userSeekTimes+=1))}),this.context.msg.on("videoTimeUpdate",function(t){t&&"film"===t.playListType?("number"!=typeof s.dataset.userPlayedTime&&(s.dataset.userPlayedTime=0),s.context.dataset.isPlayingHlsAd||(s.dataset.userPlayedTime++,s.autoSaveStep50Data())):s.autoSaveStep50Data()}),this.context.msg.on("videoEnd.h5report-step50",function(t){t&&"film"===t.playListType&&t.isTheLastFilm&&(d.v4log("videoEnd-step50"),s.step50(),delete s.dataset.userPlayedTime)}),this.context.msg.on("error.h5report-step50",function(t){t&&"film"!==t.type&&"cgi"!==t.type||(t&&t.errCode&&(s.dataset.errorCodeOfStep50=t.errCode,s.dataset.hasOwnProperty("playingTime")||(s.dataset.errorCodeOfStep30=t.errCode)),!s.dataset.hasOwnProperty("playingTime")&&s.dataset.errorCodeOfStep30?(s.step30(),delete s.dataset.errorCodeOfStep30):s.dataset.hasOwnProperty("playingTime")&&(s.dataset.errorCodeOfStep31?(s.step31(),s.dataset.errorCodeOfStep45=s.dataset.errorCodeOfStep31,s.step45(),delete s.dataset.errorCodeOfStep45,delete s.dataset.errorCodeOfStep31):s.dataset.errorCodeOfStep40?(s.step40(),delete s.dataset.errorCodeOfStep40):s.dataset.errorCodeOfStep35&&(s.step35(),s.step35_4564(),delete s.dataset.errorCodeOfStep35)),s.dataset.step50_TIMER&&(clearTimeout(s.dataset.step50_TIMER),s.dataset.step50_TIMER=null),s.dataset.step50_TIMER=setTimeout(function(){s.step50(),delete s.dataset.errorCodeOfStep50},50))}),this.context.msg.on("vidChange",function(t,e){d.v4log("vidChange-autoReportStep50"),s.autoReportStep50({limitTime:!1,prevVid:e}),a=0,s.resetDataset()}),this.context.msg.on("bulletNumShow",function(){var t=s.context.msg.listeners("playStateChange.float").length,a="";o("script").each(function(t,e){e.src&&-1!=e.src.indexOf("vplay")&&(a=e.src)});var e={open:1,event:t,type:3,switch:s.context.dataset.flashBulletSwitchStatus?1:0,state:0<s.context.dataset.playState?s.context.dataset.playState:100,vplaysrc:a};(e=o.extend(s.getDefaultParams(),{data:JSON.stringify(e)})).step=70,s.report(e,"4564")}),this.context.msg.on("reportVideoError",function(t){var e;"film"===(t=t||{}).type&&(s.dataset.hasOwnProperty("playingTime")?s.context.dataset.isDefinitionSwitching?(e=3,s.dataset.errorCodeOfStep31=t.code):s.context.dataset.isVideoSeeking?(e=2,s.dataset.errorCodeOfStep40=t.code):(e=1,s.dataset.errorCodeOfStep35=t.code):(e=0,s.dataset.errorCodeOfStep30=t.code),t.url&&t.url.indexOf&&-1<t.url.indexOf("blob:")&&(t.url=s.context.dataset.currentVideoUrl),s.step36({type:e,code:t.code,url:t.url,retryTimes:a++}))})}},Txplayer.register("v4H5Report",a)}});!function(a){var i={};function o(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=a,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=456)}({456:function(t,e,a){t.exports=a(457)},457:function(t,e,a){var r=Txplayer.$,d=Txplayer.util;a(6).definitionMap;function i(t){r=Txplayer.$,this.dataset={},this.context=t,this.init()}i.prototype={init:function(){this.dataset.dataKey=Txplayer.dataset.localStorageKey.playTime,this.dataset.videoPlayedIndex=-1,this.addEventListener(),this.exportsModuleApis()},resetDataset:function(){if(this.dataset.isGetinfoDone){var t=["videoPlayedIndex","isGetinfoDone","dataKey","prevDefinition","setDefinitionStartTime","hasReportLoadingadLoadTime","filmFirstPlayingTime"];for(var e in this.dataset)-1<r.inArray(e,t)||("realPlayTime_TIMER"!==e&&"totalPlayTime_TIMER"!==e||clearInterval(this.dataset[e]),delete this.dataset[e])}},resetDatasetOnVidChange:function(){var a=this;r.each(["hasGetVplayPageRecoReport","isGetinfoDone","setDefinitionStartTime","hasReportLoadingadLoadTime","filmFirstPlayingTime","timeupdateCounter"],function(t,e){delete a.dataset[e]}),"coolOpen"===this.context.config.playerType&&(Txplayer.dataset.vplayPageRecoReport=null)},getVplayPageRecoReport:function(){try{var t=sessionStorage.getItem("report_recomm_player");(t||"coolOpen"===this.context.config.playerType)&&(Txplayer.dataset.vplayPageRecoReport=t),sessionStorage.removeItem("report_recomm_player")}catch(t){}},getDefaultReportData:function(){var t=this;!this.dataset.hasGetVplayPageRecoReport&&this.context.config.reportRecomm&&(this.dataset.hasGetVplayPageRecoReport=!0,"coolOpen"===this.context.config.playerType?setTimeout(function(){t.getVplayPageRecoReport()}):this.getVplayPageRecoReport());var e=this.context.dataset.txplayerAuth.raw(),a={uin:Txplayer.util.getQQFromCookie(),vid:this.context.dataset.vid||"",coverid:this.context.dataset.cid||"",pid:this.context.dataset.playerId||"",guid:this.context.dataset.guid||"",cmid:this.context.dataset.guid||"",unid:this.context.dataset.unid||"",vt:this.getCDNChannelId(),type:this.getBusinessType(),url:document.URL,bi:this.getCurrentVideoDuration(),bt:this.context.dataset.originDuration||"",version:Txplayer.dataset.ver||"",platform:this.context.dataset.platform,format:this.context.dataset.currentDefinitionFormat||"",defn:this.context.dataset.definition||"",ctime:d.dateFormat(),ptag:d.getPTAG(),isvip:-1,tpid:this.context.dataset.tpid||"",pversion:this.context.config.playerType,hc_uin:Txplayer.util.getQQFromCookie(),
// hc_main_login: Txplayer.util.cookie.get('main_login'),
// hc_vuserid: Txplayer.util.cookie.get('vuserid'),
// hc_openid: Txplayer.util.cookie.get('openid'),
// hc_appid: Txplayer.util.cookie.get('appid'),
hc_main_login:e.main_login,hc_vuserid:e.vuserid||Txplayer.util.cookie.get("vuserid"),hc_openid:e.openid,hc_appid:e.appid,hc_pvid:Txplayer.util.cookie.get("pgv_pvid"),hc_ssid:Txplayer.util.cookie.get("psessionid"),hc_qq:Txplayer.util.getQQFromCookie(),ua:d.getReportUA(),hh_ua:d.getReportUA(),ckey:this.context.dataset.ckey||"",iformat:this.context.dataset.currentDefinitionFormat||"",hh_ref:d.getTopFrameUrl(),vurl:this.context.dataset.currentVideoUrl||"",v_idx:this.dataset.videoPlayedIndex||0,rcd_info:Txplayer.dataset.vplayPageRecoReport||"",extrainfo:this.context.config.extrainfo||"",bucket_id:Txplayer.util.cookie.get("bucket_id"),drm:this.context.dataset.emeEnabled?1:0,pay_type:this.context.dataset.rpt_pay_type||0};return this.context&&this.context.config&&"function"===r.type(this.context.config.getUserType)&&(a.isvip=2==this.context.config.getUserType()?1:0),a.triggerplay=this.context.config.triggerplay||void 0===this.context.config.triggerplay?1:0,a},reportStep3:function(){var t={step:3,val:0===this.context.dataset.connectionPlayType?1:2,idx:this.context.dataset.connectionPlayType,c_info:this.context.config.getOuterReportData(),pcplatform:d.getPcPlatform()},e={width:this.context.dataset.playerWidth,height:this.context.dataset.playerHeight};e.width&&e.height&&(t.diagonal=parseInt(Math.sqrt(Math.pow(e.width,2)+Math.pow(e.height,2)))),t.isfocustab=this.context.dataset.isWindowFocus,t.isvisible=this.context.msg.getData("isPlayerInScreen"),t.isfocustab=t.isfocustab?1:0,t.isvisible=t.isvisible?1:0,this.doBossReport(t)},reportStep4:function(){var t={step:4,val:this.context.dataset.playList.length,val1:1,bi:this.context.dataset.hasOwnProperty("isPlayingAd")?2:1,idx:this.context.dataset.connectionPlayType,c_info:this.context.config.getOuterReportData(),pcplatform:d.getPcPlatform()},e={width:this.context.dataset.playerWidth,height:this.context.dataset.playerHeight};e.width&&e.height&&(t.diagonal=parseInt(Math.sqrt(Math.pow(e.width,2)+Math.pow(e.height,2)))),t.isfocustab=this.context.dataset.isWindowFocus,t.isvisible=this.context.msg.getData("isPlayerInScreen"),t.isfocustab=t.isfocustab?1:0,t.isvisible=t.isvisible?1:0,t.reportFrom=this.context.config.reportFrom,this.doBossReport(t)},reportStep5:function(t){var e;(t=t||{}).isEnd?e={step:5,val:1e3*t.realtime,val1:t.isEnd?1:2,val2:t.totaltime_pip||0,bi:t.totaltime}:((e=t).val1=t.isEnd?1:2,e.val=1e3*t.realtime,e.bi=t.totaltime,e.step=5,delete e.isEnd,delete e.realtime,delete e.totaltime),e.idx=this.context.dataset.connectionPlayType;var a={width:this.context.dataset.playerWidth,height:this.context.dataset.playerHeight};a.width&&a.height&&(e.diagonal=parseInt(Math.sqrt(Math.pow(a.width,2)+Math.pow(a.height,2)))),t.vid&&(e.vid=t.vid),e.isfocustab=this.context.dataset.isWindowFocus,e.isvisible=this.context.msg.getData("isPlayerInScreen"),e.isfocustab=e.isfocustab?1:0,e.isvisible=e.isvisible?1:0,e.c_info=this.context.config.getOuterReportData(),e.pcplatform=d.getPcPlatform(),this.doBossReport(e)},reportStep6:function(t){var e,a,i={step:6,val:t.firstLoadTime,val1:this.getReport6Status(),val2:1,idx:this.context.dataset.connectionPlayType,bi:"",bt:"",c_info:this.context.config.getOuterReportData(),pcplatform:d.getPcPlatform()},o={width:this.context.dataset.playerWidth,height:this.context.dataset.playerHeight};o.width&&o.height&&(i.diagonal=parseInt(Math.sqrt(Math.pow(o.width,2)+Math.pow(o.height,2)))),i.isfocustab=this.context.dataset.isWindowFocus,i.isvisible=this.context.msg.getData("isPlayerInScreen"),i.isfocustab=i.isfocustab?1:0,i.isvisible=i.isvisible?1:0,this.dataset.adReportData&&0<this.dataset.adReportData.list.length&&this.dataset.adReportData.loadingAdEndTime&&this.dataset.adReportData.loadingadProgressedTime&&(e=this.dataset.adReportData.list[0].playEndTime,a=this.dataset.adReportData.list[0].loadCompleteTime,e&&a&&(i.bi=e-a)),this.doBossReport(i)},reportStep7:function(){var t={step:7,val:0,val1:0,idx:this.context.dataset.connectionPlayType,c_info:this.context.config.getOuterReportData(),pcplatform:d.getPcPlatform()};this.doBossReport(t)},reportStep70:function(t){var e={step:70,val:t};this.doBossReport(e)},reportStep30:function(t){var e={step:30,val:t.loadTime,val1:t.hasOwnProperty("val1")?t.val1:0,val2:2,bi:this.context.dataset.videoDuration};this.context.dataset.useHls?e.val2=3:"html5hd"===this.context.config.playerType?e.val2=1:"ipadh5"!==this.context.config.playerType&&"h5"!==this.context.config.playerType||(e.val2=2),this.doBossReport(e)},reportStep50:function(t){var e={step:50,val:t.loadTime||"",val1:t.hasOwnProperty("val1")?t.val1:0,val2:1,bi:this.context.dataset.videoDuration};this.context.dataset.useHls?e.val2=3:"html5hd"===this.context.config.playerType?e.val2=1:"ipadhtml5"!==this.context.config.playerType&&"h5"!==this.context.config.playerType||(e.val2=2),this.doBossReport(e)},reportStep60:function(t){var e={step:60,val:t.seekCostTime,val1:t.hasOwnProperty("val1")?t.val1:0,val2:1,bi:this.context.dataset.videoDuration};this.context.dataset.useHls?e.val2=3:"html5hd"===this.context.config.playerType?e.val2=1:"ipadh5"!==this.context.config.playerType&&"h5"!==this.context.config.playerType||(e.val2=2),this.doBossReport(e)},reportStep31_51:function(t){var e,a;t.hasOwnProperty("waitingTime")&&(e=1e4<t.waitingTime,t.waitingTime=e?1e4:t.waitingTime,a={step:t.step,val:t.waitingTime,val1:e,val2:1,bi:this.context.dataset.videoDuration||this.context.dataset.duration,bt:this.context.dataset.duration},this.context.dataset.useHls?a.val2=3:"html5hd"===this.context.config.playerType?a.val2=1:"ipadh5"!==this.context.config.playerType&&"h5"!==this.context.config.playerType||(a.val2=2),this.doBossReport(a))},reportStep35:function(t){var e;t=t||{},this.dataset.loadingadEndTime=this.dataset.adReportData.loadingAdEndTime,this.context.dataset.adDuration=this.dataset.adReportData.adDuration,"number"!==r.type(this.dataset.filmFirstPlayingTime)||"number"!==r.type(this.dataset.loadingadEndTime)&&"number"!==r.type(this.dataset.filmFirstPlayTime)||(e=this.dataset.filmFirstPlayingTime-(this.dataset.loadingadEndTime||this.dataset.filmFirstPlayTime)),Txplayer.util.v4log("4298-Step35-loading\u5e7f\u544a\u5207\u6b63\u7247\u8017\u65f6",{swtichTime:e,filmFirstPlayingTime:this.dataset.filmFirstPlayingTime,filmFirstPlayTime:this.dataset.filmFirstPlayTime,loadingadEndTime:this.dataset.loadingadEndTime});var a={step:35,val:t.swtichTime||e,val1:"",val2:this.context.dataset.adDuration||0,bi:this.context.dataset.videoDuration};"number"===r.type(this.context.dataset.preloadStartTime)&&"number"===r.type(this.dataset.loadingadEndTime)&&(a.val1=this.dataset.loadingadEndTime-this.context.dataset.preloadStartTime),this.doBossReport(a)},reportStep55:function(t){var e={step:55,val:t.swtichTime,val1:"",val2:t.prevFilmDuration,bi:this.context.dataset.videoDuration};this.doBossReport(e)},reportStep100:function(t){var e={step:100,val:t.costTime,val1:t.val1,val2:1,bi:this.context.dataset.videoDuration,predefn:t.predefn};this.context.dataset.useHls?e.val2=3:"html5hd"===this.context.config.playerType?e.val2=1:"ipadh5"!==this.context.config.playerType&&"h5"!==this.context.config.playerType||(e.val2=2),this.doBossReport(e)},reportStep1011:function(t){var e={step:"1011",val1:0,val2:0,vt:0};e.val=t.costTime,t.err?t.code?(e.val1=3,e.val2=t.code):(e.val1=2,e.val2=444):e.val1=1,this.doBossReport(e)},reportStep1003:function(t){var e={step:"1003",val1:0,val2:0,vt:0};e.val=t.costTime,t.err?t.code?(e.val1=3,e.val2=t.code):(t.code||!t.filename||t.key?e.val1=2:e.val1=4,e.val2=445):e.val1=1,this.doBossReport(e)},getCDNChannelId:function(){var t=this.context.dataset.filmVideoData,e=this.context.dataset.playListIndex;return t&&t[e]?t[e].vt:""},getCurrentVideoDuration:function(){var t=this.context.dataset.filmVideoData,e=this.context.dataset.playListIndex;return t&&t[e]?t[e].duration:""},getBusinessType:function(){var t=this.context.dataset.getinfoJSON;return t&&t.vl&&t.vl.vi&&t.vl.vi[0]&&"object"===r.type(t.vl.vi[0])&&t.vl.vi[0].hasOwnProperty("type")?t.vl.vi[0].type:""},doBossReport:function(t){var e,a,i={};if((i=r.extend(this.getDefaultReportData(),t))&&i.bi&&(i.bi=parseInt(i.bi)),i&&i.bt&&(i.bt=parseInt(i.bt)),a="html5hd"!==this.context.config.playerType&&d.mobile?"ipadh5"===this.context.config.playerType||d.os.ipad?(e="4299","694498052"):("h5"===this.context.config.playerType||d.os.android||d.os.ios,e="2865","1698957057"):(e="4298","686148428"),"4298"===e&&(i.cpay=this.context.dataset.isNeedPay?1:0,i.tpay=this.context.dataset.userPayStatus||0,i.dltype=this.context.dataset.useHls?this.context.dataset.dltype||3:1,this.context.config.clientReportInfo)){var o=this.context.config.clientReportInfo;for(var s in o)o.hasOwnProperty(s)&&void 0!==o[s]&&(i["clt_"+s]=o[s]||"")}var n="//btrace.video.qq.com/kvcollect?BossId={bossid}&Pwd={pwd}".replace("{bossid}",e).replace("{pwd}",a);n+="&"+r.param(i),d.report(n)},playTimeHeartBeatStart:function(){var t=this;this.dataset.realPlayTime_TIMER||(this.dataset.realPlayTime_TIMER=setInterval(function(){t.dataset.realPlayTime||(t.dataset.realPlayTime=0),t.dataset.realPlayTime+=5,t.saveData()},5e3)),this.dataset.totalPlayTime_TIMER||(this.dataset.totalPlayTime_TIMER=setInterval(function(){t.dataset.totalPlayTime||(t.dataset.totalPlayTime=0),t.context.dataset.isPlayingHlsAd||(t.dataset.totalPlayTime+=5,t.dataset.totalPlayTime_pip||(t.dataset.totalPlayTime_pip=0),t.context.dataset.isPIP&&(t.dataset.totalPlayTime_pip+=5),t.context.dataset.userTotalPlayedTime=t.dataset.totalPlayTime)},5e3))},playTimeHeartBeatStop:function(t){clearInterval(this.dataset.totalPlayTime_TIMER),delete this.dataset.totalPlayTime_TIMER,t&&(clearInterval(this.dataset.realPlayTime_TIMER),delete this.dataset.realPlayTime_TIMER)},saveData:function(){var e,t=d.getData(this.dataset.dataKey),a=this.context.dataset.vid;if(t)try{e=JSON.parse(t)}catch(t){e={}}else e={};a?(e[a]={lastupdate:+new Date,realtime:this.dataset.realPlayTime,totaltime:this.dataset.totalPlayTime,totaltime_pip:this.dataset.totalPlayTime_pip},e[a]=r.extend(this.getDefaultReportData(),e[a]),d.setData(this.dataset.dataKey,JSON.stringify(e))):d.showError("saveData Error","\u627e\u4e0d\u5230vid")},getData:function(){var e,t=d.getData(this.dataset.dataKey),a=this.context.dataset.vid;if(t)try{e=JSON.parse(t)}catch(t){e={}}else e={};if(a)return e[a];d.showError("getData Error","\u627e\u4e0d\u5230vid")},clearData:function(t){var e,a=d.getData(this.dataset.dataKey);if(t=t||this.context.dataset.vid,a)try{e=JSON.parse(a)}catch(t){e={}}else e={};t?(e[t]&&delete e[t],d.setData(this.dataset.dataKey,JSON.stringify(e))):d.showError("clearData Error","\u627e\u4e0d\u5230vid")},reportPlayTimeWhenPageInit:function(){var e,t,a,i=d.getData(this.dataset.dataKey),o=this;try{e=JSON.parse(i)}catch(t){e={}}for(var s in e)t=e[s],a=s,t&&(parseInt(new Date/1e3)-parseInt(parseInt(t.lastupdate)/1e3)<=180||(t.isEnd=!1,o.reportStep5(t),o.clearData(a)))},reportPlayTimeOnEnded:function(){var e,t,a,i=d.getData(this.dataset.dataKey),o=this,s=this.context.dataset.vid;try{e=JSON.parse(i)}catch(t){e={}}a=s,(t=(t=e)&&t[a]?t[a]:null)&&(t.isEnd=!0,o.reportStep5(t),o.clearData(a))},reportPlayTimeOnBeforeVideoPlay:function(t){if(t){var e,a,i,o=d.getData(this.dataset.dataKey),s=this,n=t;try{e=JSON.parse(o)}catch(t){e={}}i=n,(a=(a=e)&&a[i]?a[i]:null)&&(a.isEnd=!0,a.vid=i,s.reportStep5(a),s.clearData(i))}},getVideoAreaLevel:function(){var t=this.context.dataset.getinfoJSON;return t&&t.vl&&t.vl.vi&&t.vl.vi.length&&t.vl.vi[0]?t.vl.vi[0].level:""},reportLoginUserPlayTime:function(t){if(t=t||!1,"v.qq.com"===location.hostname||"film.qq.com"===location.hostname){var e;if(this.context.config&&"function"===r.type(this.context.config.getUserType))try{e=this.context.config.getUserType()}catch(t){}"number"!==r.type(e)||e<=0||this.context.msg.broadcast("reportLoginUserPlayTime",{isend:t})}},getReport6Status:function(){return this.context.dataset.isLoadingAdEmpty||this.context.dataset.noHdAdPlugin?1:this.dataset.isFilmBuffered?2:3},reportPlayView:function(){var t,e="";d.inWhichDomain("qzone")&&(e=d.inNewIframe()?d.removeUrlParams(document.referrer):d.removeUrlParams(location.href)),(d.os.mac||d.os.windows)&&(d.isInIframe()||!d.isInIframe()&&"v.qq.com"!==location.hostname)&&(t={lv_irt_id:d.cookie.get("uuid")||"",dm:"v.qq.com",ua:navigator.userAgent,r:+new Date,vid:this.context.dataset.vid,sr:screen.width+"x"+screen.height,ul:navigator.language||navigator.browserLanguage||"",tv:"0.0.7",pt:this.context.dataset.title||"\u817e\u8baf\u89c6\u9891",guid:this.context.dataset.guid||"",url:"https://v.qq.com/x/page/"+this.context.dataset.vid+".html",from:d.inNewIframe()?d.removeUrlParams(document.referrer):"https://v.qq.com/x/page/"+this.context.dataset.vid+".html",playing_url:e},(new Image).src="//tj.video.qq.com/fcgi-bin/set_cookie?"+r.param(t))},reportIrs:function(){var t,e=(e=this.context.config.playerType||"").toLowerCase();-1!==d.inArray(["h5","h5tiny"],e)||"v.qq.com"!==location.hostname&&"film.qq.com"!==location.hostname||(t=new Image(1,1),this.context.dataset.vid&&(t.src="//v12-"+this.context.dataset.vid.toLowerCase()+".z.irs01.com?p=v12&ts="+ +new Date))},addEventListener:function(){var o=this;this.addAdReport(),this.context.msg.on("beforeVideoPlay",function(t,e){t=t||{},o.dataset.videoPlayedIndex++,o.reportStep3(t.isNewPlay),o.reportIrs(),o.reportPlayView(),o.reportPlayTimeOnBeforeVideoPlay(e)}),this.context.msg.on("vidChange",function(t,e){o.resetDataset()}),this.context.msg.on("getVideoUrlSuccess",function(t,e){o.resetDataset(),setTimeout(function(){o.reportStep4(),o.dataset.isGetinfoDone=!0,o.context.dataset.reportVideoLevel=o.getVideoAreaLevel(),o.context.dataset.reportCDNChannelId=o.getCDNChannelId(),o.context.dataset.reportBusinessType=o.getBusinessType()},0)}),this.context.msg.on("vidChange",function(){o.resetDatasetOnVidChange()}),this.context.msg.on("videoPause",function(){o.context.dataset.isPlayingAd||o.playTimeHeartBeatStop()}),this.context.msg.on("videoPlay",function(t){"film"!==t.playListType||0!==t.index||o.dataset.filmFirstPlayTime||(o.dataset.filmFirstPlayTime=+new Date),"film"===t.playListType&&0<t.index&&(o.dataset.filmPlayTime||(o.dataset.filmPlayTime={}),o.dataset.filmPlayTime[t.index]||(o.dataset.filmPlayTime[t.index]=+new Date))}),this.context.msg.on("videoPlaying",function(t){t&&"film"===t.playListType&&(o.dataset.filmFirstPlayingTime||(o.dataset.filmFirstPlayingTime=+new Date,o.dataset.adReportData=o.getAdReportData(),o.reportStep6({firstLoadTime:o.dataset.filmFirstPlayingTime-o.dataset.filmFirstPlayTime}),o.reportStep35())),t&&"film"===t.playListType&&o.playTimeHeartBeatStart(),t&&"film"===t.playListType&&0===t.index&&!o.dataset.filmPlayingTime&&o.dataset.filmFirstPlayTime&&(o.dataset.filmPlayingTime=+new Date,o.reportStep30({loadTime:o.dataset.filmPlayingTime-(o.dataset.preloadStartTime||o.dataset.filmFirstPlayTime)})),t&&"film"===t.playListType&&0<t.index&&o.dataset.filmPlayTime&&(o.dataset.filmPlayingTime||(o.dataset.filmPlayingTime={}),o.dataset.filmPlayingTime[t.index]||(o.dataset.filmPlayingTime[t.index]=+new Date,o.reportStep50({loadTime:o.dataset.filmPlayingTime[t.index]-o.dataset.filmPlayTime[t.index]})))}),this.context.msg.on("videoWaiting",function(e){var t,a,i;o.context.dataset.isPlayingAd||"film"===e.playListType&&(e&&e.videoTag&&0===e.videoTag.buffered.length||o.context.dataset.isVideoSeeking||e.seeking||(o.dataset.waitingTimes||(o.dataset.waitingTimes=0),1!==o.dataset.waitingTimes&&(o.dataset.waitingTimes++,t="videoTimeUpdate.waiting_report",a=+new Date,o.context.msg.off(t),o.context.msg.once(t,function(){var t;i=+new Date,t=0===e.index?31:51,o.reportStep31_51({step:t,waitingTime:i-a})}))))}),this.context.msg.on("networkBadStart",function(e){var t,a,i;"film"===e.playListType&&(e.isOnWaiting||o.context.dataset.isVideoSeeking||(o.dataset.waitingTimes?o.dataset.waitingTimes++:o.dataset.waitingTimes=1,t="networkBadEnd.waiting_report",a=+new Date,o.context.msg.off(t),o.context.msg.once(t,function(){var t;i=+new Date,t=0===e.index?31:51,o.reportStep31_51({step:t,waitingTime:i-a})})))}),this.context.msg.on("videoEnd",function(t){var e,a,i;"film"===t.playListType&&(o.dataset.waitingTimes=0),"film"!==t.playListType||t.isTheLastFilm||(e=+new Date,i=t.videoTag.duration||o.context.dataset.videoDuration,o.context.msg.once("videoPlaying.switch_film_section_report",function(){a=+new Date,o.reportStep55({swtichTime:a-e,prevFilmDuration:i})})),"film"===t.playListType&&t.isTheLastFilm&&(o.playTimeHeartBeatStop(!0),o.reportPlayTimeOnEnded(),o.reportLoginUserPlayTime(!0))}),this.context.msg.on("videoTimeUpdate",function(t){t&&"film"===t.playListType&&(o.dataset.timeupdateCounter?o.dataset.timeupdateCounter+=1:o.dataset.timeupdateCounter=1,o.dataset.timeupdateCounter%300==0&&o.reportLoginUserPlayTime(!1))}),this.context.msg.on("getinfoFinish",function(t){t=t||{},o.reportStep1011(t)}),this.context.msg.on("getkeyStart",function(){o.dataset.getkeyStartTime=+new Date}),this.context.msg.on("getkeyFinish",function(t){t=t||{},o.dataset.getkeyEndTime=+new Date,o.reportStep1003(t)}),this.context.msg.on("ready",function(){o.reportPlayTimeWhenPageInit()}),this.context.msg.on("seekStart",function(){o.dataset.filmSeekStartTime=+new Date}),this.context.msg.on("seekEnd",function(){o.dataset.filmSeekEndTime=+new Date,o.reportStep60({seekCostTime:o.dataset.filmSeekEndTime-o.dataset.filmSeekStartTime})}),this.context.msg.on("seekFail",function(){o.dataset.filmSeekFailTime=+new Date,o.reportStep60({val1:1,seekCostTime:o.dataset.filmSeekFailTime-o.dataset.filmSeekStartTime})}),this.context.msg.on("setDefinitionStart",function(){o.dataset.setDefinitionStartTime=+new Date,o.dataset.prevDefinition=o.context.dataset.definition}),this.context.msg.on("setDefinitionDone",function(){o.dataset.setDefinitionDoneTime=+new Date,o.reportStep100({costTime:o.dataset.setDefinitionDoneTime-o.dataset.setDefinitionStartTime,val1:2,predefn:o.dataset.prevDefinition})}),this.context.msg.on("setDefinitionFail",function(t){o.dataset.setDefinitionFailTime=+new Date,o.reportStep100({costTime:o.dataset.setDefinitionFailTime-o.dataset.setDefinitionStartTime,val1:3,predefn:o.dataset.prevDefinition})}),this.context.msg.on("videoPlay",function(t){var e;(t=t||{})&&"film"!==t.playListType||(e=+new Date,o.dataset.hasOwnProperty("_1_bufferFailTime")||0!==t.index||(o.context.msg.off("error._1_bufferFailTime"),o.context.msg.once("error._1_bufferFailTime",function(t){o.context.msg.off("videoPlaying._1_bufferFailTime"),o.dataset._1_bufferFailTime=+new Date,o.reportStep30({loadTime:o.dataset._1_bufferFailTime-e,val1:1})}),o.context.msg.once("videoPlaying._1_bufferFailTime",function(){o.context.msg.off("error._1_bufferFailTime")})),!o.dataset.hasOwnProperty("_2_bufferFailTime")&&0<t.index&&(o.context.msg.once("error._2_bufferFailTime",function(t){o.context.msg.off("videoPlaying._2_bufferFailTime"),o.dataset._2_bufferFailTime=+new Date,o.reportStep50({loadTime:o.dataset._2_bufferFailTime-e,val1:1})}),o.context.msg.once("videoPlaying._2_bufferFailTime",function(){o.context.msg.off("error._2_bufferFailTime")})))})},setExtrainfo:function(t){this.context.config.extrainfo=t||""},setClientReportInfo:function(t){this.context.config.clientReportInfo=t||{}},setOuterReportData:function(t){this.context.config.outerReportData=t},exportsModuleApis:function(){this.dataset.moduleApis={},this.dataset.moduleApis.setExtrainfo=this.setExtrainfo.bind(this),this.dataset.moduleApis.setClientReportInfo=this.setClientReportInfo.bind(this),this.dataset.moduleApis.setOuterReportData=this.setOuterReportData.bind(this),r.extend(this.context.userApi,this.dataset.moduleApis)},addAdReport:function(){var a=this;this.context.msg.on("loadingAdStart",function(t,e){a.dataset.loadingadPlayingTime||(a.dataset.loadingadPlayingTime=+new Date,a.reportStep7())})},getAdReportData:function(){return this.context.adApi&&this.context.adApi.getAdReportData()}},Txplayer.register("v4HdPlayerReport",i)},6:function(t,e){t.exports={playerstate:{unstarted:-1,ended:0,playing:1,paused:2,buffering:3,cued:4,stop:5},definitionMap:{msd:"\u6d41\u7545180P",sd:"\u6807\u6e05270P",hd:"\u9ad8\u6e05480P",shd:"\u8d85\u6e05720P",fhd:"\u84dd\u51491080P",uhd:"4K"}}}});!function(i){var a={};function s(t){if(a[t])return a[t].exports;var e=a[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=i,s.c=a,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=241)}({241:function(t,e,i){t.exports=i(242)},242:function(t,e,i){var s=Txplayer.$,n=Txplayer.util,a=i(243),o=i(244);function d(t){s=Txplayer.$,this.dataset={},this.context=t,this.init()}d.prototype={init:function(){this.write(),this.addEventListerner()},write:function(){var t={loading:"txp-ui-loading",continuePlay:"txp-ui-continue-play",hide:Txplayer.dataset.hideClass},e=s.tmpl(n.isTouchPlayer(this.context)?o:a,t);this.context.dataset.$playermod.append(e),this.dataset.$loading=this.context.dataset.$playermod.find('[data-role="'+t.loading+'"]'),this.dataset.$continue=this.context.dataset.$playermod.find('[data-role="'+t.continuePlay+'"]')},remove:function(){this.dataset.$loading.remove()},isNeedShowLoading:function(){return 1!=this.context.dataset.playState&&0!=this.context.dataset.playState&&2!=this.context.dataset.playState&&(this.context.msg.getData("checkTimeisInBufferdRange",this.context.dataset.videoCurrentTime)&&3!=this.context.dataset.playState?void 0:!this.context.dataset.isPlayingAd)},stopTimer:function(){this.dataset.timer&&(clearTimeout(this.dataset.timer),this.dataset.timer=null)},hide:function(){this.stopTimer(),this.dataset.isShowing&&(this.context.dataset.isMinbufferControlPause||(this.dataset.$loading.addClass(Txplayer.dataset.hideClass),this.dataset.isShowing=!1))},show:function(){var t;this.dataset.isShowing||(this.dataset.isPlayed||n.isTouchPlayer(this.context))&&((t=this).stopTimer(),this.dataset.timer=setTimeout(function(){t.isNeedShowLoading()&&(t.dataset.$loading.removeClass(Txplayer.dataset.hideClass),t.dataset.isShowing=!0)},50))},addEventListerner:function(){var a=this;this.dataset.eventsList={},this.dataset.eventsList[n.getUniqueMsgKey("videoPlaying")]=function(){a.hide(),a.dataset.isPlayed=!0},this.dataset.eventsList[n.getUniqueMsgKey("isPlayingAdStatusChange")]=function(t){t&&(a.dataset.isPlayed=!0,a.hide())},this.dataset.eventsList[n.getUniqueMsgKey("videoSeeked")]=function(){a.hide()},this.dataset.eventsList[n.getUniqueMsgKey("networkBadEnd")]=function(){a.hide()},this.dataset.eventsList[n.getUniqueMsgKey("videoLoadstart")]=function(){a.show()},this.dataset.eventsList[n.getUniqueMsgKey("videoSeeking")]=function(){a.show()},this.dataset.eventsList[n.getUniqueMsgKey("videoWaiting")]=function(){a.show()},this.dataset.eventsList[n.getUniqueMsgKey("networkBadStart")]=function(){a.show()},this.dataset.eventsList[n.getUniqueMsgKey("showLoading")]=function(){a.context.dataset.isPlayingAd||(a.dataset.$loading.removeClass(Txplayer.dataset.hideClass),a.dataset.isShowing=!0)},this.dataset.eventsList[n.getUniqueMsgKey("hideLoading")]=function(){a.hide()},this.dataset.eventsList[n.getUniqueMsgKey("showContinuePlay")]=function(t){var e,i;"number"==typeof t&&(i="\u4e0a\u6b21\u89c2\u770b\u81f3"+((e=parseInt(t/60))?e+"\u5206":"")+parseInt(t%60)+"\u79d2\uff0c\u6b63\u5728\u4e3a\u4f60\u7eed\u64ad",a.dataset.$continue.text(i),a.dataset.$continue.removeClass(Txplayer.dataset.hideClass),setTimeout(function(){a.dataset.$continue.addClass(Txplayer.dataset.hideClass)},3e3))},this.dataset.eventsList[n.getUniqueMsgKey("error")]=function(){a.hide()},this.dataset.eventsList[n.getUniqueMsgKey("vidChange")]=function(){a.dataset.isPlayed=null},s.each(this.dataset.eventsList,function(t,e){a.context.msg.on(t,e)})}},Txplayer.register("UiLoading",d)},243:function(t,e){t.exports='<txpdiv  class="txp_overlay_loading">\n  <txpdiv class="txp_text <%=hide%>" data-role="<%=continuePlay%>"></txpdiv>\n  <txpdiv class="txp_icon_loading <%=hide%>" data-role="<%=loading%>"></txpdiv>\n</txpdiv>'},244:function(t,e){t.exports='<txpdiv  class="txp_touch_overlay_loading">\n  <txpdiv class="txp_touch_text <%=hide%>" data-role="<%=continuePlay%>"></txpdiv>\n  <txpdiv class="txp_touch_icon_loading <%=hide%>" data-role="<%=loading%>"></txpdiv>\n</txpdiv>'}});!function(a){var i={};function s(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=a,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=245)}({245:function(t,e,a){t.exports=a(246)},246:function(t,e,a){var i=Txplayer.$,s=Txplayer.util,n=a(247);function d(t){i=Txplayer.$,this.dataset={},this.context=t,this.init()}d.prototype={init:function(){this.dataset.adFlag=!1,this.write(),this.addEventListerner()},write:function(){var t={loading:"txp-ui-loading-with-ad",speed:"txp-ui-loading-with-ad-speed",canvas:"txp-ui-loading-with-ad-canvas",pvlAdLayer:"txp-ui-loading-with-ad-layer",hide:Txplayer.dataset.hideClass,hideLoadingSlogan:this.context.config.hideLoadingSlogan},e=i.tmpl(n,t);this.context.dataset.$playermod.append(e),this.dataset.$loading=this.context.dataset.$playermod.find('[data-role="'+t.loading+'"]'),this.context.dataset.$loading=this.dataset.$loading,this.dataset.$speed=this.context.dataset.$playermod.find('[data-role="'+t.speed+'"]'),this.dataset.$canvas=this.context.dataset.$playermod.find('[data-role="'+t.canvas+'"]'),this.context.dataset.$pvlAdLayer=this.context.dataset.$playermod.find('[data-role="'+t.pvlAdLayer+'"]')},remove:function(){this.dataset.$loading.remove()},getSpeedStart:function(){var e;this.dataset.timer_TIMER||((e=this).dataset.timer_TIMER=setInterval(function(){var t=e.context.dataset.videoDownloadSpeed||0;t<=0||e.dataset.$speed.html(s.formatDownloadSpeed(t))},200))},getSpeedStop:function(){this.dataset.timer_TIMER&&(clearInterval(this.dataset.timer_TIMER),this.dataset.timer_TIMER=null)},isNeedShowLoading:function(){return 1!=this.context.dataset.playState&&0!=this.context.dataset.playState&&2!=this.context.dataset.playState&&(!this.context.msg.getData("checkTimeisInBufferdRange",this.context.dataset.videoCurrentTime)||void 0)},hide:function(){this.dataset.showTimer&&(clearTimeout(this.dataset.showTimer),this.dataset.showTimer=null),this.context.dataset.isImgAdLoadingShowing&&(this.context.dataset.disableCalcDownloadSpeed=!0,this.dataset.$loading.addClass(Txplayer.dataset.hideClass),this.dataset.$speed.html(""),this.getSpeedStop(),this.context.msg.broadcast("adPluginMsg",{name:"stopAd",adtype:"PVL"}),this.context.dataset.isImgAdLoadingShowing=!1)},show:function(){var t;this.context.dataset.isImgAdLoadingShowing||this.dataset.isPlayed||this.dataset.showTimer||((t=this).dataset.showTimer=setTimeout(function(){t.dataset.showTimer=null,t.isNeedShowLoading()&&(s.v4log("showLoadingWithad"),t.context.dataset.disableCalcDownloadSpeed=!1,t.dataset.$loading.removeClass(Txplayer.dataset.hideClass),t.getSpeedStart(),t.context.dataset.isImgAdLoadingShowing=!0)},50))},getAdFlag:function(){return this.dataset.adFlag=1===this.context.adApi.getAdTagConfig("PVL"),this.dataset.adFlag},updateAdFlagInHtml:function(){this.getAdFlag()?this.dataset.$adflag.removeClass("txp_none"):this.dataset.$adflag.addClass("txp_none")},addEventListerner:function(){var a=this;this.dataset.eventsList={},this.dataset.eventsList[s.getUniqueMsgKey("videoPlaying")]=function(){a.dataset.isPlayed=!0,a.hide()},this.dataset.eventsList[s.getUniqueMsgKey("videoTimeUpdate")]=function(){a.dataset.isPlayed=!0,a.hide()},this.dataset.eventsList[s.getUniqueMsgKey("isPlayingAdStatusChange")]=function(t){t&&(a.dataset.isPlayed=!0,a.hide())},this.dataset.eventsList[s.getUniqueMsgKey("hlsStartPlay")]=function(){a.dataset.isPlayed||a.show()},this.dataset.eventsList[s.getUniqueMsgKey("videoPlay")]=function(){a.show()},this.dataset.eventsList[s.getUniqueMsgKey("userPlayPlayer")]=function(){a.show()},this.dataset.eventsList[s.getUniqueMsgKey("beforeVideoPlay")]=function(){a.show()},this.dataset.eventsList[s.getUniqueMsgKey("error")]=function(){a.hide()},this.dataset.eventsList[s.getUniqueMsgKey("showUIVipGuide")]=function(){a.hide()},this.dataset.eventsList[s.getUniqueMsgKey("vidChange")]=function(){a.reset()},i.each(this.dataset.eventsList,function(t,e){a.context.msg.on(t,e)})},reset:function(){this.context.dataset.disableCalcDownloadSpeed=!0,this.dataset.isPlayed=null}},Txplayer.register("UiLoadingWithAD",d)},247:function(t,e){t.exports='<txpdiv data-role="<%=loading%>" class="txp_overlay_loading <%=hide%>">\n  <txpdiv class="txp_overlay_loading_content">\n    <txpdiv class="txp_overlay_loading_ad" data-role="<%=pvlAdLayer%>"></txpdiv>\n    <% if (!hideLoadingSlogan) { %>\n    <img class="txp_overlay_loading_slogan" src="//vm.gtimg.cn/tencentvideo/txp/style/img/slogan.png" style="width:165px">\n    <txpdiv class="txp_overlay_loading_name">\u817e\u8baf\u89c6\u9891 v.qq.com</txpdiv>\n    <% } else {%>\n    <txpdiv style="position: absolute; top: 50%; left: 50%; --webkit-transform: translate(-50%, -50%);--ms-transform: translate(-50%, -50%); transform: translate(-50%, -50%);">\n        <txpdiv class="txp_icon_loading"></txpdiv>\n    </txpdiv>\n    <% } %>\n    <txpdiv data-role="<%=speed%>" class="txp_overlay_loading_speed"></txpdiv>\n    <txpdiv  class="txp_overlay_loading_canvas">\n      <canvas data-role="<%=canvas%>" width="800" height="450"></canvas>\n    </txpdiv>\n  </txpdiv>\n</txpdiv>'}});!function(a){var i={};function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=a,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=166)}({166:function(t,e,a){t.exports=a(167)},167:function(t,e){var i=Txplayer.$,n=(Txplayer.apiList,Txplayer.util);function a(t){i=Txplayer.$,this.dataset={},this.context=t,this.init()}a.prototype={init:function(){this.dataset.maxHistoryPlayTimeList=50,this.dataset.useConnectionPlay=this.context.config.useConnectionPlay,this.context.dataset.historyDefinition=this.getHistoryDefinition(),this.context.config&&"v3"==this.context.config.version&&(this.dataset.adMuteHistory=this.getAdMuteHistory()),this.context.dataset.historyPlayTime=this.getHistoryPlayTime(),this.addEventListener()},savePlaytimeData:function(t){var e,a=n.getData(Txplayer.dataset.localStorageKey.historyPlayTime),i=this.context.dataset.vid,r=0;if(a)try{e=JSON.parse(a)}catch(t){e={}}else e={};if(i){for(var s in e)r++;r>=this.dataset.maxHistoryPlayTimeList&&(e={}),e[i]=t,this.context.dataset.historyPlayTime=JSON.stringify(e),n.setData(Txplayer.dataset.localStorageKey.historyPlayTime,JSON.stringify(e))}else n.showError("savePlaytimeData Error","\u627e\u4e0d\u5230vid")},getHistoryPlayTime:function(){var e,t=n.getData(Txplayer.dataset.localStorageKey.historyPlayTime),a=(a=this.context.dataset.vid)||this.context.config.vid;if(t)try{e=JSON.parse(t)}catch(t){e={}}else e={};if(a)return e[a];n.showError("getHistoryPlayTime Error","\u627e\u4e0d\u5230vid")},clearPlaytimeData:function(){var e,t=n.getData(Txplayer.dataset.localStorageKey.historyPlayTime),a=this.context.dataset.vid;if(t)try{e=JSON.parse(t)}catch(t){e={}}else e={};a?(delete e[a],this.context.dataset.historyPlayTime=JSON.stringify(e),n.setData(Txplayer.dataset.localStorageKey.historyPlayTime,JSON.stringify(e))):n.showError("clearPlaytimeData Error","\u627e\u4e0d\u5230vid")},saveDefinitionData:function(t){t&&(this.context.dataset.historyDefinition=t,n.setData(Txplayer.dataset.localStorageKey.historyDefinition,t))},getHistoryDefinition:function(){var t=n.getData(Txplayer.dataset.localStorageKey.historyDefinition);return"mp4"==t&&(t=""),t},saveAdMuteData:function(t){this.dataset.adMuteHistory=JSON.stringify(t),n.setData(Txplayer.dataset.localStorageKey.adMuteHistory,t)},getAdMuteHistory:function(){return this.dataset.adMuteHistory=n.getData(Txplayer.dataset.localStorageKey.adMuteHistory),n.getData(Txplayer.dataset.localStorageKey.adMuteHistory)},addEventListener:function(){var a=this;this.dataset.eventsList={},this.context.config&&"v3"==this.context.config.version&&(this.dataset.eventsList[n.getUniqueMsgKey("videoPlay")]=function(t){var e;t&&"film"!==t.playListType&&(e="true"===a.dataset.adMuteHistory,a.context.msg.broadcast("adMuteStateUpdate",{mute:e}))},this.dataset.eventsList[n.getUniqueMsgKey("adMuteChange")]=function(t){t&&t.hasOwnProperty("mute")&&a.saveAdMuteData(t.mute)}),this.dataset.eventsList[n.getUniqueMsgKey("videoTimeUpdate")]=function(t){if(t)if(t.currentTime&&parseInt(t.currentTime)%3==0)a.savePlaytimeData(parseInt(t.currentTime));else{if(t&&"film"!==t.playListType)return;var e;t&&t.videoTag&&t.videoTag.currentTime&&parseInt(t.videoTag.currentTime)%3==0&&(e=a.context.dataset.currentTime,a.savePlaytimeData(parseInt(e)))}},this.dataset.eventsList[n.getUniqueMsgKey("videoEnd")]=function(t){"film"===t.playListType&&(t.isAllEnd||t.isTheLastFilm)&&a.clearPlaytimeData()},this.dataset.eventsList[n.getUniqueMsgKey("definitionChange")]=function(t){a.saveDefinitionData(t)},i.each(this.dataset.eventsList,function(t,e){a.context.msg.on(t,e)})}},Txplayer.register("HdPlayerHistory",a)}});!function(r){var a={};function i(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=r,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=567)}({567:function(e,t,r){e.exports=r(568)},568:function(e,t,r){var a,i,n=Txplayer.$,s=Txplayer.util,o=r(569),l={debug:1==s.getUrlParam("debughls"),manifestLoadingMaxRetry:2,manifestLoadingRetryDelay:100,manifestLoadingTimeOut:1e4,levelLoadingMaxRetry:2,levelLoadingRetryDelay:100,levelLoadingTimeOut:1e4,fragLoadingRetryDelay:10,fragLoadingMaxRetry:3,fragLoadingTimeOut:3e4,maxBufferLength:240,maxMaxBufferLength:240,autoStartLoad:!1};function u(e){n=Txplayer.$,this.context=e,this.context.dataset.hasChromeHlsPlugin=!0,this.dataset={},this._hls=null,this._video=null,this.addEventListener()}u.prototype={destroyHlsPlayer:function(){this._hls&&(this._hls.destroy(),this._hls=null),this._video&&(this._video=null)},createHlsPlayer:function(e,t){t.video.isFocus&&this.destroyHlsPlayer(),i=a=null,(e=e||l).p2pConfig=t.p2pConfig,this._hls=new o(e),this.initHlsEvent()},loadHlsSource:function(e){var t;e.src&&e.video&&(n.extend({},l),e.fromSetDefinition&&this._hls?(s.v4log("setInfo",{p2pConfig:e.p2pConfig}),this._hls&&this._hls.setInfo&&this._hls.setInfo(e.p2pConfig),this.addDefinition(e)):(s.v4log("setInfo",{p2pConfig:e.p2pConfig}),this._hls&&this._hls.setInfo&&this._hls.setInfo(e.p2pConfig),this.createHlsPlayer(null,e),this._hls.attachMedia(e.video),t=e.src,e.m3u8?(this.initSetCurrenTime(e),this._hls.loadSource({m3u8:e.m3u8,url:e.src})):(this._hls.loadSource({url:t}),this.initSetCurrenTime(e)),this.dataset.level=0,this.dataset.urlsNum=1,this.dataset.hasSetDefinitionFail=null))},dealSrc:function(e){var t="#EXTM3U\n#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH="+this.context.dataset.currentDefinitionRate+",NAME="+this.context.dataset.definition+"\n"+e+"\n";return"data:appliction/x-mpegurl,"+encodeURIComponent(t)},addDefinition:function(e){this.dataset.urlsNum++;var t="#EXTM3U\n#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH="+this.context.dataset.currentDefinitionRate+",NAME="+this.context.dataset.definition+"\n"+e.src+"\n",r=this._hls.coreComponents[0].parseMasterPlaylist(t,encodeURIComponent(t));r[0].url=[r[0].url],r[0].urlId=0,this._hls.levelController._levels.push(r[0]),this._hls.nextLevel=this.dataset.urlsNum-1,e.autoplay&&this._video&&this._video.play()},_startLoad:function(e){var r,a,i=this;e.currentTime?(i._hls.config.startPosition=e.currentTime,(a=function(e){if(!i._video)return r&&window.clearInterval(r),void(r=window.setInterval(function(){a(e)},50));var t;window.clearInterval(r),r=null,i._hls.startLoad(e.currentTime),i._hls.config.startPosition=0,!e.autoplay||(t=e.video.play())&&t.catch&&t.catch(function(e){s.v4log("hls-play-catch2",e)})})(e)):(i._hls.startLoad(),i.setCurrenTime(e))},initSetCurrenTime:function(a){var i;a.video&&(s&&s.v4log("hls-initSetCurrenTime",{src:a.src,currentTime:a.currentTime}),(i=this)._hls.on(o.Events.MANIFEST_PARSED,function(e,t){i._startLoad(a);var r=t&&t.levels&&t.levels[0]&&t.levels[0].details;r&&i.context.msg.broadcast("videoHlsManifestParsed",r)}))},setCurrenTime:function(t){var e;s&&s.v4log("hls-setCurrenTime",t),t.hasOwnProperty("currentTime")&&!isNaN(t.currentTime)?t.autoplay&&(e=t.video.play())&&e.then?e.then(function(){t.video.currentTime=t.currentTime}).catch(function(e){t.video.currentTime=t.currentTime,s.v4log("setCurrentTime: hls-play-catch",e)}):t.video.currentTime=t.currentTime:t.autoplay&&(e=t.video.play())&&e.catch&&e.catch(function(e){s.v4log("hls-play-catch1",e)})},initHlsEvent:function(){var r=this;this._hls.on(o.Events.LEVEL_SWITCHED,function(e,t){s.v4log("LEVEL_SWITCHED",{urlsNum:r.dataset.urlsNum,level:r.dataset.level,currentLevel:r._hls&&r._hls.currentLevel}),r._hls&&1<r.dataset.urlsNum&&r.dataset.level!=r._hls.currentLevel&&r.context.dataset.useChromeHls&&(s.v4log("\u5df2\u6210\u529f\u4e3a\u60a8\u5207\u6362\u6e05\u6670\u5ea6"),r.dataset.level=r._hls.currentLevel,r.context.dataset.playList[r.context.dataset.playListIndex].playing=!0,r.context.msg.broadcast("videoPlaying.h5report-step31",{index:0}),r.context.msg.broadcast("videoPlaying.switch_definition",{hlsDefinitionEndTime:+new Date}),r.context.msg.broadcast("showUiTips",{text:"\u5df2\u6210\u529f\u4e3a\u60a8\u5207\u6362\u6e05\u6670\u5ea6",time:3}))}),this._hls.on(o.Events.MEDIA_ATTACHING,function(e,t){s.v4log("hls-MEDIA_ATTACHING",{stime:+new Date})}),this._hls.on(o.Events.MEDIA_ATTACHED,function(e,t){s.v4log("hls-MEDIA_ATTACHED",{stime:+new Date}),r._video=t.media}),this._hls.on(o.Events.MANIFEST_LOADING,function(e,t){s.v4log("hls-MANIFEST_LOADING",{stime:+new Date}),r.context.msg.broadcast("hlsStartPlay",{stime:+new Date})}),this._hls.on(o.Events.MEDIA_DETACHED,function(e,t){r._video=null}),this._hls.on(o.Events.ERROR,function(e,t){if(s.v4log("Hls.Events.ERROR",t),t.fatal)switch(t.tsUrl="",t.frag&&t.frag.url&&(t.tsUrl=t.frag.url),t.type){case o.ErrorTypes.MEDIA_ERROR:"bufferAppendError"==t.details&&(r.context.dataset.videoWaitingReason=4,n(r._video).trigger("waiting"),n(r._video).trigger("error",{detail:t.details,url:t.tsUrl})),"bufferStalledError"==t.details&&(r.context.dataset.videoWaitingReason=5,n(r._video).trigger("waiting"),n(r._video).trigger("error",{detail:t.details,url:t.tsUrl}));break;case o.ErrorTypes.NETWORK_ERROR:s.v4log("NETWORK_ERROR",{detail:t.details}),r.context.dataset.videoWaitingReason=6,n(r._video).trigger("waiting"),n(r._video).trigger("error",{detail:t.details,url:t.tsUrl});break;default:r.context.dataset.videoWaitingReason=7,n(r._video).trigger("error",{detail:t.details,url:t.tsUrl})}}),this._hls.on(o.Events.FRAG_LOAD_PROGRESS,function(e,t){t&&t.stats&&r.context.msg.broadcast("hlsProgress",{loaded:t.stats.loaded,total:t.stats.total}),t&&t.stats&&0<t.stats.loaded&&t.frag&&0===t.frag.loadIdx&&(.3<t.stats.loaded/t.stats.total&&r.context.msg.broadcast("hlsFirstFragementLoadFinish",{time:+new Date,loaded:t.stats.loaded}),s.v4log("step30-\u5f53\u524d\u52a0\u8f7d\u8fdb\u5ea6",{time:+new Date,loaded:t.stats.loaded,percent:t.stats.loaded/t.stats.total}))}),this._hls.on(o.Events.BUFFER_FULL_ERROR,function(e,t){s.v4log("BUFFER_FULL_ERROR",t)})},handleMediaError:function(e){var t=(new Date).getTime();!a||3e3<t-a?(a=(new Date).getTime(),this._hls.recoverMediaError()):!i||3e3<t-i?(i=(new Date).getTime(),this._hls.swapAudioCodec(),this._hls.recoverMediaError()):n(this._video).trigger("error",{detail:e.details,url:e.tsUrl})},remove:function(){this.destroyHlsPlayer()},addEventListener:function(){var t=this;t.context.msg.on("loadHlsSource",function(e){s.v4log("hlshelper-broadcast:loadHlsSource"),t.loadHlsSource(e)}),t.context.msg.on("destroyHlsPlayer",function(){s.v4log("hlshelper-broadcast:destroyHlsPlayer"),t.destroyHlsPlayer()}),t.context.msg.on("setHlsCurrenTime",function(e){s.v4log("hlshelper-broadcast:setHlsCurrenTime"),t.setCurrenTime(e)}),t.context.msg.on("reportChromeHlsLog",function(e){t.context.dataset.useChromeHls&&(s.v4log("hlshelper-broadcast:ReportHlsLog"),o.postLog&&o.postLog(e&&e.code||0))}),t.context.msg.on("reportChromeHlsError",function(e){s.v4log("hlshelper-broadcast:ReportHlsError",e),o.setPlayerError&&o.setPlayerError(e)})}},Txplayer.register("HlsHelper",u)},569:function(t,r){!function(e){"object"==typeof r&&void 0!==t?t.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Hls=e()}(function(){return function n(s,o,l){function u(r,e){if(!o[r]){if(!s[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(d)return d(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var i=o[r]={exports:{}};s[r][0].call(i.exports,function(e){var t=s[r][1][e];return u(t||e)},i,i.exports,n,s,o,l)}return o[r].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,r){function a(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function l(e){return"function"==typeof e}function u(e){return"object"==typeof e&&null!==e}function d(e){return void 0===e}((t.exports=a).EventEmitter=a).prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},a.prototype.emit=function(e){var t,r,a,i,n,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var o=new Error('Uncaught, unspecified "error" event. ('+t+")");throw o.context=t,o}if(d(r=this._events[e]))return!1;if(l(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(u(r))for(i=Array.prototype.slice.call(arguments,1),a=(s=r.slice()).length,n=0;n<a;n++)s[n].apply(this,i);return!0},a.prototype.on=a.prototype.addListener=function(e,t){var r;if(!l(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,l(t.listener)?t.listener:t),this._events[e]?u(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,u(this._events[e])&&!this._events[e].warned&&(r=d(this._maxListeners)?a.defaultMaxListeners:this._maxListeners)&&0<r&&this._events[e].length>r&&(this._events[e].warned=!0,console.trace),this},a.prototype.once=function(e,t){if(!l(t))throw TypeError("listener must be a function");var r=!1;function a(){this.removeListener(e,a),r||(r=!0,t.apply(this,arguments))}return a.listener=t,this.on(e,a),this},a.prototype.removeListener=function(e,t){var r,a,i,n;if(!l(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(r=this._events[e]).length,a=-1,r===t||l(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(u(r)){for(n=i;0<n--;)if(r[n]===t||r[n].listener&&r[n].listener===t){a=n;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},a.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(l(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},a.prototype.listeners=function(e){var t=this._events&&this._events[e]?l(this._events[e])?[this._events[e]]:this._events[e].slice():[];return t},a.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(l(t))return 1;if(t)return t.length}return 0},a.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,r){var a,i,d,n,s,f;a=this,i=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,d=/^([^\/;?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,f={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var a=this.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");return a.path=f.normalizePath(a.path),f.buildURLFromParts(a)}var i=this.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=f.normalizePath(i.path),f.buildURLFromParts(i)):t;var n,s=this.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");!s.netLoc&&s.path&&"/"!==s.path[0]&&(n=d.exec(s.path),s.netLoc=n[1],s.path=n[2]),s.netLoc&&!s.path&&(s.path="/");var o,l,u={scheme:s.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return i.netLoc||(u.netLoc=s.netLoc,"/"!==i.path[0]&&(i.path?(l=(o=s.path).substring(0,o.lastIndexOf("/")+1)+i.path,u.path=f.normalizePath(l)):(u.path=s.path,i.params||(u.params=s.params,i.query||(u.query=s.query))))),null===u.path&&(u.path=r.alwaysNormalize?f.normalizePath(i.path):i.path),f.buildURLFromParts(u)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},"object"==typeof r&&"object"==typeof t?t.exports=f:"object"==typeof r?r.URLToolkit=f:a.URLToolkit=f},{}],3:[function(e,t,r){var y=arguments[3],m=arguments[4],E=arguments[5],b=JSON.stringify;t.exports=function(e,t){for(var r,a=Object.keys(E),i=0,n=a.length;i<n;i++){var s=a[i],o=E[s].exports;if(o===e||o&&o.default===e){r=s;break}}if(!r){r=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var l={},i=0,n=a.length;i<n;i++){l[s=a[i]]=s}m[r]=[Function(["require","module","exports"],"("+e+")(self)"),l]}var u=Math.floor(Math.pow(16,8)*Math.random()).toString(16),d={};d[r]=r,m[u]=[Function(["require"],"var f = require("+b(r)+");(f.default ? f.default : f)(self);"),d];var f={};!function e(t){f[t]=!0;for(var r in m[t][1]){var a=m[t][1][r];f[a]||e(a)}}(u);var c="("+y+")({"+Object.keys(f).map(function(e){return b(e)+":["+m[e][0]+","+b(m[e][1])+"]"}).join(",")+"},{},["+b(u)+"])",h=window.URL||window.webkitURL||window.mozURL||window.msURL,g=new Blob([c],{type:"text/javascript"});if(t&&t.bare)return g;var v=h.createObjectURL(g),p=new Worker(v);return p.objectURL=v,p}},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hlsDefaultConfig=void 0;var a=g(e(5)),i=g(e(8)),n=g(e(9)),s=g(e(10)),o=g(e(59)),l=g(e(7)),u=g(e(6)),d=g(e(50)),f=g(e(16)),c=g(e(15)),h=g(e(14));function g(e){return e&&e.__esModule?e:{default:e}}r.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:o.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:a.default,bufferController:i.default,capLevelController:n.default,fpsController:s.default,audioStreamController:u.default,audioTrackController:l.default,subtitleStreamController:h.default,subtitleTrackController:c.default,timelineController:f.default,cueHandler:d.default,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}},{10:10,14:14,15:15,16:16,5:5,50:50,59:59,6:6,7:7,8:8,9:9}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var E=o(e(35)),n=o(e(34)),b=o(e(37)),s=e(33),T=e(54),l=o(e(52));function o(e){return e&&e.__esModule?e:{default:e}}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,n.default),a(d,[{key:"destroy",value:function(){this.clearTimer(),n.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t,r,a,i,n,s,o=e.frag;"main"===o.type&&(this.timer||(this.timer=setInterval(this.onCheck,100)),this._bwEstimator||(t=this.hls,r=e.frag.level,a=t.levels[r].details.live,i=t.config,s=n=void 0,s=a?(n=i.abrEwmaFastLive,i.abrEwmaSlowLive):(n=i.abrEwmaFastVoD,i.abrEwmaSlowVoD),this._bwEstimator=new l.default(t,s,n,i.abrEwmaDefaultEstimate)),this.fragCurrent=o)}},{key:"_abandonRulesCheck",value:function(){var e=this.hls,t=e.media,r=this.fragCurrent,a=r.loader,i=e.minAutoLevel;if(!a||a.stats&&a.stats.aborted)return T.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var n=a.stats;if(t&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var s=performance.now()-n.trequest,o=Math.abs(t.playbackRate);if(s>500*r.duration/o){var l=e.levels,u=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/s),d=l[r.level],f=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,c=n.total?n.total:Math.max(n.loaded,Math.round(r.duration*f/8)),h=t.currentTime,g=(c-n.loaded)/u,v=(b.default.bufferInfo(t,h,e.config.maxBufferHole).end-h)/o;if(v<2*r.duration/o&&v<g){for(var p=void 0,y=void 0,y=r.level-1;i<y;y--){var m=l[y].realBitrate?Math.max(l[y].realBitrate,l[y].bitrate):l[y].bitrate;if((p=r.duration*m/(6.4*u))<v)break}p<g&&(T.logger.warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+p.toFixed(1)+"<"+g.toFixed(1)+":"+v.toFixed(1)),e.nextLoadLevel=y,this._bwEstimator.sample(s,n.loaded),a.abort(),this.clearTimer(),e.trigger(E.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:n}))}}}}},{key:"onFragLoaded",value:function(e){var t,r,a,i,n=e.frag;"main"!==n.type||isNaN(n.sn)||(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate&&(r=((t=this.hls.levels[n.level]).loaded?t.loaded.bytes:0)+e.stats.loaded,a=(t.loaded?t.loaded.duration:0)+e.frag.duration,t.loaded={bytes:r,duration:a},t.realBitrate=Math.round(8*r/a)),e.frag.bitrateTest&&((i=e.stats).tparsed=i.tbuffered=i.tload,this.onFragBuffered(e)))}},{key:"onFragBuffered",value:function(e){var t,r=e.stats,a=e.frag;!0===r.aborted||1!==a.loadCounter||"main"!==a.type||isNaN(a.sn)||a.bitrateTest&&r.tload!==r.tbuffered||(t=r.tparsed-r.trequest,T.logger.log("latency/loading/parsing/append/kbps:"+Math.round(r.tfirst-r.trequest)+"/"+Math.round(r.tload-r.tfirst)+"/"+Math.round(r.tparsed-r.tload)+"/"+Math.round(r.tbuffered-r.tparsed)+"/"+Math.round(8*r.loaded/(r.tbuffered-r.trequest))),this._bwEstimator.sample(t,r.loaded),r.bwEstimate=this._bwEstimator.getEstimate(),a.bitrateTest?this.bitrateTestDelay=t/1e3:this.bitrateTestDelay=0)}},{key:"onError",value:function(e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"_findBestLevel",value:function(e,t,r,a,i,n,s,o,l){for(var u=i;a<=u;u--){var d=l[u].details,f=d?d.totalduration/d.fragments.length:t,c=!!d&&d.live,h=void 0,h=u<=e?s*r:o*r,g=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,v=g*f/h;if(T.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(h)+"/"+g+"/"+f+"/"+n+"/"+v),g<h&&(!v||c&&!this.bitrateTestDelay||v<n))return u}return-1}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,a=e.config,i=e.minAutoLevel,n=e.media,s=this.lastLoadedFragLevel,o=this.fragCurrent?this.fragCurrent.duration:0,l=n?n.currentTime:0,u=n&&0!==n.playbackRate?Math.abs(n.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():a.abrEwmaDefaultEstimate,f=(b.default.bufferInfo(n,l,a.maxBufferHole).end-l)/u,c=this._findBestLevel(s,o,d,i,t,f,a.abrBandWidthFactor,a.abrBandWidthUpFactor,r);if(0<=c)return c;T.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var h,g=o?Math.min(o,a.maxStarvationDelay):a.maxStarvationDelay,v=a.abrBandWidthFactor,p=a.abrBandWidthUpFactor;return 0!=f||(h=this.bitrateTestDelay)&&(g=(o?Math.min(o,a.maxLoadingDelay):a.maxLoadingDelay)-h,T.logger.trace("bitrate test took "+Math.round(1e3*h)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*g)+" ms"),v=p=1),c=this._findBestLevel(s,o,d,i,t,f+g,v,p,r),Math.max(c,0)}}]),d);function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e,E.default.FRAG_LOADING,E.default.FRAG_LOADED,E.default.FRAG_BUFFERED,E.default.ERROR));return t.lastLoadedFragLevel=0,t._nextAutoLevel=-1,t.hls=e,t.timer=null,t._bwEstimator=null,t.onCheck=t._abandonRulesCheck.bind(t),t}r.default=u},{33:33,34:34,35:35,37:37,52:52,54:54}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var O=o(e(48)),I=o(e(37)),h=o(e(25)),P=o(e(35)),n=o(e(34)),c=o(e(38)),s=o(e(55)),C=e(33),x=e(54),F=e(51);function o(e){return e&&e.__esModule?e:{default:e}}var M={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,n.default),a(u,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),n.default.prototype.destroy.call(this),this.state=M.STOPPED}},{key:"onInitPtsFound",value:function(e){var t=e.id,r=e.frag.cc,a=e.initPTS;"main"===t&&(this.initPTS[r]=a,this.videoTrackCC=r,x.logger.log("InitPTS for cc:"+r+" found from video track:"+a),this.state===M.WAITING_INIT_PTS&&this.tick())}},{key:"startLoad",value:function(e){var t;this.tracks?(t=this.lastCurrentTime,this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),(this.fragLoadError=0)<t&&-1===e?(x.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=M.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=M.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()):(this.startPosition=e,this.state=M.STOPPED)}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=M.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var e,t,r,a=this.hls,i=a.config;switch(this.state){case M.ERROR:case M.PAUSED:case M.BUFFER_FLUSHING:break;case M.STARTING:this.state=M.WAITING_TRACK,this.loadedmetadata=!1;break;case M.IDLE:var n=this.tracks;if(!n)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var s=this.mediaBuffer?this.mediaBuffer:this.media,o=I.default.bufferInfo(s,e,i.maxBufferHole),l=o.len,u=o.end,d=this.fragPrevious,f=i.maxMaxBufferLength,c=this.audioSwitch,h=this.trackId;if((l<f||c)&&h<n.length){if(void 0===(r=n[h].details)){this.state=M.WAITING_TRACK;break}if(!c&&!r.live&&d&&d.sn===r.endSN&&(!this.media.seeking||this.media.duration-u<d.duration/2)){this.hls.trigger(P.default.BUFFER_EOS,{type:"audio"}),this.state=M.ENDED;break}var g=r.fragments,v=g.length,p=g[0].start,y=g[v-1].start+g[v-1].duration,m=void 0;if(c)if(r.live&&!r.PTSKnown)x.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),u=0;else if(u=e,r.PTSKnown&&e<p){if(!(o.end>p||o.nextStart))return;x.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=p+.05}if(r.initSegment&&!r.initSegment.data)m=r.initSegment;else if(u<=p){if(m=g[0],null!==this.videoTrackCC&&m.cc!==this.videoTrackCC&&(m=(0,F.findFragWithCC)(g,this.videoTrackCC)),r.live&&m.loadIdx&&m.loadIdx===this.fragLoadIdx){var E=o.nextStart?o.nextStart:p;return x.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(E+.05)),void(this.media.currentTime=E+.05)}}else{var b=void 0,T=i.maxFragLookUpTolerance,_=d?g[d.sn-g[0].sn+1]:void 0,k=function(e){var t=Math.min(T,e.duration);return e.start+e.duration-t<=u?1:e.start-t>u&&e.start?-1:0};(b=u<y?(y-T<u&&(T=0),_&&!k(_)?_:O.default.search(g,k)):g[v-1])&&(p=(m=b).start,d&&m.level===d.level&&m.sn===d.sn&&(m.sn<r.endSN?(m=g[m.sn+1-r.startSN],x.logger.log("SN just loaded, load next one: "+m.sn)):m=null))}if(m)if(m.decryptdata&&null!=m.decryptdata.uri&&null==m.decryptdata.key)x.logger.log("Loading key for "+m.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+h),this.state=M.KEY_LOADING,a.trigger(P.default.KEY_LOADING,{frag:m});else{if(x.logger.log("Loading "+m.sn+", cc: "+m.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+h+", currentTime:"+e+",bufferEnd:"+u.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,m.loadCounter){m.loadCounter++;var R=i.fragLoadingLoopThreshold;if(m.loadCounter>R&&Math.abs(this.fragLoadIdx-m.loadIdx)<R)return void a.trigger(P.default.ERROR,{type:C.ErrorTypes.MEDIA_ERROR,details:C.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:m})}else m.loadCounter=1;m.loadIdx=this.fragLoadIdx,this.fragCurrent=m,this.startFragRequested=!0,isNaN(m.sn)||(this.nextLoadPosition=m.start+m.duration),a.trigger(P.default.FRAG_LOADING,{frag:m}),this.state=M.FRAG_LOADING}}break;case M.WAITING_TRACK:(t=this.tracks[this.trackId])&&t.details&&(this.state=M.IDLE);break;case M.FRAG_LOADING_WAITING_RETRY:var S=performance.now(),A=this.retryDate,L=(s=this.media)&&s.seeking;(!A||A<=S||L)&&(x.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=M.IDLE);break;case M.WAITING_INIT_PTS:if(void 0===this.initPTS[this.videoTrackCC])break;var w,D=this.waitingFragment;D?(w=D.frag.cc,this.videoTrackCC!==w?(x.logger.warn("Waiting fragment CC ("+w+") does not match video track CC ("+this.videoTrackCC+")"),this.waitingFragment=null,this.state=M.IDLE):(this.state=M.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)):this.state=M.IDLE;break;case M.STOPPED:case M.FRAG_LOADING:case M.PARSING:case M.PARSED:case M.ENDED:}}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(x.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){this.state===M.ENDED&&(this.state=M.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(e){x.logger.log("audio tracks updated"),this.tracks=e.audioTracks}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=M.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=M.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()}},{key:"onAudioTrackLoaded",value:function(e){var t,r,a=e.details,i=e.id,n=this.tracks[i],s=a.totalduration,o=0;x.logger.log("track "+i+" loaded ["+a.startSN+","+a.endSN+"],duration:"+s),a.live?(t=n.details)&&0<a.fragments.length?(c.default.mergeDetails(t,a),o=a.fragments[0].start,a.PTSKnown?x.logger.log("live audio playlist sliding:"+o.toFixed(3)):x.logger.log("live audio playlist - outdated PTS, unknown sliding")):(a.PTSKnown=!1,x.logger.log("live audio playlist - first load, unknown sliding")):a.PTSKnown=!1,n.details=a,this.startFragRequested||(-1===this.startPosition&&(r=a.startTimeOffset,isNaN(r)?this.startPosition=0:(x.logger.log("start time offset found in playlist, adjust startPosition to "+r),this.startPosition=r)),this.nextLoadPosition=this.startPosition),this.state===M.WAITING_TRACK&&(this.state=M.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===M.KEY_LOADING&&(this.state=M.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t,r,a,i,n,s,o,l,u,d,f=this.fragCurrent,c=e.frag;this.state===M.FRAG_LOADING&&f&&"audio"===c.type&&c.level===f.level&&c.sn===f.sn&&(a=(r=(t=this.tracks[this.trackId]).details).totalduration,i=f.level,n=f.sn,s=f.cc,o=this.config.defaultAudioCodec||t.audioCodec||"mp4a.40.2",l=this.stats=e.stats,"initSegment"===n?(this.state=M.IDLE,l.tparsed=l.tbuffered=performance.now(),r.initSegment.data=e.payload,this.hls.trigger(P.default.FRAG_BUFFERED,{stats:l,frag:f,id:"audio"}),this.tick()):(this.state=M.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new h.default(this.hls,"audio")),u=this.initPTS[s],d=r.initSegment?r.initSegment.data:[],r.initSegment||void 0!==u?(this.pendingBuffering=!0,x.logger.log("Demuxing "+n+" of ["+r.startSN+" ,"+r.endSN+"],track "+i),this.demuxer.push(e.payload,d,o,null,f,a,!1,u)):(x.logger.log("unknown video PTS for continuity counter "+s+", waiting for video PTS before demuxing audio frag "+n+" of ["+r.startSN+" ,"+r.endSN+"],track "+i),this.waitingFragment=e,this.state=M.WAITING_INIT_PTS))),this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t,r,a,i,n=this.fragCurrent,s=e.frag;n&&"audio"===e.id&&s.sn===n.sn&&s.level===n.level&&this.state===M.PARSING&&(r=void 0,(t=e.tracks).video&&delete t.video,(r=t.audio)&&(r.levelCodec=r.codec,r.id=e.id,this.hls.trigger(P.default.BUFFER_CODECS,t),x.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]"),(a=r.initSegment)&&(i={type:"audio",data:a,parent:"audio",content:"initSegment"},this.audioSwitch?this.pendingData=[i]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(P.default.BUFFER_APPENDING,i))),this.tick()))}},{key:"onFragParsingData",value:function(t){var e,r,a,i,n,s,o,l,u=this,d=this.fragCurrent,f=t.frag;d&&"audio"===t.id&&"audio"===t.type&&f.sn===d.sn&&f.level===d.level&&this.state===M.PARSING&&(e=this.trackId,r=this.tracks[e],a=this.hls,isNaN(t.endPTS)&&(t.endPTS=t.startPTS+d.duration,t.endDTS=t.startDTS+d.duration),x.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),c.default.updateFragPTSDTS(r.details,d,t.startPTS,t.endPTS),i=this.audioSwitch,n=this.media,s=!1,i&&n&&(n.readyState?(o=n.currentTime,x.logger.log("switching audio track : currentTime:"+o),o>=t.startPTS&&(x.logger.log("switching audio track : flushing all audio"),this.state=M.BUFFER_FLUSHING,a.trigger(P.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),s=!0,this.audioSwitch=!1,a.trigger(P.default.AUDIO_TRACK_SWITCHED,{id:e}))):(this.audioSwitch=!1,a.trigger(P.default.AUDIO_TRACK_SWITCHED,{id:e}))),l=this.pendingData,this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&l.push({type:t.type,data:e,parent:"audio",content:"data"})}),!s&&l.length&&(l.forEach(function(e){u.state===M.PARSING&&(u.pendingBuffering=!0,u.hls.trigger(P.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick())}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===M.PARSING&&(this.stats.tparsed=performance.now(),this.state=M.PARSED,this._checkAppendedParsed())}},{key:"onBufferCreated",value:function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(e){var t;"audio"===e.parent&&((t=this.state)!==M.PARSING&&t!==M.PARSED||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed()))}},{key:"_checkAppendedParsed",value:function(){var e,t,r,a;this.state!==M.PARSED||this.appended&&this.pendingBuffering||(e=this.fragCurrent,t=this.stats,r=this.hls,e&&(this.fragPrevious=e,t.tbuffered=performance.now(),r.trigger(P.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"}),a=this.mediaBuffer?this.mediaBuffer:this.media,x.logger.log("audio buffered : "+s.default.toString(a.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(P.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=M.IDLE),this.tick())}},{key:"onError",value:function(e){var t,r,a,i,n,s,o=e.frag;if(!o||"audio"===o.type)switch(e.details){case C.ErrorDetails.FRAG_LOAD_ERROR:case C.ErrorDetails.FRAG_LOAD_TIMEOUT:e.fatal||((t=this.fragLoadError)?t++:t=1,t<=(r=this.config).fragLoadingMaxRetry?(this.fragLoadError=t,o.loadCounter=0,a=Math.min(Math.pow(2,t-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout),x.logger.warn("audioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=performance.now()+a,this.state=M.FRAG_LOADING_WAITING_RETRY):(x.logger.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=M.ERROR));break;case C.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case C.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case C.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case C.ErrorDetails.KEY_LOAD_ERROR:case C.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==M.ERROR&&(this.state=e.fatal?M.ERROR:M.IDLE,x.logger.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case C.ErrorDetails.BUFFER_FULL_ERROR:"audio"!==e.parent||this.state!==M.PARSING&&this.state!==M.PARSED||(i=this.mediaBuffer,n=this.media.currentTime,i&&I.default.isBuffered(i,n)&&I.default.isBuffered(i,n+.5)?((s=this.config).maxMaxBufferLength>=s.maxBufferLength&&(s.maxMaxBufferLength/=2,x.logger.warn("audio:reduce max buffer length to "+s.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*s.fragLoadingLoopThreshold),this.state=M.IDLE):(x.logger.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=M.BUFFER_FLUSHING,this.hls.trigger(P.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})))}}},{key:"onBufferFlushed",value:function(){var t=this,e=this.pendingData;e&&e.length?(x.logger.log("appending pending audio data on Buffer Flushed"),e.forEach(function(e){t.hls.trigger(P.default.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=M.PARSED):(this.state=M.IDLE,this.fragPrevious=null,this.tick())}},{key:"state",set:function(e){var t;this.state!==e&&(t=this.state,this._state=e,x.logger.log("audio stream:"+t+"->"+e))},get:function(){return this._state}}]),u);function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,P.default.MEDIA_ATTACHED,P.default.MEDIA_DETACHING,P.default.AUDIO_TRACKS_UPDATED,P.default.AUDIO_TRACK_SWITCHING,P.default.AUDIO_TRACK_LOADED,P.default.KEY_LOADED,P.default.FRAG_LOADED,P.default.FRAG_PARSING_INIT_SEGMENT,P.default.FRAG_PARSING_DATA,P.default.FRAG_PARSED,P.default.ERROR,P.default.BUFFER_CREATED,P.default.BUFFER_APPENDED,P.default.BUFFER_FLUSHED,P.default.INIT_PTS_FOUND));return t.config=e.config,t.audioCodecSwap=!1,t.ticks=0,t._state=M.STOPPED,t.ontick=t.tick.bind(t),t.initPTS=[],t.waitingFragment=null,t.videoTrackCC=null,t}r.default=l},{25:25,33:33,34:34,35:35,37:37,38:38,48:48,51:51,54:54,55:55}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=l(e(35)),n=l(e(34)),o=e(54);function l(e){return e&&e.__esModule?e:{default:e}}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,n.default),a(d,[{key:"destroy",value:function(){n.default.prototype.destroy.call(this)}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){this.updateTrack(this.trackId)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,r=e.audioTracks||[],a=!1;this.tracks=r,this.hls.trigger(s.default.AUDIO_TRACKS_UPDATED,{audioTracks:r});var i=0;r.forEach(function(e){return e.default?(t.audioTrack=i,void(a=!0)):void i++}),!1===a&&r.length&&(o.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(e){e.id<this.tracks.length&&(o.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setAudioTrackInternal",value:function(e){var t,r,a,i,n;0<=e&&e<this.tracks.length&&(this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,o.logger.log("switching to audioTrack "+e),t=this.tracks[e],r=this.hls,i={id:e,type:t.type,url:a=t.url},r.trigger(s.default.AUDIO_TRACK_SWITCH,i),r.trigger(s.default.AUDIO_TRACK_SWITCHING,i),n=t.details,!a||void 0!==n&&!0!==n.live||(o.logger.log("(re)loading playlist for audioTrack "+e),r.trigger(s.default.AUDIO_TRACK_LOADING,{url:a,id:e})))}},{key:"updateTrack",value:function(e){var t,r,a;0<=e&&e<this.tracks.length&&(this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,o.logger.log("updating audioTrack "+e),r=(t=this.tracks[e]).url,a=t.details,!r||void 0!==a&&!0!==a.live||(o.logger.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(s.default.AUDIO_TRACK_LOADING,{url:r,id:e})))}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),d);function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e,s.default.MANIFEST_LOADING,s.default.MANIFEST_LOADED,s.default.AUDIO_TRACK_LOADED));return t.ticks=0,t.ontick=t.tick.bind(t),t}r.default=u},{34:34,35:35,54:54}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=s(e(35)),n=s(e(34)),f=e(54),u=e(33);function s(e){return e&&e.__esModule?e:{default:e}}var o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,n.default),a(d,[{key:"destroy",value:function(){n.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var a=this.sourceBuffer.audio;if(.1<Math.abs(a.timestampOffset-e.start)){var i=a.updating;try{a.abort()}catch(e){i=!0,f.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(f.logger.warn("change mpeg audio timestamp offset from "+a.timestampOffset+" to "+e.start),a.timestampOffset=e.start)}}}},{key:"onManifestParsed",value:function(e){var t=e.audio,r=e.video,a=0;e.altAudio&&(t||r)&&(a=(t?1:0)+(r?1:0),f.logger.log(a+" sourceBuffer(s) expected")),this.sourceBufferNb=a}},{key:"onMediaAttaching",value:function(e){var t,r=this.media=e.media;r&&(t=this.mediaSource=new MediaSource,this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),t.addEventListener("sourceopen",this.onmso),t.addEventListener("sourceended",this.onmse),t.addEventListener("sourceclose",this.onmsc),r.src=URL.createObjectURL(t))}},{key:"onMediaDetaching",value:function(){f.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){f.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(l.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){f.logger.log("media source opened"),this.hls.trigger(l.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){f.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){f.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){var e;this.audioTimestampOffset&&(e=this.sourceBuffer.audio,f.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset),this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var r=this.parent,t=this.segments.reduce(function(e,t){return t.parent===r?e+1:e},0);this.hls.trigger(l.default.BUFFER_APPENDED,{parent:r,pending:t}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){f.logger.error("sourceBuffer error:",e),this.hls.trigger(l.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var a in e)if(!t[a]){var i=e[a],n=i.levelCodec||i.codec,s=i.container+";codecs="+n;f.logger.log("creating sourceBuffer("+s+")");try{var o=t[a]=r.addSourceBuffer(s);o.addEventListener("updateend",this.onsbue),o.addEventListener("error",this.onsbe),this.tracks[a]={codec:n,container:i.container},i.buffer=o}catch(e){f.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(l.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:s})}}this.hls.trigger(l.default.BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){f.logger.error("sourceBuffer error:",e.event),this.hls.trigger(l.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferEos",value:function(e){var t=this.sourceBuffer,r=e.type;for(var a in t)r&&a!==r||t[a].ended||(t[a].ended=!0,f.logger.log(a+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var a=e[r];if(!a.ended)return;if(a.updating)return void(this._needsEos=!0)}f.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){f.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,r=this.sourceBuffer,a=this._levelDuration;if(null!==a&&e&&t&&r&&0!==e.readyState&&"open"===t.readyState){for(var i in r)if(r[i].updating)return;null===this._msDuration&&(this._msDuration=t.duration);var n=e.duration;(a>this._msDuration&&n<a||n===1/0||isNaN(n))&&(f.logger.log("Updating mediasource duration to "+a.toFixed(3)),this._msDuration=t.duration=a)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var a in r)t+=r[a].buffered.length}catch(e){f.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(l.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var t=this.hls,e=this.sourceBuffer,r=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void f.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var a=r.shift();try{var i=e[a.type];i?i.updating?r.unshift(a):(i.ended=!1,this.parent=a.parent,i.appendBuffer(a.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){f.logger.error("error while trying to append buffer:"+e.message),r.unshift(a);var n={type:u.ErrorTypes.MEDIA_ERROR,parent:a.parent};if(22===e.code)return this.segments=[],n.details=u.ErrorDetails.BUFFER_FULL_ERROR,n.fatal=!1,void t.trigger(l.default.ERROR,n);if(this.appendError?this.appendError++:this.appendError=1,n.details=u.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry)return f.logger.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],n.fatal=!0,void t.trigger(l.default.ERROR,n);n.fatal=!1,t.trigger(l.default.ERROR,n)}}}}},{key:"flushBuffer",value:function(e,t,r){var a,i,n,s,o,l,u=this.sourceBuffer;if(Object.keys(u).length){if(f.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var d in u)if(!r||d===r){if((a=u[d]).ended=!1,a.updating)return f.logger.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<a.buffered.length;i++)if(n=a.buffered.start(i),s=a.buffered.end(i),l=-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(o=e,t):(o=Math.max(n,e),Math.min(s,t)),.5<Math.min(l,s)-o)return this.flushBufferCounter++,f.logger.log("flush "+d+" ["+o+","+l+"], of ["+n+","+s+"], pos:"+this.media.currentTime),a.remove(o,l),!1}catch(e){f.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else f.logger.warn("abort flushing too many retries");f.logger.log("buffer flushed")}return!0}}]),d);function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.MANIFEST_PARSED,l.default.BUFFER_RESET,l.default.BUFFER_APPENDING,l.default.BUFFER_CODECS,l.default.BUFFER_EOS,l.default.BUFFER_FLUSHING,l.default.LEVEL_PTS_UPDATED,l.default.LEVEL_UPDATED));return t._msDuration=null,t._levelDuration=null,t.onsbue=t.onSBUpdateEnd.bind(t),t.onsbe=t.onSBUpdateError.bind(t),t.pendingTracks={},t.tracks={},t}r.default=o},{33:33,34:34,35:35,54:54}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n=s(e(35));function s(e){return e&&e.__esModule?e:{default:e}}var o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,s(e(34)).default),a(l,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){l.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){var e,t;!this.media||(e=this.levels?this.levels.length:0)&&((t=this.hls).autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping)}},{key:"getMaxLevel",value:function(r){var a=this;if(!this.levels)return-1;var e=this.levels.filter(function(e,t){return l.isLevelAllowed(t,a.restrictedLevels)&&t<=r});return l.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)}},{key:"mediaWidth",get:function(){var e=void 0,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=l.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=l.contentScaleFactor),e}}],[{key:"isLevelAllowed",value:function(e,t){return-1===(1<arguments.length&&void 0!==t?t:[]).indexOf(e)}},{key:"getMaxLevelByMediaSize",value:function(e,t,r){if(!e||e&&!e.length)return-1;for(var a,i,n=e.length-1,s=0;s<e.length;s+=1){var o=e[s];if((o.width>=t||o.height>=r)&&(a=o,!(i=e[s+1])||(a.width!==i.width||a.height!==i.height))){n=s;break}}return n}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,n.default.FPS_DROP_LEVEL_CAPPING,n.default.MEDIA_ATTACHING,n.default.MANIFEST_PARSED))}r.default=o},{34:34,35:35}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=s(e(35)),n=s(e(34)),f=e(54);function s(e){return e&&e.__esModule?e:{default:e}}var o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,n.default),a(l,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))}},{key:"checkFPS",value:function(e,t,r){var a,i,n,s,o,l,u=performance.now();t&&(this.lastTime&&(a=u-this.lastTime,i=r-this.lastDroppedFrames,n=t-this.lastDecodedFrames,s=1e3*i/a,(o=this.hls).trigger(d.default.FPS_DROP,{currentDropped:i,currentDecoded:n,totalDroppedFrames:r}),0<s&&i>o.config.fpsDroppedMonitoringThreshold*n&&(l=o.currentLevel,f.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+l),0<l&&(-1===o.autoLevelCapping||o.autoLevelCapping>=l)&&(--l,o.trigger(d.default.FPS_DROP_LEVEL_CAPPING,{level:l,droppedLevel:o.currentLevel}),o.autoLevelCapping=l,o.streamController.nextLevelSwitch()))),this.lastTime=u,this.lastDroppedFrames=r,this.lastDecodedFrames=t)}},{key:"checkFPSInterval",value:function(){var e,t=this.video;t&&(this.isVideoPlaybackQualityAvailable?(e=t.getVideoPlaybackQuality(),this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)):this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount))}}]),l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,d.default.MEDIA_ATTACHING))}r.default=o},{34:34,35:35,54:54}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n=o(e(35)),s=o(e(34)),f=o(e(27));function o(e){return e&&e.__esModule?e:{default:e}}var l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,s.default),a(u,[{key:"destroy",value:function(){s.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){this.media=e.media,this.media&&(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden")}},{key:"onMediaDetaching",value:function(){this.media=void 0}},{key:"onFragParsingMetadata",value:function(e){for(var t=e.frag,r=e.samples,a=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var n=f.default.getID3Frames(r[i].data);if(n){var s=r[i].pts,o=i<r.length-1?r[i+1].pts:t.endPTS;s===o&&(o+=1e-4);for(var l=0;l<n.length;l++){var u,d=n[l];f.default.isTimeStampFrame(d)||((u=new a(s,o,"")).value=d,this.id3Track.addCue(u))}}}}}]),u);function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,n.default.MEDIA_ATTACHED,n.default.MEDIA_DETACHING,n.default.FRAG_PARSING_METADATA));return t.id3Track=void 0,t.media=void 0,t}r.default=l},{27:27,34:34,35:35}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var f=s(e(35)),n=s(e(34)),c=e(54),h=e(33),u=s(e(37));function s(e){return e&&e.__esModule?e:{default:e}}var o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,n.default),a(l,[{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:"startLoad",value:function(){this.canload=!0;var e=this._levels;e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){function a(e,t){return MediaSource.isTypeSupported(e+"/mp4;codecs="+t)}var t,r=[],i=[],n={},s=!1,o=!1,l=this.hls,u=/chrome|firefox/.test(navigator.userAgent.toLowerCase());if(e.levels.forEach(function(e){e.videoCodec&&(s=!0),u&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(o=!0);var t=n[e.bitrate];void 0===t?(n[e.bitrate]=r.length,e.url=[e.url],e.urlId=0,r.push(e)):r[t].url.push(e.url)}),s&&o?r.forEach(function(e){e.videoCodec&&i.push(e)}):i=r,(i=i.filter(function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||a("audio",t))&&(!r||a("video",r))})).length){t=i[0].bitrate,i.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=i;for(var d=0;d<i.length;d++)if(i[d].bitrate===t){this._firstLevel=d,c.logger.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+t);break}l.trigger(f.default.MANIFEST_PARSED,{levels:i,firstLevel:this._firstLevel,stats:e.stats,audio:o,video:s,altAudio:0<e.audioTracks.length})}else l.trigger(f.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:l.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t,r,a,i,n=this._levels,s=this.hls;0<=e&&e<n.length?(this.timer&&(clearTimeout(this.timer),this.timer=null),this._level!==e&&(c.logger.log("switching to level "+e),(t=n[this._level=e]).level=e,s.trigger(f.default.LEVEL_SWITCH,t),s.trigger(f.default.LEVEL_SWITCHING,t)),(a=(r=n[e]).details)&&!0!==a.live||(i=r.urlId,s.trigger(f.default.LEVEL_LOADING,{url:r.url[i],level:e,id:i}))):s.trigger(f.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(!e.fatal){var t,r,a,i=e.details,n=this.hls,s=void 0,o=void 0,l=!1;switch(i){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:s=e.frag.level;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:s=e.context.level,l=!0;break;case h.ErrorDetails.REMUX_ALLOC_ERROR:s=e.level}void 0!==s&&((o=this._levels[s]).loadError?o.loadError++:o.loadError=1,1<(t=o.url.length)&&o.loadError<t?(o.urlId=(o.urlId+1)%t,o.details=void 0,c.logger.warn("level controller,"+i+" for level "+s+": switching to redundant stream id "+o.urlId)):-1===this._manualLevel&&s?(c.logger.warn("level controller,"+i+": switch-down for next fragment"),n.nextAutoLevel=Math.max(0,s-1)):o&&o.details&&o.details.live?(c.logger.warn("level controller,"+i+" on live stream, discard"),l&&(this._level=void 0)):i!==h.ErrorDetails.LEVEL_LOAD_ERROR&&i!==h.ErrorDetails.LEVEL_LOAD_TIMEOUT||((r=n.media)&&u.default.isBuffered(r,r.currentTime)&&u.default.isBuffered(r,r.currentTime+.5)?(a=n.config.levelLoadingRetryDelay,c.logger.warn("level controller,"+i+", but media buffered, retry in "+a+"ms"),this.timer=setTimeout(this.ontick,a),e.levelRetry=!0):(c.logger.error("cannot recover "+i+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),e.fatal=!0)))}}},{key:"onFragLoaded",value:function(e){var t,r=e.frag;!r||"main"!==r.type||(t=this._levels[r.level])&&(t.loadError=0)}},{key:"onLevelLoaded",value:function(e){var t,r,a,i,n=e.level;n===this._level&&((t=this._levels[n]).loadError=0,(r=e.details).live?(a=1e3*(r.averagetargetduration?r.averagetargetduration:r.targetduration),(i=t.details)&&r.endSN===i.endSN&&(a/=2,c.logger.log("same live playlist, reload twice faster")),a-=performance.now()-e.stats.trequest,a=Math.max(1e3,Math.round(a)),c.logger.log("live playlist, reload in "+a+" ms"),this.timer=setTimeout(this.ontick,a)):this.timer=null)}},{key:"tick",value:function(){var e,t,r=this._level;void 0===r||!this.canload||(e=this._levels[r])&&e.url&&(t=e.urlId,this.hls.trigger(f.default.LEVEL_LOADING,{url:e.url[t],level:r,id:t}))}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0!==this._startLevel)return this._startLevel;var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this._manualLevel&&(this.hls.nextAutoLevel=e)}}]),l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,f.default.MANIFEST_LOADED,f.default.LEVEL_LOADED,f.default.FRAG_LOADED,f.default.ERROR));return t.ontick=t.tick.bind(t),t._manualLevel=-1,t}r.default=o},{33:33,34:34,35:35,37:37,54:54}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=o(e(48)),b=o(e(37)),g=o(e(25)),T=o(e(35)),n=o(e(34)),l=o(e(38)),s=o(e(55)),_=e(33),k=e(54);function o(e){return e&&e.__esModule?e:{default:e}}var v={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,n.default),a(d,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),n.default.prototype.destroy.call(this),this.state=v.STOPPED}},{key:"startLoad",value:function(e){var t,r,a;this.levels?(t=this.lastCurrentTime,r=this.hls,this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,this.startFragRequested||(-1===(a=r.startLevel)&&(a=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=a,this.loadedmetadata=!1),0<t&&-1===e&&(k.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=v.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this.forceStartLoad=!0,this.state=v.STOPPED)}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=v.STOPPED,this.forceStartLoad=!1}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case v.ERROR:break;case v.BUFFER_FLUSHING:this.fragLoadError=0;break;case v.IDLE:this._doTickIdle();break;case v.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=v.IDLE);break;case v.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),r=this.retryDate;(!r||r<=t||this.media&&this.media.seeking)&&(k.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=v.IDLE);break;case v.ERROR:case v.STOPPED:case v.FRAG_LOADING:case v.PARSING:case v.PARSED:case v.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,r=this.media;if(void 0===this.levelLastLoaded||r||!this.startFragRequested&&t.startFragPrefetch){var a=void 0,a=this.loadedmetadata?r.currentTime:this.nextLoadPosition,i=e.nextLoadLevel,n=this.levels[i];if(n){var s=n.bitrate,o=void 0,o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength;o=Math.min(o,t.maxMaxBufferLength);var l=b.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,a,t.maxBufferHole),u=l.len;if(!(o<=u)){k.logger.trace("buffer length of "+u.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var d=n.details;if(void 0===d||d.live&&this.levelLastLoaded!==i)this.state=v.WAITING_LEVEL;else{var f=this.fragPrevious;if(!d.live&&f&&f.sn===d.endSN&&u&&!l.nextStart)if(Math.min(r.duration,f.start+f.duration)-Math.max(l.end,f.start)<=Math.max(.2,f.duration)){var c={};return this.altAudio&&(c.type="video"),this.hls.trigger(T.default.BUFFER_EOS,c),void(this.state=v.ENDED)}this._fetchPayloadOrEos(a,l,d)}}}}}},{key:"_fetchPayloadOrEos",value:function(e,t,r){var a=this.fragPrevious,i=this.level,n=r.fragments,s=n.length;if(0!==s){var o=n[0].start,l=n[s-1].start+n[s-1].duration,u=t.end,d=void 0;if(r.initSegment&&!r.initSegment.data)d=r.initSegment;else if(r.live){var f=this.config.initialLiveManifestSize;if(s<f)return void k.logger.warn("Can not start playback of a level, reason: not enough fragments "+s+" < "+f);if(null===(d=this._ensureFragmentAtLivePoint(r,u,o,l,a,n,s)))return}else u<o&&(d=n[0]);(d=d||this._findFragment(o,a,s,n,u,l,r))&&this._loadFragmentOrKey(d,i,r,e,u)}}},{key:"_ensureFragmentAtLivePoint",value:function(e,t,r,a,i,n,s){var o,l,u=this.hls.config,d=this.media,f=void 0,c=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*e.targetduration;return t<Math.max(r-u.maxFragLookUpTolerance,a-c)&&(o=this.liveSyncPosition=this.computeLivePosition(r,e),k.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+o.toFixed(3)),t=o,d&&d.readyState&&d.duration>o&&(d.currentTime=o),this.nextLoadPosition=o),e.PTSKnown&&a<t&&d&&d.readyState?null:(this.startFragRequested&&!e.PTSKnown&&(!i||(l=i.sn+1)>=e.startSN&&l<=e.endSN&&(f=n[l-e.startSN],k.logger.log("live playlist, switching playlist, load frag with next SN: "+f.sn)),f||(f=n[Math.min(s-1,Math.round(s/2))],k.logger.log("live playlist, switching playlist, unknown, load middle frag : "+f.sn))),f)}},{key:"_findFragment",value:function(e,t,r,a,i,n,s){function o(e){var t=Math.min(p,e.duration);return e.start+e.duration-t<=i?1:e.start-t>i&&e.start?-1:0}var l,u,d,f,c,h=this.hls.config,g=void 0,v=void 0,p=h.maxFragLookUpTolerance,y=t?a[t.sn-a[0].sn+1]:void 0;return(v=i<n?(n-p<i&&(p=0),y&&!o(y)?y:m.default.search(a,o)):a[r-1])&&(l=(g=v).sn-s.startSN,u=t&&g.level===t.level,d=a[l-1],f=a[1+l],t&&g.sn===t.sn&&(u&&!g.backtracked?g.sn<s.endSN?(c=t.deltaPTS)&&c>h.maxBufferHole&&t.dropped&&l?(g=d,k.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(g=f,k.logger.log("SN just loaded, load next one: "+g.sn)):g=null:g.backtracked&&(f&&f.backtracked?(k.logger.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+g.sn+". Loading fragment "+f.sn),g=f):(k.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),g.dropped=0,d?(d.loadCounter&&d.loadCounter--,(g=d).backtracked=!0):l&&(g=null))))),g}},{key:"_loadFragmentOrKey",value:function(e,t,r,a,i){var n=this.hls,s=n.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(k.logger.log("Loading "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t+", currentTime:"+a.toFixed(3)+",bufferEnd:"+i.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var o=s.fragLoadingLoopThreshold;if(e.loadCounter>o&&Math.abs(this.fragLoadIdx-e.loadIdx)<o)return void n.trigger(T.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||(this.nextLoadPosition=e.start+e.duration),e.autoLevel=n.autoLevelEnabled,e.bitrateTest=this.bitrateTest,n.trigger(T.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new g.default(n,"main")),void(this.state=v.FRAG_LOADING)}k.logger.log("Loading key for "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t),this.state=v.KEY_LOADING,n.trigger(T.default.KEY_LOADING,{frag:e})}},{key:"getBufferedFrag",value:function(t){return m.default.search(this._bufferedFrags,function(e){return t<e.startPTS?-1:t>e.endPTS?1:0})}},{key:"followingBufferedFrag",value:function(e){return e?this.getBufferedFrag(e.endPTS+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,r,a,i=this.media;i&&i.readyState&&!1===i.seeking&&((a=i.currentTime)>+this.lastCurrentTime&&(this.lastCurrentTime=a),b.default.isBuffered(i,a)?e=this.getBufferedFrag(a):b.default.isBuffered(i,a+.1)&&(e=this.getBufferedFrag(a+.1)),!e||(t=e)!==this.fragPlaying&&(this.hls.trigger(T.default.FRAG_CHANGED,{frag:t}),r=t.level,this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(T.default.LEVEL_SWITCHED,{level:r}),this.fragPlaying=t))}},{key:"immediateLevelSwitch",value:function(){var e,t;k.logger.log("immediateLevelSwitch"),this.immediateSwitch||(this.immediateSwitch=!0,t=void 0,(e=this.media)?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t);var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,b.default.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e,t,r,a,i,n,s,o=this.media;o&&o.readyState&&(s=e=i=void 0,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,(e=this.getBufferedFrag(o.currentTime))&&1<e.startPTS&&this.flushMainBuffer(0,e.startPTS-1),i=o.paused?0:(t=this.hls.nextLoadLevel,r=this.levels[t],(a=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*r.bitrate/(1e3*a)+1:0),(s=(s=this.getBufferedFrag(o.currentTime+i))&&this.followingBufferedFrag(s))&&((n=this.fragCurrent)&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(s.maxStartPTS,Number.POSITIVE_INFINITY)))}},{key:"flushMainBuffer",value:function(e,t){this.state=v.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(T.default.BUFFER_FLUSHING,r)}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(k.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,r=this.config;isNaN(t)||k.logger.log("media seeking to "+t.toFixed(3));var a,i,n,s,o=this.mediaBuffer?this.mediaBuffer:e,l=b.default.bufferInfo(o,t,this.config.maxBufferHole);this.state===v.FRAG_LOADING?(a=this.fragCurrent,0===l.len&&a&&(i=r.maxFragLookUpTolerance,n=a.start-i,s=a.start+a.duration+i,t<n||s<t?(a.loader&&(k.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=v.IDLE):k.logger.log("seeking outside of buffer but within currently loaded fragment range"))):this.state===v.ENDED&&(0===l.len&&(this.fragPrevious=0),this.state=v.IDLE),e&&(this.lastCurrentTime=t),this.state!==v.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",value:function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||k.logger.log("media seeked to "+t.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){k.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){k.logger.log("trigger BUFFER_RESET"),this.hls.trigger(T.default.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,r=!1,a=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(a=!0))}),this.audioCodecSwitch=r&&a,this.audioCodecSwitch&&k.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)}},{key:"onLevelLoaded",value:function(e){var t,r,a=e.details,i=e.level,n=this.levels[i],s=a.totalduration,o=0;k.logger.log("level "+i+" loaded ["+a.startSN+","+a.endSN+"],duration:"+s),this.levelLastLoaded=i,a.live?(t=n.details)&&0<a.fragments.length?(l.default.mergeDetails(t,a),o=a.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,t),a.PTSKnown?k.logger.log("live playlist sliding:"+o.toFixed(3)):k.logger.log("live playlist - outdated PTS, unknown sliding")):(a.PTSKnown=!1,k.logger.log("live playlist - first load, unknown sliding")):a.PTSKnown=!1,n.details=a,this.hls.trigger(T.default.LEVEL_UPDATED,{details:a,level:i}),!1===this.startFragRequested&&(-1!==this.startPosition&&-1!==this.lastCurrentTime||(r=a.startTimeOffset,isNaN(r)?a.live?(this.startPosition=this.computeLivePosition(o,a),k.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(r<0&&(k.logger.log("negative start time offset "+r+", count from end of last fragment"),r=o+s+r),k.logger.log("start time offset found in playlist, adjust startPosition to "+r),this.startPosition=r),this.lastCurrentTime=this.startPosition),this.nextLoadPosition=this.startPosition),this.state===v.WAITING_LEVEL&&(this.state=v.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===v.KEY_LOADING&&(this.state=v.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t,r,a,i,n,s,o,l,u,d,f,c=this.fragCurrent,h=e.frag;this.state===v.FRAG_LOADING&&c&&"main"===h.type&&h.level===c.level&&h.sn===c.sn&&(t=e.stats,a=(r=this.levels[c.level]).details,k.logger.log("Loaded  "+c.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+c.level),this.bitrateTest=!1,this.stats=t,!0===h.bitrateTest&&this.hls.nextLoadLevel?(this.state=v.IDLE,this.startFragRequested=!1,t.tparsed=t.tbuffered=performance.now(),this.hls.trigger(T.default.FRAG_BUFFERED,{stats:t,frag:c,id:"main"}),this.tick()):"initSegment"===h.sn?(this.state=v.IDLE,t.tparsed=t.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(T.default.FRAG_BUFFERED,{stats:t,frag:c,id:"main"}),this.tick()):(this.state=v.PARSING,i=a.totalduration,n=c.level,s=c.sn,o=this.config.defaultAudioCodec||r.audioCodec,this.audioCodecSwap&&(k.logger.log("swapping playlist audio codec"),void 0===o&&(o=this.lastAudioCodec),o=o&&(-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,k.logger.log("Parsing "+s+" of ["+a.startSN+" ,"+a.endSN+"],level "+n+", cc "+c.cc),l=(l=this.demuxer)||(this.demuxer=new g.default(this.hls,"main")),d=!((u=this.media)&&u.seeking)&&(a.PTSKnown||!a.live),f=a.initSegment?a.initSegment.data:[],l.push(e.payload,f,o,r.videoCodec,c,i,d,void 0))),this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===v.PARSING){var a,i,n,s,o=e.tracks;for(a in o.audio&&this.altAudio&&delete o.audio,(i=o.audio)&&(n=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase(),n&&this.audioCodecSwap&&(k.logger.log("swapping playlist audio codec"),n=-1!==n.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===s.indexOf("firefox")&&(n="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(n="mp4a.40.2",k.logger.log("Android: force audio codec to "+n)),i.levelCodec=n,i.id=e.id),(i=o.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(T.default.BUFFER_CODECS,o),o){i=o[a],k.logger.log("main track:"+a+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var l=i.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(T.default.BUFFER_APPENDING,{type:a,data:l,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(t){var r=this,e=this.fragCurrent,a=t.frag;if(e&&"main"===t.id&&a.sn===e.sn&&a.level===e.level&&("audio"!==t.type||!this.altAudio)&&this.state===v.PARSING){var i=this.levels[this.level],n=e;if(isNaN(t.endPTS)&&(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),k.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(n.dropped=t.dropped,n.dropped){if(!n.backtracked)return k.logger.warn("missing video frame(s), backtracking fragment"),n.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=v.IDLE,this.fragPrevious=n,void this.tick();k.logger.warn("Already backtracked on this fragment, appending with the gap")}else n.backtracked=!1;var s=l.default.updateFragPTSDTS(i.details,n,t.startPTS,t.endPTS,t.startDTS,t.endDTS),o=this.hls;o.trigger(T.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&r.state===v.PARSING&&(r.appended=!0,r.pendingBuffering=!0,o.trigger(T.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===v.PARSING&&(this.stats.tparsed=performance.now(),this.state=v.PARSED,this._checkAppendedParsed())}},{key:"onAudioTrackSwitching",value:function(e){var t,r,a=!!e.url,i=e.id;a||(this.mediaBuffer!==this.media&&(k.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,(t=this.fragCurrent).loader&&(k.logger.log("switching to main audio track, cancel main fragment load"),t.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=v.IDLE),(r=this.hls).trigger(T.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),r.trigger(T.default.AUDIO_TRACK_SWITCHED,{id:i}),this.altAudio=!1)}},{key:"onAudioTrackSwitched",value:function(e){var t,r=e.id,a=!!this.hls.audioTracks[r].url;!a||(t=this.videoBuffer)&&this.mediaBuffer!==t&&(k.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=t),this.altAudio=a,this.tick()}},{key:"onBufferCreated",value:function(e){var t=e.tracks,r=void 0,a=void 0,i=!1;for(var n in t){var s=t[n];"main"===s.id?(r=s,"video"===(a=n)&&(this.videoBuffer=t[n].buffer)):i=!0}i&&r?(k.logger.log("alternate track found, use "+a+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){var t;"main"===e.parent&&((t=this.state)!==v.PARSING&&t!==v.PARSED||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed()))}},{key:"_checkAppendedParsed",value:function(){var e,t,r,a;this.state!==v.PARSED||this.appended&&this.pendingBuffering||((e=this.fragCurrent)&&(t=this.mediaBuffer?this.mediaBuffer:this.media,k.logger.log("main buffered : "+s.default.toString(t.buffered)),(r=this._bufferedFrags.filter(function(e){return b.default.isBuffered(t,(e.startPTS+e.endPTS)/2)})).push(e),this._bufferedFrags=r.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e,(a=this.stats).tbuffered=performance.now(),this.fragLastKbps=Math.round(8*a.total/(a.tbuffered-a.tfirst)),this.hls.trigger(T.default.FRAG_BUFFERED,{stats:a,frag:e,id:"main"}),this.state=v.IDLE),this.tick())}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r,a,i,n=this.media,s=n&&b.default.isBuffered(n,n.currentTime)&&b.default.isBuffered(n,n.currentTime+.5);switch(e.details){case _.ErrorDetails.FRAG_LOAD_ERROR:case _.ErrorDetails.FRAG_LOAD_TIMEOUT:case _.ErrorDetails.KEY_LOAD_ERROR:case _.ErrorDetails.KEY_LOAD_TIMEOUT:e.fatal||((r=this.fragLoadError)?r++:r=1,r<=(a=this.config).fragLoadingMaxRetry||s||t.autoLevel&&t.level?(this.fragLoadError=r,t.loadCounter=0,i=Math.min(Math.pow(2,r-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout),k.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=v.FRAG_LOADING_WAITING_RETRY):(k.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=v.ERROR));break;case _.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(s?(this._reduceMaxBufferLength(t.duration),this.state=v.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=v.ERROR));break;case _.ErrorDetails.LEVEL_LOAD_ERROR:case _.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==v.ERROR&&(e.fatal?(this.state=v.ERROR,k.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==v.WAITING_LEVEL||(this.state=v.IDLE));break;case _.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==v.PARSING&&this.state!==v.PARSED||(s?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=v.IDLE):(k.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,k.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e,t,r,a,i,n,s,o,l,u,d,f,c,h,g,v,p,y,m=this.media,E=this.config;m&&m.readyState&&(e=m.currentTime,r=(t=this.mediaBuffer?this.mediaBuffer:m).buffered,!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,a=m.seeking?e:this.startPosition,i=b.default.isBuffered(t,a),n=r.start(0),(e!==a||!i&&Math.abs(a-n)<E.maxSeekHole)&&(k.logger.log("target start position:"+a),i||k.logger.log("target start position not buffered, seek to buffered.start(0) "+a),k.logger.log("adjust currentTime from "+e+" to "+a),m.currentTime=a)):this.immediateSwitch?this.immediateLevelSwitchEnd():(s=b.default.bufferInfo(m,e,0),o=!(m.paused||m.ended||0===m.buffered.length),e!==this.lastCurrentTime?(this.stallReported&&(k.logger.warn("playback not stuck anymore @"+e+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0):o&&(l=performance.now(),u=this.hls,this.stalled?(d=l-this.stalled,f=s.len,c=this.nudgeRetry||0,f<=.5&&d>1e3*E.lowBufferWatchdogPeriod?(this.stallReported||(this.stallReported=!0,k.logger.warn("playback stalling in low buffer @"+e),u.trigger(T.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:f})),g=(h=s.nextStart)-e,h&&g<E.maxSeekHole&&0<g&&(this.nudgeRetry=++c,v=c*E.nudgeOffset,k.logger.log("adjust currentTime from "+m.currentTime+" to next buffered @ "+h+" + nudge "+v),m.currentTime=h+v,this.stalled=void 0,u.trigger(T.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:h+v-e}))):.5<f&&d>1e3*E.highBufferWatchdogPeriod&&(this.stallReported||(this.stallReported=!0,k.logger.warn("playback stalling in high buffer @"+e),u.trigger(T.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:f})),this.stalled=void 0,this.nudgeRetry=++c,c<E.nudgeMaxRetry?(y=(p=m.currentTime)+c*E.nudgeOffset,k.logger.log("adjust currentTime from "+p+" to "+y),m.currentTime=y,u.trigger(T.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})):(k.logger.error("still stuck in high buffer @"+e+" after "+E.nudgeMaxRetry+", raise fatal error"),u.trigger(T.default.ERROR,{type:_.ErrorTypes.MEDIA_ERROR,details:_.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})))):(this.stalled=l,this.stallReported=!1))))}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=v.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:"onBufferFlushed",value:function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(e){return b.default.isBuffered(t,(e.startPTS+e.endPTS)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=v.IDLE,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)}},{key:"state",set:function(e){var t;this.state!==e&&(t=this.state,this._state=e,k.logger.log("main stream:"+t+"->"+e),this.hls.trigger(T.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e}))},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),d);function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e,T.default.MEDIA_ATTACHED,T.default.MEDIA_DETACHING,T.default.MANIFEST_LOADING,T.default.MANIFEST_PARSED,T.default.LEVEL_LOADED,T.default.KEY_LOADED,T.default.FRAG_LOADED,T.default.FRAG_LOAD_EMERGENCY_ABORTED,T.default.FRAG_PARSING_INIT_SEGMENT,T.default.FRAG_PARSING_DATA,T.default.FRAG_PARSED,T.default.ERROR,T.default.AUDIO_TRACK_SWITCHING,T.default.AUDIO_TRACK_SWITCHED,T.default.BUFFER_CREATED,T.default.BUFFER_APPENDED,T.default.BUFFER_FLUSHED));return t.config=e.config,t.audioCodecSwap=!1,t.ticks=0,t._state=v.STOPPED,t.ontick=t.tick.bind(t),t}r.default=u},{25:25,33:33,34:34,35:35,37:37,38:38,48:48,54:54,55:55}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n=l(e(35)),s=l(e(34)),o=e(54);function l(e){return e&&e.__esModule?e:{default:e}}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,s.default),a(d,[{key:"destroy",value:function(){s.default.prototype.destroy.call(this)}},{key:"clearVttFragQueues",value:function(){var t=this;this.vttFragQueues={},this.tracks.forEach(function(e){t.vttFragQueues[e.id]=[]})}},{key:"nextFrag",value:function(){var e;null===this.currentlyProcessing&&-1<this.currentTrackId&&this.vttFragQueues[this.currentTrackId].length&&(e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift(),this.hls.trigger(n.default.FRAG_LOADING,{frag:e}))}},{key:"onSubtitleFragProcessed",value:function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.nextFrag()}},{key:"onError",value:function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())}},{key:"onSubtitleTracksUpdated",value:function(e){var t=this;o.logger.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})}},{key:"onSubtitleTrackSwitch",value:function(e){this.currentTrackId=e.id,this.clearVttFragQueues()}},{key:"onSubtitleTrackLoaded",value:function(a){var i=this.vttFragSNsProcessed[a.id],n=this.vttFragQueues[a.id],s=this.currentlyProcessing?this.currentlyProcessing.sn:-1;a.details.fragments.forEach(function(e){var t,r;r=e,-1<i.indexOf(r.sn)||e.sn===s||(t=e,n.some(function(e){return e.sn===t.sn}))||(e.trackId=a.id,n.push(e))}),this.nextFrag()}}]),d);function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e,n.default.ERROR,n.default.SUBTITLE_TRACKS_UPDATED,n.default.SUBTITLE_TRACK_SWITCH,n.default.SUBTITLE_TRACK_LOADED,n.default.SUBTITLE_FRAG_PROCESSED));return t.config=e.config,t.vttFragSNsProcessed={},t.vttFragQueues=void 0,t.currentlyProcessing=null,t.currentTrackId=-1,t}r.default=u},{34:34,35:35,54:54}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n=l(e(35)),s=l(e(34)),o=e(54);function l(e){return e&&e.__esModule?e:{default:e}}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,s.default),a(d,[{key:"_onTextTracksChanged",value:function(){if(this.media){for(var e=-1,t=function(e){for(var t=[],r=0;r<e.length;r++)"subtitles"===e[r].kind&&t.push(e[r]);return t}(this.media.textTracks),r=0;r<t.length;r++)"showing"===t[r].mode&&(e=r);this.subtitleTrack=e}}},{key:"destroy",value:function(){s.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){this.media=e.media,this.media&&(this.trackChangeListener=this._onTextTracksChanged.bind(this),this.media.textTracks.addEventListener("change",this.trackChangeListener))}},{key:"onMediaDetaching",value:function(){this.media&&(this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.trackId=-1,this.hls.trigger(n.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(e){e.default&&(t.subtitleTrack=e.id)})}},{key:"onTick",value:function(){var e,t=this.trackId,r=this.tracks[t];r&&(void 0!==(e=r.details)&&!0!==e.live||(o.logger.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(n.default.SUBTITLE_TRACK_LOADING,{url:r.url,id:t})))}},{key:"onSubtitleTrackLoaded",value:function(e){var t=this;e.id<this.tracks.length&&(o.logger.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setSubtitleTrackInternal",value:function(e){var t,r;0<=e&&e<this.tracks.length&&(this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,o.logger.log("switching to subtitle track "+e),t=this.tracks[e],this.hls.trigger(n.default.SUBTITLE_TRACK_SWITCH,{id:e}),void 0!==(r=t.details)&&!0!==r.live||(o.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(n.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e})))}},{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),d);function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e,n.default.MEDIA_ATTACHED,n.default.MEDIA_DETACHING,n.default.MANIFEST_LOADING,n.default.MANIFEST_LOADED,n.default.SUBTITLE_TRACK_LOADED));return t.tracks=[],t.trackId=-1,t.media=void 0,t}r.default=u},{34:34,35:35,54:54}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=s(e(35)),n=s(e(34)),o=s(e(49)),u=s(e(58)),d=e(54);function s(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.cues)for(;0<e.cues.length;)e.removeCue(e.cues[0])}var c=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,n.default),a(h,[{key:"addCues",value:function(e,t,r,a){for(var i,n,s,o,l=this.cueRanges,u=!1,d=l.length;d--;){var f=l[d],c=(i=f[0],n=f[1],s=t,o=r,Math.min(n,o)-Math.max(i,s));if(0<=c&&(f[0]=Math.min(f[0],t),f[1]=Math.max(f[1],r),u=!0,.5<c/(r-t)))return}u||l.push([t,r]),this.Cues.newCue(this[e],t,r,a)}},{key:"onInitPtsFound",value:function(e){var t=this;void 0===this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])}},{key:"getExistingTrack",value:function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var a=t.textTracks[r];if(!0===a["textTrack"+e])return a}return null}},{key:"createTextTrack",value:function(e,t,r){var a=this.media;if(a)return a.addTextTrack(e,t,r)}},{key:"destroy",value:function(){n.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(e){this.media=e.media}},{key:"onMediaDetaching",value:function(){f(this.textTrack1),f(this.textTrack2)}},{key:"onManifestLoading",value:function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0};var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)f(t[r])}}},{key:"onManifestLoaded",value:function(e){var s,o=this;this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT&&(this.tracks=e.subtitles||[],s=this.media?this.media.textTracks:[],this.tracks.forEach(function(e,t){var r,a,i,n=void 0;t<s.length&&(r=s[t],i=e,!(a=r)||a.label!==i.name||a.textTrack1||a.textTrack2||(n=r)),(n=n||o.createTextTrack("subtitles",e.name,e.lang)).mode=e.default?"showing":"hidden",o.textTracks.push(n)}))}},{key:"onLevelSwitching",value:function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions}},{key:"onFragLoaded",value:function(e){var r=e.frag,t=e.payload;if("main"===r.type){var a,i=r.sn;i===this.lastSn+1||(a=this.cea608Parser)&&a.reset(),this.lastSn=i}else if("subtitle"===r.type)if(t.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);var n=this.vttCCs;n[r.cc]||(n[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc);var s=this.textTracks,o=this.hls;u.default.parse(t,this.initPTS,n,r.cc,function(e){var t=s[r.trackId];e.forEach(function(e){t.cues.getCueById(e.id)||t.addCue(e)}),o.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},function(e){d.logger.log("Failed to parse VTT cue: "+e),o.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r})})}else this.hls.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r})}},{key:"onFragParsingUserdata",value:function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}}},{key:"extractCea608Data",value:function(e){for(var t,r,a,i=31&e[0],n=2,s=[],o=0;o<i;o++)t=e[n++],r=127&e[n++],a=127&e[n++],0==r&&0==a||0!=(4&t)&&0==(3&t)&&(s.push(r),s.push(a));return s}}]),h);function h(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var n,s,t,r,a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_USERDATA,l.default.MANIFEST_LOADING,l.default.MANIFEST_LOADED,l.default.FRAG_LOADED,l.default.LEVEL_SWITCHING,l.default.INIT_PTS_FOUND));return a.hls=e,a.config=e.config,a.enabled=!0,a.Cues=e.config.cueHandler,a.textTracks=[],a.tracks=[],a.unparsedVttFrags=[],a.initPTS=void 0,a.cueRanges=[],a.config.enableCEA708Captions&&(s=function(e,t){var r=null;try{r=new window.Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)},t={newCue:function(e,t,r){var a,i;n.textTrack1||((a=n.getExistingTrack("1"))?(n.textTrack1=a,f(n.textTrack1),s(n.textTrack1,n.media)):(i=n.createTextTrack("captions",n.config.captionsTextTrack1Label,n.config.captionsTextTrack1LanguageCode))&&(i.textTrack1=!0,n.textTrack1=i)),n.addCues("textTrack1",e,t,r)}},r={newCue:function(e,t,r){var a,i;n.textTrack2||((a=n.getExistingTrack("2"))?(n.textTrack2=a,f(n.textTrack2),s(n.textTrack2,n.media)):(i=n.createTextTrack("captions",n.config.captionsTextTrack2Label,n.config.captionsTextTrack1LanguageCode))&&(i.textTrack2=!0,n.textTrack2=i)),n.addCues("textTrack2",e,t,r)}},(n=a).cea608Parser=new o.default(0,t,r)),a}r.default=c},{34:34,35:35,49:49,54:54,58:58}],17:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(r,"__esModule",{value:!0});var i=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(n,[{key:"decrypt",value:function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),n);function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.subtle=e,this.aesIV=t}r.default=i},{}],18:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(r,"__esModule",{value:!0});var i=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(n,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),r=new Uint32Array(4),a=0;a<4;a++)r[a]=t.getUint32(4*a);return r}},{key:"initTable",value:function(){for(var e=this.sBox,t=this.invSBox,r=this.subMix,a=r[0],i=r[1],n=r[2],s=r[3],o=this.invSubMix,l=o[0],u=o[1],d=o[2],f=o[3],c=new Uint32Array(256),h=0,g=0,v=0,v=0;v<256;v++)c[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var p=(p=g^g<<1^g<<2^g<<3^g<<4)>>>8^255&p^99,y=c[t[e[h]=p]=h],m=c[y],E=c[m],b=257*c[p]^16843008*p;a[h]=b<<24|b>>>8,i[h]=b<<16|b>>>16,n[h]=b<<8|b>>>24,s[h]=b,b=16843009*E^65537*m^257*y^16843008*h,l[p]=b<<24|b>>>8,u[p]=b<<16|b>>>16,d[p]=b<<8|b>>>24,f[p]=b,h?(h=y^c[c[c[E^y]]],g^=c[c[g]]):h=g=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,a=0;a<t.length&&r;)r=t[a]===this.key[a],a++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);for(var n=this.ksRows=4*(i+6+1),s=void 0,o=void 0,l=this.keySchedule=new Uint32Array(n),u=this.invKeySchedule=new Uint32Array(n),d=this.sBox,f=this.rcon,c=this.invSubMix,h=c[0],g=c[1],v=c[2],p=c[3],y=void 0,m=void 0,s=0;s<n;s++)s<i?y=l[s]=t[s]:(m=y,s%i==0?(m=d[(m=m<<8|m>>>24)>>>24]<<24|d[m>>>16&255]<<16|d[m>>>8&255]<<8|d[255&m],m^=f[s/i|0]<<24):6<i&&s%i==4&&(m=d[m>>>24]<<24|d[m>>>16&255]<<16|d[m>>>8&255]<<8|d[255&m]),l[s]=y=(l[s-i]^m)>>>0);for(o=0;o<n;o++)s=n-o,m=3&o?l[s]:l[s-4],u[o]=o<4||s<=4?m:h[d[m>>>24]]^g[d[m>>>16&255]]^v[d[m>>>8&255]]^p[d[255&m]],u[o]=u[o]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,r){for(var a,i,n,s,o,l,u=this.keySize+6,d=this.invKeySchedule,f=this.invSBox,c=this.invSubMix,h=c[0],g=c[1],v=c[2],p=c[3],y=this.uint8ArrayToUint32Array_(r),m=y[0],E=y[1],b=y[2],T=y[3],_=new Int32Array(e),k=new Int32Array(_.length),R=void 0,S=void 0,A=void 0,L=void 0,w=void 0,D=void 0,O=void 0,I=void 0,P=this.networkToHostOrderSwap;t<_.length;){for(a=P(_[t]),i=P(_[t+1]),n=P(_[t+2]),s=P(_[t+3]),w=a^d[0],D=s^d[1],O=n^d[2],I=i^d[3],o=4,l=1;l<u;l++)R=h[w>>>24]^g[D>>16&255]^v[O>>8&255]^p[255&I]^d[o],S=h[D>>>24]^g[O>>16&255]^v[I>>8&255]^p[255&w]^d[o+1],A=h[O>>>24]^g[I>>16&255]^v[w>>8&255]^p[255&D]^d[o+2],L=h[I>>>24]^g[w>>16&255]^v[D>>8&255]^p[255&O]^d[o+3],w=R,D=S,O=A,I=L,o+=4;R=f[w>>>24]<<24^f[D>>16&255]<<16^f[O>>8&255]<<8^f[255&I]^d[o],S=f[D>>>24]<<24^f[O>>16&255]<<16^f[I>>8&255]<<8^f[255&w]^d[o+1],A=f[O>>>24]<<24^f[I>>16&255]<<16^f[w>>8&255]<<8^f[255&D]^d[o+2],L=f[I>>>24]<<24^f[w>>16&255]<<16^f[D>>8&255]<<8^f[255&O]^d[o+3],o+=3,k[t]=P(R^m),k[t+1]=P(L^E),k[t+2]=P(A^b),k[t+3]=P(S^T),m=a,E=i,b=n,T=s,t+=4}return k.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),n);function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}r.default=i},{}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=s(e(17)),l=s(e(20)),u=s(e(18)),n=e(33),d=e(54);function s(e){return e&&e.__esModule?e:{default:e}}var f=(a(c,[{key:"isSync",value:function(){return this.disableWebCrypto&&this.config.enableSoftwareAES}},{key:"decrypt",value:function(t,r,a,i){var e,n,s=this;this.disableWebCrypto&&this.config.enableSoftwareAES?(this.logEnabled&&(d.logger.log("JS AES decrypt"),this.logEnabled=!1),(e=this.decryptor)||(this.decryptor=e=new u.default),e.expandKey(r),i(e.decrypt(t,0,a))):(this.logEnabled&&(d.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1),n=this.subtle,this.key!==r&&(this.key=r,this.fastAesKey=new l.default(n,r)),this.fastAesKey.expandKey().then(function(e){new o.default(n,a).decrypt(t,e).catch(function(e){s.onWebCryptoError(e,t,r,a,i)}).then(function(e){i(e)})}).catch(function(e){s.onWebCryptoError(e,t,r,a,i)}))}},{key:"onWebCryptoError",value:function(e,t,r,a,i){this.config.enableSoftwareAES?(d.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,a,i)):(d.logger.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:n.ErrorTypes.MEDIA_ERROR,details:n.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)}}]),c);function c(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.observer=e,this.config=t,this.logEnabled=!0;try{var r=crypto||self.crypto;this.subtle=r.subtle||r.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}r.default=f},{17:17,18:18,20:20,33:33,54:54}],20:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(r,"__esModule",{value:!0});var i=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(n,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),n);function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.subtle=e,this.key=t}r.default=i},{}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var h=n(e(22)),g=e(54),v=n(e(27));function n(e){return e&&e.__esModule?e:{default:e}}var s=(a(o,[{key:"resetInitSegment",value:function(e,t,r,a){this._audioTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:a,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,a){for(var i=this._audioTrack,n=v.default.getID3Data(e,0),s=90*v.default.getTimeStamp(n),o=0,l=s,u=e.length,d=n.length,f=[{pts:l,dts:l,data:n}];d<u-1;)if(h.default.isHeader(e,d)&&d+5<u){h.default.initTrackConfig(i,this.observer,e,d,i.manifestCodec);var c=h.default.appendFrame(i,e,d,s,o);if(!c){g.logger.log("Unable to parse AAC frame");break}d+=c.length,l=c.sample.pts,o++}else v.default.isHeader(e,d)?(n=v.default.getID3Data(e,d),f.push({pts:l,dts:l,data:n}),d+=n.length):d++;this.remuxer.remux(i,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},t,r,a)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,a=v.default.getID3Data(e,0);if(a&&void 0!==v.default.getTimeStamp(a))for(t=a.length,r=Math.min(e.length-1,t+100);t<r;t++)if(h.default.probe(e,t))return g.logger.log("ADTS sync word found !"),!0;return!1}}]),o);function o(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.observer=e,this.config=r,this.remuxer=t}r.default=s},{22:22,27:27,54:54}],22:[function(e,t,r){"use strict";var c=e(54),h=e(33),a={getAudioConfig:function(e,t,r,a){var i,n,s,o=navigator.userAgent.toLowerCase(),l=a,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],d=1+((192&t[r+2])>>>6),f=(60&t[r+2])>>>2;if(!(u.length-1<f))return n=(1&t[r+2])<<2,n|=(192&t[r+3])>>>6,c.logger.log("manifest codec:"+a+",ADTS data:type:"+d+",sampleingIndex:"+f+"["+u[f]+"Hz],channelConfig:"+n),i=/firefox/i.test(o)?6<=f?(d=5,s=new Array(4),f-3):(d=2,s=new Array(2),f):-1!==o.indexOf("android")?(d=2,s=new Array(2),f):(d=5,s=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&6<=f?f-3:((a&&-1!==a.indexOf("mp4a.40.2")&&6<=f&&1==n||!a&&1==n)&&(d=2,s=new Array(2)),f)),s[0]=d<<3,s[0]|=(14&f)>>1,s[1]|=(1&f)<<7,s[1]|=n<<3,5===d&&(s[1]|=(14&i)>>1,s[2]=(1&i)<<7,s[2]|=8,s[3]=0),{config:s,samplerate:u[f],channelCount:n,codec:"mp4a.40."+d,manifestCodec:l};e.trigger(Event.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+f})},isHeaderPattern:function(e,t){return 255===e[t]&&240==(246&e[t+1])},getHeaderLength:function(e,t){return 1&e[t+1]?7:9},getFullFrameLength:function(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.getHeaderLength(e,t);t+5<e.length&&(r=this.getFullFrameLength(e,t));var a=t+r;if(a===e.length||a+1<e.length&&this.isHeaderPattern(e,a))return!0}return!1},initTrackConfig:function(e,t,r,a,i){var n;e.samplerate||(n=this.getAudioConfig(t,r,a,i),e.config=n.config,e.samplerate=n.samplerate,e.channelCount=n.channelCount,e.codec=n.codec,e.manifestCodec=n.manifestCodec,c.logger.log("parsed codec:"+e.codec+",rate:"+n.samplerate+",nb channel:"+n.channelCount))},getFrameDuration:function(e){return 9216e4/e},appendFrame:function(e,t,r,a,i){var n=this.getFrameDuration(e.samplerate),s=this.parseFrameHeader(t,r,a,i,n);if(s){var o=s.stamp,l=s.headerLength,u=s.frameLength,d={unit:t.subarray(r+l,r+l+u),pts:o,dts:o};return e.samples.push(d),e.len+=u,{sample:d,length:u+l}}},parseFrameHeader:function(e,t,r,a,i){var n=e.length,s=this.getHeaderLength(e,t),o=this.getFullFrameLength(e,t);if(0<(o-=s)&&t+s+o<=n)return{headerLength:s,frameLength:o,stamp:r+a*i}}};t.exports=a},{33:33,54:54}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var k=n(e(35)),R=e(33),v=n(e(19)),S=n(e(21)),A=n(e(29)),L=n(e(32)),w=n(e(28)),D=n(e(45)),O=n(e(46));function n(e){return e&&e.__esModule?e:{default:e}}var s=(a(o,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,r,a,i,n,s,o,l,u,d,f,c){if(0<e.byteLength&&null!=r&&null!=r.key&&"AES-128"===r.method){var t=this.decrypter;null==t&&(t=this.decrypter=new v.default(this.observer,this.config));var h,g=this;try{h=performance.now()}catch(e){h=Date.now()}t.decrypt(e,r.key.buffer,r.iv.buffer,function(e){var t;try{t=performance.now()}catch(e){t=Date.now()}g.observer.trigger(k.default.FRAG_DECRYPTED,{stats:{tstart:h,tdecrypt:t}}),g.pushDecrypted(new Uint8Array(e),r,new Uint8Array(a),i,n,s,o,l,u,d,f,c)})}else this.pushDecrypted(new Uint8Array(e),r,new Uint8Array(a),i,n,s,o,l,u,d,f,c)}},{key:"pushDecrypted",value:function(e,t,r,a,i,n,s,o,l,u,d,f){if(!(T=this.demuxer)||s&&!this.probe(e)){for(var c=this.observer,h=this.typeSupported,g=this.config,v=[{demux:S.default,remux:D.default},{demux:w.default,remux:D.default},{demux:L.default,remux:D.default},{demux:A.default,remux:O.default}],p=0,y=v.length;p<y;p++){var m=v[p],E=m.demux.probe;if(E(e)){var b=this.remuxer=new m.remux(c,g,h,this.vendor),T=new m.demux(c,b,g,h);this.probe=E;break}}if(!T)return void c.trigger(k.default.ERROR,{type:R.ErrorTypes.MEDIA_ERROR,details:R.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=T}var _=this.remuxer;(s||o)&&(T.resetInitSegment(r,a,i,u),_.resetInitSegment()),s&&(T.resetTimeStamp(f),_.resetTimeStamp(f)),"function"==typeof T.setDecryptData&&T.setDecryptData(t),T.append(e,n,l,d)}}]),o);function o(e,t,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.observer=e,this.typeSupported=t,this.config=r,this.vendor=a}r.default=s},{19:19,21:21,28:28,29:29,32:32,33:33,35:35,45:45,46:46}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=a(e(23)),o=a(e(35)),l=e(54),u=a(e(1));function a(e){return e&&e.__esModule?e:{default:e}}r.default=function(i){var n=new u.default;n.trigger=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];n.emit.apply(n,[e,e].concat(r))},n.off=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];n.removeListener.apply(n,[e].concat(r))};function a(e,t){i.postMessage({event:e,data:t})}i.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var r=JSON.parse(t.config);i.demuxer=new s.default(n,t.typeSupported,r,t.vendor);try{(0,l.enableLogs)(!0===r.debug)}catch(e){}a("init",null);break;case"demux":i.demuxer.push(t.data,t.decryptdata,t.initSegment,t.audioCodec,t.videoCodec,t.timeOffset,t.discontinuity,t.trackSwitch,t.contiguous,t.duration,t.accurateTimeOffset,t.defaultInitPTS)}}),n.on(o.default.FRAG_DECRYPTED,a),n.on(o.default.FRAG_PARSING_INIT_SEGMENT,a),n.on(o.default.FRAG_PARSED,a),n.on(o.default.ERROR,a),n.on(o.default.FRAG_PARSING_METADATA,a),n.on(o.default.FRAG_PARSING_USERDATA,a),n.on(o.default.INIT_PTS_FOUND,a),n.on(o.default.FRAG_PARSING_DATA,function(e,t){var r=[],a={event:e,data:t};t.data1&&(a.data1=t.data1.buffer,r.push(t.data1.buffer),delete t.data1),t.data2&&(a.data2=t.data2.buffer,r.push(t.data2.buffer),delete t.data2),i.postMessage(a,r)})}},{1:1,23:23,35:35,54:54}],25:[function(u,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e};function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=i(u(35)),f=i(u(23)),c=i(u(24)),y=u(54),h=u(33),g=i(u(1));function i(e){return e&&e.__esModule?e:{default:e}}var n=(r(v,[{key:"destroy",value:function(){var e,t=this.w;t?(t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null):(e=this.demuxer)&&(e.destroy(),this.demuxer=null);var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)}},{key:"push",value:function(e,t,r,a,i,n,s,o){var l,u=this.w,d=isNaN(i.startDTS)?i.start:i.startDTS,f=i.decryptdata,c=this.frag,h=!(c&&i.cc===c.cc),g=!(c&&i.level===c.level),v=c&&i.sn===c.sn+1,p=!g&&v;h&&y.logger.log(this.id+":discontinuity detected"),g&&y.logger.log(this.id+":switch detected"),this.frag=i,u?u.postMessage({cmd:"demux",data:e,decryptdata:f,initSegment:t,audioCodec:r,videoCodec:a,timeOffset:d,discontinuity:h,trackSwitch:g,contiguous:p,duration:n,accurateTimeOffset:s,defaultInitPTS:o},[e]):(l=this.demuxer)&&l.push(e,f,t,r,a,d,h,g,p,n,s,o)}},{key:"onWorkerMessage",value:function(e){var t=e.data,r=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case d.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}}}]),v);function v(r,e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),this.hls=r,this.id=e;var i=this.observer=new g.default,t=r.config;i.trigger=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];i.emit.apply(i,[e,e].concat(r))},i.off=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];i.removeListener.apply(i,[e].concat(r))};var a=function(e,t){(t=t||{}).frag=this.frag,t.id=this.id,r.trigger(e,t)}.bind(this);i.on(d.default.FRAG_DECRYPTED,a),i.on(d.default.FRAG_PARSING_INIT_SEGMENT,a),i.on(d.default.FRAG_PARSING_DATA,a),i.on(d.default.FRAG_PARSED,a),i.on(d.default.ERROR,a),i.on(d.default.FRAG_PARSING_METADATA,a),i.on(d.default.FRAG_PARSING_USERDATA,a),i.on(d.default.INIT_PTS_FOUND,a);var n={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},s=navigator.vendor;if(t.enableWorker&&"undefined"!=typeof Worker){y.logger.log("demuxing in webworker");var o=void 0;try{var l=u(3),o=this.w=l(c.default);this.onwmsg=this.onWorkerMessage.bind(this),o.addEventListener("message",this.onwmsg),o.onerror=function(e){r.trigger(d.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},o.postMessage({cmd:"init",typeSupported:n,vendor:s,id:e,config:JSON.stringify(t)})}catch(e){y.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),o&&URL.revokeObjectURL(o.objectURL),this.demuxer=new f.default(i,n,t,s),this.w=void 0}}else this.demuxer=new f.default(i,n,t,s)}t.default=n},{1:1,23:23,24:24,3:3,33:33,35:35,54:54}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n=e(54);var s=(a(o,[{key:"loadWord",value:function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,a=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");a.set(e.subarray(r,r+i)),this.word=new DataView(a.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e||(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return 32<e&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?r<<t|this.readBits(t):r}},{key:"skipLZ",value:function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){for(var t=8,r=8,a=0;a<e;a++)0!==r&&(r=(t+this.readEG()+256)%256),t=0===r?t:r}},{key:"readSPS",value:function(){var e,t,r,a,i,n,s,o=0,l=0,u=0,d=0,f=this.readUByte.bind(this),c=this.readBits.bind(this),h=this.readUEG.bind(this),g=this.readBoolean.bind(this),v=this.skipBits.bind(this),p=this.skipEG.bind(this),y=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(f(),e=f(),c(5),v(3),f(),y(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var E=h();if(3===E&&v(1),y(),y(),v(1),g())for(n=3!==E?8:12,s=0;s<n;s++)g()&&m(s<6?16:64)}y();var b=h();if(0===b)h();else if(1===b)for(v(1),p(),p(),t=h(),s=0;s<t;s++)p();y(),v(1),r=h(),a=h(),0===(i=c(1))&&v(1),v(1),g()&&(o=h(),l=h(),u=h(),d=h());var T=[1,1];if(g()&&g())switch(f()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[f()<<8|f(),f()<<8|f()]}return{width:Math.ceil(16*(r+1)-2*o-2*l),height:(2-i)*(a+1)*16-(i?2:4)*(u+d),pixelRatio:T}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}r.default=s},{54:54}],27:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(r,"__esModule",{value:!0});var i=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(o,null,[{key:"isHeader",value:function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"isFooter",value:function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"getID3Data",value:function(e,t){for(var r=t,a=0;o.isHeader(e,t);){a+=10,a+=o._readSize(e,t+6),o.isFooter(e,t+10)&&(a+=10),t+=a}if(0<a)return e.subarray(r,r+a)}},{key:"_readSize",value:function(e,t){var r=(127&e[t])<<21;return r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3]}},{key:"getTimeStamp",value:function(e){for(var t=o.getID3Frames(e),r=0;r<t.length;r++){var a=t[r];if(o.isTimeStampFrame(a))return o._readTimeStamp(a)}}},{key:"isTimeStampFrame",value:function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}},{key:"_getFrameData",value:function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),r=o._readSize(e,4);return{type:t,size:r,data:e.subarray(10,10+r)}}},{key:"getID3Frames",value:function(e){for(var t=0,r=[];o.isHeader(e,t);){for(var a=o._readSize(e,t+6),i=(t+=10)+a;t+8<i;){var n=o._getFrameData(e.subarray(t)),s=o._decodeFrame(n);s&&r.push(s),t+=n.size+10}o.isFooter(e,t)&&(t+=10)}return r}},{key:"_decodeFrame",value:function(e){return"PRIV"===e.type?o._decodePrivFrame(e):"T"===e.type[0]?o._decodeTextFrame(e):"W"===e.type[0]?o._decodeURLFrame(e):void 0}},{key:"_readTimeStamp",value:function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],a=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return a/=45,r&&(a+=47721858.84),Math.round(a)}}},{key:"_decodePrivFrame",value:function(e){if(!(e.size<2)){var t=o._utf8ArrayToStr(e.data),r=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:r.buffer}}}},{key:"_decodeTextFrame",value:function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,r=o._utf8ArrayToStr(e.data.subarray(1));t+=r.length+1;var a=o._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:r,data:a}}var i=o._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:i}}}},{key:"_decodeURLFrame",value:function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,r=o._utf8ArrayToStr(e.data.subarray(1));t+=r.length+1;var a=o._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:r,data:a}}var i=o._utf8ArrayToStr(e.data);return{key:e.type,data:i}}},{key:"_utf8ArrayToStr",value:function(e){for(var t,r=void 0,a="",i=0,n=e.length;i<n;){var s=e[i++];switch(s>>4){case 0:return a;case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(s);break;case 12:case 13:r=e[i++],a+=String.fromCharCode((31&s)<<6|63&r);break;case 14:r=e[i++],t=e[i++],a+=String.fromCharCode((15&s)<<12|(63&r)<<6|(63&t)<<0)}}return a}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}r.default=i},{}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var h=s(e(27)),n=e(54),g=s(e(30));function s(e){return e&&e.__esModule?e:{default:e}}var o=(a(l,[{key:"resetInitSegment",value:function(e,t,r,a){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:a,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,a){for(var i=h.default.getID3Data(e,0),n=90*h.default.getTimeStamp(i),s=i.length,o=e.length,l=0,u=0,d=this._audioTrack,f=[{pts:n,dts:n,data:i}];s<o;)if(g.default.isHeader(e,s)){var c=g.default.appendFrame(d,e,s,n,l);if(!c)break;s+=c.length,u=c.sample.pts,l++}else h.default.isHeader(e,s)?(i=h.default.getID3Data(e,s),f.push({pts:u,dts:u,data:i}),s+=i.length):s++;this.remuxer.remux(d,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},t,r,a)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,a=h.default.getID3Data(e,0);if(a&&void 0!==h.default.getTimeStamp(a))for(t=a.length,r=Math.min(e.length-1,t+100);t<r;t++)if(g.default.probe(e,t))return n.logger.log("MPEG Audio sync word found !"),!0;return!1}}]),l);function l(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.observer=e,this.config=r,this.remuxer=t}r.default=o},{27:27,30:30,54:54}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n,s=e(35),l=(n=s)&&n.__esModule?n:{default:n};var o=Math.pow(2,32)-1,u=(a(d,[{key:"resetTimeStamp",value:function(e){this.initPTS=e}},{key:"resetInitSegment",value:function(e,t,r,a){var i,n;e&&e.byteLength?(n={},(i=this.initData=d.parseInitSegment(e)).audio&&(n.audio={container:"audio/mp4",codec:t,initSegment:a?e:null}),i.video&&(n.video={container:"video/mp4",codec:r,initSegment:a?e:null}),this.observer.trigger(l.default.FRAG_PARSING_INIT_SEGMENT,{tracks:n})):(t&&(this.audioCodec=t),r&&(this.videoCodec=r))}},{key:"append",value:function(e,t,r,a){var i=this.initData;i||(this.resetInitSegment(e,this.audioCodec,this.videoCodec),i=this.initData);var n,s,o=this.initPTS;void 0===o&&(s=d.getStartDTS(i,e),this.initPTS=o=s-t,this.observer.trigger(l.default.INIT_PTS_FOUND,{initPTS:o})),d.offsetStartDTS(i,e,o),n=d.getStartDTS(i,e),this.remuxer.remux(i.audio,i.video,null,null,n,r,a,e)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){if(8<=e.length){var t=d.bin2str(e.subarray(4,8));return 0<=["moof","ftyp","styp"].indexOf(t)}return!1}},{key:"bin2str",value:function(e){return String.fromCharCode.apply(null,e)}},{key:"readUint32",value:function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r}},{key:"writeUint32",value:function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}},{key:"findBox",value:function(e,t){var r,a,i,n,s,o,l=[];if(e.data?(s=e.start,i=e.end,e=e.data):(s=0,i=e.byteLength),!t.length)return null;for(r=s;r<i;)o=1<(a=d.readUint32(e,r))?r+a:i,d.bin2str(e.subarray(r+4,r+8))===t[0]&&(1===t.length?l.push({data:e,start:r+8,end:o}):(n=d.findBox({data:e,start:r+8,end:o},t.slice(1))).length&&(l=l.concat(n))),r=o;return l}},{key:"parseInitSegment",value:function(e){var l=[];return d.findBox(e,["moov","trak"]).forEach(function(e){var t,r,a,i,n,s,o=d.findBox(e,["tkhd"])[0];o&&(t=o.data[o.start],r=d.readUint32(o,0===t?12:20),(a=d.findBox(e,["mdia","mdhd"])[0])&&(t=a.data[a.start],i=d.readUint32(a,0===t?12:20),!(n=d.findBox(e,["mdia","hdlr"])[0])||(s={soun:"audio",vide:"video"}[d.bin2str(n.data.subarray(n.start+8,n.start+12))])&&(l[r]={timescale:i,type:s},l[s]={timescale:i,id:r})))}),l}},{key:"getStartDTS",value:function(n,e){var t=d.findBox(e,["moof","traf"]),r=[].concat.apply([],t.map(function(i){return d.findBox(i,["tfhd"]).map(function(e){var t=d.readUint32(e,4),r=n[t].timescale||9e4,a=d.findBox(i,["tfdt"]).map(function(e){var t=e.data[e.start],r=d.readUint32(e,4);return 1===t&&(r*=Math.pow(2,32),r+=d.readUint32(e,8)),r})[0];return(a||1/0)/r})})),a=Math.min.apply(null,r);return isFinite(a)?a:0}},{key:"offsetStartDTS",value:function(a,e,s){d.findBox(e,["moof","traf"]).map(function(r){return d.findBox(r,["tfhd"]).map(function(e){var t=d.readUint32(e,4),n=a[t].timescale||9e4;d.findBox(r,["tfdt"]).map(function(e){var t,r,a=e.data[e.start],i=d.readUint32(e,4);0===a?d.writeUint32(e,4,i-s*n):(i*=Math.pow(2,32),i+=d.readUint32(e,8),i-=s*n,t=Math.floor(i/(1+o)),r=Math.floor(i%(1+o)),d.writeUint32(e,4,t),d.writeUint32(e,8,r))})})})}}]),d);function d(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),this.observer=e,this.remuxer=t}r.default=u},{35:35}],30:[function(e,t,r){"use strict";var c={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],appendFrame:function(e,t,r,a,i){if(!(r+24>t.length)){var n=this.parseHeader(t,r);if(n&&r+n.frameLength<=t.length){var s=a+i*(10368e4/n.sampleRate),o={unit:t.subarray(r,r+n.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=n.channelCount,e.samplerate=n.sampleRate,e.samples.push(o),e.len+=n.frameLength,{sample:o,length:n.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,a=e[t+1]>>1&3,i=e[t+2]>>4&15,n=e[t+2]>>2&3,s=!!(2&e[t+2]);if(1!=r&&0!=i&&15!=i&&3!=n){var o=3==r?3-a:3==a?3:4,l=1e3*c.BitratesMap[14*o+i-1],u=3==r?0:2==r?1:2,d=c.SamplingRateMap[3*u+n],f=s?1:0;return{sampleRate:d,channelCount:e[t+3]>>6==3?1:2,frameLength:3==a?(3==r?12:6)*l/d+f<<2:(3==r?144:72)*l/d+f|0}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),a=4;r&&r.frameLength&&(a=r.frameLength);var i=t+a;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}};t.exports=c},{}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n,s=e(19),o=(n=s)&&n.__esModule?n:{default:n};var l=(a(u,[{key:"decryptBuffer",value:function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)}},{key:"decryptAacSample",value:function(t,r,a,i){var n=t[r].unit,e=n.subarray(16,n.length-n.length%16),s=e.buffer.slice(e.byteOffset,e.byteOffset+e.length),o=this;this.decryptBuffer(s,function(e){e=new Uint8Array(e),n.set(e,16),i||o.decryptAacSamples(t,r+1,a)})}},{key:"decryptAacSamples",value:function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var a=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,a),!a)return}}}},{key:"getAvcEncryptedData",value:function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),a=0,i=32;i<=e.length-16;i+=160,a+=16)r.set(e.subarray(i,i+16),a);return r}},{key:"getAvcDecryptedUnit",value:function(e,t){t=new Uint8Array(t);for(var r=0,a=32;a<=e.length-16;a+=160,r+=16)e.set(t.subarray(r,r+16),a);return e}},{key:"decryptAvcSample",value:function(t,r,a,i,n,s){var o=this.discardEPB(n.data),e=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(e.buffer,function(e){n.data=l.getAvcDecryptedUnit(o,e),s||l.decryptAvcSamples(t,r,a+1,i)})}},{key:"decryptAvcSamples",value:function(e,t,r,a){for(;;t++,r=0){if(t>=e.length)return void a();for(var i=e[t].units;!(r>=i.length);r++){var n=i[r];if(!(n.length<=48||1!==n.type&&5!==n.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,a,n,s),!s)return}}}}}]),u);function u(e,t,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.decryptdata=r,this.discardEPB=a,this.decrypter=new o.default(e,t)}r.default=l},{19:19}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=s(e(22)),o=s(e(30)),O=s(e(35)),_=s(e(26)),n=s(e(31)),I=e(54),P=e(33);function s(e){return e&&e.__esModule?e:{default:e}}var l=(a(u,[{key:"setDecryptData",value:function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new n.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null}},{key:"resetInitSegment",value:function(e,t,r,a){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,duration:a,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=r,this._duration=a}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,a){var i,n,s,o,l,u=e.length,d=!1;this.contiguous=r;var f=this.pmtParsed,c=this._avcTrack,h=this._audioTrack,g=this._id3Track,v=c.id,p=h.id,y=g.id,m=this._pmtId,E=c.pesData,b=h.pesData,T=g.pesData,_=this._parsePAT,k=this._parsePMT,R=this._parsePES,S=this._parseAVCPES.bind(this),A=this._parseAACPES.bind(this),L=this._parseMPEGPES.bind(this),w=this._parseID3PES.bind(this);for(u-=u%188,i=0;i<u;i+=188)if(71===e[i]){if(n=!!(64&e[i+1]),s=((31&e[i+1])<<8)+e[i+2],1<(48&e[i+3])>>4){if((o=i+5+e[i+4])===i+188)continue}else o=i+4;switch(s){case v:n&&(E&&(l=R(E))&&S(l,!1),E={data:[],size:0}),E&&(E.data.push(e.subarray(o,i+188)),E.size+=i+188-o);break;case p:n&&(b&&(l=R(b))&&(h.isAAC?A:L)(l),b={data:[],size:0}),b&&(b.data.push(e.subarray(o,i+188)),b.size+=i+188-o);break;case y:n&&(T&&(l=R(T))&&w(l),T={data:[],size:0}),T&&(T.data.push(e.subarray(o,i+188)),T.size+=i+188-o);break;case 0:n&&(o+=e[o]+1),m=this._pmtId=_(e,o);break;case m:n&&(o+=e[o]+1);var D=k(e,o,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(v=D.avc)&&(c.id=v),0<(p=D.audio)&&(h.id=p,h.isAAC=D.isAAC),0<(y=D.id3)&&(g.id=y),d&&!f&&(I.logger.log("reparse from beginning"),d=!1,i=-188),f=this.pmtParsed=!0;break;case 17:case 8191:break;default:d=!0}}else this.observer.trigger(O.default.ERROR,{type:P.ErrorTypes.MEDIA_ERROR,details:P.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});E&&(l=R(E))?(S(l,!0),c.pesData=null):c.pesData=E,b&&(l=R(b))?((h.isAAC?A:L)(l),h.pesData=null):(b&&b.size&&I.logger.log("last AAC PES packet truncated,might overlap between fragments"),h.pesData=b),T&&(l=R(T))?(w(l),g.pesData=null):g.pesData=T,null==this.sampleAes?this.remuxer.remux(h,c,g,this._txtTrack,t,r,a):this.decryptAndRemux(h,c,g,this._txtTrack,t,r,a)}},{key:"decryptAndRemux",value:function(e,t,r,a,i,n,s){var o;e.samples&&e.isAAC?(o=this).sampleAes.decryptAacSamples(e.samples,0,function(){o.decryptAndRemuxAvc(e,t,r,a,i,n,s)}):this.decryptAndRemuxAvc(e,t,r,a,i,n,s)}},{key:"decryptAndRemuxAvc",value:function(e,t,r,a,i,n,s){var o;t.samples?(o=this).sampleAes.decryptAvcSamples(t.samples,0,0,function(){o.remuxer.remux(e,t,r,a,i,n,s)}):this.remuxer.remux(e,t,r,a,i,n,s)}},{key:"destroy",value:function(){this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t,r,a){var i,n={audio:-1,avc:-1,id3:-1,isAAC:!0},s=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<s;){switch(i=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!a){I.logger.log("unkown stream type:"+e[t]);break}case 15:-1===n.audio&&(n.audio=i);break;case 21:-1===n.id3&&(n.id3=i);break;case 219:if(!a){I.logger.log("unkown stream type:"+e[t]);break}case 27:-1===n.avc&&(n.avc=i);break;case 3:case 4:r?-1===n.audio&&(n.audio=i,n.isAAC=!1):I.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:I.logger.warn("HEVC stream type found, not supported for now");break;default:I.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return n}},{key:"_parsePES",value:function(e){var t,r,a,i,n,s,o,l,u=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&1<d.length;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(1!==((t=d[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((a=(t[4]<<8)+t[5])&&a>e.size-6)return null;192&(r=t[7])&&(4294967295<(s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)&&(s-=8589934592),64&r?(4294967295<(o=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(o-=8589934592),54e5<s-o&&(I.logger.warn(Math.round((s-o)/9e4)+"s delta between PTS and DTS, align them"),s=o)):o=s),l=(i=t[8])+9,e.size-=l,n=new Uint8Array(e.size);for(var c=0,h=d.length;c<h;c++){var g=(t=d[c]).byteLength;if(l){if(g<l){l-=g;continue}t=t.subarray(l),g-=l,l=0}n.set(t,u),u+=g}return a&&(a-=i+3),{data:n,pts:s,dts:o,len:a}}},{key:"pushAccesUnit",value:function(e,t){var r,a;e.units.length&&e.frame&&(a=(r=t.samples).length,!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(a||this.contiguous)?(e.id=a,r.push(e)):t.dropped++),e.debug.length&&I.logger.log(e.pts+"/"+e.dts+":"+e.debug)}},{key:"_parseAVCPES",value:function(g,e){var v,p,y,m=this,E=this._avcTrack,t=this._parseAVCNALu(g.data),b=this.avcSample,T=!1;g.data=null,t.forEach(function(e){switch(e.type){case 1:p=!0,b.frame=!0;var t,r=e.data;T&&4<r.length&&(2!==(t=new _.default(r).readSliceType())&&4!==t&&7!==t&&9!==t||(b.key=!0));break;case 5:p=!0,(b=b||(m.avcSample=m._createAVCSample(!0,g.pts,g.dts,""))).key=!0,b.frame=!0;break;case 6:p=!0,(v=new _.default(m.discardEPB(e.data))).readUByte();for(var a=0,i=0,n=!1,s=0;!n&&1<v.bytesAvailable;){for(a=0;a+=s=v.readUByte(),255===s;);for(i=0;i+=s=v.readUByte(),255===s;);if(4===a&&0!==v.bytesAvailable){n=!0;if(181===v.readUByte())if(49===v.readUShort())if(1195456820===v.readUInt())if(3===v.readUByte()){var o=v.readUByte(),l=31&o,u=[o,v.readUByte()];for(y=0;y<l;y++)u.push(v.readUByte()),u.push(v.readUByte()),u.push(v.readUByte());m._insertSampleInOrder(m._txtTrack.samples,{type:3,pts:g.pts,bytes:u})}}else if(i<v.bytesAvailable)for(y=0;y<i;y++)v.readUByte()}break;case 7:if(T=p=!0,!E.sps){var d=(v=new _.default(e.data)).readSPS();E.width=d.width,E.height=d.height,E.pixelRatio=d.pixelRatio,E.sps=[e.data],E.duration=m._duration;var f=e.data.subarray(1,4),c="avc1.";for(y=0;y<3;y++){var h=f[y].toString(16);h.length<2&&(h="0"+h),c+=h}E.codec=c}break;case 8:p=!0,E.pps||(E.pps=[e.data]);break;case 9:p=!1,b&&m.pushAccesUnit(b,E),b=m.avcSample=m._createAVCSample(!1,g.pts,g.dts,"");break;case 12:p=!1;break;default:p=!1,b&&(b.debug+="unknown NAL "+e.type+" ")}b&&p&&b.units.push(e)}),e&&b&&(this.pushAccesUnit(b,E),this.avcSample=null)}},{key:"_createAVCSample",value:function(e,t,r,a){return{key:e,pts:t,dts:r,units:[],debug:a}}},{key:"_insertSampleInOrder",value:function(e,t){var r=e.length;if(0<r){if(t.pts>=e[r-1].pts)e.push(t);else for(var a=r-1;0<=a;a--)if(t.pts<e[a].pts){e.splice(a,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e,t,r=this.avcSample,a=void 0;return r&&0!==r.units.length||(r=(e=this._avcTrack.samples)[e.length-1]),r&&(a=(t=r.units)[t.length-1]),a}},{key:"_parseAVCNALu",value:function(e){var t,r,a,i,n,s=0,o=e.byteLength,l=this._avcTrack,u=g=l.naluState||0,d=[],f=-1;for(-1===g&&(a=31&e[f=0],g=0,s=1);s<o;){var c,h,g,v=e[s++];g?g=1!==g?v?1===v?(0<=f?(r={data:e.subarray(f,s-g-1),type:a},d.push(r)):(c=this._getLastNalUnit())&&(u&&s<=4-u&&c.state&&(c.data=c.data.subarray(0,c.data.byteLength-u)),0<(t=s-g-1)&&((h=new Uint8Array(c.data.byteLength+t)).set(c.data,0),h.set(e.subarray(0,t),c.data.byteLength),c.data=h)),s<o?(a=31&e[f=s],0):-1):0:3:v?0:2:g=v?0:1}return 0<=f&&0<=g&&(r={data:e.subarray(f,o),type:a,state:g},d.push(r)),0!==d.length||(i=this._getLastNalUnit())&&((n=new Uint8Array(i.data.byteLength+e.byteLength)).set(i.data,0),n.set(e,i.data.byteLength),i.data=n),l.naluState=g,d}},{key:"discardEPB",value:function(e){for(var t,r,a=e.byteLength,i=[],n=1;n<a-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return e;t=a-i.length,r=new Uint8Array(t);for(var s=0,n=0;n<t;s++,n++)s===i[0]&&(s++,i.shift()),r[n]=e[s];return r}},{key:"_parseAACPES",value:function(e){var t,r,a,i,n,s,o,l=this._audioTrack,u=e.data,d=e.pts,f=this.aacOverFlow,c=this.aacLastPTS;for(f&&((s=new Uint8Array(f.byteLength+u.byteLength)).set(f,0),s.set(u,f.byteLength),u=s),a=0,n=u.length;a<n-1&&!p.default.isHeader(u,a);a++);if(a){var h,g=a<n-1?(h="AAC PES did not start with ADTS header,offset:"+a,!1):(h="no ADTS header found in AAC PES",!0);if(I.logger.warn("parsing error:"+h),this.observer.trigger(O.default.ERROR,{type:P.ErrorTypes.MEDIA_ERROR,details:P.ErrorDetails.FRAG_PARSING_ERROR,fatal:g,reason:h}),g)return}for(p.default.initTrackConfig(l,this.observer,u,a,this.audioCodec),r=0,t=p.default.getFrameDuration(l.samplerate),f&&c&&(o=c+t,1<Math.abs(o-d)&&(I.logger.log("AAC: align PTS for overlapping frames by "+Math.round((o-d)/90)),d=o));a<n;)if(p.default.isHeader(u,a)&&a+5<n){var v=p.default.appendFrame(l,u,a,d,r);if(!v)break;a+=v.length,i=v.sample.pts,r++}else a++;f=a<n?u.subarray(a,n):null,this.aacOverFlow=f,this.aacLastPTS=i}},{key:"_parseMPEGPES",value:function(e){for(var t=e.data,r=t.length,a=0,i=0,n=e.pts;i<r;)if(o.default.isHeader(t,i)){var s=o.default.appendFrame(this._audioTrack,t,i,n,a);if(!s)break;i+=s.length,a++}else i++}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return 564<=e.length&&71===e[0]&&71===e[188]&&71===e[376]}}]),u);function u(e,t,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.observer=e,this.config=r,this.typeSupported=a,this.remuxer=t,this.sampleAes=null}r.default=l},{22:22,26:26,30:30,31:31,33:33,35:35,54:54}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException",WEBVTT_EXCEPTION:"webVTTException"}},{}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e};function n(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s,o=e(54),l=e(33),u=e(35),d=(s=u)&&s.__esModule?s:{default:s};var f=(i(c,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===a(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)},this)}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(t,e){try{(function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}).call(this,t,e).call()}catch(e){o.logger.error("internal error happened while processing "+t+":"+e.message),this.hls.trigger(d.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=Array(1<t?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}r.default=f},{33:33,35:35,54:54}],35:[function(e,t,r){"use strict";t.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],36:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(r,"__esModule",{value:!0});var i=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(n,null,[{key:"getSilentFrame",value:function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),n);function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}r.default=i},{}],37:[function(e,t,r){"use strict";var a={isBuffered:function(e,t){if(e)for(var r=e.buffered,a=0;a<r.length;a++)if(t>=r.start(a)&&t<=r.end(a))return!0;return!1},bufferInfo:function(e,t,r){if(!e)return{len:0,start:t,end:t,nextStart:void 0};try{for(var a=e.buffered,i=[],n=0;n<a.length;n++)i.push({start:a.start(n),end:a.end(n)});return this.bufferedInfo(i,t,r)}catch(e){}},bufferedInfo:function(e,t,r){var a,i,n,s,o,l=[];for(e.sort(function(e,t){var r=e.start-t.start;return r||t.end-e.end}),o=0;o<e.length;o++){var u,d=l.length;d?(u=l[d-1].end,e[o].start-u<r?e[o].end>u&&(l[d-1].end=e[o].end):l.push(e[o])):l.push(e[o])}for(a=o=0,i=n=t;o<l.length;o++){var f=l[o].start,c=l[o].end;if(f<=t+r&&t<c)i=f,a=(n=c)-t;else if(t+r<f){s=f;break}}return{len:a,start:i,end:n,nextStart:s}}};t.exports=a},{}],38:[function(e,t,r){"use strict";var h=e(54),g={mergeDetails:function(e,t){var r,a=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,n=t.startSN-e.startSN,s=e.fragments,o=t.fragments,l=0;if(i<a)t.PTSKnown=!1;else{for(var u=a;u<=i;u++){var d=s[n+u],f=o[u];f&&d&&(l=d.cc-f.cc,isNaN(d.startPTS)||(f.start=f.startPTS=d.startPTS,f.endPTS=d.endPTS,f.duration=d.duration,f.backtracked=d.backtracked,f.dropped=d.dropped,r=f))}if(l)for(h.logger.log("discontinuity sliding from playlist, take drift into account"),u=0;u<o.length;u++)o[u].cc+=l;if(r)g.updateFragPTSDTS(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(0<=n&&n<s.length)for(var c=s[n].start,u=0;u<o.length;u++)o[u].start+=c;t.PTSKnown=e.PTSKnown}},updateFragPTSDTS:function(e,t,r,a,i,n){var s,o=r;isNaN(t.startPTS)||(s=Math.abs(t.startPTS-r),isNaN(t.deltaPTS)?t.deltaPTS=s:t.deltaPTS=Math.max(s,t.deltaPTS),o=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),a=Math.max(a,t.endPTS),i=Math.min(i,t.startDTS),n=Math.max(n,t.endDTS));var l=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=o,t.endPTS=a,t.startDTS=i,t.endDTS=n,t.duration=a-r;var u,d,f,c=t.sn;if(!e||c<e.startSN||c>e.endSN)return 0;for(u=c-e.startSN,t=(d=e.fragments)[u],f=u;0<f;f--)g.updatePTS(d,f,f-1);for(f=u;f<d.length-1;f++)g.updatePTS(d,f,f+1);return e.PTSKnown=!0,l},updatePTS:function(e,t,r){var a=e[t],i=e[r],n=i.startPTS;isNaN(n)?i.start=t<r?a.start+a.duration:Math.max(a.start-i.duration,0):t<r?(a.duration=n-a.start,a.duration<0&&h.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):(i.duration=a.start-n,i.duration<0&&h.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}};t.exports=g},{54:54}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n=u(e(2)),s=u(e(35)),o=e(33),m=u(e(43)),E=u(e(41)),b=u(e(42)),T=u(e(13)),_=u(e(12)),k=u(e(11)),R=e(54),S=u(e(1)),l=e(4);function u(e){return e&&e.__esModule?e:{default:e}}var d=(a(A,null,[{key:"isSupported",value:function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),a=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return r&&a}},{key:"version",get:function(){return"0.7.10"}},{key:"Events",get:function(){return s.default}},{key:"ErrorTypes",get:function(){return o.ErrorTypes}},{key:"ErrorDetails",get:function(){return o.ErrorDetails}},{key:"DefaultConfig",get:function(){return A.defaultConfig?A.defaultConfig:l.hlsDefaultConfig},set:function(e){A.defaultConfig=e}}]),a(A,[{key:"destroy",value:function(){R.logger.log("destroy"),this.trigger(s.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1}},{key:"attachMedia",value:function(e){R.logger.log("attachMedia"),this.media=e,this.trigger(s.default.MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",value:function(){R.logger.log("detachMedia"),this.trigger(s.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){e.m3u8?(R.logger.log("loadSource:"+e.url),this.url=e.url,this.trigger(s.default.MANIFEST_LOADING,{url:e.url,m3u8:e.m3u8})):(e=e.url,e=n.default.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),R.logger.log("loadSource:"+e),this.url=e,this.trigger(s.default.MANIFEST_LOADING,{url:e}))}},{key:"startLoad",value:function(e){var t=0<arguments.length&&void 0!==e?e:-1;R.logger.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})}},{key:"stopLoad",value:function(){R.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})}},{key:"swapAudioCodec",value:function(){R.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){R.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){R.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){R.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){R.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){R.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){R.logger.log("set startLevel:"+e);-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){R.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,a=0;a<r;a++){if(t<(e[a].realBitrate?Math.max(e[a].realBitrate,e[a].bitrate):e[a].bitrate))return a}return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}}]),A);function A(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A);var r=A.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var a in r)a in e||(e[a]=r[a]);if(void 0!==e.liveMaxLatencyDurationCount&&e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(e.liveMaxLatencyDuration<=e.liveSyncDuration||void 0===e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,R.enableLogs)(e.debug),this.config=e,this._autoLevelCapping=-1;var i=this.observer=new S.default;i.trigger=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];i.emit.apply(i,[e,e].concat(r))},i.off=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];i.removeListener.apply(i,[e].concat(r))},this.on=i.on.bind(i),this.off=i.off.bind(i),this.trigger=i.trigger.bind(i);var n=this.abrController=new e.abrController(this),s=new e.bufferController(this),o=new e.capLevelController(this),l=new e.fpsController(this),u=new m.default(this),d=new E.default(this),f=new b.default(this),c=new k.default(this),h=[this.levelController=new _.default(this),this.streamController=new T.default(this)],g=e.audioStreamController;g&&h.push(new g(this)),this.networkControllers=h;var v,p,y=[u,d,f,n,s,o,l,c];(g=e.audioTrackController)&&(v=new g(this),this.audioTrackController=v,y.push(v)),(g=e.subtitleTrackController)&&(p=new g(this),this.subtitleTrackController=p,y.push(p)),[e.subtitleStreamController,e.timelineController].forEach(function(e){e&&y.push(new e(t))}),this.coreComponents=y}r.default=d},{1:1,11:11,12:12,13:13,2:2,33:33,35:35,4:4,41:41,42:42,43:43,54:54}],40:[function(e,t,r){"use strict";t.exports=e(39).default},{39:39}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=l(e(35)),n=l(e(34)),s=e(33),d=e(54);function l(e){return e&&e.__esModule?e:{default:e}}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,n.default),a(f,[{key:"destroy",value:function(){var e=this.loaders;for(var t in e){var r=e[t];r&&r.destroy()}this.loaders={},n.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,r=t.type,a=this.loaders[r],i=this.hls.config;t.loaded=0,a&&(d.logger.warn("abort previous fragment loader for type:"+r),a.abort()),a=this.loaders[r]=t.loader=void 0!==i.fLoader?new i.fLoader(i):new i.loader(i);var n,s,o=void 0,o={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1},l=t.byteRangeStartOffset,u=t.byteRangeEndOffset;isNaN(l)||isNaN(u)||(o.rangeStart=l,o.rangeEnd=u),n={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},a.load(o,n,s)}},{key:"loadsuccess",value:function(e,t,r,a){var i=3<arguments.length&&void 0!==a?a:null,n=e.data,s=r.frag;s.loader=void 0,this.loaders[s.type]=void 0,this.hls.trigger(o.default.FRAG_LOADED,{payload:n,frag:s,stats:t,networkDetails:i})}},{key:"loaderror",value:function(e,t,r){var a=2<arguments.length&&void 0!==r?r:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:a})}},{key:"loadtimeout",value:function(e,t,r){var a=2<arguments.length&&void 0!==r?r:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:a})}},{key:"loadprogress",value:function(e,t,r,a){var i=3<arguments.length&&void 0!==a?a:null,n=t.frag;n.loaded=e.loaded,this.hls.trigger(o.default.FRAG_LOAD_PROGRESS,{frag:n,stats:e,networkDetails:i})}}]),f);function f(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,e,o.default.FRAG_LOADING));return t.loaders={},t}r.default=u},{33:33,34:34,35:35,54:54}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=o(e(35)),n=o(e(34)),s=e(33),f=e(54);function o(e){return e&&e.__esModule?e:{default:e}}var l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,n.default),a(u,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},n.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t,r,a,i,n=e.frag,s=n.type,o=this.loaders[s],l=n.decryptdata,u=l.uri;u!==this.decrypturl||null===this.decryptkey?(t=this.hls.config,o&&(f.logger.warn("abort previous key loader for type:"+s),o.abort()),n.loader=this.loaders[s]=new t.loader(t),this.decrypturl=u,this.decryptkey=null,i=a=r=void 0,r={url:u,frag:n,responseType:"arraybuffer"},a={timeout:t.fragLoadingTimeOut,maxRetry:t.fragLoadingMaxRetry,retryDelay:t.fragLoadingRetryDelay,maxRetryDelay:t.fragLoadingMaxRetryTimeout},i={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.loader.load(r,a,i)):this.decryptkey&&(l.key=this.decryptkey,this.hls.trigger(d.default.KEY_LOADED,{frag:n}))}},{key:"loadsuccess",value:function(e,t,r){var a=r.frag;this.decryptkey=a.decryptdata.key=new Uint8Array(e.data),a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(d.default.KEY_LOADED,{frag:a})}},{key:"loaderror",value:function(e,t){var r=t.frag,a=r.loader;a&&a.abort(),this.loaders[t.type]=void 0,this.hls.trigger(d.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})}},{key:"loadtimeout",value:function(e,t){var r=t.frag,a=r.loader;a&&a.abort(),this.loaders[t.type]=void 0,this.hls.trigger(d.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})}}]),u);function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,d.default.KEY_LOADING));return t.loaders={},t.decryptkey=null,t.decrypturl=null,t}r.default=l},{33:33,34:34,35:35,54:54}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n=o(e(2)),m=o(e(35)),s=o(e(34)),E=e(33),S=o(e(47)),A=e(54);function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,f=/#EXT-X-MEDIA:(.*)/g,L=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),w=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,D=(a(u,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=n.default.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),u);function u(){l(this,u),this.method=null,this.key=null,this.iv=null,this._uri=null}var O=(a(c,[{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&((r=new D).method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=n.default.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){var e,t,r;return this._byteRange||(e=this._byteRange=[],this.rawByteRange&&(1===(t=this.rawByteRange.split("@",2)).length?(r=this.lastByteRangeEndOffset,e[0]=r||0):e[0]=parseInt(t[1]),e[1]=parseInt(t[0])+e[0])),this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),c);function c(){l(this,c),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}var h=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(g,s.default),a(g,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},s.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){e.m3u8?this.loadsuccess({data:e.m3u8,url:e.url},{loaded:1,retry:1,tfirst:1,tload:1,total:1,trequest:1},{type:"manifest",url:e.url}):this.load(e.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"onSubtitleTrackLoading",value:function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})}},{key:"load",value:function(e,t){var r=this.loaders[t.type];if(r){var a=r.context;if(a&&a.url===e)return void A.logger.trace("playlist request ongoing");A.logger.warn("abort previous loader for type:"+t.type),r.abort()}var i=this.hls.config,n=void 0,s=void 0,o=void 0,l=void 0;"manifest"===t.type?(n=i.manifestLoadingMaxRetry,s=i.manifestLoadingTimeOut,o=i.manifestLoadingRetryDelay,l=i.manifestLoadingMaxRetryTimeout):(n=i.levelLoadingMaxRetry,s=i.levelLoadingTimeOut,o=i.levelLoadingRetryDelay,l=i.levelLoadingMaxRetryTimeout,A.logger.log("loading playlist for "+t.type+" "+(t.level||t.id))),r=this.loaders[t.type]=t.loader=void 0!==i.pLoader?new i.pLoader(i):new i.loader(i),t.url=e,t.responseType="";var u={timeout:s,maxRetry:n,retryDelay:o,maxRetryDelay:l},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};r.load(t,u,d)}},{key:"resolve",value:function(e,t){return n.default.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}},{key:"parseMasterPlaylist",value:function(e,t){var r,a=[];for(d.lastIndex=0;null!=(r=d.exec(e));){var i={},n=i.attrs=new S.default(r[1]);i.url=this.resolve(r[2],t);var s=n.decimalResolution("RESOLUTION");s&&(i.width=s.width,i.height=s.height),i.bitrate=n.decimalInteger("AVERAGE-BANDWIDTH")||n.decimalInteger("BANDWIDTH"),i.name=n.NAME;var o=n.CODECS;if(o){o=o.split(/[ ,]+/);for(var l=0;l<o.length;l++){var u=o[l];-1!==u.indexOf("avc1")?i.videoCodec=this.avc1toavcoti(u):-1!==u.indexOf("hvc1")?i.videoCodec=u:i.audioCodec=u}}a.push(i)}return a}},{key:"parseMasterPlaylistMedia",value:function(e,t,r,a){var i,n=3<arguments.length&&void 0!==a?a:null,s=[],o=0;for(f.lastIndex=0;null!=(i=f.exec(e));){var l={},u=new S.default(i[1]);u.TYPE===r&&(l.groupId=u["GROUP-ID"],l.name=u.NAME,l.type=r,l.default="YES"===u.DEFAULT,l.autoselect="YES"===u.AUTOSELECT,l.forced="YES"===u.FORCED,u.URI&&(l.url=this.resolve(u.URI,t)),l.lang=u.LANGUAGE,l.name||(l.name=l.lang),n&&(l.audioCodec=n),l.id=o++,s.push(l))}return s}},{key:"avc1toavcoti",value:function(e){var t,r=e.split(".");return 2<r.length?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t}},{key:"parseLevelPlaylist",value:function(e,t,r,a){var i,n,s=0,o=0,l={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},u=new D,d=0,f=null,c=new O;for(L.lastIndex=0;null!==(i=L.exec(e));){var h,g,v=i[1];if(v){c.duration=parseFloat(v);var p=(" "+i[2]).slice(1);c.title=p||null,c.tagList.push(p?["INF",v,p]:["INF",v])}else if(i[3]){isNaN(c.duration)||(h=s++,c.type=a,c.start=o,c.levelkey=u,c.sn=h,c.level=r,c.cc=d,c.baseurl=t,c.relurl=(" "+i[3]).slice(1),l.fragments.push(c),o+=(f=c).duration,c=new O)}else if(i[4]){c.rawByteRange=(" "+i[4]).slice(1),!f||(g=f.byteRangeEndOffset)&&(c.lastByteRangeEndOffset=g)}else if(i[5])c.rawProgramDateTime=(" "+i[5]).slice(1),c.tagList.push(["PROGRAM-DATE-TIME",c.rawProgramDateTime]);else{for(i=i[0].match(w),n=1;n<i.length&&void 0===i[n];n++);var y=(" "+i[n+1]).slice(1),m=(" "+i[n+2]).slice(1);switch(i[n]){case"#":c.tagList.push(m?[y,m]:[y]);break;case"PLAYLIST-TYPE":l.type=y.toUpperCase();break;case"MEDIA-SEQUENCE":s=l.startSN=parseInt(y);break;case"TARGETDURATION":l.targetduration=parseFloat(y);break;case"VERSION":l.version=parseInt(y);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":d++,c.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":d=parseInt(y);break;case"KEY":var E=new S.default(y),b=E.enumeratedString("METHOD"),T=E.URI,_=E.hexadecimalInteger("IV");b&&(u=new D,T&&0<=["AES-128","SAMPLE-AES"].indexOf(b)&&(u.method=b,u.baseuri=t,u.reluri=T,u.key=null,u.iv=_));break;case"START":var k=new S.default(y).decimalFloatingPoint("TIME-OFFSET");isNaN(k)||(l.startTimeOffset=k);break;case"MAP":var R=new S.default(y);c.relurl=R.URI,c.rawByteRange=R.BYTERANGE,c.baseurl=t,c.level=r,c.type=a,c.sn="initSegment",l.initSegment=c,c=new O;break;default:A.logger.warn("line parsed but not handled: "+i)}}}return(c=f)&&!c.relurl&&(l.fragments.pop(),o-=c.duration),l.totalduration=o,l.averagetargetduration=o/l.fragments.length,l.endSN=s-1,l}},{key:"loadsuccess",value:function(e,t,r,a){var i,n,s,o,l,u,d,f=3<arguments.length&&void 0!==a?a:null,c=e.data,h=e.url,g=r.type,v=r.id,p=r.level,y=this.hls;(this.loaders[g]=void 0)!==h&&0!==h.indexOf("data:")||(h=r.url),t.tload=performance.now(),0===c.indexOf("#EXTM3U")?0<c.indexOf("#EXTINF:")?(i="audioTrack"!==g&&"subtitleTrack"!==g,n=isNaN(p)?isNaN(v)?0:v:p,(s=this.parseLevelPlaylist(c,h,n,"audioTrack"===g?"audio":"subtitleTrack"===g?"subtitle":"main")).tload=t.tload,"manifest"===g&&y.trigger(m.default.MANIFEST_LOADED,{levels:[{url:h,details:s}],audioTracks:[],url:h,stats:t,networkDetails:f}),t.tparsed=performance.now(),s.targetduration?i?y.trigger(m.default.LEVEL_LOADED,{details:s,level:p||0,id:v||0,stats:t,networkDetails:f}):"audioTrack"===g?y.trigger(m.default.AUDIO_TRACK_LOADED,{details:s,id:v,stats:t,networkDetails:f}):"subtitleTrack"===g&&y.trigger(m.default.SUBTITLE_TRACK_LOADED,{details:s,id:v,stats:t,networkDetails:f}):y.trigger(m.default.ERROR,{type:E.ErrorTypes.NETWORK_ERROR,details:E.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:h,reason:"invalid targetduration",networkDetails:f})):(o=this.parseMasterPlaylist(c,h)).length?(l=this.parseMasterPlaylistMedia(c,h,"AUDIO",o[0].audioCodec),u=this.parseMasterPlaylistMedia(c,h,"SUBTITLES"),l.length&&(d=!1,l.forEach(function(e){e.url||(d=!0)}),!1===d&&o[0].audioCodec&&!o[0].attrs.AUDIO&&(A.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),l.unshift({type:"main",name:"main"}))),y.trigger(m.default.MANIFEST_LOADED,{levels:o,audioTracks:l,subtitles:u,url:h,stats:t,networkDetails:f})):y.trigger(m.default.ERROR,{type:E.ErrorTypes.NETWORK_ERROR,details:E.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:h,reason:"no level found in manifest",networkDetails:f}):y.trigger(m.default.ERROR,{type:E.ErrorTypes.NETWORK_ERROR,details:E.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:h,reason:"no EXTM3U delimiter",networkDetails:f})}},{key:"loaderror",value:function(e,t,r){var a,i,n=2<arguments.length&&void 0!==r?r:null,s=t.loader;switch(t.type){case"manifest":a=E.ErrorDetails.MANIFEST_LOAD_ERROR,i=!0;break;case"level":a=E.ErrorDetails.LEVEL_LOAD_ERROR,i=!1;break;case"audioTrack":a=E.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,i=!1}s&&(s.abort(),this.loaders[t.type]=void 0),this.hls.trigger(m.default.ERROR,{type:E.ErrorTypes.NETWORK_ERROR,details:a,fatal:i,url:s.url,loader:s,response:e,context:t,networkDetails:n})}},{key:"loadtimeout",value:function(e,t,r){var a,i,n=2<arguments.length&&void 0!==r?r:null,s=t.loader;switch(t.type){case"manifest":a=E.ErrorDetails.MANIFEST_LOAD_TIMEOUT,i=!0;break;case"level":a=E.ErrorDetails.LEVEL_LOAD_TIMEOUT,i=!1;break;case"audioTrack":a=E.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,i=!1}s&&(s.abort(),this.loaders[t.type]=void 0),this.hls.trigger(m.default.ERROR,{type:E.ErrorTypes.NETWORK_ERROR,details:a,fatal:i,url:s.url,loader:s,context:t,networkDetails:n})}}]),g);function g(e){l(this,g);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,e,m.default.MANIFEST_LOADING,m.default.LEVEL_LOADING,m.default.AUDIO_TRACK_LOADING,m.default.SUBTITLE_TRACK_LOADING));return t.loaders={},t}r.default=h},{2:2,33:33,34:34,35:35,47:47,54:54}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=Math.pow(2,32)-1,n=(a(c,null,[{key:"init",value:function(){var e;for(e in c.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})c.types.hasOwnProperty(e)&&(c.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);c.HDLR_TYPES={video:t,audio:r};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);c.STTS=c.STSC=c.STCO=i,c.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),c.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),c.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),c.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var n=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);c.FTYP=c.box(c.types.ftyp,n,o,n,s),c.DINF=c.box(c.types.dinf,c.box(c.types.dref,a))}},{key:"box",value:function(e){for(var t,r=Array.prototype.slice.call(arguments,1),a=8,i=r.length,n=i;i--;)a+=r[i].byteLength;for((t=new Uint8Array(a))[0]=a>>24&255,t[1]=a>>16&255,t[2]=a>>8&255,t[3]=255&a,t.set(e,4),i=0,a=8;i<n;i++)t.set(r[i],a),a+=r[i].byteLength;return t}},{key:"hdlr",value:function(e){return c.box(c.types.hdlr,c.HDLR_TYPES[e])}},{key:"mdat",value:function(e){return c.box(c.types.mdat,e)}},{key:"mdhd",value:function(e,t){t*=e;var r=Math.floor(t/(1+o)),a=Math.floor(t%(1+o));return c.box(c.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))}},{key:"mdia",value:function(e){return c.box(c.types.mdia,c.mdhd(e.timescale,e.duration),c.hdlr(e.type),c.minf(e))}},{key:"mfhd",value:function(e){return c.box(c.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}},{key:"minf",value:function(e){return"audio"===e.type?c.box(c.types.minf,c.box(c.types.smhd,c.SMHD),c.DINF,c.stbl(e)):c.box(c.types.minf,c.box(c.types.vmhd,c.VMHD),c.DINF,c.stbl(e))}},{key:"moof",value:function(e,t,r){return c.box(c.types.moof,c.mfhd(e),c.traf(r,t))}},{key:"moov",value:function(e){for(var t=e.length,r=[];t--;)r[t]=c.trak(e[t]);return c.box.apply(null,[c.types.moov,c.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(c.mvex(e)))}},{key:"mvex",value:function(e){for(var t=e.length,r=[];t--;)r[t]=c.trex(e[t]);return c.box.apply(null,[c.types.mvex].concat(r))}},{key:"mvhd",value:function(e,t){t*=e;var r=Math.floor(t/(1+o)),a=Math.floor(t%(1+o)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return c.box(c.types.mvhd,i)}},{key:"sdtp",value:function(e){for(var t,r=e.samples||[],a=new Uint8Array(4+r.length),i=0;i<r.length;i++)t=r[i].flags,a[i+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return c.box(c.types.sdtp,a)}},{key:"stbl",value:function(e){return c.box(c.types.stbl,c.stsd(e),c.box(c.types.stts,c.STTS),c.box(c.types.stsc,c.STSC),c.box(c.types.stsz,c.STSZ),c.box(c.types.stco,c.STCO))}},{key:"avc1",value:function(e){for(var t,r,a=[],i=[],n=0;n<e.sps.length;n++)r=(t=e.sps[n]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(t));for(n=0;n<e.pps.length;n++)r=(t=e.pps[n]).byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(t));var s=c.box(c.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(i))),o=e.width,l=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return c.box(c.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,c.box(c.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),c.box(c.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(e){var t=e.samplerate;return c.box(c.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),c.box(c.types.esds,c.esds(e)))}},{key:"mp3",value:function(e){var t=e.samplerate;return c.box(c.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))}},{key:"stsd",value:function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?c.box(c.types.stsd,c.STSD,c.mp4a(e)):c.box(c.types.stsd,c.STSD,c.mp3(e)):c.box(c.types.stsd,c.STSD,c.avc1(e))}},{key:"tkhd",value:function(e){var t=e.id,r=e.duration*e.timescale,a=e.width,i=e.height,n=Math.floor(r/(1+o)),s=Math.floor(r%(1+o));return c.box(c.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,i>>8&255,255&i,0,0]))}},{key:"traf",value:function(e,t){var r=c.sdtp(e),a=e.id,i=Math.floor(t/(1+o)),n=Math.floor(t%(1+o));return c.box(c.types.traf,c.box(c.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),c.box(c.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n])),c.trun(e,r.length+16+20+8+16+8+8),r)}},{key:"trak",value:function(e){return e.duration=e.duration||4294967295,c.box(c.types.trak,c.tkhd(e),c.mdia(e))}},{key:"trex",value:function(e){var t=e.id;return c.box(c.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(e,t){var r,a,i,n,s,o,l=e.samples||[],u=l.length,d=12+16*u,f=new Uint8Array(d);for(t+=8+d,f.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),r=0;r<u;r++)i=(a=l[r]).duration,n=a.size,s=a.flags,o=a.cts,f.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,n>>>24&255,n>>>16&255,n>>>8&255,255&n,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*r);return c.box(c.types.trun,f)}},{key:"initSegment",value:function(e){c.types||c.init();var t=c.moov(e),r=new Uint8Array(c.FTYP.byteLength+t.byteLength);return r.set(c.FTYP),r.set(t,c.FTYP.byteLength),r}}]),c);function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c)}r.default=n},{}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var v=n(e(36)),Z=n(e(35)),ee=e(54),te=n(e(44)),re=e(33);function n(e){return e&&e.__esModule?e:{default:e}}var s=(a(o,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(e){this._initPTS=this._initDTS=e}},{key:"resetInitSegment",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,r,a,i,n,s){var o,l,u,d,f,c,h,g,v,p,y;this.ISGenerated?s&&(o=this._initPTS,l=this._PTSNormalize,u=e.inputTimeScale||t.inputTimeScale,h=c=1/0,(d=e.samples).length&&(c=h=l(d[0].pts-u*i,o)),(d=t.samples).length&&(f=d[0],c=Math.min(c,l(f.pts-u*i,o)),h=Math.min(h,l(f.dts-u*i,o))),c!==1/0&&(g=o-c,Math.abs(g)>10*u&&(ee.logger.warn("timestamp inconsistency, "+(g/u).toFixed(3)+"s delta against expected value: missing discontinuity ? reset initPTS/initDTS"),this._initPTS=c,this._initDTS=h,this.observer.trigger(Z.default.INIT_PTS_FOUND,{initPTS:c})))):this.generateIS(e,t,i),this.ISGenerated&&(e.samples.length?(e.timescale||(ee.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i)),v=this.remuxAudio(e,i,n,s),t.samples.length&&(p=void 0,v&&(p=v.endPTS-v.startPTS),t.timescale||(ee.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,i,n,p,s))):(y=void 0,t.samples.length&&(y=this.remuxVideo(t,i,n,s)),y&&e.codec&&this.remuxEmptyAudio(e,i,n,y))),r.samples.length&&this.remuxID3(r,i),a.samples.length&&this.remuxText(a,i),this.observer.trigger(Z.default.FRAG_PARSED)}},{key:"generateIS",value:function(e,t,r){var a,i,n,s=this.observer,o=e.samples,l=t.samples,u=this.typeSupported,d="audio/mp4",f={},c={tracks:f},h=void 0===this._initPTS;h&&(a=i=1/0),e.config&&o.length&&(e.timescale=e.samplerate,ee.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(u.mpeg?(d="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3")),f.audio={container:d,codec:e.codec,initSegment:!e.isAAC&&u.mpeg?new Uint8Array:te.default.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(a=i=o[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&l.length&&(n=t.inputTimeScale,t.timescale=n,f.video={container:"video/mp4",codec:t.codec,initSegment:te.default.initSegment([t]),metadata:{width:t.width,height:t.height}},h&&(a=Math.min(a,l[0].pts-n*r),i=Math.min(i,l[0].dts-n*r),this.observer.trigger(Z.default.INIT_PTS_FOUND,{initPTS:a}))),Object.keys(f).length?(s.trigger(Z.default.FRAG_PARSING_INIT_SEGMENT,c),this.ISGenerated=!0,h&&(this._initPTS=a,this._initDTS=i)):s.trigger(Z.default.ERROR,{type:re.ErrorTypes.MEDIA_ERROR,details:re.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,r,a,i){var n,s,o,l,u,d=8,f=e.timescale,c=e.samples,h=[],g=c.length,v=this._PTSNormalize,p=this._initDTS,y=this.nextAvcDts,m=this.isSafari;m&&(r|=c.length&&y&&(i&&Math.abs(t-y/f)<.1||Math.abs(c[0].pts-y-p)<f/5)),r||(y=t*f),c.forEach(function(e){e.pts=v(e.pts-p,y),e.dts=v(e.dts-p,y)}),c.sort(function(e,t){var r=e.dts-t.dts,a=e.pts-t.pts;return r||(a||e.id-t.id)});var E=c.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(E<0){ee.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(E/90)+" ms to overcome this issue");for(var b=0;b<c.length;b++)c[b].dts+=E}var T=c[0],_=Math.max(T.dts,0),k=Math.max(T.pts,0),R=Math.round((_-y)/90);r&&R&&(1<R?ee.logger.log("AVC:"+R+" ms hole between fragments detected,filling it"):R<-1&&ee.logger.log("AVC:"+-R+" ms overlapping between fragments detected"),_=y,c[0].dts=_,k=Math.max(k-R,y),c[0].pts=k,ee.logger.log("Video/PTS/DTS adjusted: "+Math.round(k/90)+"/"+Math.round(_/90)+",delta:"+R+" ms")),T=c[c.length-1],u=Math.max(T.dts,0),l=Math.max(T.pts,0,u),m&&(n=Math.round((u-_)/(c.length-1)));for(var S=0,A=0,L=0;L<g;L++){for(var w=c[L],D=w.units,O=D.length,I=0,P=0;P<O;P++)I+=D[P].data.length;A+=I,S+=O,w.length=I,w.dts=m?_+L*n:Math.max(w.dts,_),w.pts=Math.max(w.pts,w.dts)}var C=A+4*S+8;try{s=new Uint8Array(C)}catch(e){return void this.observer.trigger(Z.default.ERROR,{type:re.ErrorTypes.MUX_ERROR,details:re.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:C,reason:"fail allocating video mdat "+C})}var x=new DataView(s.buffer);x.setUint32(0,C),s.set(te.default.types.mdat,4);for(var F=0;F<g;F++){for(var M,N,U,B,G,j=c[F],H=j.units,W=0,K=void 0,V=0,Y=H.length;V<Y;V++){var X=H[V],z=X.data,q=X.data.byteLength;x.setUint32(d,q),d+=4,s.set(z,d),d+=q,W+=4+q}K=m?Math.max(0,n*Math.round((j.pts-j.dts)/n)):(F<g-1?n=c[F+1].dts-j.dts:(M=this.config,N=j.dts-c[0<F?F-1:F].dts,M.stretchShortVideoTrack?(U=M.maxBufferHole,B=M.maxSeekHole,Math.floor(Math.min(U,B)*f)<(G=(a?k+a*f:this.nextAudioPts)-j.pts)?((n=G-N)<0&&(n=N),ee.logger.log("It is approximately "+G/90+" ms to the next segment; using duration "+n/90+" ms for the last video frame.")):n=N):n=N),Math.round(j.pts-j.dts)),h.push({size:W,duration:n,cts:K,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:j.key?2:1,isNonSync:j.key?0:1}})}this.nextAvcDts=u+n;var Q,$=e.dropped;e.len=0,e.nbNalu=0,e.dropped=0,h.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&((Q=h[0].flags).dependsOn=2,Q.isNonSync=0),e.samples=h,o=te.default.moof(e.sequenceNumber++,_,e),e.samples=[];var J={data1:o,data2:s,startPTS:k/f,endPTS:(l+n)/f,startDTS:_/f,endDTS:this.nextAvcDts/f,type:"video",nb:h.length,dropped:$};return this.observer.trigger(Z.default.FRAG_PARSING_DATA,J),J}},{key:"remuxAudio",value:function(e,t,r,a){var i,n,s,o,l,u,d=e.inputTimeScale,f=d/e.timescale,c=(e.isAAC?1024:1152)*f,h=this._PTSNormalize,g=this._initDTS,v=!e.isAAC&&this.typeSupported.mpeg,p=e.samples,y=[],m=this.nextAudioPts;if((r|=p.length&&m&&(a&&Math.abs(t-m/d)<.1||Math.abs(p[0].pts-m-g)<20*c))||(m=t*d),p.forEach(function(e){e.pts=e.dts=h(e.pts-g,m)}),p.sort(function(e,t){return e.pts-t.pts}),a&&e.isAAC)for(var E=0,b=m;E<p.length;){var T=p[E],_=T.pts-b,k=Math.abs(1e3*_/d);if(_<=-c)ee.logger.warn("Dropping 1 audio frame @ "+(b/d).toFixed(3)+"s due to "+k+" ms overlap."),p.splice(E,1),e.len-=T.unit.length;else if(c<=_&&k<1e4&&b){var R=Math.round(_/c);ee.logger.warn("Injecting "+R+" audio frame @ "+(b/d).toFixed(3)+"s due to "+Math.round(1e3*_/d)+" ms gap.");for(var S=0;S<R;S++){var A=Math.max(b,0);n||(ee.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),n=T.unit.subarray()),p.splice(E,0,{unit:n,pts:A,dts:A}),e.len+=n.length,b+=c,E++}T.pts=T.dts=b,b+=c,E++}else Math.abs(_),T.pts=T.dts=b,b+=c,E++}for(var L=0,w=p.length;L<w;L++){var D=p[L],O=D.unit,I=D.pts;if(void 0!==u)i.duration=Math.round((I-u)/f);else{var P=Math.round(1e3*(I-m)/d),C=0;if(r&&e.isAAC&&P){if(0<P&&P<1e4)C=Math.round((I-m)/c),ee.logger.log(P+" ms hole between AAC samples detected,filling it"),0<C&&(n=n||O.subarray(),e.len+=C*n.length);else if(P<-12){ee.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(m/d).toFixed(3)+"s/"+(I/d).toFixed(3)+"s/"+-P+"ms"),e.len-=O.byteLength;continue}I=m}if(l=Math.max(0,I),!(0<e.len))return;var x=v?e.len:e.len+8,F=v?0:8;try{s=new Uint8Array(x)}catch(e){return void this.observer.trigger(Z.default.ERROR,{type:re.ErrorTypes.MUX_ERROR,details:re.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:x,reason:"fail allocating audio mdat "+x})}v||(new DataView(s.buffer).setUint32(0,x),s.set(te.default.types.mdat,4));for(var M=0;M<C;M++)n||(ee.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),n=O.subarray()),s.set(n,F),F+=n.byteLength,i={size:n.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},y.push(i)}s.set(O,F);var N=O.byteLength;F+=N,i={size:N,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},y.push(i),u=I}var U=0,B=y.length;if(2<=B&&(U=y[B-2].duration,i.duration=U),B){this.nextAudioPts=m=u+f*U,e.len=0,e.samples=y,o=v?new Uint8Array:te.default.moof(e.sequenceNumber++,l/f,e),e.samples=[];var G=l/d,j=m/d,H={data1:o,data2:s,startPTS:G,endPTS:j,startDTS:G,endDTS:j,type:"audio",nb:B};return this.observer.trigger(Z.default.FRAG_PARSING_DATA,H),H}return null}},{key:"remuxEmptyAudio",value:function(e,t,r,a){var i=e.inputTimeScale,n=i/(e.samplerate?e.samplerate:i),s=this.nextAudioPts,o=(void 0!==s?s:a.startDTS*i)+this._initDTS,l=a.endDTS*i+this._initDTS,u=1024*n,d=Math.ceil((l-o)/u),f=v.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(ee.logger.warn("remux empty Audio"),f){for(var c=[],h=0;h<d;h++){var g=o+h*u;c.push({unit:f,pts:g,dts:g}),e.len+=f.length}e.samples=c,this.remuxAudio(e,t,r)}else ee.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")}},{key:"remuxID3",value:function(e){var t,r=e.samples.length,a=e.inputTimeScale,i=this._initPTS,n=this._initDTS;if(r){for(var s=0;s<r;s++)(t=e.samples[s]).pts=(t.pts-i)/a,t.dts=(t.dts-n)/a;this.observer.trigger(Z.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]}},{key:"remuxText",value:function(e){e.samples.sort(function(e,t){return e.pts-t.pts});var t,r=e.samples.length,a=e.inputTimeScale,i=this._initPTS;if(r){for(var n=0;n<r;n++)(t=e.samples[n]).pts=(t.pts-i)/a;this.observer.trigger(Z.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]}},{key:"_PTSNormalize",value:function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=r;return e}}]),o);function o(e,t,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.observer=e,this.config=t,this.typeSupported=r;var i=navigator.userAgent;this.isSafari=a&&-1<a.indexOf("Apple")&&i&&!i.match("CriOS"),this.ISGenerated=!1}r.default=s},{33:33,35:35,36:36,44:44,54:54}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n,s=e(35),d=(n=s)&&n.__esModule?n:{default:n};var o=(a(l,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(){}},{key:"remux",value:function(e,t,r,a,i,n,s,o){var l=this.observer,u="";e&&(u+="audio"),t&&(u+="video"),l.trigger(d.default.FRAG_PARSING_DATA,{data1:o,startPTS:i,startDTS:i,type:u,nb:1,dropped:0}),l.trigger(d.default.FRAG_PARSED)}}]),l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.observer=e}r.default=o},{35:35}],47:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(r,"__esModule",{value:!0});var i=/^(\d+)x(\d+)$/,n=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,s=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(o,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",value:function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,r=new Uint8Array(t.length/2),a=0;a<t.length/2;a++)r[a]=parseInt(t.slice(2*a,2*a+2),16);return r}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){var t=i.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}}],[{key:"parseAttrList",value:function(e){var t,r={};for(n.lastIndex=0;null!==(t=n.exec(e));){var a=t[2];0===a.indexOf('"')&&a.lastIndexOf('"')===a.length-1&&(a=a.slice(1,-1)),r[t[1]]=a}return r}}]),o);function o(e){for(var t in!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),"string"==typeof e&&(e=o.parseAttrList(e)),e)e.hasOwnProperty(t)&&(this[t]=e[t])}r.default=s},{}],48:[function(e,t,r){"use strict";t.exports={search:function(e,t){for(var r,a,i=0,n=e.length-1;i<=n;){var s=t(a=e[r=(i+n)/2|0]);if(0<s)i=1+r;else{if(!(s<0))return a;n=r-1}}return null}}},{}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=e;return n.hasOwnProperty(e)&&(t=n[e]),String.fromCharCode(t)}function l(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t}var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},f=15,u=100,d={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},h={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},g={25:2,26:4,29:6,30:8,31:10,27:13,28:15},v=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],p={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e){this.verboseFilter[e];this.verboseLevel}},y=(a(m,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var a=t[r];e.hasOwnProperty(a)&&(this[a]=e[a])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}},{key:"copy",value:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),m);function m(e,t,r,a,i){s(this,m),this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=a||"black",this.flash=i||!1}var E=(a(b,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(e,t){this.uchar=e,this.penState.copy(t)}},{key:"setPenState",value:function(e){this.penState.copy(e)}},{key:"equals",value:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}},{key:"copy",value:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),b);function b(e,t,r,a,i,n){s(this,b),this.uchar=e||" ",this.penState=new y(t,r,a,i,n)}var T=(a(_,[{key:"equals",value:function(e){for(var t=!0,r=0;r<u;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<u;t++)this.chars[t].copy(e.chars[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<u;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:"setCursor",value:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(p.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(p.log("ERROR","Too large cursor position "+this.pos),this.pos=u)}},{key:"moveCursor",value:function(e){var t=this.pos+e;if(1<e)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(e){144<=e&&this.backSpace();var t=o(e);this.pos>=u?p.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}},{key:"clearFromPos",value:function(e){for(var t=e;t<u;t++)this.chars[t].reset()}},{key:"clear",value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var e=[],t=!0,r=0;r<u;r++){var a=this.chars[r].uchar;" "!==a&&(t=!1),e.push(a)}return t?"":e.join("")}},{key:"setPenStyles",value:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}]),_);function _(){s(this,_),this.chars=[];for(var e=0;e<u;e++)this.chars.push(new E);this.pos=0,this.currPenState=new y}var k=(a(R,[{key:"reset",value:function(){for(var e=0;e<f;e++)this.rows[e].clear();this.currRow=f-1}},{key:"equals",value:function(e){for(var t=!0,r=0;r<f;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<f;t++)this.rows[t].copy(e.rows[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<f;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}},{key:"backSpace",value:function(){this.rows[this.currRow].backSpace()}},{key:"clearToEndOfRow",value:function(){this.rows[this.currRow].clearToEndOfRow()}},{key:"insertChar",value:function(e){this.rows[this.currRow].insertChar(e)}},{key:"setPen",value:function(e){this.rows[this.currRow].setPenStyles(e)}},{key:"moveCursor",value:function(e){this.rows[this.currRow].moveCursor(e)}},{key:"setCursor",value:function(e){p.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)}},{key:"setPAC",value:function(e){p.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<f;r++)this.rows[r].clear();var a=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var n=i.rows[a].cueStartTime;if(n&&n<p.time)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(i.rows[a+s])}}this.currRow=t;var o,l,u=this.rows[this.currRow];null!==e.indent&&(o=e.indent,l=Math.max(o-1,0),u.setCursor(e.indent),e.color=u.chars[l].penState.foreground);var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)}},{key:"setBkgData",value:function(e){p.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}},{key:"setRollUpRows",value:function(e){this.nrRollUpRows=e}},{key:"rollUp",value:function(){var e,t;null!==this.nrRollUpRows?(p.log("TEXT",this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(t=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,t),p.log("INFO","Rolling up")):p.log("DEBUG","roll_up but nrRollUpRows not set yet")}},{key:"getDisplayText",value:function(e){e=e||!1;for(var t,r=[],a="",i=0;i<f;i++){var n=this.rows[i].getTextString();n&&(t=i+1,e?r.push("Row "+t+": '"+n+"'"):r.push(n.trim()))}return 0<r.length&&(a=e?"["+r.join(" | ")+"]":r.join("\n")),a}},{key:"getTextAndFormat",value:function(){return this.rows}}]),R);function R(){s(this,R),this.rows=[];for(var e=0;e<f;e++)this.rows.push(new T);this.currRow=f-1,this.nrRollUpRows=null,this.reset()}var S=(a(A,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[f-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(e){this.outputFilter=e}},{key:"setPAC",value:function(e){this.writeScreen.setPAC(e)}},{key:"setBkgData",value:function(e){this.writeScreen.setBkgData(e)}},{key:"setMode",value:function(e){e!==this.mode&&(this.mode=e,p.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}},{key:"insertChars",value:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";p.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(p.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){p.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){p.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){p.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(e){p.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}},{key:"ccFON",value:function(){p.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){p.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){p.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){p.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){p.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){p.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){p.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",value:function(){var e;p.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,p.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate()}},{key:"ccTO",value:function(e){p.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}},{key:"ccMIDROW",value:function(e){var t,r={flash:!1};r.underline=e%2==1,r.italics=46<=e,r.italics?r.foreground="white":(t=Math.floor(e/2)-16,r.foreground=["white","green","blue","cyan","red","yellow","magenta"][t]),p.log("INFO","MIDROW: "+JSON.stringify(r)),this.writeScreen.setPen(r)}},{key:"outputDataUpdate",value:function(){var e=p.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}]),A);function A(e,t){s(this,A),this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new k,this.nonDisplayedMemory=new k,this.lastOutputScreen=new k,this.currRollUpRow=this.displayedMemory.rows[f-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}var L=(a(w,[{key:"getHandler",value:function(e){return this.channels[e].getHandler()}},{key:"setHandler",value:function(e,t){this.channels[e].setHandler(t)}},{key:"addData",value:function(e,t){var r,a=!1;this.lastTime=e,p.setTime(e);for(var i=0;i<t.length;i+=2){var n=127&t[i],s=127&t[i+1];0!=n||0!=s?(p.log("DATA","["+l([t[i],t[i+1]])+"] -> ("+l([n,s])+")"),(r=(r=(r=(r=this.parseCmd(n,s))||this.parseMidrow(n,s))||this.parsePAC(n,s))||this.parseBackgroundAttributes(n,s))||(a=this.parseChars(n,s))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(a):p.log("WARNING","No channel found yet. TEXT-MODE?")),r?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,p.log("WARNING","Couldn't parse cleaned data "+l([n,s])+" orig: "+l([t[i],t[i+1]])))):this.dataCounters.padding+=2}}},{key:"parseCmd",value:function(e,t){var r=null;if(!((20===e||28===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,p.log("DEBUG","Repeated command ("+l([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var a=this.channels[r-1];return 20===e||28===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0}},{key:"parseMidrow",value:function(e,t){var r=null;return(17===e||25===e)&&32<=t&&t<=47&&((r=17===e?1:2)!==this.currChNr?(p.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[r-1].ccMIDROW(t),p.log("DEBUG","MIDROW ("+l([e,t])+")"),!0))}},{key:"parsePAC",value:function(e,t){var r,a=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,!(this.lastCmdB=null);r=e<=23?1:2,a=64<=t&&t<=95?1==r?d[e]:h[e]:1==r?c[e]:g[e];var i=this.interpretPAC(a,t);return this.channels[r-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0}},{key:"interpretPAC",value:function(e,t){var r=t,a={color:null,italics:!1,indent:null,underline:!1,row:e},r=95<t?t-96:t-64;return a.underline=1==(1&r),r<=13?a.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(a.italics=!0,a.color="white"):a.indent=4*Math.floor((r-16)/2),a}},{key:"parseChars",value:function(e,t){var r,a,i=null,n=null,s=null;return 17<=(s=25<=e?(i=2,e-8):(i=1,e))&&s<=19?(r=t,r=17===s?t+80:18===s?t+112:t+144,p.log("INFO","Special char '"+o(r)+"' in channel "+i),n=[r]):32<=e&&e<=127&&(n=0===t?[e]:[e,t]),n&&(a=l(n),p.log("DEBUG","Char codes =  "+a.join(",")),this.lastCmdA=null,this.lastCmdB=null),n}},{key:"parseBackgroundAttributes",value:function(e,t){var r,a,i;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(r={},16===e||24===e?(a=Math.floor((t-32)/2),r.background=v[a],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(r),this.lastCmdA=null,!(this.lastCmdB=null))}},{key:"reset",value:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",value:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}}]),w);function w(e,t,r){s(this,w),this.field=e||1,this.outputs=[t,r],this.channels=[new S(1,t),new S(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}r.default=L},{}],50:[function(e,t,r){"use strict";var c=e(57),a={newCue:function(e,t,r,a){for(var i,n,s,o,l,u=window.VTTCue||window.TextTrackCue,d=0;d<a.rows.length;d++)if(s=!0,o=0,l="",!(i=a.rows[d]).isEmpty()){for(var f=0;f<i.chars.length;f++)i.chars[f].uchar.match(/\s/)&&s?o++:(l+=i.chars[f].uchar,s=!1);(i.cueStartTime=t)===r&&(r+=1e-4),n=new u(t,r,(0,c.fixLineBreaks)(l.trim())),16<=o?o--:o++,navigator.userAgent.match(/Firefox\//)?n.line=d+1:n.line=7<d?d-2:d+1,n.align="left",n.position=Math.max(0,Math.min(100,o/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(n)}}};t.exports=a},{57:57}],51:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findFragWithCC=function(e,t){return n.default.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})};var a,i=e(48),n=(a=i)&&a.__esModule?a:{default:a}},{48:48}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n,s=e(53),o=(n=s)&&n.__esModule?n:{default:n};var l=(a(u,[{key:"sample",value:function(e,t){var r=8e3*t/(e=Math.max(e,this.minDelayMs_)),a=e/1e3;this.fast_.sample(a,r),this.slow_.sample(a,r)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),u);function u(e,t,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.hls=e,this.defaultEstimate_=a,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new o.default(t),this.fast_=new o.default(r)}r.default=l},{53:53}],53:[function(e,t,r){"use strict";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(r,"__esModule",{value:!0});var i=(function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(n,[{key:"sample",value:function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}r.default=i},{}],54:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){}var n={trace:i,debug:i,log:i,warn:i,info:i,error:i},s=n;function o(n){var s=self.console[n];return s?function(){for(var e,t,r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];a[0]&&(a[0]=(e=n,t=a[0],t="["+e+"] > "+t)),s.apply(self.console,a)}:i}r.enableLogs=function(e){if(!0===e||"object"===(void 0===e?"undefined":a(e))){!function(t){for(var e=arguments.length,r=Array(1<e?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];r.forEach(function(e){s[e]=t[e]?t[e].bind(t):o(e)})}(e,"debug","log","info","warn","error");try{s.log()}catch(e){s=n}}else s=n},r.logger=s},{}],55:[function(e,t,r){"use strict";t.exports={toString:function(e){for(var t="",r=e.length,a=0;a<r;a++)t+="["+e.start(a).toFixed(3)+","+e.end(a).toFixed(3)+"]";return t}}},{}],56:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var b={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function T(e){return"string"==typeof e&&(!!t[e.toLowerCase()]&&e.toLowerCase())}function _(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)e[a]=r[a]}return e}function e(e,t,r){var a=this,i=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),n={};i?a=document.createElement("custom"):n.enumerable=!0,a.hasBeenReset=!1;var s="",o=!1,l=e,u=t,d=r,f=null,c="",h=!0,g="auto",v="start",p=50,y="middle",m=50,E="middle";if(Object.defineProperty(a,"id",_({},n,{get:function(){return s},set:function(e){s=""+e}})),Object.defineProperty(a,"pauseOnExit",_({},n,{get:function(){return o},set:function(e){o=!!e}})),Object.defineProperty(a,"startTime",_({},n,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"endTime",_({},n,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"text",_({},n,{get:function(){return d},set:function(e){d=""+e,this.hasBeenReset=!0}})),Object.defineProperty(a,"region",_({},n,{get:function(){return f},set:function(e){f=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"vertical",_({},n,{get:function(){return c},set:function(e){var t,r="string"==typeof(t=e)&&(!!b[t.toLowerCase()]&&t.toLowerCase());if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");c=r,this.hasBeenReset=!0}})),Object.defineProperty(a,"snapToLines",_({},n,{get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}})),Object.defineProperty(a,"line",_({},n,{get:function(){return g},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"lineAlign",_({},n,{get:function(){return v},set:function(e){var t=T(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"position",_({},n,{get:function(){return p},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"positionAlign",_({},n,{get:function(){return y},set:function(e){var t=T(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"size",_({},n,{get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"align",_({},n,{get:function(){return E},set:function(e){var t=T(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),a.displayState=void 0,i)return a}return e.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},e}()},{}],57:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fixLineBreaks=void 0;var a,i=e(56),o=(a=i)&&a.__esModule?a:{default:a};function n(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}}function s(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new n,this.regionList=[]}function l(){this.values=Object.create(null)}function u(e,t,r,a){var i,n=a?e.split(a):[e];for(var s in n){"string"==typeof n[s]&&(2===(i=n[s].split(r)).length&&t(i[0],i[1]))}}l.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var a=0;a<r.length;++a)if(t===r[a]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var d=new o.default(0,0,0),f="middle"===d.align?"middle":"center";function c(a,e,s){var i=a;function t(){var e,t=(e=a.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/))?e[3]?r(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?r(e[1],e[2],0,e[4]):r(0,e[1],e[2],e[4]):null;function r(e,t,r,a){return 3600*(0|e)+60*(0|t)+(0|r)+(0|a)/1e3}if(null===t)throw new Error("Malformed timestamp: "+i);return a=a.replace(/^[^\sa-zA-Z-]+/,""),t}function r(){a=a.replace(/^\s+/,"")}if(r(),e.startTime=t(),r(),"--\x3e"!==a.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);a=a.substr(3),r(),e.endTime=t(),r(),function(e,t){var n=new l;u(e,function(e,t){switch(e){case"region":for(var r=s.length-1;0<=r;r--)if(s[r].id===t){n.set(e,s[r].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),i=a[0];n.integer(e,i),n.percent(e,i)&&n.set("snapToLines",!1),n.alt(e,i,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start",f,"end"]);break;case"position":a=t.split(","),n.percent(e,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start",f,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",f,"end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var r=n.get("line","auto");"auto"===r&&-1===d.line&&(r=-1),t.line=r,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",f);var a=n.get("position","auto");"auto"===a&&50===d.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(a,e)}function h(e){return e.replace(/<br(?: \/)?>/gi,"\n")}s.prototype={parse:function(e){var t,a=this;function r(){for(var e=0,t=h(t=a.buffer);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var r=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,a.buffer=t.substr(e),r}e&&(a.buffer+=a.decoder.decode(e,{stream:!0}));try{if("INITIAL"===a.state){if(!/\r\n|\n/.test(a.buffer))return this;var i=(t=r()).match(/^WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");a.state="HEADER"}for(var n=!1;a.buffer;){if(!/\r\n|\n/.test(a.buffer))return this;switch(n?n=!1:t=r(),a.state){case"HEADER":/:/.test(t)?u(t,function(e,t){e},/:/):t||(a.state="ID");continue;case"NOTE":t||(a.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(t)){a.state="NOTE";break}if(!t)continue;if(a.cue=new o.default(0,0,""),a.state="CUE",-1===t.indexOf("--\x3e")){a.cue.id=t;continue}case"CUE":try{c(t,a.cue,a.regionList)}catch(e){a.cue=null,a.state="BADCUE";continue}a.state="CUETEXT";continue;case"CUETEXT":var s=-1!==t.indexOf("--\x3e");if(!t||s&&(n=!0)){a.oncue&&a.oncue(a.cue),a.cue=null,a.state="ID";continue}a.cue.text&&(a.cue.text+="\n"),a.cue.text+=t;continue;case"BADCUE":t||(a.state="ID");continue}}}catch(e){"CUETEXT"===a.state&&a.cue&&a.oncue&&a.oncue(a.cue),a.cue=null,a.state="INITIAL"===a.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&"HEADER"!==this.state||(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}},r.fixLineBreaks=h,r.default=s},{56:56}],58:[function(e,t,r){"use strict";var a,i=e(57),v=(a=i)&&a.__esModule?a:{default:a};function p(e,t,r){return e.substr(r||0,t.length)===t}function y(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()}var n={parse:function(e,s,a,i,t,r){var n=String.fromCharCode.apply(null,new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),o="00:00.000",l=0,u=0,d=0,f=[],c=void 0,h=!0,g=new v.default;g.oncue=function(e){var t=a[i],r=a.ccOffset;t&&t.new&&(void 0!==u?r=a.ccOffset=t.start:function(e,t,r){var a=e[t],i=e[a.prevCC];if(!i||!i.new&&a.new)return e.ccOffset=e.presentationOffset=a.start,a.new=!1;for(;i&&i.new;)e.ccOffset+=a.start-i.start,a.new=!1,i=e[(a=i).prevCC];e.presentationOffset=r}(a,i,d)),d&&(r=d+a.ccOffset-a.presentationOffset),e.startTime+=r-u,e.endTime+=r-u,e.id=y(e.startTime)+y(e.endTime)+y(e.text),e.text=decodeURIComponent(escape(e.text)),0<e.endTime&&f.push(e)},g.onparsingerror=function(e){c=e},g.onflush=function(){c&&r?r(c):t(f)},n.forEach(function(t){if(h){if(p(t,"X-TIMESTAMP-MAP=")){h=!1,t.substr(16).split(",").forEach(function(e){p(e,"LOCAL:")?o=e.substr(6):p(e,"MPEGTS:")&&(l=parseInt(e.substr(7)))});try{l-=s=s<0?s+8589934592:s,e=o,r=parseInt(e.substr(-3)),a=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),n=9<e.length?parseInt(e.substr(0,e.indexOf(":"))):0,u=(isNaN(r)||isNaN(a)||isNaN(i)||isNaN(n)?-1:(r+=1e3*a,r+=6e4*i,r+=36e5*n))/1e3,d=l/9e4,-1===u&&(c=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){c=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(h=!1)}var e,r,a,i,n;g.parse(t+"\n")}),g.flush()}};t.exports=n},{57:57}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=e(54);var n=(a(s,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var t=this.context,r="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest,e=this.stats;e.tfirst=0,e.loaded=0;var a=this.xhrSetup;try{if(a)try{a(r,t.url)}catch(e){r.open("GET",t.url,!0),a(r,t.url)}r.readyState||r.open("GET",t.url,!0)}catch(e){return void this.callbacks.onError({code:r.status,text:e.message},t,r)}t.rangeEnd&&r.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),r.onreadystatechange=this.readystatechange.bind(this),r.onprogress=this.loadprogress.bind(this),r.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),r.send()}},{key:"readystatechange",value:function(e){var t,r,a,i,n=e.currentTarget,s=n.readyState,o=this.stats,l=this.context,u=this.config;o.aborted||2<=s&&(window.clearTimeout(this.requestTimeout),0===o.tfirst&&(o.tfirst=Math.max(performance.now(),o.trequest)),4===s?200<=(t=n.status)&&t<300?(o.tload=Math.max(o.tfirst,performance.now()),a=r=void 0,a="arraybuffer"===l.responseType?(r=n.response).byteLength:(r=n.responseText).length,o.loaded=o.total=a,i={url:n.responseURL,data:r},this.callbacks.onSuccess(i,o,l,n)):o.retry>=u.maxRetry||400<=t&&t<499?(d.logger.error(t+" while loading "+l.url),this.callbacks.onError({code:t,text:n.statusText},l,n)):(d.logger.warn(t+" while loading "+l.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,u.maxRetryDelay),o.retry++):this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),u.timeout))}},{key:"loadtimeout",value:function(){d.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)}},{key:"loadprogress",value:function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var a=this.callbacks.onProgress;a&&a(r,this.context,null,t)}}]),s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}r.default=n},{54:54}]},{},[40])(40)})}});!function(o){var i={};function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=o,n.c=i,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=430)}({15:function(e,t){function b(){}function _(e){A=[e]}function E(e,t,o){return e&&e.apply(t.context||t,o)}function S(e){return/\?/.test(e)?"&":"?"}function o(t){var e,o,i,n,r,a=(t=q.extend({},G,t)).success,s=t.error,c=t.complete,d=t.dataFilter,l=t.callbackParameter,u=t.callback,f=t.cache,p=t.pageCache,h=t.charset,m=t.url,y=t.data,g=t.timeout,v=0,w=b;if(j&&j(function(e){e.done(a).fail(s),a=e.resolve,s=e.reject}).promise(t),!(t.abort=function(){v++||w()})===E(t.beforeSend,t,[t])||v)return t;function x(e){v++||(w(),p&&(X[m]={s:[e]}),d&&(e=d.apply(t,[e])),E(a,t,[e,L,t]),E(c,t,[t,L]))}function T(e){v++||(w(),p&&e!=F&&(X[m]=e),E(s,t,[t,e]),E(c,t,[t,e]))}return m=m||"",y=y?"string"==typeof y?y:q.param(y,t.traditional):"",m+=y?S(m)+y:"",l&&(m+=S(m)+encodeURIComponent(l)+"=?"),f||p||(m+=S(m)+"_"+(new Date).getTime()+"="),m=m.replace(/=\?(&|$)/,"="+u+"$1"),p&&(e=X[m])?e.s?x(e.s[0]):T(e):(H[u]=_,(i=q(V)[0]).id=C+$++,h&&(i.charset=h),K&&K.version()<11.6?(n=q(V)[0]).text="document.getElementById('"+i.id+"')."+I+"()":i[P]=P,W&&(i.htmlFor=i.id,i.event=O),i[M]=i[I]=i[D]=function(e){if(!i[U]||!/i/.test(i[U])){try{i[O]&&i[O]()}catch(e){}e=A,A=0,e?x(e[0]):T(k)}},i.src=m,w=function(){r&&clearTimeout(r),i[D]=i[M]=i[I]=null,B[N](i),n&&B[N](n)},B[R](i,o=B.firstChild),n&&B[R](n,o),r=0<g&&setTimeout(function(){T(F)},g)),t}var q,A,P,k,R,C,O,I,M,D,U,N,V,L,F,H,j,B,X,$,G,K,W;q=Txplayer.$,P="async",R="insertBefore",C="_jqjsp",O="onclick",I="on"+(k="error"),M="onload",D="onreadystatechange",U="readyState",N="removeChild",V="<script>",L="success",F="timeout",H=window,j=q.Deferred,B=q("head")[0]||document.documentElement,X={},$=0,G={callback:C,url:location.href},K=H.opera,W=!!q("<div>").html("\x3c!--[if IE]><i><![endif]--\x3e").find("i").length,o.setup=function(e){q.extend(G,e)},q.jsonp=o},16:function(e,t){e.exports={RFID:"TxpCreativePlayer-rfid",AD_EVENT:{AD_ORDER_DATA_READY:"onAdOrderDataReady",AD_ORDER_PPB_DATA_READY:"ppbAdDataReady",AD_ORDER_PDF_DATA_READY:"pdfAdDataReady",VIDEO_AD_LAYER_SHOW:"adVideoShow",VIDEO_AD_LAYER_HIDE:"adVideoHide"},PLAYER_STATE:{NOT_START:-1,END:0,PLAYING:1,PAUSE:2,LOADING:3},AD_TYPE:{LD:"LD",HT:"HT",ZC:"ZC",ZT:"ZT",KB:"KB",PSJ:"PSJ",PPB:"PPB",PVL:"PVL",ZI:"ZI",BS:"BS",PDF:"PDF",VIDEO_MARK:"PSJ|BS|ZC|CZC|VIN|PHLS",PHLS:"PHLS",CZC:"CZC"},LD_AD_REG:/LD|KB/,VIDEO_AD_REG:/LD|KB|ZC|HT/}},24:function(e,t){var o,i,n=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(o===setTimeout)return setTimeout(t,0);if((o===r||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:r}catch(e){o=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var c,d=[],l=!1,u=-1;function f(){l&&c&&(l=!1,c.length?d=c.concat(d):u=-1,d.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=d.length;t;){for(c=d,d=[];++u<t;)c&&c[u].run();u=-1,t=d.length}c=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];d.push(new h(e,t)),1!==d.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},26:function(e,t){var f={};f.ha=function(){for(var l=[],e=0;e<64;)l[e]=0|4294967296*Math.abs(Math.sin(++e));function u(e,t){return((e>>1)+(t>>1)<<1)+(1&e)+(1&t)}return function(e){for(var t,o,i,n,r=[],a=window.unescape(encodeURI(e)),s=a.length,c=[1732584193,-271733879,-1732584194,271733878],d=0;d<=s;)r[d>>2]|=(a.charCodeAt(d)||128)<<d++%4*8;for(r[e=16*(s+8>>6)+14]=8*s,d=0;d<e;d+=16){for(s=c,n=0;n<64;)s=[i=s[3],u(t=s[1],(i=u(u(s[0],[t&(o=s[2])|~t&i,i&t|~i&o,t^o^i,o^(t|~i)][s=n>>4]),u(l[n],r[[n,5*n+1,3*n+5,7*n][s]%16+d])))<<(s=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*s+n++%4])|i>>>32-s),t,o];for(n=4;n;)c[--n]=u(c[n],s[n])}for(e="";n<32;)e+=(c[n>>3]>>4*(1^7&n++)&15).toString(16);return e}}(),f.stringToHex=function(e){for(var t="",o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),i=0;i<e.length;i++)t+=o[e.charCodeAt(i)>>4]+o[15&e.charCodeAt(i)];return t},f.hexToString=function(e){for(var t="",o="0x"==e.substr(0,2)?2:0;o<e.length;o+=2)t+=String.fromCharCode(parseInt(e.substr(o,2),16));return t},f._Seed="#$#@#*ad",f.tempcalc=function(e,t){for(var o="",i=0;i<e.length;i++)o+=String.fromCharCode(e.charCodeAt(i)^t.charCodeAt(i%4));return o},f.u1=function(e,t){for(var o="",i=t;i<e.length;i+=2)o+=e.charAt(i);return o},f._urlStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f.urlenc=function(e,t,o){for(var i,n,r,a,s,c,d,l="",u=0;u<e.length;)i=e.charCodeAt(u++),n=e.charCodeAt(u++),r=e.charCodeAt(u++),15==u&&(l+="A",l+=t,l+=o),a=i>>2,s=(3&i)<<4|n>>4,c=(15&n)<<2|r>>6,d=63&r,isNaN(n)?c=d=64:isNaN(r)&&(d=64),l=l+f._urlStr.charAt(a)+f._urlStr.charAt(s)+f._urlStr.charAt(c)+f._urlStr.charAt(d);return l},f.$xx=function(e,t,o,i,n){n=n||parseInt(new Date/1e3);var r={plt:e||"",vid:t||"",std:o||"",sts:(i=(""+i).charAt(0))||"",ts:n,rf:"",ua:""},r=window.JSON?JSON.stringify(r):function(){var e=[];for(var t in r)e.push('"'+t+'":"'+r[t]+'"');return"{"+e.join(",")+"}"}(),a=f.hexToString(f.ha(e+t+n+f._Seed+""+i.charAt(0)+o)),s=f.urlenc(f.tempcalc(a,f._Seed),i.charAt(0),n),c=f.urlenc(f.tempcalc(a,"86FG@hdf"),i.charAt(0),n),d=f.u1(s,0),l=f.u1(s,1);return{p:r,u:s,c:c,u1:d,u2:l,t:n}},e.exports=f},27:function(e,t){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=Txplayer.$,u=Txplayer.util,s=u.AppHelper,f=0,r=[{reg:function(){return!!this.cfg.noAuth},request:function(e){e.resolve({param:{vids:this.cfg.vid,defaultfmt:this.cfg.fmt}})}},{reg:function(){var e=u.isInIframe()?u.getHostname(document.referrer):window.location.hostname;return!!(e&&-1<e.indexOf("weishi.qq.com")||u.browser.weishi)},request:function(e){e.resolve({param:{platform:"110701",sdtfrom:"v7015"}})}},{reg:function(){return!(!this.cfg.eduext&&!this.cfg.authext||-1!==location.href.indexOf("campus.qq.com"))},request:function(e){e.resolve({cgi:c("edugetvinfo"),param:{eduext:this.cfg.eduext,platform:u.mobile?"261001":"260201",vid:this.cfg.vid,defn:this.cfg.fmt}})}},{reg:function(){var e=window.location.hostname;u.isInIframe()&&(e=u.getHostname(document.referrer));return-1<u.inArray(["kuaibao.qq.com","m.gamefeeds.qq.com","kandian.qq.com","mcdn.kandian.qq.com"],e)},request:function(e){e.resolve({cgi:c("getinfo"),param:{platform:"570701",vid:this.cfg.vid,sdtfrom:"v7152"}})}},{reg:function(){return"jgyx.qq.com"===window.location.hostname},request:function(e){e.resolve({param:{platform:"5790701",sdtfrom:"v7026"}})}},{reg:function(){return 1===this.cfg.classType},request:function(e){e.resolve({cgi:c("edugetvinfo"),param:{platform:221001,vid:this.cfg.vid,defn:this.cfg.fmt}})}},{reg:function(){if(window!==top&&"v.qq.com"===location.hostname&&"/iframe/player.html"===location.pathname){var e=u.getParams(location.href);if(e&&e.cKey&&e.encryptVer&&e.platform)return this.params=e,!0}return!1},request:function(e){var t,o=this,i={cgi:c("getinfo"),param:{encryptVer:o.params.encryptVer,platform:o.params.platform,cKey:o.params.cKey,vids:o.cfg.vid,defaultfmt:o.cfg.fmt}};try{t=window.parent.location.href}catch(e){}t&&(i.param.wxrefer=t),e.resolve(i)}},{reg:function(){return"qzs.qq.com"==window.location.hostname&&(-1<window.location.href.indexOf("//qzs.qq.com/open/mobile")||-1<window.location.href.indexOf("//qzs.qq.com/open/yyb/"))},request:function(e){e.resolve({param:{platform:"2730701",sdtfrom:"v7002"}})}},{reg:function(){return"post.mp.qq.com"===window.location.hostname},request:function(e){e.resolve({param:{platform:"4080701",sdtfrom:"v7016"}})}},{reg:function(){return"viewlite.inews.qq.com"==window.location.hostname||"rl.inews.qq.com"==window.location.hostname||"album.sparta.html5.qq.com"==window.location.hostname},request:function(e){e.resolve({param:{platform:"5750701",sdtfrom:"v7003"}})}},{reg:function(){return!!(window.location.hostname&&-1<window.location.hostname.indexOf("lexiangla.com"))},request:function(e){e.resolve({param:{platform:"3570701",sdtfrom:"v7005"}})}},{reg:function(){return!!u.browser.kuaibao},request:function(i){var e,t,o,n=this,r=n.cfg.vid,a=void 0!==n.cfg.svr_time?n.cfg.svr_time+"":parseInt(new Date/1e3)+"",s="TVP_KUAIBAO_CB_"+a.substr(-4,4)+f++;if(window.top!==window){try{window.top.location.href&&(e=window.top,t=e.document)}catch(e){o=!0}if(o)return void i.reject()}else e=window,t=e.document;e[s]=function(e){var t,o;try{t=JSON.parse(e)}catch(e){}t&&t.key&&t.ver&&t.platform&&t.sdtfrom?(o={param:{cKey:t.key,encryptVer:t.ver,platform:t.platform,sdtfrom:t.sdtfrom,vid:n.cfg.vid,defaultfmt:"mp4",clip:4}},i.resolve(o)):i.reject()};var c,d;function l(){e.getBrowserSignature(r,a,s)}u.os.ios?("function"==typeof e.getBrowserSignature&&l(),t.addEventListener("TencentNewsJSInjectionComplete",function(){l()})):u.os.android?(c={method:"getCKey",types:["string","string","string"],args:[r,a,s],instanceName:"TencentNewsScriptControllerJsInterface"},d="jsbridge://get_with_json_data?json="+encodeURIComponent(JSON.stringify(c))+"&_t="+a,(new Image).src=d):i.reject()}},{reg:function(){return!(!u.browser.qqnews||u.browser.qqnewsAd)},request:function(i){var e,t,o,n=this,r=n.cfg.vid,a=void 0!==n.cfg.svr_time?n.cfg.svr_time+"":parseInt(new Date/1e3)+"",s="TVP_KUAIBAO_CB_"+r+a.substr(-4,4);if(window.top!==window){try{window.top.location.href&&(e=window.top,t=e.document)}catch(e){o=!0}if(o)return void i.reject()}else e=window,t=e.document;e[s]=function(e){var t,o;try{t=JSON.parse(e)}catch(e){}t&&t.key&&t.ver&&t.platform&&t.sdtfrom?(o={param:{cKey:t.key,encryptVer:t.ver,platform:t.platform,sdtfrom:t.sdtfrom,vid:n.cfg.vid,defaultfmt:"mp4",clip:4}},i.resolve(o)):i.reject()};function c(){window.TencentNews.invoke("getCKey",r,a,s)}function d(){e.getBrowserSignature(r,a,s)}u.os.ios?("function"==typeof e.getBrowserSignature&&d(),t.addEventListener("TencentNewsJSInjectionComplete",function(){d()})):u.os.android?window.TencentNews&&window.TencentNews.invoke?c():l.getScript("//mat1.gtimg.com/www/js/newsapp/jsapi/news.js?_tsid=1",function(){window.TencentNews&&window.TencentNews.invoke&&c()}):i.reject()}},{reg:function(){return!(!u.browser.douban&&!u.browser.liebao)},request:function(t){var o,i=this,n=void 0!==i.cfg.svr_time?i.cfg.svr_time+"":parseInt(new Date/1e3)+"";!function(){if(window.getBrowserSignature){try{o=window.getBrowserSignature(i.cfg.vid,n)}catch(e){}var e;o&&o.key&&o.ver&&o.platform?(e={param:{cKey:o.key,encryptVer:o.ver,platform:o.platform,vid:i.cfg.vid,defaultfmt:i.cfg.fmt}},t.resolve(e)):t.reject()}else t.reject()}()}},{reg:function(){return!(!u.browser.mqq||"mqqcartoon"!==u.getUrlParam("openS"))},request:function(o){var i=this,e=void 0!==i.cfg.svr_time?i.cfg.svr_time+"":parseInt(new Date/1e3)+"";l.getScript("http://imgcache.qq.com/club/client/comic/release/js/util/qqComicVideoAuth.js?t="+e,function(){"function"===l.type(window.getBrowserSignature)?window.getBrowserSignature(i.cfg.vid,function(e){var t;e&&-1!==e&&(t={cgi:c("getvinfo"),param:{cKey:e,encryptVer:"6.4",platform:"170101",vid:i.cfg.vid,defn:i.cfg.fmt}},o.resolve(t))}):o.reject()})}},{reg:function(){return u.isNews()},request:function(e){e.resolve({param:{platform:"20701"}})}},{reg:function(){return u.isNewsPlugin()},request:function(e){e.resolve({param:{platform:"5430701",sdtfrom:"v7013"}})}},{reg:function(){return"yoo.qq.com"===window.location.hostname},request:function(e){e.resolve({param:{platform:"4450701",sdtfrom:"v7158"}})}},{reg:function(){var e=["*.lol.qq.com","*.lolm.qq.com","*.lole.qq.com","*.lpl.qq.com"];if(-1<["lol.qq.com","lolm.qq.com","lole.qq.com","lpl.qq.com"].indexOf(window.location.hostname))return!0;for(var t,o,i,n=0,r=e.length;n<r;n++)if(t=e[n],o=window.location.hostname,i=void 0,i=t.replace(/\?/g,".").replace(/#/g,"\\d").replace(/\*+/g,".*"),new RegExp("^"+i+"$","i").test(o))return!0;return!1},request:function(e){e.resolve({param:{platform:"5290701",sdtfrom:"v7012"}})}},{reg:function(){return"qc.vip.qq.com"==window.location.hostname||"cdn.vip.qq.com"==window.location.hostname},request:function(e){e.resolve({param:{platform:"4860701",sdtfrom:"v7159"}})}},{reg:function(){return-1<["halodev.sparta.html5.qq.com","yybstyle.sparta.html5.qq.com","imgcache.qq.com","s.syzs.qq.com","qzs.qq.com","syzs.qq.com","gameloop.fun","nutty.qq.com"].indexOf(window.location.hostname)},request:function(e){e.resolve({param:{platform:"5650201",sdtfrom:"v1013"}})}},{reg:function(){return"h5.maobing.qq.com"==window.location.hostname||"h5test.maobing.qq.com"==window.location.hostname},request:function(e){e.resolve({param:{platform:"5020701",sdtfrom:"v7161"}})}},{reg:function(){return"tool.helper.qq.com"===window.location.hostname||"pre.tool.helper.qq.com"===window.location.hostname},request:function(e){e.resolve({param:{platform:"5600701",sdtfrom:"v7019"}})}},{reg:function(){return"xian.qq.com"===window.location.hostname},request:function(e){e.resolve({param:{platform:"5610701",sdtfrom:"v7021"}})}},{reg:function(){return-1<window.location.href.indexOf("film.qq.com/h5/qq-together")||"ti.qq.com"===window.location.hostname},request:function(e){e.resolve({param:{platform:"5680701",sdtfrom:"v7025"}})}},{reg:function(){return!(!u.browser.mqq||"xiaoqu.qq.com"!==window.location.hostname&&"buluo.qq.com"!==window.location.hostname)},request:function(i){var n;window.getBrowserSignature?(n=this,window.getBrowserSignature(n.cfg.vid,function(e){var t;if(e&&e.data)try{var o=JSON.parse(e.data);o&&o.result&&o.result.token&&(t=o.result.token)}catch(e){}t?i.resolve({param:{cKey:t,encryptVer:"6.4",platform:u.os.ios?"170408":"170308",vids:n.cfg.vid,defaultfmt:n.cfg.fmt}}):i.reject()})):i.reject()}},{reg:function(){return!(!u.browser.mqqbrowser||u.browser.mqq||u.browser.wechat||u.browser.qqdownloader||window!==top||"cfm.qq.com"===window.location.hostname)},request:function(i){function e(){var e,t,o={vid:n.cfg.vid};o.timestamp=r,t=u.os.ios?(e=window.x5.ios.getBrowserSignature,u.os.ipad?o:"vid:"+o.vid+"["+o.timestamp+"]"):(e=window.x5.android.getBrowserSignature,"vid:"+o.vid+"["+o.timestamp+"]"),e(t,function(e){var t;"object"===a(e)&&e.key&&e.ver&&e.platform?(t={cgi:c("getvinfo"),param:{cKey:e.key,encryptVer:e.ver,platform:e.platform,vid:n.cfg.vid,defn:n.cfg.fmt,cgiType:"getvinfo"}},i.resolve(t)):"object"===a(e)&&e.data?(t={cgi:c("getvinfo"),param:{cKey:e.data,encryptVer:"4.0",platform:"161001",vid:n.cfg.vid,defn:n.cfg.fmt,cgiType:"getvinfo"}},i.resolve(t)):"string"==typeof e?(t={cgi:c("getvinfo"),param:{cKey:e,encryptVer:"4.0",platform:"161001",vid:n.cfg.vid,defn:n.cfg.fmt,cgiType:"getvinfo"}},i.resolve(t)):i.reject()},function(){i.reject()})}var n=this,r=void 0!==n.cfg.svr_time?n.cfg.svr_time+"":parseInt(new Date/1e3)+"",t=window.x5&&window.x5.ios&&"function"===l.type(window.x5.ios.getBrowserSignature),o=window.x5&&"function"===l.type(window.x5.getBrowserSignature);t||o?e():s.loadMqqBrowserAPI().done(function(){t=window.x5&&window.x5.ios&&"function"===l.type(window.x5.ios.getBrowserSignature),o=window.x5&&"function"===l.type(window.x5.getBrowserSignature),t||o?e():i.reject()}).fail(function(){i.reject()})}},{reg:function(){return"m.v.qq.com"!=window.location.hostname&&"v.qq.com"!=window.location.hostname},request:function(e){e.resolve({param:{platform:"4810701",sdtfrom:"v7157"}})}}];function c(e){var t={getinfo:["http://h5vv.video.qq.com/getinfo?callback=?","https://h5vv.video.qq.com/getinfo?callback=?"],edugetvinfo:["http://sv.video.qq.com/edugetvinfo?callback=?","https://sv.video.qq.com/edugetvinfo?callback=?"],mvgetinfo:["http://sv.video.qq.com/mvgetinfo?callback=?","https://sv.video.qq.com/mvgetinfo?callback=?"],getinfoInews:["http://h5wx.video.qq.com/getinfo?callback=?","https://h5wx.video.qq.com/getinfo?callback=?"],getvinfo:["http://h5vv.video.qq.com/getvinfo?callback=?","https://h5vv.video.qq.com/getvinfo?callback=?"],getkey:["http://h5vv.video.qq.com/getkey?callback=?","https://h5vv.video.qq.com/getkey?callback=?"],mvgetkey:["http://sv.video.qq.com/mvgetkey?callback=?","https://sv.video.qq.com/mvgetkey?callback=?"],getkeyInews:["http://h5wx.video.qq.com/getkey?callback=?","https://h5wx.video.qq.com/getkey?callback=?"],zb:["http://info.zb.video.qq.com/?callback=?","https://info.zb.video.qq.com/?callback=?"],rmd_mobile:["http://like.video.qq.com/fcgi-bin/rmd_mobile?callback=?","https://like.video.qq.com/fcgi-bin/rmd_mobile?callback=?"],like:["http://like.video.qq.com/fcgi-bin/like?","https://like.video.qq.com/fcgi-bin/like?"],dataout_ex:["http://sns.video.qq.com/fcgi-bin/dlib/dataout_ex?","https://sns.video.qq.com/fcgi-bin/dlib/dataout_ex?"],get_dtype:["http://h5vv.video.qq.com/getdtype?","https://h5vv.video.qq.com/getdtype?"]};return"https:"===window.location.protocol?t[e][1]:t[e][0]}function o(e){return l=Txplayer.$,this.context=e.context,this.init()}o.prototype={init:function(){return this.exportsModuleApis(),this.reg_request},reg_request:function(e,t){var o=this;o.cfg=e,o.cfg2=t;var i=l.Deferred(),n=!1;return l(r).each(function(e,t){return"function"!==l.type(t.reg)||("function"!==l.type(t.request)||(!t.reg.call(o)||(n=!0,t.request.call(o,i),!1)))}),n||i.reject(),setTimeout(function(){i.reject()},6e3),i},exportsModuleApis:function(){var i=this;this.context.msg.setData("isInAuthRuleList",function(e,t){var o=!1;i.cfg={},i.cfg2={},l(r).each(function(e,t){return"function"!==l.type(t.reg)||(!t.reg.call(i)||!(o=!0))}),t.data=o})}},e.exports=o},28:function(e,t){var r=Txplayer.util,a=Txplayer.$,n={type:"trial_watch",context:null,showClose:!0,content:"",open:function(){},close:function(){}};function o(e){this.options=s(e),this.resizeListened=!1,this.initDom()}function i(e){return i.dialog?i.dialog.initDom(e):i.dialog=new o(e),i.dialog}function s(e){"[object Object]"!=Object.prototype.toString.call(e)&&(e={});var t={};for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o]);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}o.prototype.initDom=function(e){e&&(this.options=s(e));var t=this.options;this.$dom&&(this.delEvent(),this.$dom.remove()),this.$target=t.target;var o=this.overlayClass="txp_overlay_"+t.type,i=this.soverlayClass=o+"_s",n={overlayClass:o,content:t.content||"",closeClass:t.showClose?" ":"txp_none"};this.domStr=r.tpl('<txp class="${overlayClass}" display-id="14"><txp class="txp_overlay_content"><txp class="txp_close ${closeClass}"><svg class="txp_icon txp_icon_close" version="1.1" viewBox="0 0 16 16" width="16" height="16"><use class="txp_svg_symbol txp_svg_close" xlink:href="#txp_svg_close"></use></svg></txp>${content}</txp></txp>',n),this.$dom=a(this.domStr),this.$dom.attr("id","txp-"+t.type+"-dialog"),this.$target.width()<700?(this.$dom.addClass(i),this.$dom.find(".brspace").html("<br>")):(this.$dom.removeClass(i),this.$dom.find(".brspace").text("\uff0c")),this.$target.append(this.$dom),this.$closeBtn=this.$dom.find(".txp_close"),this.initEvent()},o.prototype.initEvent=function(){var o=this;this.options.showClose&&this.$closeBtn.on("click",function(){o.close()}),this.options.context&&!this.resizeListened&&this.options.context.msg.on("resize",function(e){o.resizeListened=!0;var t=e.width;e.height;t<700?(o.$dom.addClass(o.soverlayClass),o.$dom.find(".brspace").html("<br>")):(o.$dom.removeClass(o.soverlayClass),o.$dom.find(".brspace").text("\uff0c"))})},o.prototype.delEvent=function(){this.options.showClose&&this.$closeBtn.off("click")},o.prototype.open=function(){this.$dom.removeClass("txp_none"),this.status=1,this.options.open()},o.prototype.close=function(e){this.status=0,this.$dom.addClass("txp_none"),e||this.options.close()},o.prototype.destroy=function(){this.delEvent(),this.status&&this.close();var e=this,t=setTimeout(function(){e.$dom.remove(),clearTimeout(t),t=null},1e3)},i.dialog=null,e.exports=i},37:function(e,t){var o={};o[445]=o[444]="\u7f51\u7edc\u8fde\u63a5\u4f3c\u4e4e\u51fa\u73b0\u95ee\u9898\uff0c",o[10001]=o[1]=o[2]=o[3]=o[4]=o[5]=o[30]=o[40]=o[41]=o[42]=o[50]=o[68]="\u89c6\u9891\u83b7\u53d6\u9014\u4e2d\u51fa\u73b0\u95ee\u9898\uff0c",o.defaultMsg=o[51]=o[52]=o[61]=o[62]=o[63]=o[65]=o[66]=o[69]=o[71]=o[73]=o[74]=o[76]=o[77]=o[81]=o[82]=o[86]=o["80.10"]=o[94]="\u8fd9\u4e2a\u89c6\u9891\u88ab\u5916\u661f\u4eba\u52ab\u8d70\uff0c\u6682\u65f6\u770b\u4e0d\u4e86\u4e86~",o[64]=o[100]="\u5f88\u9057\u61be\uff0c\u5bf9\u6b64\u89c6\u9891\u7684\u8bbf\u95ee\u6682\u65f6\u53d7\u9650",o[80.3]=o["80.10"]=o[80.11]=o[84]="\u6b64\u89c6\u9891\u5305\u542b\u654f\u611f\u4fe1\u606f\uff0c\u5df2\u88ab\u7ba1\u7406\u5458\u6349\u62ff~",o[80]=o[83]="\u6682\u65f6\u6ca1\u6709\u83b7\u5f97\u8be5\u89c6\u9891\u7248\u6743\uff0c\u52aa\u529b\u4e3a\u60a8\u4e89\u53d6\u4e2d~",o[80.1]="\u5f88\u62b1\u6b49\uff0c\u7531\u4e8e\u7248\u6743\u9650\u5236\uff0c\u60a8\u6240\u5728\u7684\u5730\u533a\u6682\u65f6\u65e0\u6cd5\u64ad\u653e\u8be5\u89c6\u9891",o[80.2]="\u5f88\u62b1\u6b49\uff0c\u8be5\u89c6\u9891\u6682\u65e0\u64ad\u653e\u7248\u6743",o[80.7]=o[80.9]="\u6682\u65f6\u6ca1\u6709\u83b7\u5f97\u8be5\u89c6\u9891\u7248\u6743\uff0c\u52aa\u529b\u4e3a\u60a8\u4e89\u53d6\u4e2d~",o[69.4]=o[80.14]=o[-11111]="\u5e94\u7248\u6743\u65b9\u8981\u6c42\u672c\u7247\u91c7\u7528\u52a0\u5bc6\u683c\u5f0f\uff0c\u6b64\u6d4f\u89c8\u5668\u6682\u4e0d\u652f\u6301\u64ad\u653e",o.adblock="\u64ad\u653e\u5185\u5bb9\u88abadblock\u8bef\u62e6\u622a\u4e86\uff0c\u8bf7\u60a8\u5173\u95ed\u63d2\u4ef6\uff0c\u6216\u4f7f\u7528\u4e0b\u5217\u65b9\u5f0f\u89c2\u770b\uff1a",o.getPlatformErrorCode=function(e,t,o){var i="-",n="-",r="-";return o=o||"00",i=Txplayer.util.os.mac?"62":Txplayer.util.os.windows?"61":"66","getinfo"===e?n="101":"getkey"===e?n="102":"ad"===e?n="215":"player"===e&&(n="200"),"neterror"===t?r="140":"cgiInnerError"===t?(r="13",2===(o=o&&""+o).length&&(o="0"+o)):"h5video"===t?r="111":"aderror"===t&&(r="150"),Txplayer.util.localLog&&Txplayer.util.localLog("VIDEO_ERROR",{platform:i,type:n,module:r,code:o}),i+n+"."+r+o},e.exports=o},430:function(e,t,o){e.exports=o(431)},431:function(e,t,o){var i=o(432),n=Txplayer.$,r=Txplayer.util,a=(o(37),o(27)),s=o(52);function c(e){n=Txplayer.$,this.dataset={},this.context=e,this.init()}c.prototype={init:function(){var t=this;this.auth=new a({context:this.context}),this.getVideoMark=new s(this.context),this.dataset.hasVideoPlayed=!1,this.context.dataset.urlIndex=0,["vid","cid","columnId","title","nextVid","tpid","authext","eduext","authfrom","isNeedPay","autoplay","skipPrelude","connectionPlayTime","playStartTime"].forEach(function(e){t.context.dataset[e]=t.context.config[e]}),"string"===n.type(this.context.config.volume)&&/^\d+$/.test(this.context.config.volume)&&(this.context.config.volume=parseInt(this.context.config.volume)),"number"!==n.type(this.context.config.volume)||100<this.context.config.volume||this.context.config.volume<0?r.showError("context.config.volume\u5fc5\u987b\u4e3a 0~100 "):(this.context.dataset.volume=this.context.config.volume,this.context.config.duration&&this.context.config.playEndTime&&(this.context.dataset.playEndTime=parseInt(this.context.config.duration)-this.context.config.playEndTime,this.context.dataset.playEndTime<0&&(this.context.dataset.playEndTime=null)),this.context.msg.broadcast("setVolume",{volume:this.context.dataset.volume,showTips:!1}),r.isSupportSafariHls(this.context.dataset.platform)&&(this.context.dataset.useHls=!0),t.context.dataset.hasChromeHlsPlugin&&(this.context.dataset.useChromeHls=!0,this.context.dataset.useHls=!0),this.context.getinfo=new i(this.context),this.addEventListener(),this.exportsModuleApis(),r.v4log("v4HdPlayerControl-init"),this.context.dataset.autoplay&&this.playControl({nextVid:this.context.dataset.nextVid,vid:this.context.dataset.vid,connectionPlayTime:this.context.dataset.connectionPlayTime,playStartTime:this.context.dataset.playStartTime}))},addEventListener:function(){this.dealAdMsgMoudle(),this.dealFilmMsgMoudle()},exportsModuleApis:function(){this.initUserApis(),this.initPrivateMsg(),this.initDataApis()}},r.extend(c.prototype,o(446)),r.extend(c.prototype,o(448)),r.extend(c.prototype,o(449)),r.extend(c.prototype,o(450)),r.extend(c.prototype,o(451)),r.extend(c.prototype,o(452)),r.extend(c.prototype,o(454)),r.extend(c.prototype,o(455)),Txplayer.register("v4HdPlayerControl",c)},432:function(e,t,o){var s=Txplayer.$,c=Txplayer.util,i=o(433);var n,d="POST";function r(e){s=Txplayer.$,i.call(this,e)}function a(){}((r.prototype=(n=i.prototype,a.prototype=n,new a)).constructor=r).prototype.requestGetinfo=function(e){return this.context.dataset.requestNewGetinfoError||"11001"===this.context.dataset.platform?this.requestOldGetinfo(e):this.requestNewGetinfo(e)},r.prototype.requestGetkey=function(e){return this.context.dataset.requestNewGetinfoError?this.requestOldGetVkey(e):this.requestNewGetVkey(e)},r.prototype.requestInsertAd=function(e){return e&&(e.method=d),this.requestPostCgi("insertAd",e).defer},r.prototype.requestPauseAd=function(e){return e&&(e.method=d),this.requestPostCgi("pauseAd",e).defer},r.prototype.requestEndingAd=function(e){return e&&(e.method=d),this.requestPostCgi("endingAd",e).defer},r.prototype.requestPpbAd=function(e){return e&&(e.method=d),this.requestPostCgi("ppbAd",e).defer},r.prototype.requestPdfAd=function(e){return e&&(e.method=d),this.requestPostCgi("pdfAd",e).defer},r.prototype.requestIvbAd=function(e){return e&&(e.method=d),this.requestPostCgi("ivbAd",e).defer},r.prototype.requestYaliuAd=function(e){return e&&(e.method=d),this.requestPostCgi("yaliuAd",e).defer},r.prototype.requestPostCgi=function(e,t){var i={},i="vinfoad"==e?this.dataset.svDomain?{buid:"vinfoad_sv",adparam:s.param(t.adparam),vinfoparam_sv:s.param(t.vinfoparam)}:{buid:"vinfoad",adparam:s.param(t.adparam),vinfoparam:s.param(t.vinfoparam)}:"vinfo"==e?this.dataset.svDomain?{buid:"onlyvinfo_sv",vinfoparam_sv:s.param(t.vinfoparam)}:{buid:"onlyvinfo",vinfoparam:s.param(t.vinfoparam)}:"getkey"==e?this.dataset.svDomain?{buid:"onlyvkey_sv",vkeyparam_sv:s.param(t.vkeyparam)}:{buid:"onlyvkey",vkeyparam:s.param(t.vkeyparam)}:{buid:"onlyad",adparam:s.param(t)},o=t.domain?t.domain:"vd.l.qq.com";1==c.getUrlParam("debugvideomark")&&(o="testvd.l.qq.com");var n=s.Deferred(),r=+new Date,a=t.method||"POST";return"GET"===a&&(d=a),Txplayer.util.v4log("6072 beforeRequest",r),{request:s.ajax({method:a,type:a,url:"//"+o+"/proxyhttp",crossDomain:!0,xhrFields:{withCredentials:!0},timeout:8e3,dataType:"POST"===a?"json":"jsonp",contentType:"POST"===a?"text/plain":"application/javascript",data:"POST"===a?JSON.stringify(i):i}).done(function(t){var e,o=+new Date;if(Txplayer.util.v4log("6072 afterRequest",o),0==t.errCode)try{"onlyad"==i.buid?((e=JSON.parse(t.ad)).requestOk=!0,e.adcost=o-r,n.resolve(e)):"vinfoad"==i.buid||"vinfoad_sv"==i.buid?("{}"==t.vinfo&&n.reject(t,"dataerr"),n.resolve(JSON.parse(t.vinfo),t.ad)):"onlyvinfo"==i.buid||"onlyvinfo_sv"==i.buid?("{}"==t.vinfo&&n.reject(t,"dataerr"),n.resolve(JSON.parse(t.vinfo))):"onlyvkey"!=i.buid&&"onlyvkey_sv"!=i.buid||("{}"==t.vkey&&n.reject(t,"dataerr"),n.resolve(JSON.parse(t.vkey)))}catch(e){n.reject(t,"dataerr")}else n.reject(t)}).fail(function(e,t){e=e||{};var o=new Date;e.adcost=o-r,e.requestOk=!1,n.reject(e,t)}),defer:n}},r.prototype.requestRollVideoInfo=function(e){var t=this;return this.requestRollInfo(e).done(function(e){if(e.hasnlink){if(t.context.dataset.hasnlink=!0,-1<["LD","ZC","HT"].indexOf(t.context.dataset.currentAdType))return;if(t.context.dataset.hasShowEndAdditionTip)return void(t.context.dataset.fvpint=0);t.context.msg.broadcast("showAdditionTip",{duration:e.vlinktd,type:"normal"})}e.nextpint?t.context.dataset.fvpint=1e3*e.nextpint:t.context.dataset.fvpint=0}).fail(function(e){t.context.dataset.fvpint=6e5})},e.exports=r},433:function(e,t,o){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n,r,a=o(434),d=o(26),T=Txplayer.$,s=o(435),l=o(436),b=Txplayer.util,_=["30","40","41","42","50","64","85","445"],E=["vd.l.qq.com","vi.l.qq.com"],S="pxy.video.qq.com",c=["l.cm.com","l.cm.com"],q=!1,u="object"===i(window.WebAssembly);if(b.browser.chrome&&b.compareVersion(b.browser.chrome.version,"62.0")<=0&&(u=!1),u&&!p){var f,p=null===T||void 0===T||null===(f=T.Deferred)||void 0===f?void 0:f.call(T);if(Txplayer.ckeyModule={locateFile:function(e){return"//vm.gtimg.cn/tencentvideo/txp/js/"+e+"?v="+Txplayer.dataset.ts},print:Txplayer.util.v4log.bind(Txplayer.util,"ckey9"),printErr:Txplayer.util.v4log.bind(Txplayer.util,"ckey9"),monitorRunDependencies:function(e){e<=0&&setTimeout(function(){n=r.cwrap("getckey","string",["number","string","string","string","string","number"]),null!==p&&void 0!==p&&p.resolve()},0)},onAbort:function(e){Txplayer.util.v4log("init ckey9xModule: ",e),null!==p&&void 0!==p&&p.reject()}},!r)try{r=o(445)}catch(e){Txplayer.util.v4log("import ckey9xModule: ",e?e.message:"error"),null!==p&&void 0!==p&&p.reject()}}function h(e){var t=this;T=Txplayer.$;this.context=e,this.dataset={},this.context.msg.on("destroyPlugin",function(){t.dataset.ckeyTm_TIMER&&clearInterval(t.dataset.ckeyTm_TIMER)}),this.context&&this.context.dataset&&this.context.dataset.businessId&&(this.context.dataset.authext||this.context.dataset.authfrom)&&("11"==this.context.dataset.businessId||200<=this.context.dataset.businessId)&&(this.dataset.svDomain=!0)}function m(e){var t=n?(e.encryptVer="9.1",n(e.platform,e.appVer,e.vids||e.vid,"",e.guid,e.tm)):(e.encryptVer="8.1",a(e.vids||e.vid,e.tm,e.appVer,e.guid,e.platform));e.cKey=t||""}h.prototype={checkGetInfoData:function(e){return e&&"o"==e.s?1:0},checkGetinfoRetCode:function(e){var t,o,i=0;return e&&e.s?"o"!==e.s?(i=e.em||50,o=e.exem):e.vl&&e.vl.vi&&T.isArray(e.vl.vi)&&0!==e.vl.cnt?t=e.vl.vi[0]:i=68:i=50,0!==i||5===t.fst&&T.isPlainObject(t.ul)&&T.isArray(t.ul.ui)&&0!==t.ul.ui.length?0===i&&2!==t.st&&(8!=t.st?i=62:(i=83,o=t.ch)):i=62,{exVal:o,iRetCode:i,vi:t}},getRequestUrl:function(e){e=e||{};var t,o={};return o.domain=["vv.video.qq.com","av.video.qq.com","bkvv.video.qq.com","h5vv.video.qq.com"][e.retryTimes],"vv.video.qq.com"==o.domain&&this.dataset.svDomain&&(o.domain="sv.video.qq.com"),"http:"===location.protocol?o.protocol="http:":o.protocol="https:","geth5info"===e.type?o.path="/geth5info?":"getkey"===e.type?o.path="/geth5key?":"pollvinfo"===e.type&&(o.path="/pollvinfo?"),"11001"===this.context.dataset.platform&&(o.domain="h5vv6.video.qq.com",o.path="/getinfo?"),t=o.protocol+"//"+o.domain+o.path,e.disableCallback||(t+="callback=?&"),t},getInfoConfig:function(e,t){this.context.dataset.guid||(this.context.config.guid=l.getUserId(this.context.config),this.context.dataset.guid=this.context.config.guid);var o="";try{o=location.href.replace(location.search,""),b.isInIframe()&&(o=b.removeUrlParams(top.location.href||""))}catch(e){}var i=window!=top?b.removeUrlParams(document.referrer||""):document.location.host,o=b.getUrlParam("debugehost")||o,n=t.tm||this.dataset.ckeyTm||b.getTimeStampStr(),r={spsrt:1,charge:0,defaultfmt:"auto",otype:"vinfoad"==e?"ojson":"json",guid:this.context.dataset.guid,flowid:this.context.dataset.flowid,platform:this.context.dataset.platform,sdtfrom:this.context.dataset.sdtfrom,defnpayver:1,appVer:Txplayer.dataset.ver,host:location.host,ehost:o,refer:i,sphttps:"https:"===location.protocol?1:0,tm:n,spwm:4};r.logintoken=this.context.dataset.txplayerAuth.getInfo(!0),-1!==["nintendo","touch"].indexOf(this.context.config.playerType)&&(r.clip=4),this.context.dataset.unid&&(r.unid=this.context.dataset.unid),this.context.dataset.authfrom&&(r.auth_from=this.context.dataset.authfrom),this.context.dataset.authext&&(r.auth_ext=this.context.dataset.authext);var a,s=T.extend(r,t);if(this.context.config&&"function"===T.type(this.context.config.getUserType))try{var c=this.context.config.getUserType();2!=c&&10!=c&&4<=+b.getData("gp-cacdc")&&(s.defn="sd")}catch(e){}return t.show1080p||(s.defnpayver=0),"auto"!=s.defn&&s.defn?s.defsrc=2:s.defsrc=1,"11001"===s.platform?(s._rnd=b.getTimeStampStr(),(a=d.$xx(s.platform,s.vid||s.vids,s.sdtfrom,1,s._rnd))&&a.u1&&a.u2&&a.c&&(s._qv_rmt=a.u1,s._qv_rmt2=a.u2)):m(s),this.context.dataset.useP2P&&(s.fp2p=1),this.context.dataset.IsSupportVideoIn&&(s.spadseg=3),this.context.dataset.adExtras&&(s.adsid=this.context.dataset.adExtras.adsid||"",s.adpinfo=this.context.dataset.adExtras.adpinfo||""),s},getinfoOnError:function(e,t){"444"==(e=e||{}).code?e.timeout?e.errCode=Txplayer.v4errcode.getPlatformErrorCode("getinfo","neterror","03"):e.dataerr?e.errCode=Txplayer.v4errcode.getPlatformErrorCode("getinfo","neterror","04"):e.errCode=Txplayer.v4errcode.getPlatformErrorCode("getinfo","neterror","01"):e.code?e.errCode=Txplayer.v4errcode.getPlatformErrorCode("getinfo","cgiInnerError",e.code):(e.code="444",e.errCode=Txplayer.v4errcode.getPlatformErrorCode("getinfo","neterror","04")),e.errCode&&e.exem&&(e.errCode+="."+e.exem),t.reject(e)},getinfoReport:function(e,t,o,i){var n=+new Date,r={endTime:n,startTime:o,getinfoURL:t,costTime:n-o};e&&"object"===T.type(e)?(r.err="error",r=T.extend(r,e)):e&&"string"===T.type(e)&&"timeout"==(r.err=e)&&(r.code=600),"string"===T.type(e)?r.errCode="timeout"==e?Txplayer.v4errcode.getPlatformErrorCode("getinfo","neterror","03"):Txplayer.v4errcode.getPlatformErrorCode("getinfo","neterror","01"):e&&e.code&&(r.errCode=Txplayer.v4errcode.getPlatformErrorCode("getinfo","cgiInnerError",e.code)),i&&(r.isLastRetry=1),r.errCode&&r.exem&&(r.errCode+="."+r.exem),this.context.msg.broadcast("getinfoFinish",r)},dealGetinfoData:function(e,t,o){var i,n,r,a=this;if(1!==a.checkGetInfoData(e))return{exem:e.exem,code:e.em,curTime:e.curTime};if(83!=(i=a.checkGetinfoRetCode(e)).iRetCode&&0!==i.iRetCode)return Txplayer.util.v4log("getinfo\u8fd4\u56de\u9519\u8bef\u7801\u9519\u8bef ",{iRetCode:i.iRetCode}),void a.getinfoOnError(e,t);e.iRetCode=i.iRetCode,a.dataset.getinfoData=e;try{a.context.dataset.reportClip=i.vi.fc||i.vi.cl.fc,a.context.dataset.reportStatus=i.vi.vst,a.context.dataset.reportType=i.vi.type,a.context.dataset.reportTestId=e.tstid,a.context.dataset.reportUsrIP=e.ip,a.context.dataset.cdnID=i.vi.ul.ui[0].vt,a.context.dataset.originalHwRate=(i.vi.vh/i.vi.vw).toFixed(3)}catch(e){}return n=s.getPcVideoMp4Url(e,a.context),"array"===T.type(n)&&n.length&&(r=1==e.dltype?n[0].urlArray[0].url+"&vkey="+i.vi.fvkey:n[0].urlArray&&n[0].urlArray[0]&&n[0].urlArray[0].url),a.context.dataset.dltype=e.dltype,8===a.context.dataset.dltype&&n&&n[0]&&!n[0].m3u8&&(a.context.dataset.dltype=3),t.resolve(r,n,s.getDefinitionListFromData(e),e,o||{}),a.context.msg.broadcast("reportGetinfo",{filename:i.vi.fn,cdnIp:Txplayer.util.getHostNameByUrl(i.vi.ul.ui[0].url),cdnId:i.vi.ul.ui[0].vt,vkey:1==e.dltype?i.vi.fvkey:""}),null},requestBefore:function(e){var t=T.Deferred(),o=this,i=[t].concat(Array.prototype.slice.call(arguments,1));return p?p.done(function(){e.apply(o,i)}).fail(function(){n=null,e.apply(o,i)}):e.apply(o,i),t},requestNewGetinfo:function(e){return this.requestBefore(this.requestNewGetinfoImpl,e)},requestNewGetinfoImpl:function(u,i){var n,f,p=this,h=this.getInfoConfig("vinfoad",i),m=0,y=i.onlyGetinfo?(n="vinfo",""):(n="vinfoad",p.context.adApi&&p.context.adApi.getAdRequestParam()||{}),g=0,v=3,w=!1,x=[];return p.context.config.usePreviewDomain&&(E=c),function r(e){e&&e.tm&&(i.tm=e.tm,h=p.getInfoConfig("vinfoad",i),3==v&&(v+=1)),e&&e.ckeyRetry&&(delete i.tm,h=p.getInfoConfig("vinfoad",i)),e&&e.domainRetry&&m++;var a=e&&e.domain||E[m%2];1==b.getUrlParam("debugvideomark")&&(a="testvd.l.qq.com");var t=e&&e.method||"POST";q&&(t="GET");var s=+new Date,c="//"+a+"/proxyhttp/"+n+"&"+T.param(h),d=v<=g;(0<g||i.onlyGetinfo&&!i.fhdswitch)&&(h.sphls=1,h.spgzip="",h.dlver=""),g++,p.context.msg.broadcast("getinfoStart",{getinfoURL:c,time:+new Date}),a===S&&(y.finaltry=1);var l=+new Date;Txplayer.util.v4log("6072 before.defer: ",l),Txplayer.util.v4log("requestGetinfo",h),Txplayer.util.v4log("requestAd",y);var o=p.requestPostCgi(n,{vinfoparam:h,adparam:y,domain:a,method:t});f=o.request,o.defer.done(function(e,t){var o=+new Date;Txplayer.util.v4log("6072 _defer.done: ",o,e,t);var i={};try{i=JSON.parse(t)}catch(e){}i.orginStr=t,i.adcost=o-l,i.retryTimes=g,i.domain=a,Txplayer.util.v4log("6072 adcost: ",i.adcost),i.requestOk=!0;var n=p.dealGetinfoData(e,u,i);p.getinfoReport(n,c,s,d),n&&(n.code?d||-1==T.inArray(n.code+"",_)?p.getinfoOnError(n,u):85==n.code?-3==n.exem&&n.curTime?(p.dataset.ckeyTm=n.curTime,p.dataset.ckeyTm_TIMER&&clearInterval(p.dataset.ckeyTm_TIMER),p.dataset.ckeyTm_TIMER=setInterval(function(){p.dataset.ckeyTm+=1},1e3),r({tm:n.curTime})):r({ckeyRetry:!0}):r():d?p.getinfoOnError({},u):r({domainRetry:!0}))}).fail(function(e,t){var o=+new Date;e.adcost=o-l,e.requestOk=!1,x.push(o-l),t&&"abort"===t||(p.getinfoReport(t,c,s,d),d?!w&&v<=g&&x.every(function(e){return e<=500})?(r({domain:S}),w=!0):q?p.getinfoOnError({code:444,timeout:"timeout"===t,dataerr:"dataerr"===t,costTime:new Date-s},u):(r({domain:E[0],method:"GET"}),q=!0):r({domainRetry:!0}))})}(),this.context.msg.off("vidChange.requestGetinfo").on("vidChange.requestGetinfo",function(){f&&f.abort&&f.abort()}),this.context.msg.off("seekStart.requestGetinfo").on("seekStart.requestGetinfo",function(){f&&f.abort&&f.abort()}),this.context.msg.off("userStopVideo.requestGetinfo").on("userStopVideo.requestGetinfo",function(){f&&f.abort&&f.abort()}),u},requestOldGetinfo:function(e){return this.requestBefore(this.requestOldGetinfoImpl,e)},requestOldGetinfoImpl:function(s,t){var c,d=this.getInfoConfig("getinfo",t),l=this,u=0;return function o(e){var i=e&&e.cgi?e.cgi:l.getRequestUrl({type:"geth5info",retryTimes:u}),n=+new Date;e&&e.tm&&(t.tm=e.tm,d=l.getInfoConfig("getinfo",t));var r=i+"&"+T.param(d),a=3<=u;u++,l.context.msg.broadcast("getinfoStart",{getinfoURL:r,time:n}),c=T.jsonp({url:i,data:d,timeout:6e3,callback:Txplayer.util.getJsonpCallbackName("getinfo")}).done(function(e){var t=l.dealGetinfoData(e,s);l.getinfoReport(t,r,n,a),t&&(t.code?a||-1==T.inArray(t.code+"",_)?l.getinfoOnError(t,s):85==t.code&&-3==t.exem&&t.curTime?o({tm:t.curTime,cgi:i}):o({cgi:i}):a?l.getinfoOnError({},s):o())}).fail(function(e,t){t&&"abort"===t||(l.getinfoReport(t,r,n,a),a?l.getinfoOnError({code:444,timeout:"timeout"===t,costTime:new Date-n},s):o())})}(),this.context.msg.off("vidChange.requestGetinfo").on("vidChange.requestGetinfo",function(){c&&c.abort&&c.abort()}),this.context.msg.off("seekStart.requestGetinfo").on("seekStart.requestGetinfo",function(){c&&c.abort&&c.abort()}),this.context.msg.off("userStopVideo.requestGetinfo").on("userStopVideo.requestGetinfo",function(){c&&c.abort&&c.abort()}),s},getKeyConfig:function(e,t,o){var i="";try{i=location.href.replace(location.search,""),b.isInIframe()&&(i=top.location.href.replace(top.location.search,""))}catch(e){}var n=b.getUrlParam("debugehost")||b.removeUrlParams(i),r={otype:t?"ojson":"json",vid:e.vid,format:function(e){for(var t=0,o=e.length;t<o;t++)if(1==e[t].sl)return e[t].id;return-1}(this.dataset.getinfoData.fl.fi),filename:e.newFileName,platform:this.context.dataset.platform,appVer:Txplayer.dataset.ver,vt:e.vt,sdtfrom:this.context.dataset.sdtfrom,guid:this.context.dataset.guid,flowid:this.context.dataset.flowid,charge:e.isNeedPay?1:0,linkver:2,lnk:this.context.dataset.getinfoJSON.vl.vi[0].lnk,tm:o||b.getTimeStampStr(),refer:i,ehost:n};return r.logintoken=this.context.dataset.txplayerAuth.getInfo(!0),this.context.dataset.unid&&(r.unid=this.context.dataset.unid),this.context.dataset.authfrom&&(r.auth_from=this.context.dataset.authfrom),this.context.dataset.authext&&(r.auth_ext=this.context.dataset.authext),m(r),r},getKeyErrorCode:function(e){!(e=e||{}).err&&e.em&&(e.err="error"),!e.code&&e.em&&(e.code=e.em);var t="";return"error"===e?t=Txplayer.v4errcode.getPlatformErrorCode("getkey","neterror","01"):"timeout"===e?t=Txplayer.v4errcode.getPlatformErrorCode("getkey","neterror","03"):"dataerr"===e?t=Txplayer.v4errcode.getPlatformErrorCode("getkey","neterror","04"):e.errCode?t=e.errCode:"timeout"===e.err?t=Txplayer.v4errcode.getPlatformErrorCode("getkey","neterror","03"):"no key"!==e.err||e.hasOwnProperty("code")?e.err&&!e.hasOwnProperty("code")?t=Txplayer.v4errcode.getPlatformErrorCode("getkey","neterror","01"):e.err&&e.hasOwnProperty("code")&&(t=Txplayer.v4errcode.getPlatformErrorCode("getkey","cgiInnerError",e.code+"")):t=Txplayer.v4errcode.getPlatformErrorCode("getkey","neterror","04"),t&&e.exem&&(t+="."+e.exem),t},getkeyReport:function(e,t,o,i){var n=+new Date,r={endTime:n,startTime:t,getkeyURL:o,costTime:n-t,isLastRetry:i};e&&"object"===T.type(e)?(r.err="error",r=T.extend(r,e),e.em&&(r.code=e.em)):e&&"string"===T.type(e)&&"timeout"==(r.err=e)&&(r.code=600),r.errCode=this.getKeyErrorCode(e),this.context.msg.broadcast("getkeyFinish",r)},requestOldGetVkey:function(e){return this.requestBefore(this.requestOldGetVkeyImpl,e)},requestOldGetVkeyImpl:function(r,e){var a,s=this,c=0,d=this.getRequestUrl({type:"getkey",retryTimes:c}),l=this.getKeyConfig(e,!1);return function o(t){if((t=t||{}).code&&-1==T.inArray(t.code+"",_))r.reject(t);else{var i=c>s.context.config.keyRetryTimes;if(i)return t.code||(t.code=445),void r.reject(t);c++;var n=+new Date;s.context.msg.broadcast("getkeyStart"),a=T.jsonp({url:t.url||d,data:l,timeout:6e3,callback:Txplayer.util.getJsonpCallbackName("getkey")}).done(function(e){e&&e.key?(r.resolve(e.key),s.getkeyReport(null,n,d+"&"+T.param(l),i)):(!e.code&&t.em&&(e.code=t.em),e.key||(e.err="no key"),s.getkeyReport(e,n,d+"&"+T.param(l),i),e.errCode=s.getKeyErrorCode(e),o(e))}).fail(function(e,t){t&&"abort"===t||(s.getkeyReport(t,n,d+"&"+T.param(l),i),o({code:445,errCode:s.getKeyErrorCode(t),url:s.getRequestUrl({type:"getkey",retryTimes:c}),timeout:"timeout"===t}))})}}(),this.context.msg.off("vidChange.requestOldGetVkey").on("vidChange.requestOldGetVkey",function(){a&&a.abort&&a.abort()}),this.context.msg.off("userStopVideo.requestOldGetVkey").on("userStopVideo.requestOldGetVkey",function(){a&&a.abort&&a.abort()}),r},requestNewGetVkey:function(e){return this.requestBefore(this.requestNewGetVkeyImpl,e)},requestNewGetVkeyImpl:function(d,l){var u,f=this,p=0,h=this.getKeyConfig(l,!0),m=0,y=f.context.config.keyRetryTimes,g=!1,v=[];return function o(e){if((e=e||{}).code&&-1==T.inArray(e.code+"",_))d.reject(e);else{var i=y<p;if(i&&!e.lastDomain)return e.code||(e.code=445),void d.reject(e);e&&e.domainRetry&&m++,e.ckeyRetry&&(h=f.getKeyConfig(l,!0,e.curTime));var t=e&&e.domain||E[m%2],n=e&&e.method||"POST";q&&(n="GET"),p++;var r=+new Date,a="//"+t+"/proxyhttp/getkey&"+T.param(h);f.context.msg.broadcast("getkeyStart");var s=+new Date,c=f.requestPostCgi("getkey",{vkeyparam:h,domain:t,method:n});u=c.request,c.defer.done(function(e){e&&e.key?(d.resolve(e.key),f.getkeyReport(null,r,a,i)):(!e.code&&e.em&&(e.code=e.em),85==e.code&&(e.hasOwnProperty("exem")&&(e.exem=e.exem),-3==e.exem&&(y=3==y?4:y),e.curTime&&(e.curTime=e.curTime),e.ckeyRetry=!0),e.err||(e.err="no key"),f.getkeyReport(e,r,a,i),e.errCode=f.getKeyErrorCode(e),e.code||"no key"!=e.err||(e.domainRetry=!0),Txplayer.util.v4log("\u91cd\u8bd5getkey\uff0c\u540e\u53f0\u6709\u8fd4\u56de\u6570\u636e\uff1a"+JSON.stringify(e)),o(e))}).fail(function(e,t){v.push(new Date-s),t&&"abort"===t?Txplayer.util.v4log("\u91cd\u8bd5getkey\uff0c\u6240\u6709\u8bf7\u6c42\u90fd\u5931\u8d25\u4e86\uff0cabort\uff0cerr: "+t):!g&&y<p&&v.every(function(e){return e<=500})?(Txplayer.util.v4log("\u91cd\u8bd5getkey\uff0c\u6240\u6709\u7684\u8bf7\u6c42\u90fd\u5931\u8d25\u4e86,500ms\u4ee5\u5185, err: "+t),o({domain:S}),g=!0):q?(Txplayer.util.v4log("\u91cd\u8bd5getkey\uff0c\u5176\u4ed6\u573a\u666f, err: "+t),f.getkeyReport(t,r,a,i),o({code:445,errCode:f.getKeyErrorCode(t||"error"),timeout:"timeout"===t,domainRetry:!0})):(Txplayer.util.v4log("\u91cd\u8bd5getkey\uff0c\u6ca1\u6709\u7528\u8fc7GET\u8bf7\u6c42\uff0c\u5207\u6362\u5230GET\u8bf7\u6c42, err: "+t),o({domain:E[0],lastDomain:!0,method:"GET"}),q=!0)})}}(),this.context.msg.off("vidChange.requestOldGetVkey").on("vidChange.requestOldGetVkey",function(){u&&u.abort&&u.abort()}),this.context.msg.off("userStopVideo.requestOldGetVkey").on("userStopVideo.requestOldGetVkey",function(){u&&u.abort&&u.abort()}),d},requestRollInfo:function(e){return this.requestBefore(this.requestRollInfoImpl,e)},requestRollInfoImpl:function(o,e){var t,i,n,r=this.getInfoConfig("getinfo",e),a=this;return n=i&&i.cgi?i.cgi:a.getRequestUrl({type:"pollvinfo",retryTimes:0}),i&&i.tm&&(e.tm=i.tm,r=a.getInfoConfig("getinfo",e)),r.jsonp=1,r.vid=a.context.dataset.vid,t=T.jsonp({url:n,data:r,timeout:6e3,callback:Txplayer.util.getJsonpCallbackName("pollvinfo")}).done(function(e){o.resolve(e)}).fail(function(e,t){o.reject(t)}),this.context.msg.off("vidChange.requestRollInfo").on("vidChange.requestRollInfo",function(){t&&t.abort&&t.abort()}),this.context.msg.off("seekStart.requestRollInfo").on("seekStart.requestRollInfo",function(){t&&t.abort&&t.abort()}),this.context.msg.off("userStopVideo.requestRollInfo").on("userStopVideo.requestRollInfo",function(){t&&t.abort&&t.abort()}),o}},e.exports=h},434:function(e,t){function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i,n,d,r,me,ye,ge,F,ve,H,we,j,xe,B,Te,be,_e,Ee,Se,qe,Ae,Pe,X,ke,$,G,Re,Ce,Oe,Ie,Me,De,Ue,Ne,Ve,K,W,Q,Le,Fe,He,J,z,Y,Z,je,Be,Xe,$e,Ge,Ke,We,Qe,Je,ze,Ye,Ze,et,a,tt,ot,it,nt,rt,at,st,ct,dt,lt,ut,ft,pt,ht,mt,yt,gt,vt,wt,xt,Tt,bt,_t,Et,St,qt,At,Pt,kt,Rt,Ct,Ot,It,Mt,Dt,Ut,Nt,Vt,Lt,Ft,Ht,jt,Bt,Xt,$t,Gt,Kt,Wt,Qt,Jt,zt,s=(me=1836,ye=-8290,ge=2174,F=-2285,ve=3198,H=-9220,we=5906,j=8126,xe=-3571,B=-213,Te=2249,be=-693,_e=-327,Ee=-1731,Se=1765,qe=-5346,Ae=-4080,Pe=7512,X=4359,ke=-496,$=-4191,G=2007,Re=-1741,Ce=700,Oe=-137,Ie=8366,Me=-6006,De=9095,Ue=2829,Ne=-6612,Ve=2907,K=-450,W=-4002,Q=9852,Le=-3683,Fe=8972,He=5031,J=-1124,z=847,Y=-2667,Z=-1169,je=3738,Be=4510,Xe=6428,$e=-4870,Ge=-5763,Ke=-132,We=9425,Qe=9587,Je=-3620,Ye=9508,Ze=-7940,et=-6629,a=5513,tt=5977,ot=-4547,it=-3840,nt=-2175,rt=8487,at=-6720,st=6747,ct=6090,dt=-9874,lt=-6246,ut=9031,ft=2239,pt=-8467,ht=ze=-955,mt=-2579,yt=-2673,gt=-8067,vt=-359,wt=-7307,xt=291,Tt=-5270,bt=-3336,_t=-1623,Et=7936,St=3769,qt=-239,At=5156,Pt=9703,kt=2034,Rt=4093,Ct=-5537,Ot=-657,It=6972,Mt=-517,Dt=5772,Ut=-3763,Nt=8444,Vt=-4631,Lt=-1401,Ft=7370,Ht=-1755,jt=-2468,Bt=709,Xt=-7253,$t=8815,Gt=-7188,Kt=2123,Wt=1655,Qt=-4280,Jt=-8940,zt=zt||function(s){function n(){}var e={},t=e.a={},o=t.b={c:function(e){for(var t="",o=0;o<"\u0945\u0942\u0945\u0958".length;o++)t+=String.fromCharCode(me+9807-9295^"\u0945\u0942\u0945\u0958".charCodeAt(o));n.prototype=this;var i=new n;return e&&i.d(e),i.hasOwnProperty(t)||(i.init=function(){i.$super.init.apply(this,arguments)}),(i.init.prototype=i).$super=this,i},create:function(){var e=this.c();return e.init.apply(e,arguments),e},init:function(){},d:function(e){for(var t="",o=0;o<"\u037e\u0365\u0359\u037e\u0378\u0363\u0364\u036d".length;o++)t+=String.fromCharCode(778^"\u037e\u0365\u0359\u037e\u0378\u0363\u0364\u036d".charCodeAt(o));for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i]);e.hasOwnProperty(t)&&(this.toString=e.toString)},e:function(){return this.init.prototype.c(this)}},c=t.f=o.c({init:function(e,t){e=this.g=e||[],this.h=null!=t?t:(-2630+ye+10924)*e.length},toString:function(e){return(e||r).i(this)},concat:function(e){var t=this.g,o=e.g,i=this.h;if(e=e.h,this.j(),i%(ge+-269+-4213+2312))for(var n=0;n<e;n++)t[i+n>>>2]|=(o[n>>>2]>>>24-n%4*8&255)<<24-(i+n)%(-9975+ge+-4490+12295)*8;else if(65535<o.length)for(n=0;n<e;n+=4)t[i+n>>>2]=o[n>>>2];else t.push.apply(t,o);return this.h+=e,this},j:function(){var e=this.g,t=this.h;e[t>>>8517+me+-2630-7721]&=me+8309+-4849+4294961999<<32-(me+-8270+6442)*(t%4),e.length=s.ceil(t/4)},e:function(){var e=o.e.call(this);return e.g=this.g.slice(0),e},random:function(e){for(var t=[],o=0;o<e;o+=4)t.push(4294967296*s.random()|-8555+F+376+10464);return new c.init(t,e)}}),i=e.k={},r=i.l={i:function(e){for(var t="",o=0;o<"".length;o++)t+=String.fromCharCode(368^"".charCodeAt(o));var i=e.g;e=e.h;for(var n=[],r=0;r<e;r++){var a=i[r>>>2]>>>24-r%(ve+5624-8818)*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join(t)},parse:function(e){for(var t=e.length,o=[],i=0;i<t;i+=2)o[i>>>H+9223]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new c.init(o,t/2)}},a=i.m={i:function(e){for(var t="",o=0;o<"".length;o++)t+=String.fromCharCode(2238^"".charCodeAt(o));var i=e.g;e=e.h;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(i[r>>>2]>>>24-r%4*8&255));return n.join(t)},parse:function(e){for(var t=e.length,o=[],i=we-5906;i<t;i++)o[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new c.init(o,t)}},d=i.n={i:function(e){for(var t="",o=0,i="\xd8\xf4\xf9\xf3\xfa\xe7\xf8\xf0\xf1\xb5\xc0\xc1\xd3\xb8\xad\xb5\xf1\xf4\xe1\xf4";o<i.length;o++)t+=String.fromCharCode(149^i.charCodeAt(o));try{return decodeURIComponent(escape(a.i(e)))}catch(e){throw Error(t)}},parse:function(e){return a.parse(unescape(encodeURIComponent(e)))}},l=t.o=o.c({p:function(){this.q=new c.init,this.r=me-1836},s:function(e){for(var t="",o=0;o<"\u0fa7\u0fa0\u0fa6\u0fbd\u0fba\u0fb3".length;o++)t+=String.fromCharCode(4052^"\u0fa7\u0fa0\u0fa6\u0fbd\u0fba\u0fb3".charCodeAt(o));t==h(e)&&(e=d.parse(e)),this.q.concat(e),this.r+=e.h},t:function(e){var t=this.q,o=t.g,i=t.h,n=this.u,r=i/(4*n);if(e=(r=e?s.ceil(r):s.max((0|r)-this.v,0))*n,i=s.min(4*e,i),e){for(var a=0;a<e;a+=n)this.w(o,a);a=o.splice(0,e),t.h-=i}return new c.init(a,i)},e:function(){var e=o.e.call(this);return e.q=this.q.e(),e},v:0});t.x=l.c({y:o.c(),init:function(e){this.y=this.y.c(e),this.p()},p:function(){l.p.call(this),this.z()},A:function(e){return this.s(e),this.t(),this},B:function(e){return e&&this.s(e),this.C()},u:16,D:function(o){return function(e,t){return new o.init(t).B(e)}},F:function(o){return function(e,t){return new u.HMAC.init(o,t).B(e)}}});var u=e.G={};return e}(Math),function(){for(var e="",t=0,o="\x91\x92\x93\x94\x95\x96\x97\x98\x99\x9a\x9b\x9c\x9d\x9e\x9f\x80\x81\x82\x83\x84\x85\x86\x87\x88\x89\x8a\xb1\xb2\xb3\xb4\xb5\xb6\xb7\xb8\xb9\xba\xbb\xbc\xbd\xbe\xbf\xa0\xa1\xa2\xa3\xa4\xa5\xa6\xa7\xa8\xa9\xaa\xe0\xe1\xe2\xe3\xe4\xe5\xe6\xe7\xe8\xe9\xfb\xff\xed";t<o.length;t++)e+=String.fromCharCode(208^o.charCodeAt(t));var c=zt.a.f;zt.k.H={i:function(e){for(var t="",o=0;o<"".length;o++)t+=String.fromCharCode(4077^"".charCodeAt(o));var i=e.g,n=e.h,r=this.I;e.j(),e=[];for(var a=0;a<n;a+=3)for(var s=(i[a>>>2]>>>24-a%4*8&255)<<j+-9200+1090|(i[a+(F+7275-4989)>>>2]>>>24-(a+1)%4*8&255)<<8|i[a+2>>>2]>>>xe+3595-(a+2)%4*8&255,c=0;c<4&&a+.75*c<n;c++)e.push(r.charAt(s>>>6*(3-c)&63));if(i=r.charAt(64))for(;e.length%4;)e.push(i);return e.join(t)},parse:function(e){var t=e.length,o=this.I;(r=o.charAt(64))&&-1!=(r=e.indexOf(r))&&(t=r);for(var i,n,r=[],a=0,s=0;s<t;s++){s%4&&(i=o.indexOf(e.charAt(s-1))<<s%(B+1860+5724-7367)*2,n=o.indexOf(e.charAt(s))>>>6-s%4*2,r[a>>>j+-6116+4162-6170]|=(i|n)<<24-a%4*8,a++)}return c.create(r,a)},I:e}}(),function(r){var _=1864,E=-6103,S=-5750,q=-5616,A=-7555,P=-458,k=1071,R=927,C=-2568,O=6326,I=-4204,s=4918,c=7574,d=6160,l=855,u=-9137,f=2297,p=-9619,h=-8866,m=-6091,y=-7050,g=-1233,v=-7874,w=5847,x=5062,T=-4552,b=4635;function M(e,t,o,i,n,r,a){return L.call(this,0,e,t,o,i,n,r,a)}function D(e,t,o,i,n,r,a){return L.call(this,1,e,t,o,i,n,r,a)}function U(e,t,o,i,n,r,a){return L.call(this,2,e,t,o,i,n,r,a)}function N(e,t,o,i,n,r,a){return L.call(this,3,e,t,o,i,n,r,a)}for(var e=zt,t=(i=e.a).f,o=i.x,i=e.G,V=[],n=0;n<-12185+F+14534;n++)V[n]=4294967296*r.abs(r.sin(n+(-7343+F+S+15379)))|0;function L(e){switch(e){case 0:var t=arguments[1],o=arguments[s+7592+7592-20100],i=arguments[d+l-7012],n=arguments[c+u+1567],r=arguments[-1789+f-503],a=arguments[p+h+F+20776];return((t=t+(o&i|~o&n)+r+arguments[7])<<a|t>>>32-a)+o;case m+q+11708:return((t=(t=arguments[y+7051])+((o=arguments[X+4673+Q-18882])&(n=arguments[Le+Fe+He-10316])|(i=arguments[O+De+H-6198])&~n)+(r=arguments[J+$+A+12875])+arguments[7])<<(a=arguments[6])|t>>>-9475+g+De+1645-a)+o;case P+460:return((t=(t=arguments[G+Ee-275])+((o=arguments[W+z+3157])^(i=arguments[v+-6801+14678])^(n=arguments[O+k-7393]))+(r=arguments[C+w+36-3310])+arguments[7])<<(a=arguments[j+Ue-10949])|t>>>32-a)+o;case x+T+Y+2160:return((t=(t=arguments[1])+((i=arguments[G+R-2931])^((o=arguments[7592+Z+4673-11094])|~(n=arguments[5298+K+-4862+18])))+(r=arguments[b-4630])+arguments[B+220])<<(a=arguments[Ue+-6978+4155])|t>>>-8328+I+-2734+15298-a)+o}}i=i.J=o.c({z:function(){this.K=new t.init([1732584193,4023233417,2562383102,9348+xe+7556+271720545])},w:function(e,t){for(var o=0;o<16;o++){var i=e[a=t+o];e[a]=16711935&(i<<8|i>>>q+5640)|4278255360&(i<<24|i>>>8)}o=this.K.g;var n,r,a=e[t+0],s=(i=e[t+1],e[t+(Te-2247)]),c=e[t+3],d=e[t+4],l=e[t+5],u=e[t+(q+Te+5624-2251)],f=e[t+7],p=e[t+8],h=e[t+9],m=e[t+10],y=e[t+11],g=e[t+12],v=e[t+(E+ge+3942)],w=e[t+14],x=e[t+15],T=o[-1465+me-371],b=N(b=N(b=N(b=N(b=U(b=U(b=U(b=U(b=D(b=D(b=D(b=D(b=M(b=M(b=M(b=M(b=o[1],r=M(r=o[2],n=M(n=o[3],T=M(T,b,r,n,a,7,V[-2964+j-5162]),b,r,i,12,V[1]),T,b,s,5903+q-270,V[2]),n,T,c,22,V[3]),r=M(r,n=M(n,T=M(T,b,r,n,d,7,V[4]),b,r,l,12,V[5]),T,b,u,17,V[6]),n,T,f,22,V[7]),r=M(r,n=M(n,T=M(T,b,r,n,p,7,V[8]),b,r,h,12,V[9]),T,b,m,4264+q+1369,V[-3423+be+4126]),n,T,y,22,V[11]),r=M(r,n=M(n,T=M(T,b,r,n,g,we-5899,V[12]),b,r,v,12,V[be+-2344+3050]),T,b,w,17,V[1227+A+6342]),n,T,x,-8569+B+8804,V[P+-1821+806+1488]),r=D(r,n=D(n,T=D(T,b,r,n,i,-7413+q+13034,V[16]),b,r,u,9,V[_+_e+-7697+6177]),T,b,y,Ee+-5305+7539-489,V[18]),n,T,a,Se+-571+6443-7617,V[19]),r=D(r,n=D(n,T=D(T,b,r,n,l,5,V[k-1051]),b,r,m,9,V[21]),T,b,x,14,V[qe+S+-8178+19296]),n,T,d,20,V[-11385+Ae+15488]),r=D(r,n=D(n,T=D(T,b,r,n,h,5,V[24]),b,r,w,9,V[25]),T,b,c,-912+Pe+X-10945,V[R-901]),n,T,p,12598+C-10010,V[27]),r=D(r,n=D(n,T=D(T,b,r,n,v,5,V[-4202+O-2096]),b,r,s,9,V[29]),T,b,f,ke+q+O-200,V[30]),n,T,g,C+9955-7367,V[7539+j+42-15676]),r=U(r,n=U(n,T=U(T,b,r,n,l,4,V[32]),b,r,p,11,V[33]),T,b,y,ke+9362-8850,V[34]),n,T,w,be+716,V[35]),r=U(r,n=U(n,T=U(T,b,r,n,i,-5345+$+9540,V[36]),b,r,d,11,V[37]),T,b,f,16,V[38]),n,T,m,23,V[39]),r=U(r,n=U(n,T=U(T,b,r,n,v,q+P+G+4071,V[40]),b,r,a,Re+1752,V[41]),T,b,c,16,V[42]),n,T,u,23,V[43]),r=U(r,n=U(n,T=U(T,b,r,n,h,4,V[44]),b,r,g,11,V[45]),T,b,x,Ae+4096,V[46]),n,T,s,23,V[47]),r=N(r,n=N(n,T=N(T,b,r,n,a,S+Ce+5056,V[Oe+185]),b,r,f,Pe-7502,V[49]),T,b,w,4376+Ie+3667-16394,V[50]),n,T,l,Me+-983+7010,V[51]),r=N(r,n=N(n,T=N(T,b,r,n,g,42+Te+656-2941,V[52]),b,r,c,10,V[53]),T,b,m,2553+De+-8569-3064,V[54]),n,T,i,21,V[3412+qe+1989]),r=N(r,n=N(n,T=N(T,b,r,n,p,6,V[56]),b,r,x,2260+P-1792,V[-6071+Ue+3299]),T,b,u,15,V[-990+I+5252]),n,T,v,4121+ve-7298,V[59]),r=N(r,n=N(n,T=N(T,b,r,n,d,6,V[Ne+6672]),b,r,y,10,V[61]),T,b,s,15,V[62]),n,T,h,21,V[63]);o[Ve-2907]=o[0]+T|0,o[1]=o[1]+b|0,o[2]=o[2]+r|0,o[3]=o[3]+n|-11860+K+12310},C:function(){var e=this.q,t=e.g,o=(6876+P+-335-6075)*this.r,i=8*e.h;t[i>>>8761+s+1268-14942]|=128<<$+4215-i%32;var n=r.floor(o/4294967296);for(t[15+(64+i>>>9<<W+4006)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t[14+(i+(G+-6251+4308)>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.h=4*(t.length+1),this.t(),t=(e=this.K).g,o=0;o<4;o++)i=t[o],t[o]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>2244+c+2814-12624);return e},e:function(){var e=o.e.call(this);return e.K=this.K.e(),e}}),e.J=o.D(i),e.L=o.F(i)}(Math),n=(o=(i=zt).a).b,d=o.f,r=(o=i.G).M=n.c({y:n.c({N:4,O:o.J,P:1}),init:function(e){this.y=this.y.c(e)},Q:function(e,t){for(var o=(a=this.y).O.create(),i=d.create(),n=i.g,r=a.N,a=a.P;n.length<r;){s&&o.A(s);var s=o.A(e).B(t);o.p();for(var c=1;c<a;c++)s=o.B(s),o.p();i.concat(s)}return i.h=4*r,i}}),i.M=function(e,t,o){return r.create(o).Q(e,t)},zt.a.R||function(){var e=(f=zt).a,t=e.b,a=e.f,o=e.o,i=f.k.H,n=f.G.M,r=e.R=o.c({y:t.c(),S:function(e,t){return this.create(this.T,e,t)},U:function(e,t){return this.create(this.V,e,t)},init:function(e,t,o){this.y=this.y.c(o),this.W=e,this.X=t,this.p()},p:function(){o.p.call(this),this.z()},Y:function(e){return this.s(e),this.t()},B:function(e){return e&&this.s(e),this.C()},N:Se-1761,Z:4,T:1,V:2,D:function(r){return{$:function(e,t,o){for(var i="",n=0;n<"\u01e0\u01e7\u01e1\u01fa\u01fd\u01f4".length;n++)i+=String.fromCharCode(403^"\u01e0\u01e7\u01e1\u01fa\u01fd\u01f4".charCodeAt(n));return(i==h(t)?p:u).$(r,e,t,o)},_:function(e,t,o){for(var i="",n=0;n<"\u08d8\u08df\u08d9\u08c2\u08c5\u08cc".length;n++)i+=String.fromCharCode(2219^"\u08d8\u08df\u08d9\u08c2\u08c5\u08cc".charCodeAt(n));return(i==h(t)?p:u)._(r,e,t,o)}}}});e.aa=r.c({C:function(){return this.t(!0)},u:1});function s(e,t,o){var i=this.ca;i?this.ca=void 0:i=this.da;for(var n=0;n<o;n++)e[t+n]^=i[n]}var c=f.ba={},d=(e.ea=t.c({S:function(e,t){return this.fa.create(e,t)},U:function(e,t){return this.ga.create(e,t)},init:function(e,t){this.ha=e,this.ca=t}})).c();d.fa=d.c({ia:function(e,t){var o=this.ha,i=o.u;s.call(this,e,t,i),o.ja(e,t),this.da=e.slice(t,t+i)}}),d.ga=d.c({ia:function(e,t){var o=this.ha,i=o.u,n=e.slice(t,t+i);o.ka(e,t),s.call(this,e,t,i),this.da=n}}),c=c.la=d,d=(f.na={}).ma={na:function(e,t){for(var o,i=(o=(o=4*t)-e.h%o)<<24|o<<16|o<<8|o,n=[],r=6180+Ue+-1259-7750;r<o;r+=je+6428-10162)n.push(i);o=a.create(n,o),e.concat(o)},oa:function(e){e.h-=255&e.g[e.h-1>>>2]}},e.pa=r.c({y:r.y.c({ba:c,qa:d}),p:function(){r.p.call(this);var e,t=(o=this.y).ra,o=o.ba;this.W==this.T?e=o.S:(e=o.U,this.v=1),this.sa=e.call(o,this,t&&t.g)},w:function(e,t){this.sa.ia(e,t)},C:function(){var e,t=this.y.qa;return this.W==this.T?(t.na(this.q,this.u),e=this.t(!0)):(e=this.t(!0),t.oa(e)),e},u:Y+-6989+-3440+13100});var l=e.ta=t.c({init:function(e){this.d(e)},toString:function(e){return(e||this.ua).i(this)}}),u=(c=(f.wa={}).va={i:function(e){var t=e.xa;return((e=e.ya)?a.create([1398893684,6475+G+1701068349]).concat(e).concat(t):t).toString(i)},parse:function(e){var t,o=(e=i.parse(e)).g;return 1398893684==o[0]&&1701076831==o[1]&&(t=a.create(o.slice(2,4)),o.splice(0,4),e.h-=16),l.create({xa:e,ya:t})}},e.za=t.c({y:t.c({wa:c}),$:function(e,t,o,i){i=this.y.c(i);var n=e.S(o,i);return t=n.B(t),n=n.y,l.create({xa:t,Aa:o,ra:n.ra,Ba:e,ba:n.ba,qa:n.qa,u:e.u,ua:i.wa})},_:function(e,t,o,i){return i=this.y.c(i),t=this.Ca(t,i.wa),e.U(o,i).B(t.xa)},Ca:function(e,t){for(var o="",i=-8390+Be+3880;i<"\u0815\u0812\u0814\u080f\u0808\u0801".length;i++)o+=String.fromCharCode(2150^"\u0815\u0812\u0814\u080f\u0808\u0801".charCodeAt(i));return o==h(e)?t.parse(e,this):e}})),f=(f.Da={}).va={Ea:function(e,t,o,i){return i=i||a.random(8),e=n.create({N:t+o}).Q(e,i),o=a.create(e.g.slice(t),4*o),e.h=4*t,l.create({Aa:e,ra:o,ya:i})}},p=e.Fa=u.c({y:u.y.c({Da:f}),$:function(e,t,o,i){return o=(i=this.y.c(i)).Da.Ea(o,e.N,e.Z),i.ra=o.ra,(e=u.$.call(this,e,t,o.Aa,i)).d(o),e},_:function(e,t,o,i){return i=this.y.c(i),t=this.Ca(t,i.wa),o=i.Da.Ea(o,e.N,e.Z,t.ya),i.ra=o.ra,u._.call(this,e,t,o.Aa,i)}})}(),function(){for(var e=zt,t=e.a.pa,o=e.G,a=[],i=[],n=[],r=[],s=[],c=[],d=[],l=[],u=[],f=[],p=[],h=z+2043+-9216+6326;h<256;h++)p[h]=h<128?h<<1:h<<Xe+4353-10780^-4619+$e+9772;for(var m=0,y=13770+Y-11103,h=8146+Te+Te-12644;h<256;h++){var g=(g=y^y<<1^y<<me+7286+7286-16406^y<<3^y<<je+2744-6478)>>>8^255&g^7286+Ge+-803-621;a[m]=g;var v=p[i[g]=m],w=p[v],x=p[w],T=257*p[g]^16843008*g;n[m]=T<<24|T>>>8,r[m]=T<<8146+Ne-1518|T>>>16,s[m]=T<<-7226+ke+-8993+16723|T>>>24,c[m]=T,T=16843009*x^65537*w^(12950+Ke-12561)*v^(We+6038+Qe+16817958)*m,d[g]=T<<24|T>>>Z+1177,l[g]=T<<16|T>>>16,u[g]=T<<Ie+Je-4738|T>>>24,f[g]=T,m?(m=v^p[p[p[x^v]]],y^=p[p[y]]):m=y=1}var b=[0,1,Je+1538+-9246+11330,ze+-8064+-6326+15349,8,-7197+Ye-2295,32,64,128,27,54],o=o.Ga=t.c({z:function(){for(var e,t=(i=this.X).g,o=i.h/4,i=4*((this.Ha=o+6)+1),n=this.Ia=[],r=0;r<i;r++){r<o?n[r]=t[r]:(e=n[r-1],r%o?6<o&&4==r%o&&(e=a[e>>>24]<<24|a[e>>>16&255]<<16|a[e>>>8&255]<<8|a[255&e]):(e=a[(e=e<<8|e>>>24)>>>24]<<24|a[e>>>16&255]<<16|a[e>>>8&Ze+8195]<<8|a[255&e],e^=b[r/o|0]<<24),n[r]=n[r-o]^e)}for(t=this.Ja=[],o=0;o<i;o++)r=i-o,e=o%4?n[r]:n[r-4],t[o]=o<4||r<=4?e:d[a[e>>>24]]^l[a[e>>>16&255]]^u[a[e>>>8&255]]^f[a[255&e]]},ja:function(e,t){this.Ka(e,t,this.Ia,n,r,s,c,a)},ka:function(e,t){var o=e[t+1];e[t+1]=e[t+3],e[t+3]=o,this.Ka(e,t,this.Ja,d,l,u,f,i),o=e[t+1],e[t+1]=e[t+3],e[t+3]=o},Ka:function(e,t,o,i,n,r,a,s){for(var c=this.Ha,d=e[t]^o[0],l=e[t+1]^o[1],u=e[t+2]^o[6782+B+2889-9456],f=e[t+3]^o[3],p=4,h=1;h<c;h++)var m=i[d>>>24]^n[l>>>16&255]^r[u>>>8&255]^a[255&f]^o[p++],y=i[l>>>24]^n[u>>>16&255]^r[f>>>8&255]^a[255&d]^o[p++],g=i[u>>>24]^n[f>>>16&255]^r[d>>>8&Se-1510]^a[255&l]^o[p++],f=i[f>>>24]^n[d>>>16&255]^r[l>>>-3930+Le+7621&255]^a[255&u]^o[p++],d=m,l=y,u=g;m=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&f])^o[p++],y=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[f>>>8&255]<<8|s[255&d])^o[p++],g=(s[u>>>24]<<24|s[f>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^o[p++],f=(s[f>>>24]<<9424+et+-1219-1552|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^o[p++],e[t]=m,e[t+1]=y,e[t+(-5365+j-2759)]=g,e[t+3]=f},N:8});e.Ga=t.D(o)}(),function(e,t,o,i,n){return Zt.call(this,5,e,t,o,i,n)});function Yt(e){return Zt.call(this,a+2097+8214-15822,e)}function Zt(e){for(var t="",o=-8432+ot+12979;o<"\u090a".length;o++)t+=String.fromCharCode(it+nt+rt-50^"\u090a".charCodeAt(o));for(var i="",n=0;n<"\u07ad".length;n++)i+=String.fromCharCode(Me+3326+4681^"\u07ad".charCodeAt(n));for(var r="",a=0;a<"\u04a0".length;a++)r+=String.fromCharCode(at+Le+ve+8449^"\u04a0".charCodeAt(a));for(var s="",c=0;c<"\u0d07".length;c++)s+=String.fromCharCode(Oe+-5316+8904^"\u0d07".charCodeAt(c));for(var d="",l=st+3628+ct-16465;l<"\u05ff".length;l++)d+=String.fromCharCode(146+rt+-1434-5788^"\u05ff".charCodeAt(l));for(var u="",f=-1434+dt+11308;f<"\u08a8".length;f++)u+=String.fromCharCode(2260^"\u08a8".charCodeAt(f));for(var p="",h=0;h<"\u0b36".length;h++)p+=String.fromCharCode(2890^"\u0b36".charCodeAt(h));for(var m="",y=lt+6246;y<"\u01a8\u01a2\u01f6\u01a6\u01f6\u01a7\u01f5\u01f1\u01a7\u01a4".length;y++)m+=String.fromCharCode(-5316+Je+ut+358^"\u01a8\u01a2\u01f6\u01a6\u01f6\u01a7\u01f5\u01f1\u01a7\u01a4".charCodeAt(y));for(var g="",v=ft+146+4448-6833;v<"\u0a78".length;v++)g+=String.fromCharCode(2564^"\u0a78".charCodeAt(v));for(var w="",x=pt+4448+4019;x<"\u084c".length;x++)w+=String.fromCharCode(2096^"\u084c".charCodeAt(x));for(var T="",b=ht+-3155+-9555+13665;b<"\u0676".length;b++)T+=String.fromCharCode(Re+-3155+6442^"\u0676".charCodeAt(b));for(var _="",E=mt+2579;E<"\u0a88".length;E++)_+=String.fromCharCode(Ue+9851-9876^"\u0a88".charCodeAt(E));for(var S="",q=0;q<"\u0227".length;q++)S+=String.fromCharCode(Je+4223^"\u0227".charCodeAt(q));for(var A="",P=0;P<"\u043e".length;P++)A+=String.fromCharCode(yt+Re+9851-4347^"\u043e".charCodeAt(P));for(var k="",R=0;R<"\u07e1".length;R++)k+=String.fromCharCode(gt+He+Ye-4523^"\u07e1".charCodeAt(R));for(var C="",O=-215+Ne+Ce+6127;O<"\u0305".length;O++)C+=String.fromCharCode(889^"\u0305".charCodeAt(O));for(var I="",M=vt+-6842+7201;M<"".length;M++)I+=String.fromCharCode(Pe+wt+3363^"".charCodeAt(M));for(var D="",U=We+xt+Tt-4446;U<"".length;U++)D+=String.fromCharCode(Ke+Ae+4989^"".charCodeAt(U));for(var N="",V=-7878+$e+Ae+16828;V<"".length;V++)N+=String.fromCharCode(3628+bt+2321^"".charCodeAt(V));for(var L="",F=_t+Et+St-10082;F<"\xb4\xb9\xb2\xaf".length;F++)L+=String.fromCharCode(qt+5817-5364^"\xb4\xb9\xb2\xaf".charCodeAt(F));for(var H="",j=Xe+_e+-1665-4436;j<"\u06d8\u06d5\u06de\u06c3".length;j++)H+=String.fromCharCode(At+146+-4109+529^"\u06d8\u06d5\u06de\u06c3".charCodeAt(j));for(var B="",X=Pt+9456-19159;X<"\u0668\u0669\u0668\u0663".length;X++)B+=String.fromCharCode(1542^"\u0668\u0669\u0668\u0663".charCodeAt(X));for(var $="",G=ze+et+je+3846;G<"\xc1\xcc".length;G++)$+=String.fromCharCode(168^"\xc1\xcc".charCodeAt(G));for(var K="",W=Ze+7940;W<"\u06c6\u06cb\u06d4".length;W++)K+=String.fromCharCode(1698^"\u06c6\u06cb\u06d4".charCodeAt(W));for(var Q="",J=0,z="\u0b36\u0b0b\u0b51\u0b5e\u0b08\u0b0d\u0b0d\u0b51\u0b59\u0b36";J<z.length;J++)Q+=String.fromCharCode(9964+kt+-1265-7812^z.charCodeAt(J));for(var Y="",Z=0;Z<"\u05d9\u05c7\u05c0\u05ca\u05c1\u05d9".length;Z++)Y+=String.fromCharCode(1454^"\u05d9\u05c7\u05c0\u05ca\u05c1\u05d9".charCodeAt(Z));switch(e){case 0:var ee=[];window[Y]===window?ee.push(we+Ve+Rt-12906):ee.push(Ct+5538);try{var te=Q+Math.floor(1e7*Math.random()),oe=document.createElement(K);oe.setAttribute($,te),oe.style.La=B,(document.body||document.getElementsByTagName(H)[0]).appendChild(oe),document.getElementById(te)?ee.push(0):ee.push(1),(document.body||document.getElementsByTagName(L)[Ot+me+It-8151]).removeChild(oe)}catch(e){ee.push(-1361+Mt+1879)}return ee.join(N);case 1:var ie=arguments[qe+5347],ne=new zt.a.f.init([1332468387,-1641050960,Dt+Fe+2136881301,-1629555948],yt+2689),re=new zt.a.f.init([Ut+Se+22041281,Be+Nt+1457907509,776125350,-(-7878+Ge+-5975+1942018983)],Vt+4647);return zt.Ga.$(ie,ne,{ra:re,ba:zt.ba.la,qa:zt.na.ma}).xa.toString().toUpperCase();case Lt+Ft-5967:return(fe=arguments[Ht+-1708+jt+5932])?fe.length>8011+Ie-16329?fe.substr(6968+Bt-7677,48):fe:D;case 3:var ae=window.document.URL,se=window.navigator.userAgent.toLowerCase(),ce=I;window.document.referrer.length>-11220+Xt+18473&&(ce=window.document.referrer);try{ce.length==$t-8815&&0<opener.location.href.length&&(ce=opener.location.href)}catch(e){}var de=window.navigator.appCodeName,le=window.navigator.appName,ue=window.navigator.platform,ae=Yt(ae),ce=Yt(ce);return ae+C+Yt(se)+k+ce+A+de+S+le+_+ue;case Gt+De+Qe-11490:var fe=arguments[1],pe=Kt+-1434-689;if(fe.length==Te+Qe+Wt-13491)return pe;for(ye=Qt+1003+4059-782;ye<fe.length;ye++)char=fe.charCodeAt(ye),pe=(pe<<8276+ge-10445)-pe+char,pe&=pe;return pe;case Jt+8945:var he=T+arguments[ke+ye+8787]+w+arguments[2]+g+m+p+arguments[3]+u+arguments[be+Pe+xe-3244]+d+arguments[Ae+Ct+-1658+11280]+s+function(){return Zt.call(this,tt-5974)}()+r+function(){return Zt.call(this,0)}()+i;return function(e){return Zt.call(this,1,e)}(t+(pe=function(){return Zt.call(this,Ee+1735,he)}())+he)}}e.exports=s},435:function(e,t,o){var r=o(6).definitionMap;e.exports={getDefinitionListFromData:function(e){var t=Txplayer.$,o=[];location.hostname;if(top!==window)try{top.location.hostname}catch(e){}if("o"===e.s&&e.fl&&e.fl.fi&&"array"===t.type(e.fl.fi)&&e.fl.fi.length&&e.fl.fi[0])for(var i=0,n=e.fl.fi.length;i<n;i++)e.fl.fi[i].name in r&&("fhd"==e.fl.fi[i].name&&"fhd"!=e.fl.fi[i].name||o.push({name:e.fl.fi[i].name,cname:e.fl.fi[i].cname,sl:e.fl.fi[i].sl,format:e.fl.fi[i].id,lmt:e.fl.fi[i].lmt,fs:e.fl.fi[i].fs,br:e.fl.fi[i].br}));return o},getPcVideoMp4Url:function(e,c){var t,o,i,n,r=Txplayer.$,a=e.vl.vi[0],s=[],d=a.fn;if(3==e.dltype||8===e.dltype){(t={}).vid=a.lnk,t.width=parseInt(a.vw),t.height=parseInt(a.vh),t.bytesTotal=parseInt(a.fs),t.byteRate=a.br,t.filename=a.fn,o=a.fn,t.newFileName=o,t.fileNameSuffix=p(o);var l=function(o){var i=[];8===o.dltype&&"o"===o.s&&o.vl&&o.vl.vi&&o.vl.vi.length&&o.vl.vi[0]&&o.vl.vi[0].ul&&(i.m3u8=o.vl.vi[0].ul.m3u8);(3===o.dltype||8===o.dltype)&&"o"===o.s&&o.vl&&o.vl.vi&&o.vl.vi.length&&o.vl.vi[0]&&o.vl.vi[0].ul&&o.vl.vi[0].ul.ui&&o.vl.vi[0].ul.ui.length&&r.each(o.vl.vi[0].ul.ui,function(e,t){t.url&&t.hls&&t.hls.pt?i.push(t.url+t.hls.pt):8===o.dltype&&i.push(t.url)});return i}(e);t.urlArray=[],n=l.length;for(var u=0;u<n;u++)t.urlArray.push({url:l[u]});return t.vt=a.ul.ui[0].vt,t.duration=parseInt(a.td,10),t.m3u8=l.m3u8,s.push(t),s}if(n=a.cl.fc,!a.cl.ci&&a.fvkey&&a.fn&&a.ul&&a.ul.ui&&a.ul.ui.length)return(t={}).vid=a.lnk,t.width=parseInt(a.vw),t.height=parseInt(a.vh),t.bytesTotal=parseInt(a.fs),t.byteRate=a.br,t.filename=a.fn,o=a.fn,t.newFileName=o,t.fileNameSuffix=p(o),t.urlArray=h(a.ul,a.lnk,o,t.fileNameSuffix),t.vt=a.ul.ui[0].vt,t.duration=parseInt(a.td,10),s.push(t),s;if(a.cl.ci&&n===a.cl.ci.length){for(var f=0;f<n;f++)i=a.cl.ci[f],(t={}).vid=a.lnk,t.width=parseInt(a.vw),t.height=parseInt(a.vh),t.bytesTotal=parseInt(i.cs),t.duration=parseFloat(i.cd),t.byteRate=a.br,t.filename=a.fn,o=function(e,t){if(0===t)return e;var o=e.lastIndexOf(".");return e.substr(0,o)+"."+t+e.substring(o)}(d,f+1),t.newFileName=o,t.fileNameSuffix=p(o),t.urlArray=h(a.ul,a.lnk,o,t.fileNameSuffix),t.vt=a.ul.ui[0].vt,s.push(t);return s}function p(e){var t=e.indexOf(".");return e.substr(t)}function h(e,t,o){for(var i=[],n={},r={},a=e.ui.length,s=0;s<a;s++)r={},(n=e.ui[s]).url&&(n.url&&-1===n.url.indexOf(t+".flv")&&-1===n.url.indexOf(t+".mp4")?r.url=n.url+o:r.url=n.url,n.vt&&(r.vt=parseInt(n.vt)),-1===r.url.indexOf("sdtfrom")&&(-1<r.url.indexOf("?")?r.url+="&sdtfrom="+c.dataset.sdtfrom:r.url+="?sdtfrom="+c.dataset.sdtfrom,r.url+="&guid="+c.dataset.guid),i.push(r));return i}}}},436:function(e,t,o){var d=o(47),i=(o(440),o(442)),n=o(443);function s(e){return"vod"===e.videoType?d.os.mac?d.browser.safari&&(d.compareVersion(d.browser.safari.version,"9.0")<0||d.compareVersion(d.os.version,"10.10")<0)&&d.isFlashFit()||d.browser.firefox&&d.compareVersion(d.browser.firefox.version,"48.0")<0?"flash":d.browser.macqqlive?"safarihls":(d.isSupportMP4(),"html5hd"):d.os.windows?function(){if(d.os.windows&&d.browser.pcqqlive&&50171110<=d.browser.pcqqlive.version)return!0;if(d.browser.firefox&&0<=d.compareVersion(d.browser.firefox.version,"48.0"))return!0;if(d.browser.opera&&0<=d.compareVersion(d.browser.opera.version,"40.0"))return!0;if(d.browser.chrome&&0<=d.compareVersion(d.browser.chrome.version,"39.0"))return!0;return!!d.isIE10}()&&d.isSupportMP4()?"html5hd":"flash":d.os.linux?"html5hd":d.os.ios?d.os.ipad&&"view.inews.qq.com"!==location.hostname?"ipadh5":"h5":d.os.android?d.isSupportMP4()?"h5":"mp4link":d.os.nintendo?"nintendo":"html5hd":void 0}function c(t){var e=d.getData(i.localStorageKey.userSetting),o={};if(e){try{window.JSON&&"function"==typeof JSON.parse?o=JSON.parse(e):"function"==typeof Txplayer.$.parseJSON&&(o=Txplayer.$.parseJSON(e))}catch(e){t.msg.broadcast("reportError",{msg:e.message,code:Txplayer.define.reportCode.JS_ERROR,stack:e.stack})}return o&&o.isUseFlash+""=="0"?"html5hd":""}}e.exports={insertEmptyVideo:function(e){function t(e){var t,o,i;e&&(o=(t=e.split("="))[0],void 0===(i=t[1])&&(i=!0),"string"==typeof i&&(i=i.replace(/"/g,"")),n.setAttribute(o,i))}var n=document.createElement("video");n.setAttribute("data-role","txp_video_tag");try{return function(e){var t={isUsePlayinline:['playsinline="isiPhoneShowPlaysinline" x5-video-player-type="h5-page" t7-video-player-type="inline" '],isUseWebkitPlayinline:['webkit-playsinline="isiPhoneShowPlaysinline"'],isUseAirplay:"x-webkit-airplay",isUseControl:'controls="controls"',isUsePreload:['preload="auto"','preload="none"'],isUseCrossOrigin:'crossOrigin="anonymous"',muted:"muted",isUseIgnore:'x5-video-ignore-metadata="true"'},o=[];for(var i in t)Txplayer.$.isArray(t[i])?!0===e[i]?o.push(t[i][0]):o.push(t[i][1]):!0===e[i]&&o.push(t[i]);return o}(e).forEach(function(e){e.indexOf(!0)?e.split(" ").forEach(t):t(e)}),n.style.display="none",document.body.appendChild(n),n.play().catch(function(e){d.v4log("insertEmptyVideoCatch",e.message)}),n}catch(e){d.v4log("insertEmptyVideoErr",e.message)}},filterXSS:function(e){var t=["title","volume","duration","vid","containerId"];for(var o in e)-1<d.inArray(t,o)&&(e[o]=d.xss(e[o]));return e},find$:function(){var e="function"==typeof window.Zepto?window.Zepto:"function"==typeof window.jQuery?window.jQuery:"function"==typeof window.jq?window.jq:null;return e},choosePlugins:function(e,t,o){var i,n=!!e.playerType;if(!d.mobile&&!e.enForcePlayerType){var r=!1;try{r=parent.window._TxpIframeInQzoneIfrme}catch(e){}d.inNewIframe()&&r||!/_fp=f/.test(location.href)&&!d.os.linux&&"v.qq.com"==location.hostname&&(/v.qq.com\/x\/cover|page\//.test(location.href)||/v.qq.com(\/*\w*)\/p\/topic\//.test(location.href))||(i=c(o))}if(/_fp=f/.test(location.href))try{window.history.pushState({title:document.title},"",location.href.replace(/\??&?_fp=f/,""))}catch(e){}d.browser.ie&&("edge"===d.browser.ie.version||d.isIE10||(i="flash",o.dataset.disableShowHtml5Switch=1)),i?e.playerType=i:e.playerType||(e.playerType=s(e)),"html5hd"===e.playerType&&(d.isSupportChromeHls(o.dataset.platform)?e.playerType="chromehls":d.isSupportSafariHls(o.dataset.platform)?e.playerType="safarihls":d.isSupportMP4()||(e.playerType="flash",o.dataset.disableShowHtml5Switch=1)),"0"!==d.getUrlParam("forcestream")||"chromehls"!==e.playerType&&"safarihls"!==e.playerType||(e.playerType="html5hd"),!n&&!i&&"html5hd"==e.playerType&&d.os.mac&&d.browser.qqbrowser&&(e.playerType="flash"),function(e){var t=navigator.userAgent,o=-1!==location.host.indexOf("m.v.qq.com");if(/COVC/i.test(t)&&o)return 1;var i=t.indexOf("MQQBrowser"),n=t.indexOf("Mobile Safari");if(!(i&&n&&n<i||t.indexOf("Chrome/66.0.3359.126")<0)){var r="h5"==e.playerType&&d.os.android,a=("h5tiny"==e.playerType||"h5"==e.playerType)&&d.os.ios,s=d.os.version&&0<d.compareVersion(d.os.version,"7"),c=d.browser.mqqbrowser&&d.browser.mqqbrowser.version&&0<=d.compareVersion(d.browser.mqqbrowser.version,"7.3");return!!((r||a&&s)&&c&&o&&!e.enableHevc&&d.browser.chrome)}}(e)&&(e.playerType="h5qq"),!d.mobile||"flash"!==e.playerType&&"html5hd"!==e.playerType&&"chromehls"!==e.playerType&&"safarihls"!==e.playerType||(e.playerType="h5"),"chromehls"!==e.playerType&&"safarihls"!==e.playerType||(o.dataset.useHls=!0);var a=t[e.playerType];return e.extendPluginsMap&&e.extendPluginsMap[e.videoType]&&e.extendPluginsMap[e.videoType][e.playerType]&&(a=a.concat(e.extendPluginsMap[e.videoType][e.playerType])),e.official?d.isIE10&&e.removePluginsList.push("UiOnlyWatch"):e.removePluginsList.push("UiFavorite","UiOmSubscribe","UiLanguage","UiSettings","UiBrowserFullScreen","UiOnlyWatch","EndRecommend","UiNormalPoint","UiBuyPlayPoint"),"nintendo"===e.playerType&&e.removePluginsList.push("UiPlayNext","UiBrowserFullScreen","UiWindowFullScreen","UiSpeed"),a=d.filterByArray(a,e.removePluginsList),"mp4link"!==e.playerType&&"flash"!==e.playerType&&"v4"!=e.version&&Array.prototype.indexOf&&-1===a.indexOf("H5PlayerAd")&&a.push("H5PlayerAd"),"3.5.57"===o.dataset.testVer||d.inWhichDomain("sportscom")?a.forEach(function(e,t){if(/hlshelper/i.test(e))return a[t]="HlsHelperP2PEncrypt",!(o.dataset.useP2P=!0)}):o.dataset.testVer===d.getUrlParam("debugusep2p")?a.forEach(function(e,t){if(/hlshelper/i.test(e))return a[t]="HlsHelperP2PDebug",!(o.dataset.useP2P=!0)}):"3.6.3"===o.dataset.testVer&&a.forEach(function(e,t){if(/hlshelper/i.test(e))return a[t]="HlsHelperP2PAdaptive",!(o.dataset.useP2P=!0)}),a},installPlugins:n.installPlugins,comboService:n.comboService,getPlayerId:function(e){return e.pid||d.createGUID()},getUserId:function(e){var t=e.guid||d.getData(i.localStorageKey.userId);return e.guid||!d.browser.pcqqlive&&!d.browser.macqqlive||(t=(t=d.getPcClientGuid())||d.getData(i.localStorageKey.userId)),t||(t=d.createGUID(),d.setData(i.localStorageKey.userId,t)),t},getUserIdForMacClientAsync:function(t){d.browser.macqqlive&&d.preGetMacClientInfo(function(e){t&&t(e)})},getUnid:function(){return d.getData(i.localStorageKey.unid)},useV4P2P:function(e){return"0"!==d.getUrlParam("debugp2p")&&(("1"===d.getUrlParam("debugp2p")||!d.inNewIframe()&&("v.qq.com"===location.hostname||"film.qq.com"===location.hostname))&&d.isSupportChromeHls({official:!0}))},useV4P2PAdaptive:function(e){return-1<d.inArray(["3q0jq9kvr9wvk2x","639agzdh10yu2q2","29ydp7xrml13rxk","gakoshshys2i1c0","70d6i1b6s0rtwpy","lcpwn26degwm7t3","0hrejqzlvdyr03k","i8wue9gam2mewxf","zmtpenihq5z8m75","ym3zk2afta7lkuw","0qd517viyiujrr4","i200hs4ip5a6u7a","aeuz5ypnru0wxqq","wqoslotdl4dhza6","5sxw7i4occhtkt8","ha7r9z89i9d234y","033i818h6hqga2i","zgz8djmyrquyfh3","70d6i1b6s0rtwpy","9z88hz9qwugb8p1","ceusrubximxm0g8","yoz60y87rdgl1vp","e7hi6lep1yc51ca","3q0jq9kvr9wvk2x","jvhuaf93hh858fs","t3qd0fliz287tr7","1wbx6hb4d3icse8","0rok1fggj7zwsez","gqvzz2ezmquha4p","6ql0vqq1huc2kdb","rpup19lfbuf2skc"],e.cid)},getVideoType:function(){var e="";return"v.qq.com"==location.host&&(window.COVER_INFO&&window.COVER_INFO.typeid?e=+window.COVER_INFO.typeid:window.VIDEO_INFO&&window.VIDEO_INFO.type&&(e=+window.VIDEO_INFO.type)),e}}},437:function(e,t){e.exports=function(e){e=(e=e||navigator.userAgent).toLowerCase(),this.browser={},this.os={},this.phone={},this.mobile=!1,-1<e.indexOf("mobile")&&(this.mobile=!0);var t,o,i={android_1:/android[\s\/]([\d\.]+)/i,android_2:/android/i,android_3:/MIDP-/i,ipod_1:/iPod\stouch;\sCPU\siPhone\sos\s([\d_]+)/i,ipod_100:/iPod.*os\s?([\d_\.]+)/i,iphone:/iPhone;\sCPU\siPhone\sos\s([\d_]+)/i,iphone_100:/iPhone.*os\s?([\d_\.]+)/i,ipad_1:/ipad;\scpu\sos\s([\d_]+)/i,ipad_2:/ipad([\d]+)?/i,windows:/windows\snt\s([\d\.]+)/i,mac:/Macintosh.*mac\sos\sx\s([\d_\.]+)/i,linux:/Linux/i,nintendo:/Nintendo Switch/i};for(var n in i)if(t=i[n].exec(e)){o=n.replace(/_\d+/,""),this.os[o]=!0,this.os.name=o,t[1]&&(this.os.version=t[1].replace(/_/g,"."));break}(this.os.iphone||this.os.ipad||this.os.ipod)&&(this.os.ios=!0);var r,a,s,c={weishi:/WEISHI_([\d\.]+)/i,toutiao:/TTWebView\/([\d\.]+)/i,wechat:/MicroMessenger\/([\d\.]+)/i,ipadqq:/IPadQQ\/([\d\.]+)/i,mqq:/qq\/([\d\.]+)/i,qzone:/QZONEJSSDK\/([\d\.]+)/i,mqqbrowser:/mqqbrowser\/([\d\.]+)/i,qqbrowser:/[^m]QQBrowser\/([\d\.]+)/i,x5:/tbs\/(\d+)/i,uc:/UCBrowser\/([\d\.]+)/i,safari_1:/Version\/(([\d\.]+))\sSafari\/[\d\.]+/i,safari_2:/Safari\/([\d\.]+)/i,firefox:/Firefox\/([\d\.]+)/i,opera:/OPR\/([\d\.]+)/i,ie_1:/MSIE\s([\d\.]+)/i,ie_2:/(trident\/\d\.\d)/i,ie_3:/(Edge)\/\d+\.\d+/i,weibo:/weibo__([\d\.]+)/i,qqnewsAd:/TADChid\/([\d\.]+)/i,qqnews:/qqnews\/([\d\.]+)/i,qqlive_1:/QQLiveBrowser\/([\d\.]+)/i,qqlive_2:/QQLiveHDBrowser\/([\d\.]+)/i,kuaibao:/qnreading\/([\d\.]+)/i,liebao:/LieBaoFast\/([\d\.]+)/i,douban:/com\.douban\.frodo\/([\d\.]+)/i,miuibrowser:/MiuiBrowser/i,baidu:/baiduboxapp/i,browser360:/360browser/i,oppobrowser:/OppoBrowser/i,chrome_1:/CriOS\/([\d\.]+)/i,chrome_2:/Chrome\/([\d\.]+)/i,qqdownloader:/qqdownloader\/([\d\.]+)/i,nintendo:/NintendoBrowser\/([\d\.]+)/i,tesla:/tesla/i};for(var d in c)if(r=c[d].exec(e)){if(a=d.replace(/_\d+/,""),this.browser[a])return;this.browser[a]={version:r[1]}}/windows/i.test(e)&&/qqlive/i.test(e)&&window.external&&window.external.GetProtocalVersion&&"function"==typeof window.external.GetProtocalVersion&&(s=window.external.GetProtocalVersion(),this.browser.pcqqlive={version:s}),/mac\sos/i.test(e)&&/qqlive_mac/i.test(e)&&(this.browser.macqqlive={}),this.os.android&&this.browser.safari&&delete this.browser.safari,this.browser.chrome&&this.browser.safari&&delete this.browser.safari,this.browser.ie&&this.browser.ie.version&&-1<this.browser.ie.version.indexOf("trident")&&(-1<this.browser.ie.version.indexOf("6.0")?this.browser.ie.version="10":-1<this.browser.ie.version.indexOf("5.0")?this.browser.ie.version="9":-1<this.browser.ie.version.indexOf("4.0")?this.browser.ie.version="8":this.browser.ie.version="11");var l,u={ipod:/iPod/i,ipad:/iPad/i,iphone:/iPhone/i,huawei_1:/HUAWEI([\w_-]+)/i,huawei_2:/(CHM-\w+)/i,huawei_3:/(HonorChe)/i,huawei_4:/HONORPLK/i,huawei_5:/(Che\d+-CL\d+)/i,huawei_6:/(H\d+-L\d+)/i,huawei_100:/HUAWEI/i,xiaomi_1:/(HM\sNOTE)/i,xiaomi_2:/(HM\s\w+)/i,xiaomi_3:/(MI\s\w+)/i,xiaomi_4:/(MI-ONE\sPlus)/i,xiaomi_5:/(M1)\sBuild/i,xiaomi_6:/(HM\d+)/i,xiaomi_7:/Xiaomi[\s_]?([\w_]+)/i,samsung_1:/(GT-\w+)/i,samsung_2:/(SCH-\w+)/i,samsung_3:/(SM-\w+)/i,vivo:/vivo\s(\w+)/i,oneplus:/ONEPLUS-([a-z0-9]+)/i,lenovo_1:/Lenovo[\s-]?([\w-]+)/i,lenovo_100:/Lenovo/i,zte_1:/ZTE\s?(\w+)?/i,zte_2:/ZTE/i,coolpad_1:/Coolpad\s(\w+)/i,coolpad_100:/Coolpad/i,oppo_1:/OPPO\s?(\w+)/i,oppo_2:/(R7Plus|R8007|R801|R831S|R8205)/i,oppo_100:/OPPO/i,meizu_1:/(MX\d+)/i,meizu_2:/(m\d+\snote)\sBuild/i,htc_1:/HTC\s?(\w+)/i,htc_100:/HTC/i,tcl:/TCL\s(\w+)/i,lephone:/lephone\s(\w+)/i,lg:/LG[\s-]?(\w+)/i,galaxy:/(galaxy\d+)/,hisense_1:/Hisense/i,hisense_2:/HS-(\w+)/i,philips:/Philips\s?(\w+)?/i,"\u91d1\u7acb":/(GN\w+)\sBuild/i,sonny:/sonny/i,"\u5929\u8bed":/K-Touch/i};for(var f in u)if(l=u[f].exec(e)){this.phone.name=f.replace(/_\d+/,""),l[1]&&(this.phone.version=l[1].replace(/^[_-]/gi,""));break}this.browser&&this.browser.mqq&&(this.os.ios||this.os.android)&&(this.mobile=!0)}},438:function(e,t){var o,i=[],n=!1;function r(e){if(!Txplayer.dataset.ready)return n||(n=!0,Txplayer.msg&&Txplayer.msg.on("ready",function(){!function(){if(!Txplayer.dataset.ready)return;a()}()})),void i.push(e);o?i.push(e):(o=setTimeout(function(){a()},1e3),Txplayer.util.mobile||Txplayer.imgRpt?Txplayer.util.requestViaImage(e):Txplayer.util.fetch({url:e,credentials:"include"}).catch(function(){a()}),function(e){if(e&&Txplayer.util&&Txplayer.util.getParams&&Txplayer.dataset.showreport&&window.console&&"function"==typeof window.console.table){var t=[],o=Txplayer.util.getParams(e);for(var i in o)t.push({key:i,value:decodeURIComponent(o[i])});o&&o.BossId?window.console.log("%c"+[o.BossId,o.step].join(" -- "),"color: green;"):window.console.log(e),window.console.table(t)}}(e))}function a(){0!==i.length?(clearTimeout(o),o=null,r(i.shift())):o=null}e.exports=r},439:function(e,t){e.exports={MOVIE:1,TV:2,CARTOON:3,SPORT:4,ENT:5,GAME:6,RECORD:9,VARIETY:10,WORLD_CUP:21,MUSIC:22,NEWS:23,FINANCE:24,FASHION:25,TRAVEL:26,EDUCATION:27,TECH:28,CAR:29,ESTATE:30,LIFE:31,MICROTEACHING:37,AD:40,SELFIE:41,FUNNY:43,CONF_AND_BUD:45,MICROMOVIE:46,COOPERATION:50,CULTURE:51,YOUTH:52,MOTHER_AND_BABY:60,ORIGINAL:103,SHOOTER:105,CHILDREN:106}},440:function(e,t,o){var i,n,r,a,s,c,d=o(47),l=o(441),u={version:"v4",autoplay:!1,autoPlayInMute:!0,browserDisableAutoPlay:!1,usePreviewDomain:!1,enableStopButton:!1,playerType:"",enForcePlayerType:!1,videoType:"vod",vid:"",cid:"",columnId:"",containerId:"",channelId:"",width:"0",height:"0",showPoster:!0,isUsePlayinline:!0,isUseWebkitPlayinline:!0,isUseAirplay:!0,isUseCrossOrigin:!1,loadPluginCrossOrigin:!1,isUsePreload:!d.mobile,isUseControl:!1,isUseHtml5UI:!0,hideControlUI:!1,isShowDurationLimit:!0,isHtml5UseFakeFullScreen:!0,isContinuePlay:!1,pauseBanner:!1,downloadBanner:!1,recommendBanner:!1,followBanner:!1,extendPluginsMap:{vod:{chromehls:"v.qq.com"===location.hostname?["Barrage"]:[],safarihls:"v.qq.com"===location.hostname?["Barrage"]:[]}},muted:!1,volume:50,disableCacheVolume:!1,loop:!1,settings:{HtmlFrame:{subPlugins:d.isIE10?["IEPolyfill"]:[]},TouchControlPanel:{subPlugins:["TouchProgress","v4UiControlPlay","TouchPlayNext","TouchSelectVidsBtn","UiShowTime","TouchDefinition","TouchSpeed"]},TouchPlayer:{subPlugins:["TouchShadow"]},UiControl:{subPlugins:d.mobile?["UiProgress","UiControlPlay","UiPlayNext","UiShowTime","UiWindowFullScreen","UiLogo"]:["UiProgress","UiNormalPoint","UiControlPlay","UiPlayNext","UiLoopPlay","UiShowTime","UiDuration","UiBarrageBtn","UiOnlyWatch","UiSubtitleBtn","EndRecommend","UiDefinition","UiSpeed","UiLanguage","UiVolume","UiPreview","UiPreviewList","UiPreviewAd","UiSettings","UiBrowserFullScreen","UiWindowFullScreen","UiLogo","UiBuyPlayPoint"]},H5UiControl:{subPlugins:(c=["UiControlPlay","UiShowTime","H5UIProgress","H5HdBanner","H5Defn","H5UiFullScreen"],d.os.ios&&c.unshift("H5PlaybackRate"),c)},UiSettings:{},HdPlayer:{subPlugins:["UiShadow"]},v4HdPlayer:{subPlugins:["UiShadow"]},H5Player:{subPlugins:["UiShadow"]},HlsPlayer:{subPlugins:["UiShadow"]},v4HlsPlayer:{subPlugins:["UiShadow"]},H5PlayerAd:{url:d.getUrlParam("debugcreative")?"//ca.gtimg.com/adplugin/js/adplayer.js":""},TxpCreativePlayer:{url:(s=d.getUrlParam("debugcreative"))?"//vm.gtimg.cn/tencentvideo/txpv5/creative/plugins/txp-creative-player."+s+"js":""}},removePluginsList:[],isNeedPay:!1,playStartTime:0,skipPrelude:!0,useConnectionPlay:!1,connectionPlayTime:0,hideControlOnPlaying:!0,otherVideoLink:"http://v.qq.com/",useComboService:!0,showLogo:"v.qq.com"!==location.hostname,hideLoadingSlogan:!1,hideDefnVipLogo:!1,hideDefaultWatermark:!1,hideCopyUrl:!1,logoActionToVindex:!1,showTitle:!1,showToggleSideBar:!1,show1080p:!!d.isVqqOrFilmqq(),globalRetryTimes:4,keyRetryTimes:3,nextVid:!1,flashWmode:"opaque",flashvar:{},flashplayerUrl:"",showBrowserFullScreen:top===window&&"v.qq.com"==location.hostname,showSettings:!0,showShare:!0,showCloseLight:!1,showLoopPlay:!1,showSmallWindowButton:!1,showBullet:!1,bulletId:"",showImageBullet:!1,showBulletInput:!0,showFlashBulletInput:!1,openBulletDefault:!0,showRecommendOnEnd:!0,useFlashVIPLayer:-1,flashCallFn:function(){},showOpenVIPGuide:d.mobile?function(){}:"",chid:"",authfrom:"",authext:"",adPage:"",adauthext:"",createPlayerAfterCssLoaded:!1,showHTML5Switch:(r=1,"1"!=(a=d.getUrlParam("debug"))&&"true"!=a||(r=1),r="v.qq.com"==location.hostname?r:0,d.os.mac&&(r=1),r),businessId:0,platId:"",getHistoryReportParam:function(){return!1},getOuterReportData:function(){return this.outerReportData},outerReportData:"",clientReportInfo:{},reportRecomm:!0,official:(i=!1,n=d.getUrlParam("official"),/^http(s?):\/\/v.qq.com\/x\/(cover|page)\//.test(location.href)&&(i=!0),n&&(i="1"==n||"true"==n),i),useMiniSkin:!1,miniSkinAdaptive:!0};l[location.hostname]&&d.extend(u,l[location.hostname]),e.exports=u},441:function(e,t){e.exports={"www.beijing2022.cn":{showLogo:!1,hideLoadingSlogan:!0,hideDefnVipLogo:!0,hideDefaultWatermark:!0,hideCopyUrl:!0,show1080p:!0,official:!1,platId:"beijing2022"}}},442:function(e,t,o){var i=o(47),n="//vm.gtimg.cn/tencentvideo/txp/style/txp_desktop.css",r={cssLoadErrorEvent:"cssLoadError",clickErrorReselect:"clickErrorReselect",clickErrorGoback:"clickErrorGoback",clickSelectVidsBtn:"clickSelectVidsBtn",videoTitleClassName:"txp_touch_video_title",followStatusChange:"followStatusChange",touchHideClass:"txp_touch_hide",maxId:0,deferGetPlayerScript:{},hideClass:"txp_none",showClass:"txp_show",btnHoverClass:"txp_hover",currentClass:"txp_current",jsBasePath:"//vm.gtimg.cn/tencentvideo/txp/js/",coreVersion:"v5",flashVersion:"0.0.0",flashLiveSwf:"//vm.gtimg.cn/minivideo_v1/vd/res/TencentPlayerLive.swf?max_age=86400",flashVodSwf:"v.qq.com"!==location.hostname||/^v\.qq\.com\/iframe\/txp\/player\.html/.test(location.href.replace(location.protocol+"//",""))?"//imgcache.qq.com/tencentvideo_v1/playerv3/TPout.swf?max_age=86400":"//imgcache.qq.com/tencentvideo_v1/playerv3/TencentPlayer.swf?max_age=86400",_instance:{},documentWebSite:"http://tvp.oa.com/",jsApiReady:"TxPlayerJSBrageReady",tabindex:1,H5PlayerStyleUrl:{html5hd:n,nintendo:n,touch:"//vm.gtimg.cn/tencentvideo/txp/style/txp-touch.css",chromehls:n,safarihls:n,ipadh5:"//vm.gtimg.cn/tencentvideo/txp/style/txp_pad.css",h5:"//vm.gtimg.cn/c/=/tencentvideo/txp/style/txp_mobile.css,txp_appbar.css",news:"//vm.gtimg.cn/c/=/tencentvideo/txp/style/txp_mobile.css,txp_appbar_simple.css",h5qq:"//vm.gtimg.cn/c/=/tencentvideo/txp/style/txp_mobile.css,txp_appbar.css",h5tiny:"//vm.gtimg.cn/c/=/tencentvideo/txp/style/txp_mobile.css,txp_appbar.css"},comboServiceRule:"//vm.gtimg.cn/c/=",clickEventName:"click",loadScriptDefer:{},switchDefinitionTimeout:0,logData:[],showreport:"1"===i.getUrlParam("_showreport_"),ready:!1,loadFlow:[],isReadyPlugins:[],lastFullScreenId:"",localStorageKey:{userId:"txp-userid",userSetting:"txp-user-setting",playTime:"txp-playtime",adRfid:"txp-ad-rfid",historyPlayTime:"txp-history-playtime",historyDefinition:"txp-history-definition",volumeHistory:"txp-history-volume",adMuteHistory:"txp-ad-history-mute",userPlayedTime:"txp-user-playedtime",loopPlaySetting:"txp-loop-play-setting",onlyWatch:"txp-only-watch",unid:"txp-unid",retryTimes:"txp-retrytimes",bufferTimes:"txp-buffertimes",openClientBubble:"txp-client-bubble"},sessionStorageKey:{languageSwitch:"txp-language-switch"}};e.exports=r},443:function(e,t,o){var w=o(47),x=o(444);function T(e,t,o,i,n,r){w.loadPlugins.call(e,t,o,i.settings,function(){o.dataset.isReady=!0,o.dataset.playerCreateEndTime=+new Date,"flash"!==i.playerType&&(e.userMsg.broadcast("ready"),n.broadcast("ready"),Txplayer.dataset.ready?setTimeout(function(){e.userMsg.broadcast("playerInit")},100):(Txplayer.dataset.ready=!0,Txplayer.msg.broadcast("ready"),e.userMsg.broadcast("playerInit")))})}var b=!1;e.exports={comboService:function(o,i,n,r,a,s){var e,t=[],c=[],d=[],l=0,u="/tencentvideo/txp/js/plugins/",f=!1,p=!1,h="/tencentvideo/txp/js/jquery.min.js";function m(e){c.push(e)}function y(e){g&&-1<w.inArray(r.removePluginsList,e)||-1<w.inArray(r.removePluginsList,e.substr(2))||t.push(e)}w.mobile&&(h="/tencentvideo/txp/js/zepto.min.js");for(var g=w.isArray(r.removePluginsList),l=0,v=i.length;l<v;l++)!function e(t){if("string"==typeof t&&(r.settings[t]&&(!r.settings.hasOwnProperty(t)||r.settings[t].url)||y(t),r.settings[t]&&w.isArray(r.settings[t].subPlugins)))for(var o=0,i=r.settings[t].subPlugins.length;o<i;o++)e(r.settings[t].subPlugins[o])}(i[l]);for(l=0,v=t.length;l<v;l++)"TxpCreativePlayer"!=t[l]?(w.mobile||"v4"!=n.config.version||-1!=w.inArray(["UiControlPlay","UiVolume","UiDefinition"],t[l])&&(t[l]="v4"+t[l]),Txplayer.plugins[t[l]]||(e=t[l].toLowerCase()+".js",Txplayer.hashMaps&&Txplayer.hashMaps[e]&&Txplayer.hashMaps[e].replace?m(Txplayer.hashMaps[e]):m(e))):p=!0;for(;0<c.length;)s||b?!f&&p?(f=!0,d.push(Txplayer.dataset.comboServiceRule+["/tencentvideo/txpv5/creative/plugins/txp-creative-player."+Txplayer.appVersion+".js",u+c.splice(0,19).join(",")].join(","))):d.push(Txplayer.dataset.comboServiceRule+u+c.splice(0,20).join(",")):(b=!0,d.push(Txplayer.dataset.comboServiceRule+[h,u+c.splice(0,19).join(",")].join(",")));!function e(){if(0!==d.length){var t=d.shift();t+="?max_age=604800&_ts="+Txplayer.dataset.ts,w.loadScript({url:t,crossorigin:!!r.loadPluginCrossOrigin,onsuccess:function(){s||(s="function"==typeof window.Zepto?window.Zepto:"function"==typeof window.jQuery?window.jQuery:"function"==typeof window.jq?window.jq:null)&&(Txplayer.$=s,Txplayer.$.tmpl=x),e()}})}else{if(!r.vid)return;T(o,i,n,r,a)}}()},installPlugins:T}},444:function(e,t){var o,r,i=(o={},r="$"+ +new Date,function(e,t){var n=/\s/.test(e)?function(e){var t,o=[r],i=[[]];for(t in e)o.push(t),i.push(e[t]);return new Function(o,n.$).apply(e,i).join("")}:o[e]=o[e]||i(document.getElementById(e).innerHTML);return n.$=n.$||r+".push('"+e.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join(r+".push('").split("\r").join("\\'")+"');return "+r,t?n(t):n});e.exports=function(e,t){return t&&!t.svgPrefix&&(t.svgPrefix=window.Txplayer&&window.Txplayer.dataset&&window.Txplayer.dataset.svgPrefix||""),i(e,t)}},445:function(Ke,e,t){(function(e){function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var t,h=void 0!==Txplayer.ckeyModule?Txplayer.ckeyModule:{},o={};for(t in h)h.hasOwnProperty(t)&&(o[t]=h[t]);h.arguments=[],h.thisProgram="./this.program",h.quit=function(e,t){throw t},h.preRun=[];var p=!(h.postRun=[]),m=!1,p="object"===("undefined"==typeof window?"undefined":f(window)),m="function"==typeof importScripts;void 0===e||f(e);if(h.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var i="";function n(e){return h.locateFile?h.locateFile(e,i):i+e}if(!p&&!m)throw new Error("environment detection error");h.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(h.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),h.readAsync=function(e,t,o){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status||0==i.status&&i.response?t(i.response):o()},i.onerror=o,i.send(null)},h.setWindowTitle=function(e){document.title=e};var r=h.print||("undefined"!=typeof console?void 0:"undefined"!=typeof print?print:null),y=h.printErr||("undefined"!=typeof printErr?printErr:r);for(t in o)o.hasOwnProperty(t)&&(h[t]=o[t]);w((o=void 0)===h.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),w(void 0===h.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),w(void 0===h.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),w(void 0===h.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead");var a=16;function s(e){w(!U);var t=D;return w((D=D+e+15&-16)<Q,"not enough memory for static allocation - increase TOTAL_MEMORY"),t}function c(e,t){return t=t||a,e=Math.ceil(e/t)*t}function d(e){d.shown||(d.shown={}),d.shown[e]||(d.shown[e]=1,y(e))}je=He=Fe=Le=function(){Ge("cannot use the stack before compiled code is ready to run, and has provided stack access")};var g={"f64-rem":function(e,t){return e%t},debugger:function(){}};new Array(0);var v=!1;function w(e,t){e||Ge("Assertion failed: "+t)}var l={stackSave:function(){je()},stackRestore:function(){He()},arrayToC:function(e){var t,o,i=Fe(e.length);return o=i,w(0<=(t=e).length,"writeArrayToMemory array must have a length (should be an array or typed array)"),R.set(t,o),i},stringToC:function(e){var t,o=0;return null!=e&&0!==e&&(t=1+(e.length<<2),S(e,o=Fe(t),t)),o}},x={string:l.stringToC,array:l.arrayToC};function u(e,t,o,i,n){var r,a,s=(w(a=h["_"+(r=e)],"Cannot call unknown function "+r+", make sure it is exported"),a),c=[],d=0;if(w("array"!==t,'Return type should not be "array".'),i)for(var l=0;l<i.length;l++){var u=x[o[l]];u?(0===d&&(d=je()),c[l]=u(i[l])):c[l]=i[l]}var f,p=s.apply(null,c);return f=p,p="string"===t?T(f):"boolean"===t?Boolean(f):f,0!==d&&He(d),p}function T(e,t){if(0===t||!e)return"";for(var o,i=0,n=0;w(e+n<Q),i|=o=C[e+n>>0],(0!=o||t)&&(n++,!t||n!=t););t=t||n;var r="";if(i<128){for(var a;0<t;)a=String.fromCharCode.apply(String,C.subarray(e,e+Math.min(t,1024))),r=r?r+a:a,e+=1024,t-=1024;return r}return _(C,e)}var b="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function _(e,t){for(var o=t;e[o];)++o;if(16<o-t&&e.subarray&&b)return b.decode(e.subarray(t,o));for(var i,n,r,a,s,c,d="";;){if(!(s=e[t++]))return d;128&s?(c=63&e[t++],192!=(224&s)?(a=63&e[t++],(s=224==(240&s)?(15&s)<<12|c<<6|a:(i=63&e[t++],240==(248&s)?(7&s)<<18|c<<12|a<<6|i:(n=63&e[t++],248==(252&s)?(3&s)<<24|c<<18|a<<12|i<<6|n:(1&s)<<30|c<<24|a<<18|i<<12|n<<6|63&e[t++])))<65536?d+=String.fromCharCode(s):(r=s-65536,d+=String.fromCharCode(55296|r>>10,56320|1023&r))):d+=String.fromCharCode((31&s)<<6|c)):d+=String.fromCharCode(s)}}function E(e,t,o,i){if(!(0<i))return 0;for(var n=o,r=o+i-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(55296<=s&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(r<=o)break;t[o++]=s}else if(s<=2047){if(r<=o+1)break;t[o++]=192|s>>6,t[o++]=128|63&s}else if(s<=65535){if(r<=o+2)break;t[o++]=224|s>>12,t[o++]=128|s>>6&63,t[o++]=128|63&s}else if(s<=2097151){if(r<=o+3)break;t[o++]=240|s>>18,t[o++]=128|s>>12&63,t[o++]=128|s>>6&63,t[o++]=128|63&s}else if(s<=67108863){if(r<=o+4)break;t[o++]=248|s>>24,t[o++]=128|s>>18&63,t[o++]=128|s>>12&63,t[o++]=128|s>>6&63,t[o++]=128|63&s}else{if(r<=o+5)break;t[o++]=252|s>>30,t[o++]=128|s>>24&63,t[o++]=128|s>>18&63,t[o++]=128|s>>12&63,t[o++]=128|s>>6&63,t[o++]=128|63&s}}return t[o]=0,o-n}function S(e,t,o){return w("number"==typeof o,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),E(e,C,t,o)}function q(e){for(var t=0,o=0;o<e.length;++o){var i=e.charCodeAt(o);55296<=i&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),i<=127?++t:t+=i<=2047?2:i<=65535?3:i<=2097151?4:i<=67108863?5:6}return t}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");function A(e){return e.replace(/__Z[\w\d_]+/g,function(e){var t,o=(t=e,d("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),t);return e===o?e:o+" ["+e+"]"})}function P(){var e=function(){var t=new Error;if(!t.stack){try{throw new Error(0)}catch(e){t=e}if(!t.stack)return"(no stack trace available)"}return t.stack.toString()}();return h.extraStackTrace&&(e+="\n"+h.extraStackTrace()),A(e)}var k,R,C,O,I,M,D,U,N,V,L,F,H,j=65536,B=16777216;function X(){h.HEAP8=R=new Int8Array(k),h.HEAP16=O=new Int16Array(k),h.HEAP32=I=new Int32Array(k),h.HEAPU8=C=new Uint8Array(k),h.HEAPU16=new Uint16Array(k),h.HEAPU32=M=new Uint32Array(k),h.HEAPF32=new Float32Array(k),h.HEAPF64=new Float64Array(k)}function $(){if(34821223==M[(L>>2)-1]&&2310721022==M[(L>>2)-2]||Ge("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x02135467, but received 0x"+M[(L>>2)-2].toString(16)+" "+M[(L>>2)-1].toString(16)),1668509029!==I[0])throw"Runtime error: The application has corrupted its heap memory area (address zero)!"}function G(){Ge("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+Q+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function K(){G()}D=V=L=H=0,U=!1;var W=h.TOTAL_STACK||5242880,Q=h.TOTAL_MEMORY||16777216;if(Q<W&&y("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+Q+"! (TOTAL_STACK="+W+")"),w("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),h.buffer?w((k=h.buffer).byteLength===Q,"provided buffer should be "+Q+" bytes, but it is "+k.byteLength):(k="object"===("undefined"==typeof WebAssembly?"undefined":f(WebAssembly))&&"function"==typeof WebAssembly.Memory?(w(Q%j==0),h.wasmMemory=new WebAssembly.Memory({initial:Q/j,maximum:Q/j}),h.wasmMemory.buffer):new ArrayBuffer(Q),w(k.byteLength===Q),h.buffer=k),X(),I[0]=1668509029,O[1]=25459,115!==C[2]||99!==C[3])throw"Runtime error: expected the system to be little-endian!";function J(e){for(;0<e.length;){var t,o=e.shift();"function"!=typeof o?"number"==typeof(t=o.func)?void 0===o.arg?h.dynCall_v(t):h.dynCall_vi(t,o.arg):t(void 0===o.arg?null:o.arg):o()}}var z=[],Y=[],Z=[],ee=[],te=!1,oe=!1;function ie(){if(h.preRun)for("function"==typeof h.preRun&&(h.preRun=[h.preRun]);h.preRun.length;)e=h.preRun.shift(),z.unshift(e);var e;J(z)}function ne(){if($(),h.postRun)for("function"==typeof h.postRun&&(h.postRun=[h.postRun]);h.postRun.length;)e=h.postRun.shift(),ee.unshift(e);var e;J(ee)}w(Math.imul&&Math.fround&&Math.clz32&&Math.trunc,"this is a legacy browser, build with LEGACY_VM_SUPPORT");Math.abs,Math.cos,Math.sin,Math.tan,Math.acos,Math.asin,Math.atan,Math.atan2,Math.exp,Math.log,Math.sqrt,Math.ceil,Math.floor,Math.pow,Math.imul,Math.fround,Math.round,Math.min,Math.max,Math.clz32,Math.trunc;var re=0,ae=null,se=null,ce={};h.preloadedImages={},h.preloadedAudios={};var de={error:function(){Ge("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){de.error()},createDataFile:function(){de.error()},createPreloadedFile:function(){de.error()},createLazyFile:function(){de.error()},open:function(){de.error()},mkdev:function(){de.error()},registerDevice:function(){de.error()},analyzePath:function(){de.error()},loadFilesFromDB:function(){de.error()},ErrnoError:function(){de.error()}};h.FS_createDataFile=de.createDataFile,h.FS_createPreloadedFile=de.createPreloadedFile;var le="data:application/octet-stream;base64,";function ue(e){return String.prototype.startsWith?e.startsWith(le):0===e.indexOf(le)}!function(){var a="ckey.wasm";ue("ckey.wast")||n("ckey.wast"),ue(a)||(a=n(a)),ue("ckey.temp.asm.js")||n("ckey.temp.asm.js");var s,c={global:null,env:null,asm2wasm:g,parent:h};function d(e){var t=h.buffer;e.byteLength<t.byteLength&&y("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var o,i=new Int8Array(t);new Int8Array(e).set(i),o=e,h.buffer=k=o,X()}function l(){try{if(h.wasmBinary)return new Uint8Array(h.wasmBinary);if(h.readBinary)return h.readBinary(a);throw"both async and sync fetching of the wasm failed"}catch(e){Ge(e)}}function u(e,t){if("object"!==("undefined"==typeof WebAssembly?"undefined":f(WebAssembly)))return Ge("No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead."),y("no native wasm support detected"),!1;if(!(h.wasmMemory instanceof WebAssembly.Memory))return y("no native wasm Memory in use"),!1;function o(e,t){var o,i;(s=e.exports).memory&&d(s.memory),h.asm=s,h.usingWasm=!0,o="wasm-instantiate",re--,h.monitorRunDependencies&&h.monitorRunDependencies(re),o?(w(ce[o]),delete ce[o]):y("warning: run dependency removed without ID"),0==re&&(null!==ae&&(clearInterval(ae),ae=null),se&&(i=se,se=null,i()))}var i;if(t.memory=h.wasmMemory,c.global={NaN:NaN,Infinity:1/0},c["global.Math"]=Math,c.env=t,i="wasm-instantiate",re++,h.monitorRunDependencies&&h.monitorRunDependencies(re),i?(w(!ce[i]),ce[i]=1,null===ae&&"undefined"!=typeof setInterval&&(ae=setInterval(function(){if(v)return clearInterval(ae),void(ae=null);var e=!1;for(var t in ce)e||(e=!0,y("still waiting on run dependencies:")),y("dependency: "+t);e&&y("(end of list)")},1e4))):y("warning: run dependency added without ID"),h.instantiateWasm)try{return h.instantiateWasm(c,o)}catch(e){return y("Module.instantiateWasm callback failed with error: "+e),!1}var n,r=h;return n=function(e){w(h===r,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),r=null,o(e.instance,e.module)},(h.wasmBinary||!p&&!m||"function"!=typeof fetch?new Promise(function(e,t){e(l())}):fetch(a,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+a+"'";return e.arrayBuffer()}).catch(l)).then(function(e){return WebAssembly.instantiate(e,c)}).then(n,function(e){y("failed to asynchronously prepare wasm: "+e),Ge(e)}),{}}h.asmPreload=h.asm;var t=h.reallocBuffer;h.reallocBuffer=function(e){return("asmjs"===o?t:function(e){var t,o,i=h.usingWasm?j:B;0<(t=e)%(o=i)&&(t+=o-t%o),e=t;var n=h.buffer.byteLength;if(h.usingWasm)try{return-1!==h.wasmMemory.grow((e-n)/65536)?h.buffer=h.wasmMemory.buffer:null}catch(e){return null}})(e)};var o="";h.asm=function(e,t,o){var i,n,r;return t.table||(void 0===(i=h.wasmTableSize)&&(i=1024),n=h.wasmMaxTableSize,"object"===("undefined"==typeof WebAssembly?"undefined":f(WebAssembly))&&"function"==typeof WebAssembly.Table?t.table=void 0!==n?new WebAssembly.Table({initial:i,maximum:n,element:"anyfunc"}):new WebAssembly.Table({initial:i,element:"anyfunc"}):t.table=new Array(i),h.wasmTable=t.table),t.memoryBase||(t.memoryBase=h.STATIC_BASE),t.tableBase||(t.tableBase=0),w(r=u(0,t),"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: http://kripken.github.io/emscripten-site/docs/compiling/WebAssembly.html#binaryen-methods"),r},h.asm}();D=7952,Y.push();h.STATIC_BASE=1024,h.STATIC_BUMP=6928;var fe=D;D+=16,w(fe%8==0);var pe={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||pe.infos[e])return e;for(var t in pe.infos){var o=+t;if(pe.infos[o].adjusted===e)return o}return e},addRef:function(e){e&&pe.infos[e].refcount++},decRef:function(e){var t;e&&(w(0<(t=pe.infos[e]).refcount),t.refcount--,0!==t.refcount||t.rethrown||(t.destructor&&h.dynCall_vi(t.destructor,e),delete pe.infos[e],___cxa_free_exception(e)))},clearRef:function(e){e&&(pe.infos[e].refcount=0)}};function he(){var e=pe.last;if(!e)return 0|(Le(0),0);var t=pe.infos[e],o=t.type;if(!o)return 0|(Le(0),e);var i=Array.prototype.slice.call(arguments);h.___cxa_is_pointer_type(o);he.buffer||(he.buffer=Ve(4)),I[he.buffer>>2]=e,e=he.buffer;for(var n=0;n<i.length;n++)if(i[n]&&h.___cxa_can_catch(i[n],o,e))return e=I[e>>2],t.adjusted=e,0|(Le(i[n]),e);return e=I[e>>2],0|(Le(o),e)}var me={buffers:[null,[],[]],printChar:function(e,t){var o=me.buffers[e];w(o),0===t||10===t?((1===e?r:y)(_(o,0)),o.length=0):o.push(t)},varargs:0,get:function(){return me.varargs+=4,I[me.varargs-4>>2]},getStr:function(){return T(me.get())},get64:function(){var e=me.get(),t=me.get();return w(0<=e?0===t:-1===t),e},getZero:function(){w(0===me.get())}};function ye(){var e=h._fflush;e&&e(0);var t=me.buffers;t[1].length&&me.printChar(1,10),t[2].length&&me.printChar(2,10)}H=s(4),N=V=c(D),F=c(L=N+W),I[H>>2]=F,U=!0,w(F<Q,"TOTAL_MEMORY not big enough for stack");h.wasmTableSize=99,h.wasmMaxTableSize=99,h.asmGlobalArg={},h.asmLibraryArg={abort:Ge,assert:w,enlargeMemory:K,getTotalMemory:function(){return Q},abortOnCannotGrowMemory:G,abortStackOverflow:function(e){Ge("Stack overflow! Attempted to allocate "+e+" bytes on the stack, but stack has only "+(L-je()+e)+" bytes available!")},nullFunc_ii:function(e){y("Invalid function pointer called with signature 'ii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),y("Build with ASSERTIONS=2 for more info."),Ge(e)},nullFunc_iiii:function(e){y("Invalid function pointer called with signature 'iiii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),y("Build with ASSERTIONS=2 for more info."),Ge(e)},nullFunc_v:function(e){y("Invalid function pointer called with signature 'v'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),y("Build with ASSERTIONS=2 for more info."),Ge(e)},nullFunc_vi:function(e){y("Invalid function pointer called with signature 'vi'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),y("Build with ASSERTIONS=2 for more info."),Ge(e)},nullFunc_viiii:function(e){y("Invalid function pointer called with signature 'viiii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),y("Build with ASSERTIONS=2 for more info."),Ge(e)},nullFunc_viiiii:function(e){y("Invalid function pointer called with signature 'viiiii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),y("Build with ASSERTIONS=2 for more info."),Ge(e)},nullFunc_viiiiii:function(e){y("Invalid function pointer called with signature 'viiiiii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),y("Build with ASSERTIONS=2 for more info."),Ge(e)},invoke_ii:function(e,t){var o=je();try{return h.dynCall_ii(e,t)}catch(e){if(He(o),"number"!=typeof e&&"longjmp"!==e)throw e;h.setThrew(1,0)}},invoke_iiii:function(e,t,o,i){var n=je();try{return h.dynCall_iiii(e,t,o,i)}catch(e){if(He(n),"number"!=typeof e&&"longjmp"!==e)throw e;h.setThrew(1,0)}},invoke_v:function(e){var t=je();try{h.dynCall_v(e)}catch(e){if(He(t),"number"!=typeof e&&"longjmp"!==e)throw e;h.setThrew(1,0)}},invoke_vi:function(e,t){var o=je();try{h.dynCall_vi(e,t)}catch(e){if(He(o),"number"!=typeof e&&"longjmp"!==e)throw e;h.setThrew(1,0)}},invoke_viiii:function(e,t,o,i,n){var r=je();try{h.dynCall_viiii(e,t,o,i,n)}catch(e){if(He(r),"number"!=typeof e&&"longjmp"!==e)throw e;h.setThrew(1,0)}},invoke_viiiii:function(e,t,o,i,n,r){var a=je();try{h.dynCall_viiiii(e,t,o,i,n,r)}catch(e){if(He(a),"number"!=typeof e&&"longjmp"!==e)throw e;h.setThrew(1,0)}},invoke_viiiiii:function(e,t,o,i,n,r,a){var s=je();try{h.dynCall_viiiiii(e,t,o,i,n,r,a)}catch(e){if(He(s),"number"!=typeof e&&"longjmp"!==e)throw e;h.setThrew(1,0)}},__ZSt18uncaught_exceptionv:function e(){return!!e.uncaught_exception},___cxa_find_matching_catch:he,___gxx_personality_v0:function(){},___lock:function(){},___resumeException:function(e){throw pe.last||(pe.last=e),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."},___setErrNo:function(e){return h.___errno_location?I[h.___errno_location()>>2]=e:y("failed to set errno from JS"),e},___syscall140:function(e,t){me.varargs=t;try{var o=me.getStreamFromFD(),i=(me.get(),me.get()),n=me.get(),r=me.get(),a=i;return de.llseek(o,a,r),I[n>>2]=o.position,o.getdents&&0===a&&0===r&&(o.getdents=null),0}catch(e){return void 0!==de&&e instanceof de.ErrnoError||Ge(e),-e.errno}},___syscall146:function(e,t){me.varargs=t;try{for(var o=me.get(),i=me.get(),n=me.get(),r=0,a=0;a<n;a++){for(var s=I[i+8*a>>2],c=I[i+(8*a+4)>>2],d=0;d<c;d++)me.printChar(o,C[s+d]);r+=c}return r}catch(e){return void 0!==de&&e instanceof de.ErrnoError||Ge(e),-e.errno}},___syscall54:function(e,t){me.varargs=t;try{return 0}catch(e){return void 0!==de&&e instanceof de.ErrnoError||Ge(e),-e.errno}},___syscall6:function(e,t){me.varargs=t;try{var o=me.getStreamFromFD();return de.close(o),0}catch(e){return void 0!==de&&e instanceof de.ErrnoError||Ge(e),-e.errno}},___unlock:function(){},_abort:function(){h.abort()},_emscripten_memcpy_big:function(e,t,o){return C.set(C.subarray(t,t+o),e),e},_get_unicode_str:function(){function a(e){return e?48<e.length?e.substr(0,48):e:""}var e=function(){var e=document.URL,t=window.navigator.userAgent.toLowerCase(),o="";0<document.referrer.length&&(o=document.referrer);try{0==o.length&&0<opener.location.href.length&&(o=opener.location.href)}catch(e){}var i=window.navigator.appCodeName,n=window.navigator.appName,r=window.navigator.platform,e=a(e),o=a(o);return e+"|"+(t=a(t))+"|"+o+"|"+i+"|"+n+"|"+r}(),t=q(e)+1,o=Ve(t);return S(e,o,t+1),o},flush_NO_FILESYSTEM:ye,DYNAMICTOP_PTR:H,tempDoublePtr:fe,STACKTOP:V,STACK_MAX:L};var ge=h.asm(h.asmGlobalArg,h.asmLibraryArg,k),ve=ge.___cxa_can_catch;ge.___cxa_can_catch=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ve.apply(null,arguments)};var we=ge.___cxa_is_pointer_type;ge.___cxa_is_pointer_type=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),we.apply(null,arguments)};var xe=ge.___em_js__get_unicode_str;ge.___em_js__get_unicode_str=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),xe.apply(null,arguments)};var Te=ge.___errno_location;ge.___errno_location=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Te.apply(null,arguments)};var be=ge._ckeytest;ge._ckeytest=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),be.apply(null,arguments)};var _e=ge._fflush;ge._fflush=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),_e.apply(null,arguments)};var Ee=ge._free;ge._free=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ee.apply(null,arguments)};var Se=ge._getckey;ge._getckey=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Se.apply(null,arguments)};var qe=ge._llvm_bswap_i16;ge._llvm_bswap_i16=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),qe.apply(null,arguments)};var Ae=ge._llvm_bswap_i32;ge._llvm_bswap_i32=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ae.apply(null,arguments)};var Pe=ge._malloc;ge._malloc=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Pe.apply(null,arguments)};var ke=ge._memmove;ge._memmove=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ke.apply(null,arguments)};var Re=ge._sbrk;ge._sbrk=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Re.apply(null,arguments)};var Ce=ge.establishStackSpace;ge.establishStackSpace=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ce.apply(null,arguments)};var Oe=ge.getTempRet0;ge.getTempRet0=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Oe.apply(null,arguments)};var Ie=ge.setTempRet0;ge.setTempRet0=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ie.apply(null,arguments)};var Me=ge.setThrew;ge.setThrew=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Me.apply(null,arguments)};var De=ge.stackAlloc;ge.stackAlloc=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),De.apply(null,arguments)};var Ue=ge.stackRestore;ge.stackRestore=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ue.apply(null,arguments)};var Ne=ge.stackSave;ge.stackSave=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ne.apply(null,arguments)},h.asm=ge;h.___cxa_can_catch=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.___cxa_can_catch.apply(null,arguments)},h.___cxa_is_pointer_type=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.___cxa_is_pointer_type.apply(null,arguments)},h.___em_js__get_unicode_str=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.___em_js__get_unicode_str.apply(null,arguments)},h.___errno_location=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.___errno_location.apply(null,arguments)},h._ckeytest=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm._ckeytest.apply(null,arguments)},h._fflush=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm._fflush.apply(null,arguments)},h._free=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm._free.apply(null,arguments)},h._getckey=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm._getckey.apply(null,arguments)},h._llvm_bswap_i16=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm._llvm_bswap_i16.apply(null,arguments)},h._llvm_bswap_i32=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm._llvm_bswap_i32.apply(null,arguments)};var Ve=h._malloc=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm._malloc.apply(null,arguments)},Le=(h._memcpy=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm._memcpy.apply(null,arguments)},h._memmove=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm._memmove.apply(null,arguments)},h._memset=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm._memset.apply(null,arguments)},h._sbrk=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm._sbrk.apply(null,arguments)},h.establishStackSpace=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.establishStackSpace.apply(null,arguments)},h.getTempRet0=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.getTempRet0.apply(null,arguments)},h.runPostSets=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.runPostSets.apply(null,arguments)},h.setTempRet0=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.setTempRet0.apply(null,arguments)}),Fe=(h.setThrew=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.setThrew.apply(null,arguments)},h.stackAlloc=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.stackAlloc.apply(null,arguments)}),He=h.stackRestore=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.stackRestore.apply(null,arguments)},je=h.stackSave=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.stackSave.apply(null,arguments)};h.dynCall_ii=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.dynCall_ii.apply(null,arguments)},h.dynCall_iiii=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.dynCall_iiii.apply(null,arguments)},h.dynCall_v=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.dynCall_v.apply(null,arguments)},h.dynCall_vi=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.dynCall_vi.apply(null,arguments)},h.dynCall_viiii=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.dynCall_viiii.apply(null,arguments)},h.dynCall_viiiii=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.dynCall_viiiii.apply(null,arguments)},h.dynCall_viiiiii=function(){return w(te,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),w(!oe,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),h.asm.dynCall_viiiiii.apply(null,arguments)};function Be(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}h.asm=ge,h.intArrayFromString||(h.intArrayFromString=function(){Ge("'intArrayFromString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.intArrayToString||(h.intArrayToString=function(){Ge("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.ccall=u,h.cwrap=function(e,t,o,i){return function(){return u(e,t,o,arguments)}},h.setValue||(h.setValue=function(){Ge("'setValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.getValue||(h.getValue=function(){Ge("'getValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.allocate||(h.allocate=function(){Ge("'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.getMemory||(h.getMemory=function(){Ge("'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),h.Pointer_stringify||(h.Pointer_stringify=function(){Ge("'Pointer_stringify' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.AsciiToString||(h.AsciiToString=function(){Ge("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.stringToAscii||(h.stringToAscii=function(){Ge("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.UTF8ArrayToString||(h.UTF8ArrayToString=function(){Ge("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.UTF8ToString||(h.UTF8ToString=function(){Ge("'UTF8ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.stringToUTF8Array||(h.stringToUTF8Array=function(){Ge("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.stringToUTF8||(h.stringToUTF8=function(){Ge("'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.lengthBytesUTF8||(h.lengthBytesUTF8=function(){Ge("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.UTF16ToString||(h.UTF16ToString=function(){Ge("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.stringToUTF16||(h.stringToUTF16=function(){Ge("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.lengthBytesUTF16||(h.lengthBytesUTF16=function(){Ge("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.UTF32ToString||(h.UTF32ToString=function(){Ge("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.stringToUTF32||(h.stringToUTF32=function(){Ge("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.lengthBytesUTF32||(h.lengthBytesUTF32=function(){Ge("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.allocateUTF8||(h.allocateUTF8=function(){Ge("'allocateUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.stackTrace||(h.stackTrace=function(){Ge("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.addOnPreRun||(h.addOnPreRun=function(){Ge("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.addOnInit||(h.addOnInit=function(){Ge("'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.addOnPreMain||(h.addOnPreMain=function(){Ge("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.addOnExit||(h.addOnExit=function(){Ge("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.addOnPostRun||(h.addOnPostRun=function(){Ge("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.writeStringToMemory||(h.writeStringToMemory=function(){Ge("'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.writeArrayToMemory||(h.writeArrayToMemory=function(){Ge("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.writeAsciiToMemory||(h.writeAsciiToMemory=function(){Ge("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.addRunDependency||(h.addRunDependency=function(){Ge("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),h.removeRunDependency||(h.removeRunDependency=function(){Ge("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),h.ENV||(h.ENV=function(){Ge("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.FS||(h.FS=function(){Ge("'FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.FS_createFolder||(h.FS_createFolder=function(){Ge("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),h.FS_createPath||(h.FS_createPath=function(){Ge("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),h.FS_createDataFile||(h.FS_createDataFile=function(){Ge("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),h.FS_createPreloadedFile||(h.FS_createPreloadedFile=function(){Ge("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),h.FS_createLazyFile||(h.FS_createLazyFile=function(){Ge("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),h.FS_createLink||(h.FS_createLink=function(){Ge("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),h.FS_createDevice||(h.FS_createDevice=function(){Ge("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),h.FS_unlink||(h.FS_unlink=function(){Ge("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),h.GL||(h.GL=function(){Ge("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.staticAlloc||(h.staticAlloc=function(){Ge("'staticAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.dynamicAlloc||(h.dynamicAlloc=function(){Ge("'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.warnOnce||(h.warnOnce=function(){Ge("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.loadDynamicLibrary||(h.loadDynamicLibrary=function(){Ge("'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.loadWebAssemblyModule||(h.loadWebAssemblyModule=function(){Ge("'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.getLEB||(h.getLEB=function(){Ge("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.getFunctionTables||(h.getFunctionTables=function(){Ge("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.alignFunctionTables||(h.alignFunctionTables=function(){Ge("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.registerFunctions||(h.registerFunctions=function(){Ge("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.addFunction||(h.addFunction=function(){Ge("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.removeFunction||(h.removeFunction=function(){Ge("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.getFuncWrapper||(h.getFuncWrapper=function(){Ge("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.prettyPrint||(h.prettyPrint=function(){Ge("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.makeBigInt||(h.makeBigInt=function(){Ge("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.dynCall||(h.dynCall=function(){Ge("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.getCompilerSetting||(h.getCompilerSetting=function(){Ge("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.stackSave||(h.stackSave=function(){Ge("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.stackRestore||(h.stackRestore=function(){Ge("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.stackAlloc||(h.stackAlloc=function(){Ge("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.establishStackSpace||(h.establishStackSpace=function(){Ge("'establishStackSpace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.print||(h.print=function(){Ge("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.printErr||(h.printErr=function(){Ge("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),h.ALLOC_NORMAL||Object.defineProperty(h,"ALLOC_NORMAL",{get:function(){Ge("'ALLOC_NORMAL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),h.ALLOC_STACK||Object.defineProperty(h,"ALLOC_STACK",{get:function(){Ge("'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),h.ALLOC_STATIC||Object.defineProperty(h,"ALLOC_STATIC",{get:function(){Ge("'ALLOC_STATIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),h.ALLOC_DYNAMIC||Object.defineProperty(h,"ALLOC_DYNAMIC",{get:function(){Ge("'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),h.ALLOC_NONE||Object.defineProperty(h,"ALLOC_NONE",{get:function(){Ge("'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),(Be.prototype=new Error).constructor=Be;function Xe(e){function t(){h.calledRun||(h.calledRun=!0,v||($(),te||(te=!0,J(Y)),$(),J(Z),h.onRuntimeInitialized&&h.onRuntimeInitialized(),w(!h._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),ne()))}e=e||h.arguments,0<re||(w(0==(3&L)),M[(L>>2)-1]=34821223,M[(L>>2)-2]=2310721022,ie(),0<re||h.calledRun||(h.setStatus?(h.setStatus("Running..."),setTimeout(function(){setTimeout(function(){h.setStatus("")},1),t()},1)):t(),$()))}se=function e(){h.calledRun||Xe(),h.calledRun||(se=e)},h.run=Xe;var $e=[];function Ge(t){h.onAbort&&h.onAbort(t),t=void 0!==t?(r(t),y(t),JSON.stringify(t)):"",v=!0,0;var o="abort("+t+") at "+P();throw $e&&$e.forEach(function(e){o=e(o,t)}),o}if(h.abort=Ge,h.preInit)for("function"==typeof h.preInit&&(h.preInit=[h.preInit]);0<h.preInit.length;)h.preInit.pop()();h.noExitRuntime=!0,Xe(),Ke.exports=h}).call(this,t(24))},446:function(e,t,o){var l=Txplayer.util,u=o(447);e.exports={playControl:function(e){var t=Txplayer.$,o=this;if(o.context.dataset.playerWidth=o.context.dataset.$playermod.width(),o.context.dataset.playerHeight=o.context.dataset.$playermod.height(),"string"===t.type(e)?e={vid:e}:"undefined"===t.type(e)&&(e={}),e.vid||(e.vid=this.context.dataset.vid),!e.vid||11!==e.vid.length)throw new Error("vid is illegal");if(this.context.dataset.canPlayTime&&this.context.dataset.currentTime>=this.context.dataset.canPlayTime&&e.vid===this.context.dataset.vid)this.context.dataset.getinfoJSON&&4==this.context.dataset.getinfoJSON.exem?this.showDujiaDialog():this.showUIVipGuide("trial");else if(1!==this.context.dataset.playState&&!this.context.dataset.isPlayingAd||e.vid!==this.context.dataset.vid){if(e.vid==this.context.dataset.vid){if(this.dataset.hasVideoPlayed)return void this.context.msg.broadcast("play");if(this.context.dataset.playList&&this.context.dataset.playList.length)return void this.context.msg.broadcast("setFocusVideoUrl",t.extend({},this.context.dataset.playList[0],{autoplay:!0}))}e.autoplay=!0,this.checkLanguageSwitch(e),e.hasOwnProperty("cid")&&(this.context.dataset.cid=e.cid),e.hasOwnProperty("triggerplay")&&(this.context.config.triggerplay=e.triggerplay),e.hasOwnProperty("columnId")&&(this.context.dataset.columnId=e.columnId),e.hasOwnProperty("autoplay")&&(this.context.dataset.autoplay=e.autoplay),e.hasOwnProperty("isNeedPay")&&(this.context.dataset.isNeedPay=e.isNeedPay),e.hasOwnProperty("nextVid")&&(this.context.dataset.nextVid=e.nextVid),e.hasOwnProperty("showBullet")&&(this.context.config.showBullet=e.showBullet||this.context.config.showBullet||!1),e.hasOwnProperty("playEndTime")&&e.playEndTime&&e.hasOwnProperty("duration")?(this.context.config.playEndTime=parseInt(e.playEndTime),this.context.dataset.playEndTime=parseInt(e.duration)-parseInt(e.playEndTime),this.context.dataset.playEndTime<0&&(this.context.dataset.playEndTime=null)):e.hasOwnProperty("vid")&&e.vid!==this.context.dataset.vid&&(this.context.dataset.playEndTime=null,this.context.config.playEndTime=0),e.hasOwnProperty("trailerMode")&&e.trailerMode?this.context.dataset.trailerMode=!0:this.context.dataset.trailerMode=!1,this.context.dataset.connectionPlayTime=e.connectionPlayTime?e.connectionPlayTime:0,e.connectionPlayTime&&this.context.config.duration&&Math.abs(e.connectionPlayTime-this.context.config.duration)<1&&(this.context.dataset.connectionPlayTime=e.connectionPlayTime=0),this.context.dataset.playStartTime=e.playStartTime?e.playStartTime:0;var i=[],n=[];try{n=document.scripts;for(var r=0,a=n.length;r<a;r++)if(n[r].src&&-1!==n[r].src.indexOf("txpv5/js/txplayer.js")){var s=function(e){for(var t,o={},i=(e?(t=e.indexOf("?"),e.substring(t+1)):window.location.search.substring(1)).split("&"),n=0;n<i.length;n++){var r=i[n].split("=");o[r[0]]=r[1]}return o}(n[r].src).v,i=i.concat(s.split("_"));break}-1!==i.indexOf(e.vid)?this.context.dataset.closeHLS=!0:this.context.dataset.closeHLS=!1}catch(e){}delete o.context.dataset.hlsLoadStartTime,this.context.dataset.connectionPlayType=e.hasOwnProperty("connectionPlayType")?e.connectionPlayType:0,e.hasOwnProperty("connectionPlayType")||e.vid===this.context.dataset.vid||(this.context.dataset.connectionPlayType=3),e.hasOwnProperty("title")&&(this.context.dataset.title=l.xss(e.title)),e.authext&&(this.context.dataset.authext=e.authext),e.eduext&&(this.context.dataset.eduext=e.eduext),this.context.dataset.isAnNewPlayAction=!!e.isAnNewPlayAction,this.dataset.hasVideoPlayed=!1,this.dataset.hasLoadVideoUrl=!1;var c=this.context.dataset.vid;e.hasOwnProperty("vid")&&this.setVid(e.vid),this.context.msg.broadcast("beforeVideoPlay",this.context.dataset.vid,c),this.initNextVid();var d={};d.playStartTime=o.getSkipPreludeTime(),d.connectionPlayTime=o.context.dataset.connectionPlayTime,l.v4log("main-playcontrol:loadVideoUrls",d),"nintendo"===o.context.config.playerType||l.isTouchPlayer(o.context)?(o.context.config.browserDisableAutoPlay=!1,o.loadVideoUrls(d)):u.video().then(function(e){if(!0===e.result)o.context.config.browserDisableAutoPlay=!1,o.loadVideoUrls(d);else{var t=e.error&&e.error.name;if(/NotAllow/i.test(t)&&l.browser.safari)return;o.context.config.autoPlayInMute&&(o.context.config.browserDisableAutoPlay=!0,o.context.userApi.setVolume(0),o.context.userApi.mute(),o.loadVideoUrls(d))}})}},initNextVid:function(){var t=this;"array"==Txplayer.$.type(Txplayer.dataset.isReadyPlugins)&&-1!=Txplayer.dataset.isReadyPlugins.indexOf("UiPlayNext")?this.context.msg.broadcast("setNextVid",{nextVid:this.context.dataset.nextVid}):this.context.msg.on("pluginReady",function(e){"UiPlayNext"==e.name&&t.context.msg.broadcast("setNextVid",{nextVid:t.context.dataset.nextVid})})},setVid:function(e){if(e&&e!==this.context.dataset.vid){l.showInfo("HdPlayerControl.onVidChange",{currentVid:this.context.dataset.vid,nextVid:e});var t=this.context.dataset.vid;this.context.dataset.vid=e,this.context.msg.broadcast("vidChange",e,t),this.context.dataset.hasCallSetVid=!0;try{this.context.userMsg.broadcast("vidChange",e,t)}catch(e){}this.updatePlayerId()}},updatePlayerId:function(){this.context.dataset.playerId=l.createGUID(),this.context.dataset.flowid=this.context.dataset.playerId+"_"+this.context.dataset.platform},pauseControl:function(){this.context.dataset.disableHotKey||this.context.dataset.isPlayingAd||this.context.msg.broadcast("pause")}}},447:function(e,t){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},writable:!0,configurable:!0});var o=new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"}),i=new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"});function n(e){return Object.assign({muted:!1,timeout:2e3,inline:!1},e)}function r(e,t){var o=e.muted,n=e.timeout,i=e.inline,r=t(),a=r.element,s=r.source,c=void 0,d=void 0,l=void 0;if(!0===(a.muted=o)&&a.setAttribute("muted","muted"),!0===i&&a.setAttribute("playsinline","playsinline"),a.src=s,void 0!==window.Promise)return new window.Promise(function(i){c=a.play(),d=setTimeout(function(){l(!1,new Error("Timeout "+n+" ms has been reached"))},n),l=function(e,t){var o=1<arguments.length&&void 0!==t?t:null;clearTimeout(d),i({result:e,error:o})},void 0!==c?c.then(function(){return l(!0)}).catch(function(e){return l(!1,e)}):l(!0)});var u=Txplayer.$.Deferred(),c=a.play(),d=setTimeout(function(){l(!1,new Error("Timeout "+n+" ms has been reached"))},n),l=function(e,t){var o=1<arguments.length&&void 0!==t?t:null;clearTimeout(d),u.resolve({result:e,error:o})};return void 0!==c?c.then(function(){return l(!0)}).catch(function(e){return l(!1,e)}):setTimeout(function(){l(!0)}),u}var a={audio:function(e){return r(e=n(e),function(){return{element:document.createElement("audio"),source:URL.createObjectURL(o)}})},video:function(e){return r(e=n(e),function(){return{element:document.createElement("video"),source:URL.createObjectURL(i)}})}};e.exports=a},448:function(e,t){var h=Txplayer.util;e.exports={seekTo:function(e){var t=Txplayer.$,o=this;if("object"===t.type(e)&&e.showTips&&(this.dataset.seekToSyncFlag=!0),!this.context.dataset.isPlayingAd)if(0!==this.context.dataset.playState)if(-1!==this.context.dataset.playState){if(!this.context.dataset.disableHotKey){var i,n,r,a,s,c,d,l,u=this.context.dataset.currentTime,f="object"!==t.type(e)||!e.hasOwnProperty("connectionPlayTime")&&!e.hasOwnProperty("playStartTime")&&!e.hasOwnProperty("historyTime")&&!e.hasOwnProperty("showTips")&&!e.hasOwnProperty("doNotReport");if(e&&"object"===t.type(e)&&(e.time&&"string"==typeof e.time&&/^\d+$/.test(e.time)&&(e.time=Number(e.time)),e.connectionPlayTime&&"string"==typeof e.connectionPlayTime&&/^\d+$/.test(e.connectionPlayTime)&&(e.connectionPlayTime=Number(e.connectionPlayTime)),e.playStartTime&&"string"==typeof e.playStartTime&&/^\d+$/.test(e.playStartTime)&&(e.playStartTime=Number(e.playStartTime))),"object"===t.type(e)?i="number"===t.type(e.time)?e.time:"number"===t.type(e.connectionPlayTime)?e.connectionPlayTime:"number"===t.type(e.playStartTime)?e.playStartTime:null:"number"===t.type(e)&&(i=e,e={}),"number"===t.type(i))if(i<0&&(i=0),"number"===t.type(i)&&i<=this.context.dataset.duration&&("number"!==t.type(this.context.dataset.canPlayTime)||i<=this.context.dataset.canPlayTime)&&this.updateCurrentTime(i,"seekTo"),(r=this.context.dataset.duration)<i)h.showError("seekTo\u53c2\u6570\u9519\u8bef: seekTime["+i+"]\u4e0d\u80fd\u8d85\u8fc7\u89c6\u9891\u7684\u65f6\u957f["+r+"]","");else{"number"==t.type(this.context.dataset.canPlayTime)&&i>this.context.dataset.canPlayTime&&(i=this.context.dataset.canPlayTime-1),s=this.getVideoSeekToInfo(i),a=this.context.dataset.playListIndex,c=+new Date,this.context.dataset.isVideoSeeking=!0,h.v4log("seekStart ",{isVideoSeeking:this.context.dataset.isVideoSeeking}),this.context.msg.broadcast("seekStart",{type:"film",seekTime:i,seekIndex:s.index,seekStartTime:c,currentTimeWhenSeekStart:u,isUserAction:f});try{this.context.userMsg.broadcast("seekStart",{type:"film",seekTime:i,seekIndex:s.index,seekStartTime:c,currentTimeWhenSeekStart:u,isUserAction:f})}catch(e){}this.context.msg.off("videoSeeked.seekTo"),this.context.msg.once("videoSeeked.seekTo",function(){d=+new Date,l=o.context.dataset.currentTime,o.context.msg.broadcast("seekEnd",{seekStartTime:c,seekEndTime:d,seekTime:i,currentTimeWhenSeekStart:u,currentTimeWhenSeekEnd:l,isUserAction:f});try{o.context.userMsg.broadcast("seekEnd",{type:"film",seekStartTime:c,seekEndTime:d,seekTime:i,currentTimeWhenSeekStart:u,currentTimeWhenSeekEnd:l,isUserAction:f})}catch(e){}5<Math.abs(i-l)&&(o.context.dataset.retrySeekTo=!0,p())}),o.context.msg.broadcast("pause"),p(),e.seekTime=i,o.context.msg.broadcast("showUiSeekTip",e),e.bulletid&&o.context.msg.broadcast("barrageSeekTime",{bulletid:e.bulletid,time:i})}else h.error("seekTo\u53c2\u6570\u9519: \u53c2\u6570\u5fc5\u987b\u4e3anumber("+i+")")}}else h.showError("\u64ad\u653e\u72b6\u6001\u672a\u521d\u59cb\u5316\uff0c\u4e0d\u80fdseek","seekTo");else h.showError("\u64ad\u653e\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fdseek");function p(){a===s.index?o.context.msg.broadcast("setFocusVideoCurrentTime",{time:i-s.prevDurtion,autoplay:!0}):o.context.dataset.playList[s.index]&&((n=o.context.dataset.playList[s.index]).autoplay=!0,n.currentTime=i-s.prevDurtion,n.updateIndex=s.index,o.context.msg.broadcast("setFocusVideoUrl",n))}}}},449:function(e,t){e.exports={dealAdMsgMoudle:function(){var t=this,o=Txplayer.util;this.context.msg.on("onAdOrderDataReady",function(e){}),this.context.msg.on("loadingAdStart",function(e){if(o.v4log("loadingAdStart \u524d\u5e16\u5f00\u59cb\u64ad\u653e"),!t.context.dataset.hasLoadingAdStart){t.context.dataset.hasLoadingAdStart=!0,t.context.msg.broadcast("adVideoShow"),t.context.msg.broadcast("filmVideoHide","loadingad");try{t.context.userMsg.broadcast("adStart",{type:"loadingad"}),t.context.msg.broadcast("adStart",{type:"loadingad"})}catch(e){}}}),this.context.msg.on("loadingAdLoadComplete",function(e){o.v4log("loadingAdLoadComplete \u524d\u5e16\u5168\u90e8\u4e0b\u8f7d\u5b8c\u6210 "),t.context.msg.broadcast("play",{isPreloadFirstFilm:!0,autoplay:!1}),t.context.dataset.isPreloadFilm=!0}),this.context.msg.on("loadingAdEnd",function(e){o.v4log("loadingAdEnd \u524d\u5e16\u64ad\u653e\u7ed3\u675f"),t.context.msg.broadcast("adVideoHide"),t.context.msg.broadcast("filmVideoShow","loadingad");try{t.context.userMsg.broadcast("adEnd",{type:"loadingad"}),t.context.msg.broadcast("adEnd",{type:"loadingad"})}catch(e){}}),this.context.msg.on("insertAdStart",function(e){o.v4log("insertAdStart"),t.context.msg.broadcast("adVideoShow"),t.context.msg.broadcast("filmVideoHide","insertad");try{t.context.userMsg.broadcast("adStart",{type:"insertad"}),t.context.msg.broadcast("adStart",{type:"insertad"})}catch(e){}}),this.context.msg.on("insertAdEnd",function(e){o.v4log("insertAdEnd"),t.context.msg.broadcast("adVideoHide"),t.context.msg.broadcast("filmVideoShow","insertad");try{t.context.userMsg.broadcast("adEnd",{type:"insertad"}),t.context.msg.broadcast("adEnd",{type:"insertad"})}catch(e){}}),this.context.msg.on("endingAdStart",function(e){o.v4log("endingAdStart"),t.context.msg.broadcast("adVideoShow"),t.context.msg.broadcast("filmVideoHide","endingad");try{t.context.userMsg.broadcast("adStart",{type:"endingad"}),t.context.msg.broadcast("adStart",{type:"endingad"})}catch(e){}}),this.context.msg.on("endingAdEnd",function(e){if(!t.context.dataset.isFilmEnded)return o.v4log("isEndingAdEnded"),void(t.context.dataset.isEndingAdEnded=!0);o.v4log("endingAdEnd"),t.context.msg.broadcast("adVideoHide"),t.context.msg.broadcast("filmVideoShow","endingad"),setTimeout(function(){t.context.msg.broadcast("videoEnd",{index:t.context.dataset.playListIndex,playListType:"endingad",isTheLastFilm:!0,isAllEnd:!0,from:"endingAdEnd"});try{t.context.userMsg.broadcast("videoEnd",{isTheLastFilm:!0,isAllEnd:!0})}catch(e){}},0);try{t.context.userMsg.broadcast("adEnd",{type:"endingad"}),t.context.msg.broadcast("adEnd",{type:"endingad"})}catch(e){}}),this.context.msg.on("pauseAdStart",function(e){t.context.msg.broadcast("adVideoShow")}),this.context.msg.on("pauseAdEnd",function(e){t.context.msg.broadcast("adVideoHide")}),this.context.msg.on("pvlAdStart",function(e){t.context.msg.broadcast("loadingImageAdUrlReady",{url:e})})}}},450:function(e,t){var i=Txplayer.util;e.exports={dealFilmMsgMoudle:function(){var a=this;a.context.msg.on(i.getUniqueMsgKey("beforeVideoPlay"),function(e,t){a.context.dataset.urlIndex=0,a.context.dataset.getinfoJSON=null,a.context.dataset.requestNewGetinfoError=!1,a.context.dataset.filmVideoData=[],a.context.dataset.duration=null,a.context.dataset.disableHotKey=!1,a.context.dataset.hasLoadingAdStart=!1,a.updateCurrentTime(0,"beforeVideoPlay"),a.dataset.seekToSyncFlag=!1,a.context.msg.off("videoPlaying.loadAndSeekSync"),a.context.msg.off("getVideoUrlSuccess.loadVideoUrls"),a.context.msg.off("videoPlaying.showUiSeekTip")}),a.context.msg.on(i.getUniqueMsgKey("beforeVideoRePlay"),function(e,t){a.dataset.hasVideoPlayed=!1,a.context.dataset.hasLoadingAdStart=!1,a.updateCurrentTime(0,"beforeVideoRePlay")}),this.context.msg.on(i.getUniqueMsgKey("videoPlaying"),function(e){"film"===a.context.dataset.currentPlayListType&&(a.dataset.hasVideoPlayed=!0)}),this.context.msg.on(i.getUniqueMsgKey("videoEnd"),function(e){e.isTheLastFilm&&"film"===e.playListType&&(a.context.msg.off("videoSeeked.seekTo"),a.dataset.hasVideoPlayed=!1,a.context.dataset.getinfoJSON=null)}),this.context.msg.on("userStopVideo",function(e){a.dataset.hasVideoPlayed=!1}),a.context.msg.on(i.getUniqueMsgKey("videoTimeUpdateWithHlsAd"),function(e){var t,o;e&&"film"===e.playListType&&((t=a.calcCurrentTime())&&e&&e.videoTag&&e.videoTag.currentTime&&a.updateCurrentTime(t,"onSectionTimeupdate"),a.context.dataset.canPlayTime&&(t&&t>=a.context.dataset.canPlayTime&&(a.context.dataset.getinfoJSON&&4==a.context.dataset.getinfoJSON.exem?a.showDujiaDialog():a.showUIVipGuide("trial")),e&&e.videoTag&&Math.floor(e.videoTag.duration)!==a.context.dataset.canPlayTime&&(0<(o=a.context.dataset.canPlayTime-e.videoTag.duration)&&o<=3&&(a.context.dataset.canPlayTime=Math.floor(e.videoTag.duration))),a.showUnOfficialLimitTips()))}),a.context.msg.on(i.getUniqueMsgKey("videoPlaying"),function(e){var t;e&&"film"===e.playListType&&a.context.dataset.canPlayTime&&((t=a.calcCurrentTime())&&a.updateCurrentTime(t,"onSectionPlaying"),t&&t>=a.context.dataset.canPlayTime&&(a.context.dataset.getinfoJSON&&4==a.context.dataset.getinfoJSON.exem?a.showDujiaDialog():a.showUIVipGuide("trial")))}),a.context.msg.on(i.getUniqueMsgKey("seekStart"),function(e){e&&"film"===e.type&&a.context.dataset.canPlayTime&&e&&e.seekTime&&e.seekTime>=a.dataset.canPlayTime&&(a.context.dataset.getinfoJSON&&4==a.context.dataset.getinfoJSON.exem?a.showDujiaDialog():a.showUIVipGuide("trial"))}),a.context.msg.on(i.getUniqueMsgKey("videoEnd"),function(e){e&&"film"===e.playListType&&a.context.dataset.canPlayTime&&a.context.dataset.currentTime>a.context.dataset.canPlayTime&&(a.updateCurrentTime(a.context.dataset.canPlayTime,"videoEnd"),a.context.dataset.getinfoJSON&&4==a.context.dataset.getinfoJSON.exem?a.showDujiaDialog():a.showUIVipGuide("trial"))}),a.context.msg.on(i.getUniqueMsgKey("beforeVideoPlay"),function(e,t){var o;a.context.dataset.hasChromeHlsPlugin&&(a.context.dataset.useChromeHls=!0,a.context.dataset.useHls=!0,o=a.context.config.playerType,-1<["html5hd","safarihls","chromehls"].indexOf(o)&&(a.context.config.playerType="chromehls")),i.isSupportSafariHls(a.context.dataset.platform)&&(a.context.dataset.useHls=!0),a.context.dataset.hasCallShowUIVipGuide=!1}),this.context.msg.on(i.getUniqueMsgKey("videoInterruptByError"),function(){a.dataset.getVkeyErrorData&&83===a.dataset.getVkeyErrorData.code?a.context.dataset.getinfoJSON&&4==a.context.dataset.getinfoJSON.exem?a.showDujiaDialog():a.showUIVipGuide("trial"):a.dataset.getVideoInfoErrorData&&91===a.dataset.getVideoInfoErrorData.code&&(a.showUIVipGuide("switchDef"),a.context.dataset.isDefinitionSwitching=!1)}),a.context.msg.on(i.getUniqueMsgKey("chromehlsErrorSwitchToHtml5hd"),function(e,t){a.context.msg.broadcast("reportChromeHlsError",e.code),a.context.dataset.useHls=!1,a.context.dataset.useChromeHls=!1,delete a.context.dataset.hlsLoadStartTime;var o=a.context.config.playerType;-1<["html5hd","safarihls","chromehls"].indexOf(o)&&(a.context.config.playerType="html5hd");var i={autoplay:!0};i.playStartTime=a.getSkipPreludeTime(),i.connectionPlayTime=a.context.dataset.connectionPlayTime,i.onlyGetinfo=!0,a.context.dataset.isDefinitionSwitching&&a.context.dataset.definition&&(i.defn=a.context.dataset.definition),a.context.dataset.isPlayingAd?a.context.msg.once("loadingAdEnd",function(){a.loadVideoUrls(i)}):a.loadVideoUrls(i)}),a.context.msg.on(i.getUniqueMsgKey("chromehlsErrorSwitchToChromehls"),function(e,t){a.context.msg.broadcast("reportChromeHlsError",e.code);var o={autoplay:!0};o.playStartTime=a.getSkipPreludeTime(),o.connectionPlayTime=a.context.dataset.connectionPlayTime,o.onlyGetinfo=!0,a.context.dataset.isDefinitionSwitching&&a.context.dataset.definition&&(o.defn=a.context.dataset.definition),a.loadVideoUrls(o)}),a.context.msg.on(i.getUniqueMsgKey("chromehlsCkeyTimeout"),function(){void 0===a.context.dataset.ckeytimeoutRetryCount&&(a.context.dataset.ckeytimeoutRetryCount=0),a.context.dataset.ckeytimeoutRetryCount<20&&(a.context.dataset.ckeytimeoutRetryCount++,a.updateVideoUrls({onlyGetinfo:!0}))}),a.context.msg.on(i.getUniqueMsgKey("getVideoUrlSuccess"),function(){var e,t,o,i,n=a.context.dataset.videoWidth,r=a.context.dataset.videoHeight;n&&r&&(i=r*((e=a.context.dataset.$playermod.width())/n),(o=n*((t=a.context.dataset.$playermod.height())/r))<e&&e-20<=o||i<t&&t-20<=i?a.context.dataset.$videomod.addClass("txp_video_fit_cover"):a.context.dataset.$videomod.removeClass("txp_video_fit_cover"))}),a.context.msg.on(i.getUniqueMsgKey("videoPlaying"),function(e){if(e&&"film"===e.playListType){if(a.context.dataset.unid)return;var t=i.getData(Txplayer.dataset.localStorageKey.unid);if(t)return void(a.context.dataset.unid||(a.context.dataset.unid=t));if(a.dataset.hasRequestUnid)return;a.dataset.hasRequestUnid=!0,o={otype:"json",market_id:1,platform:2,unix_time:+new Date,ip:a.context.dataset.reportUsrIP,user_agent:navigator.userAgent,qq:i.getQQFromCookie(),wx_openid:i.cookie.get("vuserid"),refer:document.referrer,url:location.href},Txplayer.$.jsonp({url:"//ncgi.video.qq.com/fcgi-bin/get_guid_http_to_jce?callback=?",data:o,callback:Txplayer.util.getJsonpCallbackName("get_guid")}).done(function(e){e&&0==e.err_code&&e.guid?(a.context.dataset.unid=e.guid,i.setData(Txplayer.dataset.localStorageKey.unid,e.guid)):a.dataset.hasRequestUnid=!1}).fail(function(){a.dataset.hasRequestUnid=!1})}var o}),a.context.msg.on(i.getUniqueMsgKey("videoPlaying"),function(e){e&&"film"===e.playListType&&a.getVideoMark&&a.getVideoMark.requestVideoMark()}),a.context.msg.on(i.getUniqueMsgKey("showLoginGuide"),function(e){a.context.dataset.disableHotKey=!0,a.context.msg.broadcast("pause"),a.context.msg.broadcast("hideUiTips"),Txplayer.util.v4log("showLoginGuide",{connectionPlayTime:a.context.dataset.currentTime});try{a.context.userMsg.broadcast("showLoginGuide",{connectionPlayTime:a.context.dataset.currentTime})}catch(e){}a.context.dataset.isBrowserFullscreen&&a.context.msg.broadcast("exitBrowserFullscreen"),a.context.dataset.isWindowFullscreen&&a.context.msg.broadcast("exitWindowFullscreen")}),a.context.msg.on(i.getUniqueMsgKey("startRollVideoInfo"),function(e){a.context.dataset.rollVideoInfoTimer&&clearTimeout(a.context.dataset.rollVideoInfoTimer);var t=a.context.dataset.fvpint;e&&t&&(a.context.dataset.rollVideoInfoTimer=setTimeout(function(){a.context.getinfo.requestRollVideoInfo(e).always(function(){a.context.msg.broadcast("startRollVideoInfo",e)})},t))}),a.context.msg.on(i.getUniqueMsgKey("vidChange"),function(){a.context.dataset.rollVideoInfoTimer&&clearTimeout(a.context.dataset.rollVideoInfoTimer),a.context.dataset.hasShowEndAdditionTip=!1,a.context.dataset.hasnlink=!1}),a.context.msg.on(i.getUniqueMsgKey("videoEnd"),function(){a.context.dataset.rollVideoInfoTimer&&clearTimeout(a.context.dataset.rollVideoInfoTimer),a.context.dataset.hasShowEndAdditionTip=!1,a.context.dataset.hasnlink=!1}),a.context.msg.on(i.getUniqueMsgKey("smallWindowModeChange"),function(e){e.isSmallWindow&&a.context.msg.broadcast("hideUiTips")}),a.context.msg.on(i.getUniqueMsgKey("videoTimeUpdate"),function(e){if(.98<=a.calcCurrentTime()/a.context.dataset.duration&&a.context.dataset.hasnlink){if(a.context.dataset.hasShowEndAdditionTip)return;if(-1<["LD","ZC","HT"].indexOf(a.context.dataset.currentAdType))return;a.context.dataset.hasShowEndAdditionTip=!0,a.context.msg.broadcast("showAdditionTip",{duration:e.vlinktd,type:"end"})}})}}},451:function(e,t){e.exports={initUserApis:function(){this.dataset.moduleApis={},this.dataset.moduleApis.seekTo=this.seekTo.bind(this),this.dataset.moduleApis.play=this.playControl.bind(this),this.dataset.moduleApis.pause=this.pauseControl.bind(this),this.dataset.moduleApis.getVid=this.getVid.bind(this),this.dataset.moduleApis.getCid=this.getCid.bind(this),this.dataset.moduleApis.getColumnId=this.getColumnId.bind(this),this.dataset.moduleApis.isSmallWindowMode=this.isSmallWindowMode.bind(this),this.dataset.moduleApis.setPlayerVipStatus=this.setPlayerVipStatus.bind(this),this.dataset.moduleApis.getDuration=this.getDuration.bind(this),this.dataset.moduleApis.getFileSize=this.getFileSize.bind(this),this.dataset.moduleApis.getVideoSize=this.getVideoSize.bind(this),this.dataset.moduleApis.getCurrentTime=this.getCurrentTime.bind(this),this.dataset.moduleApis.getCurrentTimeWithHlsAd=this.getCurrentTimeWithHlsAd.bind(this),this.dataset.moduleApis.getBufferedTime=this.getBufferedTime.bind(this),this.dataset.moduleApis.seekRight=this.seekRight.bind(this),this.dataset.moduleApis.seekLeft=this.seekLeft.bind(this),this.dataset.moduleApis.togglePlayPause=this.togglePlayPause.bind(this),this.dataset.moduleApis.getUserPayStatus=this.getUserPayStatus.bind(this),this.dataset.moduleApis.getVideoType=this.getVideoType.bind(this),this.dataset.moduleApis.getPlayerType=this.getPlayerType.bind(this),this.dataset.moduleApis.setSmallWindowMode=this.setSmallWindowMode.bind(this),this.dataset.moduleApis.getDefinitionList=this.getDefinitionList.bind(this),this.dataset.moduleApis.callPlayerExtendMethod=this.callPlayerExtendMethod.bind(this),this.dataset.moduleApis.closeLoginGuide=this.closeLoginGuide.bind(this),Txplayer.$.extend(this.context.userApi,this.dataset.moduleApis)},initPrivateMsg:function(){var o=this;this.dataset.privateApis={},this.dataset.privateApis.playControl=this.playControl.bind(this),this.dataset.privateApis.pauseControl=this.pauseControl.bind(this),this.dataset.privateApis.seekTo=this.seekTo.bind(this),this.dataset.privateApis.retryUrlsWhenErr=this.retryUrlsWhenErr.bind(this),this.dataset.privateApis.loadVideoUrls=this.loadVideoUrls.bind(this),Txplayer.$.each(this.dataset.privateApis,function(e,t){o.context.msg.on(e,t)})},initDataApis:function(){var o=this;this.dataset.dataApis={},this.dataset.dataApis.getVideoSeekToInfo=function(e,t){t.data=o.getVideoSeekToInfo(e)},Txplayer.$.each(this.dataset.dataApis,function(e,t){o.context.msg.setData(e,t)})}}},452:function(e,t,o){var v=Txplayer.util,a=o(37),w=(Txplayer.$,o(453));e.exports={getPayType:function(e){var t;e&&(t=0,8===e.st?t=1:0<e.ch&&2===e.st?t=2:0===e.ch&&2===e.st&&(t=0),this.context.dataset.rpt_pay_type=t)},requestVideoUrlsByVid:function(h){h=h||{};var e,t,o,m={vid:this.context.dataset.vid,defn:this.context.dataset.historyDefinition||"",charge:this.context.dataset.isNeedPay?1:0,fhdswitch:h.fhdswitch?1:0,show1080p:this.context.config.show1080p?1:0,isHLS:0},y=this,g={};Txplayer.$.extend(m,h),!0!==this.context.dataset.useHls||"false"==v.getUrlParam("ishls")||this.context.dataset.closeHLS||(e={isHLS:1,dtype:v.isIE10?1:3,sphls:1,spgzip:"",dlver:""},o=(t=!v.inNewIframe()&&("v.qq.com"===location.hostname||"film.qq.com"===location.hostname))&&"0"===v.getUrlParam("useNewHls"),t&&!o&&(e.sphls=2,e.spgzip=1,e.dlver=2),Txplayer.$.extend(m,e));var r=new Date;w.sptEme()&&v.browser.safari?m.drm=16:v.isSupportEme&&(m.drm=32),v.browser.safari?m.hdcp=1:m.hdcp=v.isSupportHDCP?1:0,m.spau=1,m.spaudio=15,m.defn=m.defn.replace("auto-",""),this.context.getinfo.requestGetinfo(m).done(function(t,o,e,i,n){v.v4log("requestGetinfo-done",i),o&&(y.context.dataset.filmVideoData=o,y.context.dataset.definitionList=e,Txplayer.$(y.context.dataset.definitionList).each(function(e,t){1===t.sl&&(y.context.dataset.currentDefinitionRate=t.br,y.context.dataset.definition=t.name,y.context.dataset.currentDefinitionFormat=t.format)})),y.context.dataset.getinfoJSON=i,y.context.dataset.duration=y.getDuration(),y.context.dataset.originDuration=y.context.dataset.duration,y.dataset.getVideoInfoErrorData=null,y.context.dataset.userPayStatus=y.getUserPayStatus(),y.context.dataset.filesize=y.getFileSize(),y.context.dataset.canPlayTime=null,i&&i.preview&&(1==i.exem||2==i.exem||4==i.exem||83==i.iRetCode)&&(y.context.dataset.canPlayTime=i.preview,g={code:83,trailTime:i.preview}),i&&i.vl&&i.vl.vi&&"object"===Txplayer.$.type(i.vl.vi[0])&&(y.context.dataset.lnkVid=i.vl.vi[0].lnk,y.context.dataset.videoWidth=i.vl.vi[0].vw,y.context.dataset.videoHeight=i.vl.vi[0].vh,y.context.dataset.tpid=i.vl.vi[0].videotype,y.context.dataset.ckey=i.vl.vi[0].fvkey,y.context.dataset.fvideo=i.vl.vi[0].fvideo,y.context.dataset.fvpint=i.vl.vi[0].fvpint?1e3*i.vl.vi[0].fvpint:6e5,y.context.dataset.adExtras=i.vl.vi[0].ad||{},y.context.dataset.getinfoHlsAdSegments=v.parseGetinfoHlsAdRange(y.context.dataset.adExtras),v.v4log("requestGetinfo-done-adExtras",y.context.dataset.adExtras),y.getPayType(i.vl.vi[0])),"1"!=y.context.dataset.fvideo||v.isTouchPlayer(y.context)||y.context.msg.broadcast("startRollVideoInfo",{config:m,fvpint:y.context.dataset.fvpint});var r,a=i&&i.fl&&i.fl.fi&&i.fl.fi||[],s=i&&i.al&&i.al.ai&&i.al.ai[0],c=s&&s.keyid||"";c=1<(c=c.split(".")).length?c[1]:"",a.forEach(function(e){1==e.sl&&(r=e.id,y.context.dataset.drm=e.drm||0)});var d=!1;if(v.browser.safari&&4===y.context.dataset.drm&&i&&i.vl&&i.vl.vi&&"object"===Txplayer.$.type(i.vl.vi[0])&&i.vl.vi[0].ckc){d=!0;var l=y.context.dataset.fairplay;l||(l=new w,y.context.dataset.fairplay=l),l.init(y.context,i,p,{ckc:i.vl.vi[0].ckc,fmt:r,afmt:c})}else if(5==y.context.dataset.drm&&i&&i.vl&&i.vl.vi&&"object"===Txplayer.$.type(i.vl.vi[0])&&i.vl.vi[0].ckc){if(!v.isSupportEme||!y.context.dataset.useChromeHls)return void(y.context.dataset.isDefinitionSwitching&&y.context.dataset.vid===i.vl.vi[0].vid?y.context.msg.broadcast("switchDrmDefinitionError",{type:"hls",code:-11111,errCode:"-11111.1",exem:-1}):y.context.msg.broadcast("error",{type:"hls",errCode:"-11111.1",code:-11111,exem:-1}));var u=i.vl.vi[0].ckc;y.context.dataset.emeEnabled=!0;var f=["vid="+y.context.dataset.vid,"fmt="+r,"afmt="+c,"ip="+i.ip,"platform="+y.context.dataset.platform,"uin="+v.getUin(),"openid="+v.cookie.get("openid"),"version=1"],u=u.replace(/\|$/,"");y.context.dataset.ckc=-1<u.indexOf("?")?u+"&"+f.join("&"):u+"?"+f.join("&")}else y.context.dataset.emeEnabled=!1,y.context.dataset.ckc="";function p(){var e;i.preview||1!==i.exem&&83!==i.iRetCode?(1==i.dltype&&(y.context.msg.broadcast("destroyHlsPlayer",{msg:"backend does not suppoert hls, dltype=1"}),y.context.dataset.useHls=!1,y.context.dataset.useChromeHls=!1,e=y.context.config.playerType,-1<["html5hd","safarihls","chromehls"].indexOf(e)&&(y.context.config.playerType="html5hd")),v.v4log("broadcast-getVideoUrlSuccess",h),y.context.msg.broadcast("getVideoUrlSuccess",t,o[0]),m.onlyGetinfo&&!h.requestNewGetinfoError||(v.v4log("broadcast-onAdOrderDataReady",""),n.adtype="LD",y.context.msg.broadcast("onAdOrderDataReady",n))):g={code:83,trailTime:0},g&&g.hasOwnProperty("trailTime")&&!g.trailTime?y.showUIVipGuide("trial"):(g&&g.hasOwnProperty("code")&&83===g.code||y.context.dataset.trailerMode)&&(v.v4log("\u8be5\u7247\u652f\u6301\u8bd5\u770b",g),4==i.exem?y.context.msg.broadcast("showUIDujiaTip",g):y.context.msg.broadcast("showUIVipTip",g))}d||p()}).fail(function(e){v.v4log("requestGetinfo-Fail",e);var t=new Date,o=t-r;if(32e3<o&&(o=32e3),e&&1001==e.code){v.v4log("\u5408\u5e76\u63a5\u53e3\u5931\u8d25 \u5355\u72ec\u8bf7\u6c42\u63a5\u53e3",e),h.onlyGetinfo=!0,h.requestNewGetinfoError=!0,y.context.dataset.requestNewGetinfoError=!0,y.requestVideoUrlsByVid(h);var i=window.performance&&window.performance.now()||0;y.context.msg.broadcast("reportAdInfo",{version:Txplayer.appVersion,adtype:"LD",step:1,step_duration:o,step_code:e.code,step_index:1,firstview_duration:parseInt(i,10)})}else if(m.onlyGetinfo&&!h.requestNewGetinfoError||(v.v4log("broadcast-onAdOrderDataReady",""),y.context.msg.broadcast("onAdOrderDataReady",{videoErrorCode:e.code,adtype:"LD",requestOk:!1,adcost:t-r})),e&&91===e.code)y.dataset.getVideoInfoErrorData=e,y.context.msg.broadcast("videoInterruptByError");else if(e&&96==e.code)y.context.msg.broadcast("showLoginGuide");else if(e&&"76"===e.code&&"hls"===e.type)y.context.dataset.useHls=!1,y.requestVideoUrlsByVid(h);else{var n=a[e.code]||a.defaultMsg;"80"==e.code&&-1<v.inArray(["1","2","3","7","9","10","11","14"],""+e.exem)&&(n=a["80."+e.exem]),y.context.msg.broadcast("error",{errCode:e.errCode,code:e.code,msg:n,type:"cgi",exem:e.exem});try{y.context.userMsg.broadcast("error",{flowId:y.context.dataset.flowid,errCode:e.errCode,code:e.code,msg:n,type:"cgi",exem:e.exem})}catch(e){}}})},requestVideoNextPartKey:function(t,o,i){if(o=o||0,!this.context.dataset.filmVideoData)return!1;var n=this;return i=i||Txplayer.$.Deferred(),t.isNeedPay=this.context.dataset.isNeedPay,this.context.getinfo.requestGetkey(t).done(function(e){n.dataset.getVkeyErrorData=null,e?i.resolve(t.urlArray[o].url+"&vkey="+e):i.reject()}).fail(function(e){if(e&&"1001"==e.code)return n.context.dataset.requestNewGetinfoError=!0,void n.requestVideoNextPartKey(t,o,i);if(!n.context.dataset.canPlayTime||83!==e.code){n.dataset.getVkeyErrorData=e,n.context.msg.broadcast("error",{code:e.code,errCode:e.errCode,msg:a[e.code]||a.defaultMsg,type:"cgi"});try{n.context.userMsg.broadcast("error",{flowId:n.context.dataset.flowid,code:e.code,errCode:e.errCode,msg:a[e.code]||a.defaultMsg,type:"cgi"})}catch(e){}i.reject(e)}}),i},updateVideoUrls:function(e){e=e||{};var i=this;this.context.msg.once("getVideoUrlSuccess.updateVideoUrls",function(e,t){var o=[];(t=t||{}).urlArray&&0<t.urlArray.length&&(o=t.urlArray.map(function(e){return e.url})),i.context.msg.broadcast("setChromeHlsData",{k:"keytimeout",v:{keyid:"hls."+i.context.dataset.getinfoJSON.vl.vi[0].lnk+"."+i.context.dataset.currentDefinitionFormat,m3u8url:o}})});var t=Txplayer.$.extend({},{vid:e.vid,charge:e.charge,defn:e.defn,fhdswitch:e.fhdswitch,onlyGetinfo:e.onlyGetinfo});this.requestVideoUrlsByVid(t)},loadVideoUrls:function(n){n=n||{},this.dataset.hasLoadVideoUrl=!0;var e,r=this;v.v4log("loadVideoUrls",n);function a(t){if(v.v4log("seekToSync",{playState:r.context.dataset.playState,seekToSyncFlag:r.dataset.seekToSyncFlag}),-1===r.context.dataset.playState)r.context.msg.on("videoPlaying.loadAndSeekSync",function(e){"film"==e.playListType&&(r.dataset.seekToSyncFlag||(t(),r.context.msg.off("videoPlaying.loadAndSeekSync")))});else{if(r.dataset.seekToSyncFlag)return;t()}}this.context.msg.once("getVideoUrlSuccess.loadVideoUrls",function(o,e){if(e=e||{},r.context.dataset.filmVideoData){var i=[];!0===r.context.dataset.useHls?i.push({url:o,filesize:r.context.dataset.filmVideoData[0].bytesTotal,byteRate:r.context.dataset.filmVideoData[0].byteRate,vid:r.context.dataset.vid,m3u8:e&&e.m3u8}):Txplayer.$(r.context.dataset.filmVideoData).each(function(e,t){0===e&&o?i.push({url:o,filesize:t.bytesTotal,vid:r.context.dataset.vid,data:t}):i.push({_url:t.urlArray,data:t,filesize:t.bytesTotal,vid:r.context.dataset.vid,getUrlSync:function(){var t=Txplayer.$.Deferred();return r.requestVideoNextPartKey(this.data,r.context.dataset.urlIndex).done(function(e){v.showInfo("getUrlSync.done",e),t.resolve(e)}).fail(function(e){v.showError("getUrlSync.fail",e),t.reject(e)}),t}})});var t={data:i};if(n.repalcePlayList&&(t.repalcePlayList=!0),n.clear&&(t.clear=!0),v.v4log("addUrls2Player",""),r.context.msg.broadcast("addUrls2Player",t),v.v4log("videoListChange",""),r.context.msg.broadcast("videoListChange",o,i),r.context.dataset.useChromeHls&&(r.context.dataset.hlsLoadStartTime=n.connectionPlayTime?n.connectionPlayTime:n.playStartTime,r.context.dataset.hlsLoadStartTime=+r.context.dataset.hlsLoadStartTime),v.v4log("options.autoplay",{autoplay:n.autoplay||"",noHdAdPlugin:r.context.dataset.noHdAdPlugin||""}),n.autoplay?(r.context.dataset.autoplay=!0,r.context.msg.broadcast("play")):r.context.dataset.noHdAdPlugin&&!n.fhdswitch&&(v.v4log("noHdAdPlugin-play",n),r.context.dataset.autoplay=!0,r.context.msg.broadcast("play")),r.context.dataset.autoplay&&r.context.dataset.requestNewGetinfoError&&!n.fhdswitch&&(v.v4log("requestNewGetinfoError",{}),r.context.msg.broadcast("play")),r.context.dataset.useChromeHls)return r.context.msg.off("videoPlaying.showUiSeekTip"),void r.context.msg.on("videoPlaying.showUiSeekTip",function(e){e&&"film"==e.playListType&&(delete r.context.dataset.hlsLoadStartTime,r.context.msg.off("videoPlaying.showUiSeekTip"),n.type="chromehls",r.context.msg.broadcast("showUiSeekTip",n))});n.connectionPlayTime?a(function(){r.context.dataset.isSkippingTime=!0,r.seekTo({connectionPlayTime:n.connectionPlayTime})}):n.playStartTime&&a(function(){r.context.dataset.isSkippingTime=!0,r.seekTo({playStartTime:n.playStartTime})})}else v.showError("onGetVideoUrlSuccess\u5931\u8d25","\u627e\u4e0d\u5230\u64ad\u653eurl\u5217\u8868")}),e=Txplayer.$.extend({},{vid:n.vid,charge:n.charge,defn:n.defn,fhdswitch:n.fhdswitch,onlyGetinfo:n.onlyGetinfo}),r.requestVideoUrlsByVid(e)}}},453:function(e,t){var l=Txplayer.util,o="com.apple.fps.1_0",i=Txplayer.$;function n(e,t,o){"string"==typeof t&&(t=function(e){for(var t=e.length,o=new ArrayBuffer(2*t),i=new Uint16Array(o),n=0;n<t;n++)i[n]=e.charCodeAt(n);return i}(t));var i=e.byteLength+4+t.byteLength+4+o.byteLength,n=0,r=new ArrayBuffer(i),a=new DataView(r),s=new Uint8Array(r,0,e.byteLength);s.set(e),n+=s.byteLength,a.setUint32(n,t.byteLength,!0),n+=4;var c=new Uint16Array(r,n,t.length);return c.set(t),n+=c.byteLength,a.setUint32(n,o.byteLength,!0),n+=4,new Uint8Array(r,n,o.byteLength).set(o),new Uint8Array(r,0,r.byteLength)}function u(){this.evtMap={webkitneedkey:this.onVideoWebkitNeedKey.bind(this),certificateError:this.onCertificateError.bind(this),certificateOk:this.onCertificateOk.bind(this),webkitkeyadded:this.onKeySessionWebkitKeyAdded.bind(this),webkitkeyerror:this.onKeySessionWebkitKeyError.bind(this),webkitkeymessage:this.onKeySessionWebkitKeyMessage.bind(this)}}u.prototype.onKeySessionWebkitKeyAdded=function(){l.v4log("[fairplay]","onKeySessionWebkitKeyAdded()"),l.v4log("[fairplay]","Decryption key was added to the session.")},u.prototype.onKeySessionWebkitKeyError=function(e){l.v4log("[fairplay]","onKeySessionWebkitKeyError()",e?e.message:""),this.riseError("error",3)},u.prototype.onKeySessionWebkitKeyMessage=function(e){l.v4log("[fairplay]","onKeySessionWebkitKeyMessage()");var t=e.target,o=e.message;this.fetchLicense(t,o)},u.prototype.fetchLicense=function(t,e){l.v4log("[fairplay]","fetchLicense()"),this.licenseRequestParam.spc=function(e){for(var t="",o=new Uint8Array(e),i=o.byteLength,n=0;n<i;n++)t+=String.fromCharCode(o[n]);return window.btoa(t)}(e);var o=this;this.licenseRequest=i.ajax({url:this.context.dataset.ckc,data:this.licenseRequestParam,type:"POST",dataType:"json"}).done(function(e){e&&0==+e.code&&e.ckc?t.update(function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),o=window.atob(t),i=new Uint8Array(o.length),n=0;n<o.length;++n)i[n]=o.charCodeAt(n);return i}(e.ckc)):o.riseError("error",6)}).fail(function(e){o.riseError("error",5)})},u.prototype.onCertificateOk=function(e){if(l.v4log("[fairplay]","onCertificateOk()"),this.certRequest&&(this.certificate=new Uint8Array(this.certRequest.response),this.certRequest.removeEventListener("error",this.evtMap.certificateError),this.certRequest.removeEventListener("load",this.evtMap.certificateOk),this.certRequest=null),!this.certificate)throw new Error("missing certificate");this.getVideoUrlSuccHandler()},u.prototype.onCertificateError=function(e){l.v4log("[fairplay]","onCertificateError()"),this.certRequest&&(this.certRequest.removeEventListener("error",this.evtMap.certificateError),this.certRequest.removeEventListener("load",this.evtMap.certificateOk),this.certRequest=null),this.riseError("error",4)},u.prototype.onVideoWebkitNeedKey=function(e){l.v4log("[fairplay]","onVideoWebkitNeedKey()"),this.$focusVideo.removeEventListener("webkitneedkey",this.evtMap.webkitneedkey);var t,o=(t=e.initData,String.fromCharCode.apply(null,new Uint16Array(t.buffer))).split("skd://")[1].split("?")[0],i=n(e.initData,o,this.certificate);this.keySession=this.createKeySession(i),this.keySession.contentId=o,this.keySession.addEventListener("webkitkeyadded",this.evtMap.webkitkeyadded),this.keySession.addEventListener("webkitkeyerror",this.evtMap.webkitkeyerror),this.keySession.addEventListener("webkitkeymessage",this.evtMap.webkitkeymessage)},u.prototype.createKeySession=function(e){if(l.v4log("[fairplay]","createKeySession()"),!this.$focusVideo.webkitKeys){if(!window.WebKitMediaKeys.isTypeSupported(o,"video/mp4"))throw new Error("Key System not supported");this.$focusVideo.webkitSetMediaKeys(new window.WebKitMediaKeys(o))}if(!this.$focusVideo.webkitKeys)throw new Error("Could not create MediaKeys");var t=this.$focusVideo.webkitKeys.createSession("video/mp4",e);if(!t)throw new Error("Could not create key session");return t},u.sptEme=function(){return!!window.WebKitMediaKeys&&!!window.WebKitMediaKeys.isTypeSupported(o,"video/mp4")},u.prototype.init=function(e,t,o,i){this.reset(),this.context=e,this.getinfoJSON=t,this.getVideoUrlSuccHandler=o,this.extraParam=i;var n,r,a=this.extraParam.ckc,s=this.extraParam.fmt,c=this.getinfoJSON.vl.vi[0].vid,d=this.getinfoJSON.vl.vi[0].lnk;u.sptEme()?(this.context.config.playerType="safarihls",this.context.dataset.useChromeHls=!1,this.context.dataset.useHls=!0,(n=a.split("|"))&&2<=n.length?(this.context.dataset.ckc=n[0],this.context.dataset.certUrl=n[1],this.licenseRequestParam={assetId:d||c,spc:"",vid:this.context.dataset.vid,fmt:s,ip:this.getinfoJSON.ip,platform:this.context.dataset.platform,uin:l.getUin(),openid:l.cookie.get("openid"),guid:this.context.dataset.guid,version:1,iosVersion:"11.0"},r=this.context.dataset.$videomod.find("video"),this.$focusVideo=r[0].isFocus?r[0]:r[1],this.$focusVideo.addEventListener("webkitneedkey",this.evtMap.webkitneedkey),this.certificate?this.onCertificateOk():this.fetchCertificate()):this.riseError("error",2)):this.context.dataset.isDefinitionSwitching&&this.context.dataset.vid===c?this.riseError("switchDrmDefinitionError"):this.riseError()},u.prototype.riseError=function(e,t){e=e||"error",t=t||1,this.context.msg.broadcast(e,{type:"hls",errCode:"-11111."+t,code:-11111,exem:-1*t})},u.prototype.fetchCertificate=function(){l.v4log("[fairplay]","fetchCertificate()"),this.certRequest=new XMLHttpRequest,this.certRequest.responseType="arraybuffer",this.certRequest.addEventListener("error",this.evtMap.certificateError),this.certRequest.addEventListener("load",this.evtMap.certificateOk),this.certRequest.open("GET",this.context.dataset.certUrl,!0),this.certRequest.send()},u.prototype.reset=function(){this.certRequest&&(this.certRequest.removeEventListener("error",this.evtMap.certificateError),this.certRequest.removeEventListener("load",this.evtMap.certificateOk),this.certRequest.abort(),this.certRequest=null),this.licenseRequest&&(this.licenseRequest.abort&&this.licenseRequest.abort(),this.licenseRequest=null),this.$focusVideo&&(this.$focusVideo.removeEventListener("webkitneedkey",this.evtMap.webkitneedkey),this.$focusVideo=null),this.keySession&&(this.keySession.removeEventListener("webkitkeyadded",this.evtMap.webkitkeyadded),this.keySession.removeEventListener("webkitkeyerror",this.evtMap.webkitkeyerror),this.keySession.removeEventListener("webkitkeymessage",this.evtMap.webkitkeymessage))},u.prototype.destroy=function(){this.reset(),this.context.dataset.fairplay=null,this.context=null,this.getVideoUrlSuccHandler=null,this.certificate=null,this.licenseRequestParam=null,this.keySession=null},e.exports=u},454:function(e,t,o){var a=Txplayer.util;Txplayer.$,o(28);e.exports={calcCurrentTime:function(){if("film"!=this.context.dataset.currentPlayListType)return 0;var o=this.context.dataset.playListIndex;this.context.dataset.filmVideoData&&o>=this.context.dataset.filmVideoData.length&&(o=0);var i=0;return Txplayer.$(this.context.dataset.filmVideoData).each(function(e,t){return!(o<=e)&&void(i+=t.duration)}),i+=parseInt(this.context.dataset.videoCurrentTime),parseInt(i)},updateCurrentTime:function(e){"number"===Txplayer.$.type(e)&&(this.context.dataset.currentTime=parseInt(a.getHlsAdOffsetTime(e,this.context),10),this.context.dataset.currentTimeWithHlsAd=parseInt(e,10))},getVideoSeekToInfo:function(o){var i=0,n=0;return this.context.dataset.useHls||Txplayer.$(this.context.dataset.filmVideoData).each(function(e,t){if(n=e,i+=t.duration,o<=i)return i-=t.duration,!1}),{index:n,prevDurtion:i}},showUIVipGuide:function(e){if(!this.context.dataset.hasCallShowUIVipGuide){this.context.dataset.hasCallShowUIVipGuide=!0;var t=this;setTimeout(function(){t.context.dataset.hasCallShowUIVipGuide=!1},3e3);var o={trial:{trialFinish:!0},switchDef:{switchDefinitionFail:!0,defn:this.context.dataset.targetDefn}};this.pauseControl(),a.v4log("showUIVipGuide",o[e]),this.context.msg.broadcast("showUIVipGuide",o[e]);try{this.context.userMsg.broadcast("showUIVipGuide",o[e])}catch(e){a.v4log("showUIVipGuide evt: ",e)}this.context.dataset.isBrowserFullscreen&&this.context.msg.broadcast("exitBrowserFullscreen"),this.context.dataset.isWindowFullscreen&&this.context.msg.broadcast("exitWindowFullscreen")}},showDujiaDialog:function(){},showUnOfficialLimitTips:function(){var e,t,o,i;this.context.config.official&&"nintendo"!==this.context.config.playerType||this.context.dataset.canPlayTime&&4!=this.context.dataset.getinfoJSON.exem&&(e=Txplayer.util.getTxVideoPageURLByVid(this.context.dataset.vid,0),i=(t=this.context.dataset.canPlayTime||0)-60*(o=Math.floor(t/60)),this.context.msg.broadcast("showUnOfficialLimitTips",{min:o,sec:i,href:e}))},getSkipPreludeTime:function(){var e=this.context.dataset.skipPrelude?parseInt(this.context.dataset.playStartTime):0;return e},checkLanguageSwitch:function(e){var t,o,i=a.getSessionData(Txplayer.dataset.sessionStorageKey.languageSwitch),n="";try{i&&0<(i=i.split("|")||[]).length&&(t=i[0],i[1],o=i[2],(new Date).getTime()-o<3e4?t===e.vid&&(n="page_langSwitch"):a.delSessionData(Txplayer.dataset.sessionStorageKey.languageSwitch));var r=this.context.dataset.adext||"";n?0===r.length?r=n:-1===r.indexOf("page_langSwitch")&&(r=r+"|"+n):r=r.replace(/\|?page\_langSwitch/g,""),this.context.dataset.adext=r}catch(e){}},getDuration:function(){var e=0;return this.context.dataset.getinfoJSON&&this.context.dataset.getinfoJSON.vl&&this.context.dataset.getinfoJSON.vl.vi&&this.context.dataset.getinfoJSON.vl.vi[0]&&this.context.dataset.getinfoJSON.vl.vi[0].td&&(e=parseFloat(this.context.dataset.getinfoJSON.vl.vi[0].td)),parseFloat(e)},getFileSize:function(){if(!this.context.dataset.filmVideoData||"array"!==Txplayer.$.type(this.context.dataset.filmVideoData))return 0;var o=0;return Txplayer.$(this.context.dataset.filmVideoData).each(function(e,t){o+=parseInt(t.bytesTotal)}),parseInt(o/1024)},getVideoSize:function(){return{width:this.context.dataset.videoWidth,height:this.context.dataset.videoHeight}},getVideoType:function(){return this.context.config.videoType},getPlayerType:function(){return this.context.config.playerType},getCurrentTime:function(){return this.context.dataset.currentTime||0},getCurrentTimeWithHlsAd:function(){return this.context.dataset.currentTimeWithHlsAd||0},getBufferedTime:function(){return this.context.dataset.bufferedTime||0},getVid:function(){return this.context.dataset.vid},getCid:function(){return this.context.dataset.cid},getColumnId:function(){return this.context.dataset.columnId},isSmallWindowMode:function(){return!!this.context.dataset.isSmallWindowMode},callPlayerExtendMethod:function(){var e=Array.prototype.slice.call(arguments,0),t=e.shift();if(t)switch(e.length){case 1:try{this.context.msg.broadcast(t,e[0])}catch(e){}break;case 2:try{this.context.msg.broadcast(t,e[0],e[1])}catch(e){}break;default:try{this.context.msg.broadcast(t,e)}catch(e){}}},setPlayerVipStatus:function(e){this.context.config.show1080p=!!e},getDefinitionList:function(){return[]},seekRight:function(e){var t=5;"number"===Txplayer.$.type(e)&&(t=e);var o,i=this.context.dataset.duration;i&&(o=this.getCurrentTimeWithHlsAd(),i<(o+=t)||this.seekTo(o))},seekLeft:function(e){var t,o=5;"number"===Txplayer.$.type(e)&&(o=e),this.context.dataset.duration&&(t=this.getCurrentTimeWithHlsAd(),(t-=o)<0||this.seekTo(t))},togglePlayPause:function(){this.context.dataset.disableHotKey||(1===this.context.dataset.playState?(this.pauseControl(),this.context.msg.broadcast("userPausePlayer")):(this.playControl(),this.context.msg.broadcast("userPlayPlayer")))},getUserPayStatus:function(){var e=null;return this.context.dataset.getinfoJSON&&this.context.dataset.getinfoJSON.vl&&this.context.dataset.getinfoJSON.vl.vi&&this.context.dataset.getinfoJSON.vl.vi.length&&this.context.dataset.getinfoJSON.vl.vi[0]&&(e=this.context.dataset.getinfoJSON.vl.vi[0].ch),e},setSmallWindowMode:function(e){this.context&&(this.context.dataset.isSmallWindowMode=!!e,this.context.msg.broadcast("smallWindowModeChange",{isSmallWindow:!!e}))},closeLoginGuide:function(e){if(Txplayer.util.v4log("closeLoginGuide",e),this.context.dataset.disableHotKey=!1,e)if(e.success)if(e.isVip){this.context.msg.broadcast("definitionChange","shd");try{this.context.userMsg.broadcast("definitionChange",{definition:"shd"})}catch(e){}}else this.context.msg.broadcast("definitionChange","shd"),this.context.msg.broadcast("set720pWhenLogin");else this.context.msg.broadcast("closeLoginGuide"),this.context.msg.broadcast("play")}}},455:function(e,t){var n=Txplayer.util;e.exports={retryUrlsWhenErr:function(e){n.v4log("retryUrlsWhenErr",e);var t=this,o=e.currentTime,i=e.index;if(t.context.dataset.urlIndex++,t.context.dataset.filmVideoData&&!(i>=t.context.dataset.filmVideoData.length))if(t.context.dataset.urlIndex>=t.context.dataset.filmVideoData[i].urlArray.length&&(t.context.dataset.urlIndex=0),!0===t.context.dataset.useHls)e.isFocus?t.context.msg.broadcast("setFocusVideoUrl",{url:t.context.dataset.filmVideoData[i].urlArray[t.context.dataset.urlIndex].url,currentTime:o,autoplay:!0}):t.context.msg.broadcast("setPreloadVideoUrl",{url:t.context.dataset.filmVideoData[i].urlArray[t.context.dataset.urlIndex].url,currentTime:o,autoplay:!1});else{if(n.browser.ie&&0==t.context.dataset.playState)return;e.isFocus&&t.requestVideoNextPartKey(t.context.dataset.filmVideoData[i],t.context.dataset.urlIndex).done(function(e){t.context.msg.broadcast("setFocusVideoUrl",{url:e,currentTime:o,autoplay:!0})})}}}},47:function(e,t,o){var i;function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=(n(i={isUseHls:function(e){return"chromehls"===e.config.playerType},loadSubPlugins:function(e){var t,o,i,n,r=e.context,a=null===(t=r.pluginConfig)||void 0===t||null===(o=t.subPlugins)||void 0===o||null===(i=o.slice)||void 0===i?void 0:i.call(o,0);null!=a&&a.length&&(n={config:r.config,msg:r.msg,userMsg:r.userMsg,dataset:r.dataset,$mod:{$videomod:e.dataset.$videomod}},p.loadPlugins.call(e,a,n))},eventSuffix:".txplayer",getNSEventName:function(e,t){return e+(p.eventSuffix+t.config.playerId)},isTouchPlayer:function(e){return"touch"===e.config.playerType},bindPopupClick:function(t){var o="txp_touch_hide";t.on("click",function(e){-1===e.target.className.indexOf("txp_touch_popup_title")&&(t.addClass(o),setTimeout(function(){t.removeClass(o),t.hide()},300))})},getHlsAdOffsetTime:function(e,t,o){var i=t.dataset.hlsAdTimeRanges;if(!t.dataset.useHls||!i||!i.length)return e;var n=this.isTimeInHlsAdRange(e,t);if(!o&&n)return n;for(var r=0,a=i.length;r<a;r++){var s=i[r],c=s.start,d=s.end;if(!(c<e))break;o?e+=d-c:e-=d-c}return e},parseGetinfoHlsAdRange:function(e){var t=[];if(!e||!e.adpinfo)return t;var o=null;try{o=JSON.parse(e.adpinfo)}catch(e){p.v4log("parseHlsAdRange: adpinfo parse err")}return!o||!o.plugin_info||o.plugin_info.length<=0||o.plugin_info.forEach(function(e){2==+e.optype&&t.push({start_time:e.ad_time,duration:e.ad_dura})}),t},isTimeInHlsAdRange:function(e,t,o){var i=t.dataset.hlsAdTimeRanges;if(!t.dataset.useHls||!i||!i.length)return!1;for(var n=0;n<i.length;n++){var r=i[n];if(r.start<=e&&e<=r.end)return!!o||r.start}return!1},error:function(t){if(window.console&&window.console.error){var e=new Date;t="["+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+"]"+t;try{throw t}catch(e){window.console.error(t)}}},v4log:function(e,t){if(window.console&&window.console.log&&Txplayer&&Txplayer.dataset&&Txplayer.dataset.debug){var o="";try{o=JSON.stringify(t)}catch(e){}Txplayer&&Txplayer.util&&Txplayer.util.localLog(e,o);var i=this.dateFormat("hh:mm:ss:S");window.console.log.apply(window.console,["[v4Txplayer]","["+i+"]"].concat(Array.prototype.slice.call(arguments)))}},log:function(){if(window.console&&window.console.log)try{Txplayer&&Txplayer.dataset&&Txplayer.dataset.debug&&window.console.log.apply&&window.console.log.apply(window.console,arguments)}catch(e){}},showInfo:function(e,t){if(window.console&&window.console.log){var o=0;if("object"===s(t)&&window.JSON&&window.JSON.stringify){try{t=JSON.stringify(t)}catch(e){o=1}if(o)return}var i=this.dateFormat("yyyy-MM-dd hh:mm:ss:S");Txplayer.dataset.logData.push({time:i,info:e,data:t}),p.log("%c[Txplayer]%c["+i+"]%c"+e+": %c \t\t"+t,"color: #aaa","background: #fff; color:#999;","background: #000;color:#fff;","color:green;");var n;Txplayer.dataset.logData&&500<(n=Txplayer.dataset.logData.length)&&(Txplayer.dataset.logData=Txplayer.dataset.logData.slice(n-500,n))}},showError:function(e,t){window.console&&window.console.log&&p.log("%c"+e+": %c "+t,"background: #ccc;color:#fff;","color: red;")},fiddlerLog:function(e){Txplayer&&Txplayer.dataset&&!Txplayer.dataset.debug||("string"!=typeof e&&"number"!=typeof e||(e={a:e}),(new Image).src="http://test.m.v.qq.com/txplayer?"+Txplayer.$.param(e))},cookie:{set:function(e,t,o,i,n){var r,a;return n&&(r=new Date,(a=new Date).setTime(r.getTime()+36e5*n)),document.cookie=e+"="+t+"; "+(n?"expires="+a.toGMTString()+"; ":"")+(i?"path="+i+"; ":"path=/; ")+(o?"domain="+o+";":"domain="+window.location.host+";"),!0},get:function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),o=document.cookie.match(t);return o?o[1]:""},del:function(e,t,o){var i=new Date;i.setTime(i.getTime()-1),document.cookie=e+"=; expires="+i.toGMTString()+";"+(o?"path="+o+"; ":"path=/; ")+(t?"domain="+t+";":"domain="+window.location.host+";")}},object2string:function(e,t){t=void 0!==t?t:"&";var o=[];for(var i in e)o.push(i+"="+e[i]);return o.join(t)},appendParamsToUrl:function(e,t){return-1<e.indexOf("?")?e+="&"+p.object2string(t):e+="?"+p.object2string(t),e},removeUrlParams:function(e){if("string"==typeof e){var t=document.createElement("a");return t.href=e,t.protocol+"//"+t.host+t.pathname}},getRelativeUrl:function(e){if("string"==typeof e){var t,o=document.createElement("a");return o.href=e,t=o.pathname&&"string"==typeof o.pathname?o.pathname:"","//"+o.host+("/"!==t[0]?"/"+t:t)}},loadCss:function(e){var r=Txplayer.$.Deferred(),a=1,i=!1,n=p.getRelativeUrl(e);return Txplayer.$('link[rel="stylesheet"]').each(function(e,t){var o=t.href;if(o&&-1<o.indexOf(n))return!(i=!0)}),i?r.resolve():function o(i){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.onload=function(){r.resolve()},n.onerror=function(e){var t;3<=a?r.reject(e):(a++,n.parentNode.removeChild(n),(t={})["__t"+a]=+new Date,o(p.appendParamsToUrl(i,t)))},n.href=i,Txplayer.$("head")[0].appendChild(n)}(e=p.appendParamsToUrl(e,{_:window.Txplayer&&Txplayer.dataset.ts||+new Date})),r},getDefaultPosterByVid:function(e){return"//shp.qpic.cn/qqvideo_ori/0/{vid}_{index}/0".replace("{vid}",e).replace("{index}","496_280")},getOriginURL:function(e){return"string"!=typeof e?e:e.replace(/\?.+/g,"")},loadScript:function(e){(e=e||{}).onsuccess=e.onsuccess||function(){};var o,t,i=document.createElement("script"),n=document.getElementsByTagName("head")[0],r=/^(?:loaded|complete|undefined)$/;e.url&&(o=p.getOriginURL(e.url),t=function(e){var t;if(Txplayer.dataset.loadScriptDefer&&Txplayer.dataset.loadScriptDefer[o]&&Txplayer.dataset.loadScriptDefer[o].constructor===Array)for(;0<Txplayer.dataset.loadScriptDefer[o].length;)"function"==typeof(t=Txplayer.dataset.loadScriptDefer[o].shift())&&t(e)},Txplayer.dataset.loadScriptDefer&&Txplayer.dataset.loadScriptDefer[o]&&Txplayer.dataset.loadScriptDefer[o].constructor===Array&&Txplayer.dataset.loadScriptDefer[o].length?Txplayer.dataset.loadScriptDefer[o].push(e.onsuccess):(Txplayer.dataset.loadScriptDefer[o]=[e.onsuccess],i.async="async",i.src=e.url,i.charset="utf-8",e.crossorigin&&i.setAttribute("crossorigin","anonymous"),i.onload=i.onerror=i.onreadystatechange=function(){r.test(i.readyState)&&(i.onload=i.onerror=i.onreadystatechange=null,t(!(i=null)))},i.onerror=function(){i.onload=i.onerror=i.onreadystatechange=null,i=null,t(!1)},n.appendChild(i)))},getFlashVersion:function(){var e=Txplayer.dataset.flashVersion;if("0.0.0"!=e)return e;var t=null,o=null,i=[],n="Shockwave Flash",r=navigator,a="application/x-shockwave-flash";if(Txplayer.util.browser.ie)try{(t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))&&(o=t.GetVariable("$version"))&&(o=o.split(" ")[1].split(","),i=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)])}catch(e){}else void 0!==r.plugins&&"object"==s(r.plugins[n])&&(!(o=r.plugins[n].description)||void 0===r.mimeTypes&&r.mimeTypes[a]&&!r.mimeTypes[a].enabledPlugin||(o=o.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),i[0]=parseInt(o.replace(/^(.*)\..*$/,"$1"),10),i[1]=parseInt(o.replace(/^.*\.(.*)\s.*$/,"$1"),10),i[2]=/[a-zA-Z]/.test(o)?parseInt(o.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0));return e=i.join(".")},compareVersion:function(e,t){e=String(e).split("."),t=String(t).split(".");try{for(var o=0,i=Math.max(e.length,t.length);o<i;o++){var n=isFinite(e[o])&&Number(e[o])||0,r=isFinite(t[o])&&Number(t[o])||0;if(n<r)return-1;if(r<n)return 1}}catch(e){return-1}return 0},isFlashFit:function(){return-1<this.compareVersion(this.getFlashVersion(),"10.0")},getJsonpCallbackName:function(e){return["txplayerJsonpCallBack",e,parseInt(1e6*Math.random())].join("_")},getStdfrom:function(e,t){if(t&&t.platId&&this.platformMap[t.platId])return this.platformMap[t.platId].stdfrom;if(e&&"70201"==e)return"v1104";if(e&&"70901"==e)return"v1103";if(e&&"3670201"==e)return"v1105";if(e&&"40201"==e)return"v1107";if(e&&"570201"==e)return"v1005";if(e&&"5230201"==e)return"v1008";if(e&&"5410201"==e)return"v1012";if(e&&"700201"===e)return"v1015";var o="view.inews.qq.com"===location.hostname;return-1<location.hostname.indexOf("caixin.com")?"v1093":Txplayer.util.mobile||"ke.qq.com"!==location.hostname?Txplayer.util.os.iphone||Txplayer.util.os.ipod?o?"v3110":"v3010":Txplayer.util.os.ipad?o?"v4110":"v4010":Txplayer.util.os.android?Txplayer.util.os.tablet?"v6010":o?"v5110":"v5010":Txplayer.util.browser.IEMobile?"v7010":"v1010":"v1101"},getDeviceId:function(){var e=navigator.userAgent;return p.os.ipad?1:p.os.windows?/Touch/i.test(e)?8:/Phone/i.test(e)?7:2:p.os.android?p.mobile?3:5:p.os.iphone?4:p.os.mac?9:10},getBusinessId:function(){if(p.browser.wechat)return 6;if(p.browser.mqq)return 17;var e,t,o="";!/^http(s?):\/\/v\.qq\.com\/(iframe\/txp|txp\/iframe)/.test(location.href)||window==top||""!==(e=document.referrer)&&((t=document.createElement("a")).href=e,o=t.hostname,t=null),""===o&&(o=document.location.hostname||document.location.host);for(var i=[{r:/(\w+\.)?weixin\.qq\.com$/i,v:6},{r:/^(v|film)\.qq\.com$/i,v:1},{r:/^news\.qq\.com$/i,v:2},{r:/(\w+\.)?qzone\.qq\.com$/i,v:3},{r:/(\w+\.)?t\.qq\.com$/i,v:5},{r:/^3g\.v\.qq\.com$/i,v:8},{r:/^m\.v\.qq\.com$/i,v:10},{r:/3g\.qq\.com$/i,v:12}],o=o.toLowerCase(),n=0,r=i.length;n<r;n++){var a=i[n];if(a.r.test(o))return a.v}return 7},getPlatform:function(){return 1e4*p.getBusinessId()+100*p.getDeviceId()+1},getDeviceCode:function(){var e=0;return p.os.iphone?e=2:p.os.ipad?e=3:p.os.android&&p.phone&&(e=1),e},getPlatformCode:function(){var e=0;return p.browser.wechat?e=1:p.browser.mqq?e=2:p.browser.mqqbrowser&&(e=3),e},isQQBuLuoHost:function(){return!(!Txplayer.util.browser.MQQClient||"xiaoqu.qq.com"!==window.location.hostname&&"buluo.qq.com"!==window.location.hostname)},isSupportApp:function(){return!!(p.os.iphone||p.os.ipod||p.os.ipad)||!!p.os.android},getMobileVideoPosterByVid:function(e,t){var o=["496_280","360_204","228_128"];return o.length<=(t=void 0!==t?t:2)&&(t=o.length-1),"//shp.qpic.cn/qqvideo_ori/0/{vid}_{index}/0".replace("{vid}",e).replace("{index}",o[t])},getPcVideoPosterByVid:function(e,t){if(t=t||".png",!e)return"";return"//vpic.video.qq.com/"+function(e){for(var t=0,o=0;o<e.length;o++)t=(t<<5)+t+e.charCodeAt(o);return t%1e8}(e)+"/"+e+t},getHostNameByUrl:function(e){e=e||location.href;var t=document.createElement("a");return t.href=e,t.hostname},getQQFromCookie:function(){var e=p.cookie.get("luin")||p.cookie.get("uin");return e=e&&e.replace(/\D/g,"").replace(/^0+/,"")},createGUID:function(e){e=e||32;for(var t="",o=1;o<=e;o++){t+=Math.floor(16*Math.random()).toString(16)}return t},getSessionData:function(e){try{if(window.sessionStorage)return window.sessionStorage[e]}catch(e){}},setSessionData:function(e,t){try{window.sessionStorage&&(window.sessionStorage[e]=t)}catch(e){}},delSessionData:function(e){try{if(window.sessionStorage)return window.sessionStorage.removeItem(e)}catch(e){}},getData:function(e){var t="";try{window.localStorage&&(t=window.localStorage[e])}catch(e){}return t},setData:function(e,t){try{window.localStorage&&(window.localStorage[e]=t)}catch(e){}},delData:function(e){try{window.localStorage&&window.localStorage.removeItem(e)}catch(e){}},isSupportM3u8:function(){var e=document.createElement("video"),t=["application/x-mpegURL","audio/mpegurl","vnd.apple.mpegURL","application/vnd.apple.mpegURL"],o=!1;if("function"==typeof e.canPlayType)for(var i=0,n=t.length;i<n;i++)if(e.canPlayType(t[i])){o=!0;break}return e=null,o},isSupportChromeHls:function(e){if("1"===this.getUrlParam("debugp2p"))return!0;var t=!1;e&&(t=!!e.official);var o=e&&-1<this.inArray(["10201","70201","3670201","10901","70901","40201"],""+e);window.MediaSource=window.MediaSource||window.WebKitMediaSource;var i=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,n=!i||i.prototype&&"function"==typeof i.prototype.appendBuffer&&"function"==typeof i.prototype.remove,r=window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');return(t||o)&&r&&n},isSupportSafariHls:function(e){return e&&-1<this.inArray(["10201","70201","3670201","10901","70901","40201"],""+e)&&p.os.mac&&p.browser.safari&&0<=p.compareVersion(p.browser.safari.version,7)},isSupportMP4:function(){if(p.os.windows&&p.browser.pcqqlive&&50171110<=p.browser.pcqqlive.version)return!0;var e=document.createElement("video");return"function"==typeof e.canPlayType&&("probably"==e.canPlayType('video/mp4; codecs="avc1.42E01E"')||"probably"==e.canPlayType('video/mp4; codecs="avc1.58A01E"')||"probably"==e.canPlayType('video/mp4; codecs="avc1.4D401E"')||"probably"==e.canPlayType('video/mp4; codecs="avc1.64001E"'))},isSupportSVG:function(){return!(!document.implementation||!Txplayer.$.isFunction(document.implementation.hasFeature))&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},isSupportMute:function(){return!Txplayer.util.ios&&!Txplayer.util.mobile},isUseH5Type:function(){return p.mobile&&!p.os.ipad},canUseTxplayerHTML5:function(){return!(!p.browser.ie||"edge"!==p.browser.ie.version)||!(p.browser.ie&&p.compareVersion(p.browser.ie.version,"10.0")<0)&&!!p.isSupportMP4()},getDomNodeOffsetInPage:function(e){for(var t=e.offsetLeft,o=e.offsetTop,i=e.offsetParent;null!==i;)t+=i.offsetLeft,o+=i.offsetTop,i=i.offsetParent;return{x:t,y:o}},whenWechatIsReady:function(e){var t=Txplayer.$.Deferred(),o=e.timeout||5e3;return Txplayer.util.browser.wechat&&("undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.on?t.resolve():(document.addEventListener("WeixinJSBridgeReady",function(){t.resolve()}),setTimeout(function(){t.reject()},o))),t},getMainHostName:function(){var e=window.location.hostname||window.location.host,t=location.host.split(".");return 1<t.length&&(e=t.slice(t.length-2).join(".")),e},getUrlParam:function(e,t){t=t||document.location.toString();var o=new RegExp("(^|&|\\\\?)"+e+"=([^&]*)(&|$|#)"),i=null;return(i=t.match(o))?i[2]:""},getAdChannelId:function(e){var t="";return/ptag=wx\.search/i.test(location.href)?64:e&&e.hasOwnProperty("chid")&&""!=e.chid?e.chid:(/(.*\.)3g\.qq\.com$/i.test(window.location.hostname)?t=13:/(.*\.)?v\.qq\.com$/i.test(window.location.hostname)||p.browser.qqlive?t=p.browser.wechat&&p.mobile?180:0:p.browser.wechat&&-1<window.location.href.indexOf("/x/qqnews/")?t=3:p.browser.mqq&&-1<window.location.href.indexOf("/x/qqnews/")?t=10:p.browser.qqnews&&(t=2),t)},insert2Array:function(e,t,o){if(t>o.length)return o;var i=o.slice(0,t),n=o.slice(t,o.length);return[].concat(i,e,n)},formatPlayTime:function(e){if("string"==typeof e&&(e=parseInt(e)),"number"==typeof e){e=parseInt(e);function t(e){return e<10?"0"+e:e}var o=parseInt(e/3600),i=parseInt((e-3600*o)/60),n=parseInt(e-3600*o-60*i);return 0===o?[t(i),t(n)].join(":"):[o,t(i),t(n)].join(":")}},dateFormat:function(e,t){e=e||"yyyy-MM-dd hh:mm:ss";var o={"M+":(t=t||new Date).getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),o)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?o[i]:("00"+o[i]).substr((""+o[i]).length)));return e},isTencentDomain:function(e){if("qq.com"===(e=e||document.domain))return!0;var t=e.split(".");return!!(t&&2<t.length)&&("qq"===t[t.length-2]&&"com"===t[t.length-1])},isVqqOrFilmqq:function(){return"v.qq.com"===location.hostname||"film.qq.com"===location.hostname},loadPlugins:function(e,s,c,d){var l,i,t;function u(){var o,i,n,e,t,r;function a(e){function t(){if(1<=n)return p.showError("plugin load failed",i),s&&s.msg&&s.msg.broadcast&&(s.msg.broadcast("reportPluginLoadError",{name:o,url:i,requestStartTime:r}),s.dataset&&!s.dataset.errorCodeOfStep5&&-1<p.inArray(["HdPlayer","HdPlayerControl","HtmlFrame","v4HdPlayer","v4HdPlayerControl","H5HtmlFrame","H5Player","H5PlayerControl"],o)&&(e="62",Txplayer.util.os.windows&&(e="61"),"h5"!==s.config.playerType&&"h5tiny"!==s.config.playerType||(e="64"),s.dataset.errorCodeOfStep5=e+"200.10002",s.msg.broadcast("reportPluginLoadError",{name:o,url:i,requestStartTime:r,step:50,bossid:4501,code:s.dataset.errorCodeOfStep5})),Txplayer.util.localLog("PLUGINS_LOAD_ERROR",{name:o,url:i})),u(),0;var e;n++,a()}i&&-1===i.indexOf("_ts=")&&(-1<i.indexOf("?")?i+="&_ts="+Txplayer.dataset.ts||!1:i+="?_ts="+Txplayer.dataset.ts||!1),p.loadScript({url:i,crossorigin:!!e,onsuccess:function(e){e?(f(o),"TxpCreativePlayer"===o&&(Txplayer.dataset.isReadyPlugins.push(o),s.msg&&s.msg.broadcast&&s.msg.broadcast("pluginReady",{name:o}),s.userMsg&&s.userMsg.broadcast&&s.userMsg.broadcast("pluginReady",{name:o}))):t()}})}0!==l.length?(o=l.shift(),n=0,e=s.config&&s.config.loadPluginCrossOrigin,t=o.toLowerCase()+".js",r=+new Date,Txplayer&&Txplayer.hashMaps&&Txplayer.hashMaps[t]&&(t=Txplayer.hashMaps[t]),c&&c.hasOwnProperty(o)&&c[o].url&&(i=c[o].url,e=!1),i=i||Txplayer.dataset.jsBasePath+"plugins/"+t,Txplayer.plugins.hasOwnProperty(o)?f(o):"TxpCreativePlayer"===o?(i="//vm.gtimg.cn/tencentvideo/txpv5/creative/plugins/txp-creative-player."+Txplayer.appVersion+".js",void 0!==window.TxpCreativePlayer?(f(o),Txplayer.dataset.isReadyPlugins.push(o),s.msg&&s.msg.broadcast&&s.msg.broadcast("pluginReady",{name:o}),s.userMsg&&s.userMsg.broadcast&&s.userMsg.broadcast("pluginReady",{name:o})):a(e)):a(e)):d()}function f(e){Txplayer.dataset.pluginsLoadTime=Txplayer.dataset.pluginsLoadTime||[],Txplayer.dataset.pluginsLoadTime.push(e+":"+Txplayer.util.dateFormat("yyyy-M-d h:m:s:S")),(t=function(t){var o;if(!Txplayer.plugins.hasOwnProperty(t))return!1;c[t]?s.pluginConfig=c[t]:s.pluginConfig={};try{i["_"+t]||(i["_"+t]=new Txplayer.plugins[t](s),Txplayer.dataset.isReadyPlugins.push(t),s.msg&&s.msg.broadcast&&s.msg.broadcast("pluginReady",{name:t}),s.userMsg&&s.userMsg.broadcast&&s.userMsg.broadcast("pluginReady",{name:t}))}catch(e){o=e.message,p.showError("JS\u6709\u5f02\u5e38:"+t,o),p.log(e.stack),s.msg.broadcast&&s.msg.broadcast("reportError",{msg:o,code:Txplayer.define.reportCode.JS_ERROR,stack:e.stack})}-1==t.indexOf("HtmlFrame")&&function(n,r,a){n&&(n.addDestroyToPlugin=function(){var i=this.context.superMsg||this.context.msg;i.on("destroyPlugin",function(e,t){var o;e&&e!==r||("function"===Txplayer.$.type(n.remove)&&n.remove(),n&&n.dataset&&(n.dataset.moduleApis||n.dataset.privateApis||n.dataset.eventsList)&&(n.dataset.moduleApis&&Txplayer.$.each(n.dataset.moduleApis,function(e,t){i.off(e)}),n.dataset.privateApis&&Txplayer.$.each(n.dataset.privateApis,function(e,t){i.off(e)}),n.dataset.eventsList&&Txplayer.$.each(n.dataset.eventsList,function(e,t){i.off(e)})),n&&n.dataset&&Txplayer.$.each(n.dataset,function(e,t){/_TIMER/.test(e)&&t&&(clearInterval(t),clearTimeout(t))}),o=p.eventSuffix+n.context.dataset.playerId,$(window).off(o),$("body").off(o),$(document).off(o),"function"==typeof n.destroy&&n.destroy(),Object.keys(n).forEach(function(e){return delete n[e]}),delete a["_"+r])})},n.addDestroyToPlugin())}(i["_"+t],t,i);return i["_"+t]}(e))&&t.done&&t.fail?t.done(function(){u()}):u()}c=c||{},d=d||function(){},p.isArray(e)?s?(l=(e=p.filterByArray(e,s&&s.config&&s.config.removePluginsList?s.config.removePluginsList:[])).slice(0),i=this,u()):p.showError("loadPlugins error","context\u662f\u5fc5\u8981\u53c2\u6570"):p.showError("loadPlugins error","plugins\u7684\u53c2\u6570\u5e94\u8be5\u662f\u6570\u7ec4")},getUniqueMsgKey:function(e){return e+"."+p.createGUID()},getTxVideoPageURLByVid:function(e,t,o){if(t="0"!=t?"_"+t:"",!e)return"";var i="//v.qq.com/page/"+e.substr(0,1)+"/"+e.substr(e.length-2,1)+"/"+e.substr(e.length-1,1)+"/"+e+t+".html";return o&&(i+="?start="+parseInt(o)),i},getBrowserBrand:function(){var e=Txplayer.util.browser,t="";return e.qqbrowser?t="qqbrowser":e.chrome?t="chrome":e.firefox?t="firefox":e.safari?t="safari":e.ie&&(t=e.ie.version?(e.ie.version+="","ie"+e.ie.version.split(".").shift()):"ie"),t},xss:function(e){return"string"!=typeof e?e:e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")},isInScreen:function(e){if(p.mobile)return!1;var t=Txplayer.$(window),o={top:t.scrollTop(),left:t.scrollLeft()};o.right=o.left+t.width(),o.bottom=o.top+t.height();var i,n=Txplayer.$(e),r=n.offset(),a=window.Zepto?(i=n.width(),n.height()):(i=n.outerWidth(),n.outerHeight());return r.right=r.left+i,r.bottom=r.top+a,!(o.right<r.left||o.left>r.right||o.bottom<r.top||o.top>r.bottom)},getPageVisibilityAttribute:function(){var e="hidden",t="visibilitychange";return void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hidden:e,visibilityChange:t}},addPageVisibilityChangeEvent:function(e){var t=this.getPageVisibilityAttribute();Txplayer.$(document).on(t.visibilityChange,function(){e&&e(!!document[t.hidden])})},isPageHidden:function(){var e=this.getPageVisibilityAttribute();return document[e.hidden]},getPTAG:function(){for(var e,t=this.getUrlParam,o=this.getDomainOfURL,i=Txplayer.$,n=this.cookie,r=document.location.toString().toLowerCase(),a="",s=["ptag","adtag","pgv_ref"],c=0,d=s.length;c<d&&!(a=t(s[c],r));c++);if(!a)try{a=sessionStorage.getItem("ptag")}catch(e){}return a||(e=o(document.referrer))&&-1===i.inArray(e,["v.qq.com","film.qq.com","m.v.qq.com"])&&(a=e.replace(/\./g,"_")),a=a||n.get("ptag")},getDomainOfURL:function(e){if(void 0===e||null==e||""==e)return"";var t=document.createElement("a");return t.href=e,t.hostname},getProtocolOfURL:function(e){e=e||location.href,(o=document.createElement("a")).href=e;var t=o.protocol.replace(":",""),o=null;return t},getTimeStampStr:function(e){e=e||10;var t=parseInt(+new Date)+"";if(t.length===e)return t;if(t.length>e)return t.substring(0,e);for(var o=e-t.length;0<o;)t="0"+t,o--;return t},extend:function(){var e=arguments;if(!(e.length<=1)){if(2===e.length){for(var t in e[1])e[0][t]=e[1][t];return e[0]}for(var o=e.length-1,i=e.callee;0<o;o--)e[o-1]=i(e[o-1],e[o]);return e[0]}},inArray:function(e,t){var o=-1;if("object"===s(e)&&e.constructor===Array&&e.length)for(var i=0,n=e.length;i<n;i++)if(e[i]===t){o=i;break}return o},isArray:function(e){return"object"===s(e)&&e.constructor===Array},param:function(e){var t=[];for(var o in e)t.push(o+"="+e[o]);return t.join("&")},getUin:function(e){var t,o=this.cookie.get("skey"),i=(this.cookie.get("lskey"),"");return""==o?0:(""==(i=this.cookie.get("uin"))&&e&&(i=this.cookie.get("luin")),t=parseInt(i.replace(/^o0*/g,""),10),isNaN(t)||t<=1e4?0:t)},getParams:function(e){for(var t,o,i=e.indexOf("?"),n=e.substring(i+1),r=/\w+=[^&]+/g,a={};null!==(t=r.exec(n));)2<=(o=t[0].split("=")).length&&(a[o.shift()]=o.join("="));return a},removeArrayItem:function(e,t,o){return void 0===o&&(o=1),"object"!==s(e)||e.constructor!==Array||t<0||e.splice(t,o),e},filterByArray:function(e,t){if(!p.isArray(e)||!Txplayer.util.isArray(e))return e;for(var o=[],i=0,n=e.length;i<n;i++)-1===p.inArray(t,e[i])&&o.push(e[i]);return o},trigger:function(e,t){var o;if(!window.jQuery||!jQuery().trigger)return document.createEventObject?(o=document.createEventObject(),e.fireEvent("on"+t,o)):((o=document.createEvent("HTMLEvents")).initEvent(t,!0,!0),!e.dispatchEvent(o));jQuery(document).trigger("TxPlayerJSBrageReady")},getPlayerPageUrl:function(){var t="";if(top!==window)try{t=top.location.href}catch(e){t=document.referrer}else t=location.href;return t},getTopFrameUrl:function(){var t="";if(top!==window)try{t=top.location.href}catch(e){t=document.referrer}else t=window.location.href;return t},getReportUA:function(){var e=navigator.userAgent;return e=e&&e.replace(/\$/g," ").replace(/\,/g," ")},getFormatUA:function(){var e="other";return p.browser.qqlive&&(p.os.iphone?e="iphone_qqlive":p.os.android&&(e="aphone_qqlive")),e},formatDownloadSpeed:function(e){return"number"!=typeof e||(e<0&&(e=0),1024<e?e=parseInt(10*e/1024)/10+"MB/s":e+="KB/s"),e},platformMap:{qzone_feed:{platform:"30201",stdfrom:"v1106"},beijing2022:{platform:"2270201",stdfrom:"v1004"}},getPcPlatformId:function(e){if(p.mobile)return"11001";if(e.platId&&this.platformMap[e.platId])return this.platformMap[e.platId].platform;if(p.isNews())return"20701";if(e&&"coolOpen"==e.originalPlayerType)return"3670201";if(e.eduext||"260001"===e.authfrom)return p.mobile?"261001":"260201";if(p.inWhichDomain("sportscom"))return"40201";if(p.inWhichDomain("kuaibao"))return"570201";if(p.inWhichDomain("wegame"))return"5230201";if(p.testTopUrl("lol"))return"700201";var t=!e.official;return p.os.windows?t?"70201":"10201":p.os.mac?t?"70901":"10901":t?70901:10901},getUTCTime:function(){var e=new Date,t=60*e.getTimezoneOffset()*1e3;return e.setTime(e.getTime()+t),e.getTime()},localTimeStr2UTC:function(e){if("number"!==Txplayer.$.type(e))return e;var t=new Date,o=60*t.getTimezoneOffset()*1e3;return t.setTime(e+o),t.getTime()},getLoginID:function(){var e=Txplayer.util.cookie.get("main_login");Txplayer.util.getQQFromCookie()&&(Txplayer.util.cookie.get("skey")||Txplayer.util.cookie.get("lskey"))&&(e="qq");var t="",o="";return"wx"==e?(e="wxid",t=Txplayer.util.cookie.get("openid"),o=Txplayer.util.getQQFromCookie()):"qq"==e&&(t=Txplayer.util.getQQFromCookie(),o=Txplayer.util.cookie.get("openid")),{mainLogin:e,logintype:{qq:1,wx:2}[e]||0,loginId:t,loginIdEx:o}},random:function(e,t){return parseInt(Math.random()*(e-t)+t)},realRandom:function(e,t){return Math.floor(Math.random()*(t+1-e))+e},isNewsPlugin:function(){return"m.v.qq.com"==window.location.host&&-1<window.location.href.indexOf("/x/qqnews/")},isNews:function(){return"view.inews.qq.com"===window.location.hostname},getChance:function(e){return this.realRandom(1,100)<=e},getP2pConfig:function(e){var o=[];return Txplayer.$.each(e.dataset.filmVideoData[0].urlArray,function(e,t){o.push(t.url||"")}),{playerVer:e.dataset.testVer,guid:e.dataset.guid,isCharge:e.dataset.isNeedPay,osVer:p.os,broVer:p.browser,platform:e.dataset.platform,qq:Txplayer.util.getQQFromCookie(),wx:Txplayer.util.cookie.get("openid"),fp2p:e.dataset.getinfoJSON.fp2p,keyID:e.dataset.getinfoJSON.vl.vi[0].keyid,resolution:e.dataset.currentDefinitionFormat,urls:o}},isChrome56WithBugOfMp4:function(e){return!e.dataset.useHls&&(e.dataset&&e.dataset.filmVideoData&&1<e.dataset.filmVideoData.length&&p.browser.chrome&&0<p.compareVersion(p.browser.chrome.version,"56.0.2924.10"))},tpl:function(e,o){return e.replace(/\$\{(\w+)\}/g,function(e,t){return o[t]||e})},pluginNameToV4:function(e,t){if(t=t||[],0!=(e=e||[]).length&&0!=t.length)for(var o=0,i=t.length;o<i;o++){var n=e.indexOf(t[o].replace(/v4/,""));-1<n&&(e[n]=t[o])}},isInIframe:function(){try{return window.self!==window.top}catch(e){return!0}},inNewIframe:function(){return/http(s)?:\/\/v\.qq\.com\/txp\/iframe\/player\.html/.test(location.href)},getHostname:function(e){var t=document.createElement("a");return t.href=e,t.hostname},testTopUrl:function(e){var t="";try{t=location.href.replace(location.search,""),this.isInIframe()&&(t=this.removeUrlParams(top.location.href||""))}catch(e){}var o={lol:/https?:\/\/lol\.qq\.com\/client\/lcu\/page(.*)/};return!(!o[e]||!t)&&o[e].test(t)},inWhichDomain:function(e){if(!e)return!1;var t={kuaibao:["kuaibao.qq.com","m.gamefeeds.qq.com","kandian.qq.com","mcdn.kandian.qq.com"],tencentcom:["sports.qq.com","ent.qq.com","fashion.qq.com","v.sports.qq.com","kbs.sports.qq.com","astro.fashion.qq.com","vlike.qq.com","news.qq.com","society.qq.com","v.ent.qq.com","v.fashion.qq.com","digi.tech.qq.com","nbachina.qq.com","view.news.qq.com","edu.qq.com","tech.qq.com","auto.qq.com","health.qq.com","sport.qq.com","finance.qq.com","cd.qq.com","new.qq.com","sh.qq.com","gd.qq.com"],qzone:["cm.qzs.qq.com","cn.qzs.qq.com","cnc.qzs.qq.com","ctc.qzs.qq.com","os.qzs.qq.com","qzs.qq.com","shn.photo.qq.com","qzone.qq.com","user.qzone.qq.com","h5.qzone.qq.com"],keqqcom:["ke.qq.com"],yqqcom:["y.qq.com"],wegame:["www.wegame.com.cn","www.wegamex.com.hk","www.wegame.com","plat.tgp.qq.com","game.tgp.qq.com","developer.wegame.com","developer.wegame.com.cn"],gamecom:["cf.qq.com","lpl.qq.com","lol.qq.com","plat.tgp.qq.com"],sportscom:["m.sports.qq.com","sports.qq.com","v.sports.qq.com","kbs.sports.qq.com"],qqcom:/\.qq\.com$/},o=t[e];if(!o)return!1;var i=location.hostname;if(this.isInIframe())try{i=window.top&&window.top.location.hostname}catch(e){}return"qqcom"===e?t[e].test(i):-1<this.inArray(o,i)},safariDisableAutoPlay:function(){var e=location.hostname;if(this.isInIframe())try{e=window.top&&window.top.location.hostname}catch(e){}return this.os.mac&&this.browser.safari&&1<=this.compareVersion(this.browser.safari.version,"11.0")&&-1===this.inArray(["v.qq.com","ke.qq.com","y.qq.com","fudao.qq.com"],e)},browserDisableAutoPlay:function(){var e=window.AudioContext||window.webkitAudioContext,t=Txplayer.util.browser,o=Txplayer.util.compareVersion;if(Txplayer.util.os.mac&&t.safari)return Txplayer.util.safariDisableAutoPlay();if(!Txplayer.util.mobile&&e&&t.chrome&&1<=o(t.chrome.version,"66.0")&&"suspended"===(new e).state)return!0;return!1},getVideoType:function(){var e="";return"v.qq.com"===location.hostname&&(window.COVER_INFO&&window.COVER_INFO.typeid?e=+window.COVER_INFO.typeid:window.VIDEO_INFO&&window.VIDEO_INFO.type&&(e=+window.VIDEO_INFO.type)),e},validVid:function(e){return!e.match(/\W/)&&!e.match(/_/)&&11==e.length},isPageSupportStopAutoPlay:function(){var e=location.protocol+"//"+location.hostname+location.pathname,t=/^http(s?):\/\/v\.qq\.com\/error\.html/.test(e),o=/^http(s?):\/\/v\.qq\.com\/x?\/?(channel)?\/?(movie|sports|finance|news|tech)\/?$/.test(e),i=/^http(s?):\/\/film\.qq\.com\/$/.test(location.href);return o||i||t},preGetMacClientInfo:function(e){function t(t){try{window.TenvideoJSBridge.callHandler("getSystemInfo",{},function(e){e&&Txplayer.util.browser.macqqlive&&(Txplayer.util.browser.macqqlive.version=e.clientVersion,Txplayer.util.browser.macqqlive.deviceUuid=e.deviceUuid,t&&t({version:e.clientVersion,guid:e.deviceUuid}))})}catch(e){}}if(Txplayer.util.os.mac&&Txplayer.util.browser.macqqlive)try{window.TenvideoJSBridge&&window.TenvideoJSBridge.callHandler?t(e):document.addEventListener("onTenvideoJSBridgeReady",function(){window.TenvideoJSBridge&&window.TenvideoJSBridge.callHandler&&t(e)})}catch(e){}},getPcClientGuid:function(){try{if(Txplayer.util.os.windows&&window.external&&"function"==typeof window.external.GetGUID)return window.external.GetGUID()||"";if(Txplayer.util.os.mac&&Txplayer.util.browser.macqqlive)return Txplayer.util.browser.macqqlive.deviceUuid||""}catch(e){}},getPcPlatform:function(){return Txplayer.util.browser.pcqqlive?"pc_client":Txplayer.util.browser.macqqlive?"mac_client":"web"},getQQLiveDeviceInfo:function(e){function t(i){window.TenvideoJSBridge.invoke("getDeviceInfo",null,function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}var t,o=e.result;o?(t=["deviceId="+(o.deviceId||""),"idfa="+(o.idfa||""),"omgid="+(o.omgid||""),"imei="+(o.imei||""),"systemVersion="+(o.systemVersion||"")],i(t.join("&"))):i()})}Txplayer.util.mobile&&Txplayer.util.browser.qqlive?window.TenvideoJSBridge&&TenvideoJSBridge.invoke?t(e):document.addEventListener("onTenvideoJSBridgeReady",function(){window.TenvideoJSBridge&&TenvideoJSBridge.invoke&&t(e)}):e()},imageReport:function(e){var t=document.createElement("img");t.style.width=0,t.style.height=0,document.body.appendChild(t),t.src=e,document.body.removeChild(t)},xhrReport:function(e){var t=e.url||"";/^http(s)?:/.test(t)||(t=location.protocol+t),-1===t.indexOf("_dc")&&(t+="&_dc="+Math.random());var o=new XMLHttpRequest;o.open(e.method||"POST",t),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.withCredentials&&(o.withCredentials=!0),o.send(Txplayer.$.param(e.data))},localLog:function(e,t){if(window._txplayerlocalLogs&&"function"==typeof window._txplayerlocalLogs.addLog)try{window._txplayerlocalLogs.addLog(e,t)}catch(e){}},getPayUrl:function(e,t,o,i){if("qc.vip.qq.com"!=window.location.hostname&&"cdn.vip.qq.com"!=window.location.hostname)return"ad"==e?"//film.qq.com/weixin/upay.html?aid=V0$$4:1":"1080"==e?"//film.qq.com/weixin/upay.html?aid=V0$$4:8":void 0;var n="//film.qq.com/weixin/upay.html?hlwactid=HLW_7354&aid=V0$$11:42";return"ad"==e?n+="$4:1":"1080"==e&&(n+="$4:8"),n+=t?"$6:"+t:"",n+=o?"$5:"+o:"",n+="ios"==i?"$2:8002":"$2:8001"},isSupportEme:!1,supportEmeAsync:function(e){var t=this,o=!(!this.os.android&&!this.os.ios);if(this.mobile||o||e)t.isSupportEme=!1;else if(t.hasWidevineL3Risk())this.isSupportEme=!1;else{var i="txp-spteme",n=void 0!==window.navigator.requestMediaKeySystemAccess&&(void 0!==window.MediaKeys||void 0!==window.WebKitMediaKeys||void 0!==window.MSMediaKeys);if(n)try{navigator.requestMediaKeySystemAccess("com.widevine.alpha",[{initDataTypes:["cenc"],audioCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'video/mp4;codecs="avc1.42E01E"'}]}]).then(function(e){t.isSupportEme=!0,t.setData(i,t.isSupportEme)}).catch(function(e){t.isSupportEme=!1,t.setData(i,t.isSupportEme)})}catch(e){t.isSupportEme=!1,t.setData(i,t.isSupportEme)}else t.isSupportEme=!1,t.setData(i,t.isSupportEme);n&&window.Promise&&t.supportHDCP()}},hasWidevineL3Risk:function(){return this.browser.chrome&&this.compareVersion(this.browser.chrome.version,"89")<0},supportHDCP:function(){var t=this;t.v4log("Requesting Widevine system access..."),navigator.requestMediaKeySystemAccess("com.widevine.alpha",[{initDataTypes:["cenc"],audioCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'video/mp4;codecs="avc1.42E01E"'}]}]).then(function(e){return e.createMediaKeys()}).then(function(e){return t.v4log("Getting HDCP status..."),"getStatusForPolicy"in e?e.getStatusForPolicy({minHdcpVersion:"2.0"}):window.Promise.reject("HDCP Policy Check API is not available.")}).then(function(e){return"usable"!==e?window.Promise.reject(e):(t.isSupportHDCP=!0,void t.v4log("> HDCP is available for 2.0"))}).catch(function(e){t.isSupportHDCP=!1,t.v4log("Argh! "+e)})},fetch:function(e){var t=this,o={method:"GET",mode:"cors"};return e.credentials&&(o.credentials=e.credentials),window.fetch(e.url,o).then(function(){},function(){throw new Error("ERROR!")}).catch(function(){t.requestViaImage(e.url)})},requestViaImage:function(e){var t=document.createElement("img");t.onerror=t.onload=function(){t=null},t.src=e}},"xhrReport",function(e){var t=e.url||"";/^http(s)?:/.test(t)||(t=location.protocol+t),-1===t.indexOf("_dc")&&(t+="&_dc="+Math.random());var o=new XMLHttpRequest;o.open(e.method||"POST",t),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.withCredentials&&(o.withCredentials=!0),o.send(Txplayer.$.param(e.data))}),n(i,"strongReport",function(e){this.xhrReport(e)}),i),r=o(437),a=o(438),c=o(439);r.call(p),p.report=a,p.PAGE_VIDEO_TYPE=c,p.isIE10=!!(p.browser.ie&&0<=p.compareVersion(p.browser.ie.version,"10.0")),e.exports=p},52:function(e,t,o){var r,l,u=o(16).AD_TYPE;function i(e){r=Txplayer.util,l=Txplayer.$,this.context=e,this.dataset={hasRequest:!1,retryTime:0},this.dataset.url="//mark.l.qq.com/fcgi-bin/get_video_mark_all",1==r.getUrlParam("debugvideomark")&&(this.dataset.url="//testmark.l.qq.com/fcgi-bin/get_video_mark_all"),this.context.config.usePreviewDomain&&(this.dataset.url="//mark.cm.com/fcgi-bin/get_video_mark_all"),this.init(),l.jsonp||o(15)}var n=i.prototype;n.init=function(){this.addEventListeners()},n.addEventListeners=function(){var o=this;this.dataset.eventList={},this.dataset.eventList[r.getUniqueMsgKey("vidChange")]=function(e,t){o.dataset.request&&"function"===l.type(o.dataset.request.abort)&&o.dataset.request.abort(),o.dataset.hasRequest=!1,o.dataset.retryTime=0},this.dataset.eventList[r.getUniqueMsgKey("beforeVideoRePlay")]=function(){o.dataset.request&&"function"===l.type(o.dataset.request.abort)&&o.dataset.request.abort(),o.dataset.hasRequest=!1,o.dataset.retryTime=0},l.each(this.dataset.eventList,function(e,t){o.context.msg.on(e,t)})},n.requestVideoMark=function(){var e,t,o,i,a,s,c,d=this,n=this.context.dataset.vid;(this.context.config.usePreviewDomain||"v.qq.com"===location.hostname&&this.context.config.official)&&(this.dataset.hasRequest||(this.dataset.hasRequest=!0,e="txplayer_get_video_mark_all",(t=this.context.adApi.getAdRequestParam("VIDEO_MARK")).url=encodeURIComponent(t.url),t.refer=encodeURIComponent(t.refer),t.vptag=encodeURIComponent(t.vptag),t.anchor=1,this.context.dataset.adExtras.adsid&&(t.session_id=this.context.dataset.adExtras.adsid),o={idlist:n,pr:1,otype:"json",strAdParam:r.param(t),callback:e},(i=this.context.dataset.getinfoHlsAdSegments)&&0<i.length&&(o.adsegments=JSON.stringify({ad_segments:i})),this.context.dataset.cid&&(o.cid=this.context.dataset.cid),this.context.dataset.columnId&&(o.lid=this.context.dataset.columnId),a=(new Date).getTime(),s={},c=+new Date,this.dataset.request=l.jsonp({url:this.dataset.url,data:o,callback:e,timeout:6e3}).done(function(e){s.adcost=new Date-c,s.requestOk=!0;var t=e&&e.errorno;if(e&&0==e.errorno){var o=e.results[0],i=o.admark||{};i.requestOk=!0;var n,r=o.fields||[];0===Object.keys(i).length?d.dataset.retryTime<1?(d.dataset.retryTime++,d.dataset.hasRequest=!1,d.requestVideoMark()):(s.errorCode=2102,d.reportVideoMarkError(s)):(n=d.filterVideoBuyPoint(r),d._handleData(n),i.fields=r,i.adtype=u.VIDEO_MARK,i.adcost=(new Date).getTime()-a,d.context.msg.broadcast("onAdOrderDataReady",i))}else{if(20005==t)return;d.dataset.retryTime<1?(d.dataset.retryTime++,d.dataset.hasRequest=!1,d.requestVideoMark()):(s.errorCode=2102,d.reportVideoMarkError(s))}}).fail(function(e){s.adcost=new Date-c,s.requestOk=!1,d.dataset.retryTime<1?(d.dataset.retryTime++,d.dataset.hasRequest=!1,d.requestVideoMark()):(6e3<=s.adcost?s.errorCode=2101:s.errorCode=2102,d.reportVideoMarkError(s))})))},n.filterVideoBuyPoint=function(e){var t=[];try{t=e[0].videotag[0].ts.t[0]}catch(e){}if(0===t.length)return this._setVideoMarkForPage([]),e;var o=t.filter(function(e){return 768!=e.cate});return this._setVideoMarkForPage(o),e[0].videotag[0].ts.t[0]=o,e},n.reportVideoMarkError=function(e){this.context.msg.broadcast("adPluginMsg",{name:"reportAd",adtype:u.VIDEO_MARK,reportData:{info:!0,data:{adcost:e.adcost,errorCode:e.errorCode,adtype:u.VIDEO_MARK}}}),Txplayer.util.localLog("GET_VIDEO_MARK_DATA_ERROR",e)},n._handleData=function(e){var t=[],i={},o=this;try{t=e[0].videotag[0].ts.t[0]}catch(e){Txplayer.util.localLog("PARSE_VIDEO_MARK_DATA_ERROR",e)}l.each(t,function(e,t){var o=(t=t||{}).cate;"undefined"!==l.type(t.cate)&&(i[o]||(i[o]=[]),i[o].push(t))}),l.each(i,function(t,e){try{o.context.msg.broadcast("getVideoMarkDataReady."+t,e)}catch(e){r.showError("getVideoMark.handleData.Error."+t,e)}})},n._setVideoMarkForPage=function(e){var t,o=e&&e.length?e:[];"function"==typeof window.__tenvideo_setPlayerAction&&(t={cmd:10,action:"list",data:o},window.__tenvideo_setPlayerAction(t))},e.exports=i},6:function(e,t){e.exports={playerstate:{unstarted:-1,ended:0,playing:1,paused:2,buffering:3,cued:4,stop:5},definitionMap:{msd:"\u6d41\u7545180P",sd:"\u6807\u6e05270P",hd:"\u9ad8\u6e05480P",shd:"\u8d85\u6e05720P",fhd:"\u84dd\u51491080P",uhd:"4K"}}}});!function(a){var s={};function d(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,d),t.l=!0,t.exports}d.m=a,d.c=s,d.d=function(e,t,a){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(t,e){if(1&e&&(t=d(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(d.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)d.d(a,s,function(e){return t[e]}.bind(null,s));return a},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="",d(d.s=310)}({310:function(e,t,a){e.exports=a(311)},311:function(e,t){var s=Txplayer.$;Txplayer.util;function a(e){s=Txplayer.$,this.dataset={},this.context=e,this.init()}a.prototype={init:function(){this.addEventListeners()},reset:function(){delete this.dataset.fileData,delete this.dataset.fileSize,delete this.dataset.prevBuffer,delete this.dataset.buffer},updateSpeed:function(e){this.dataset.hasOwnProperty("speeds")||(this.dataset.speeds=[]),"number"==typeof e&&(12288<e&&(e=12e3),this.context.dataset.videoDownloadSpeed=e,this.dataset.speeds.push(e));10<this.dataset.speeds.length&&this.dataset.speeds.splice(0,this.dataset.speeds.length-10);var t={speed:this.dataset.speed,average:this.getAverSpeed()};this.context.msg.broadcast("downloadSpeedUpdate",t)},getAverSpeed:function(){if(!this.dataset.hasOwnProperty("speeds"))return 0;var a=0,e=0;return this.dataset.speeds&&this.dataset.speeds.length&&(s.each(this.dataset.speeds,function(e,t){a+=parseInt(t)}),e=parseInt(a/this.dataset.speeds.length)),e},calcMp4:function(){if(!this.context.dataset.disableCalcDownloadSpeed&&!this.dataset.isStop&&this.dataset.video&&this.dataset.fileData&&this.dataset.fileData.filesize){this.dataset.fileData.filesize=parseInt(this.dataset.fileData.filesize);var e=this;if(e.dataset.video.buffered.length&&(e.dataset.buffer=e.dataset.video.buffered.end(e.dataset.video.buffered.length-1),e.dataset.fileSize=e.dataset.fileData.filesize/1024,e.dataset.duration=e.dataset.fileData.data&&e.dataset.fileData.data.duration||e.dataset.video.duration,e.dataset.duration=parseFloat(e.dataset.duration),e.dataset.duration)){if(parseInt(e.dataset.buffer)>=parseInt(e.dataset.duration))return e.dataset.speed=0,void e.stop();if(e.dataset.hasOwnProperty("prevBuffer")||(e.dataset.prevBuffer=0),e.dataset.bufferUpdateTime=+new Date,e.dataset.bufferIncrease=e.dataset.buffer-e.dataset.prevBuffer,e.dataset.bufferIncrease<=0)return e.dataset.speed=0,void e.updateSpeed(e.dataset.speed);e.dataset.bufferUpdateCostTime=e.dataset.bufferUpdateTime-e.dataset.prevBufferUpdateTime,e.dataset.updateFileSize=e.dataset.fileSize*(e.dataset.bufferIncrease/e.dataset.duration),e.dataset.speed=e.dataset.updateFileSize/(e.dataset.bufferUpdateCostTime/1e3),e.dataset.speed=parseInt(e.dataset.speed),isNaN(e.dataset.speed)||e.updateSpeed(e.dataset.speed),e.dataset.prevBufferUpdateTime=e.dataset.bufferUpdateTime,e.dataset.prevBuffer=e.dataset.buffer}}},calcHLS:function(e){if(!this.context.dataset.disableCalcDownloadSpeed&&!this.dataset.isStop&&e&&e.loaded){if(this.dataset.prevBuffer||(this.dataset.prevBuffer=0),this.dataset.bufferIncrease=e.loaded-this.dataset.prevBuffer,this.dataset.bufferUpdateTime=+new Date,this.dataset.bufferIncrease<=0)return this.dataset.prevBufferUpdateTime=this.dataset.bufferUpdateTime,this.dataset.prevBuffer=e.loaded,void(this.context.dataset.videoDownloadSpeed=0);this.dataset.bufferUpdateCostTime=this.dataset.bufferUpdateTime-this.dataset.prevBufferUpdateTime,this.dataset.bufferUpdateCostTime<0||(this.dataset.speed=this.dataset.bufferIncrease/1024/(this.dataset.bufferUpdateCostTime/1e3),this.dataset.speed=parseInt(this.dataset.speed),isNaN(this.dataset.speed)||this.updateSpeed(this.dataset.speed),this.dataset.prevBufferUpdateTime=this.dataset.bufferUpdateTime,this.dataset.prevBuffer=e.loaded)}},getRealDownloadSpeedWhenNetFree:function(){var t={},a=this;this.dataset.speed_TIMER=setInterval(function(){var e=a.context.dataset.videoDownloadSpeed;t.hasOwnProperty(e)?"number"!=typeof t[e]?t[e]=1:(t[e]++,4===t[e]&&(a.context.dataset.videoDownloadSpeed=0,t={})):(t={})[e]=1},500)},addEventListeners:function(){var t=this;this.context.msg.on("adLoadProgress",function(e){e&&e.speed&&(t.context.dataset.videoDownloadSpeed=+e.speed)}),this.context.msg.on("videoPlay",function(e){e&&e.videoTag&&(0==e.videoTag.buffered.length&&(t.reset(),t.dataset.prevBufferUpdateTime=+new Date),t.dataset.video=e.videoTag,t.dataset.fileData=t.context.dataset.playList[t.context.dataset.playListIndex])}),this.context.msg.on("error.download-monitor",function(e){e&&e.type&&t.stop()}),"chromehls"===this.context.config.playerType&&this.context.msg.on("hlsProgress",function(e){t.dataset.isStop||t.calcHLS(e)}),this.context.msg.on("videoPlay.download-monitor",function(){"chromehls"!=t.context.config.playerType&&t.startTimer()}),t.getRealDownloadSpeedWhenNetFree()},startTimer:function(){var e;this.dataset.calc_TIMER||((e=this).dataset.calc_TIMER=setInterval(function(){e.calcMp4()},100))},stop:function(){this.dataset.isStop=!0,this.dataset.startTimer&&clearInterval(this.dataset.startTimer)}},Txplayer.register("DownloadMonitor",a)}});!function(r){var a={};function o(t){if(a[t])return a[t].exports;var e=a[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=r,o.c=a,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=460)}({38:function(t,e){var r=[],a=!1,o=0;t.exports=function(t){if(o)t(o);else if(r.push(t),!a){if(a=!0,"qq.com"!=document.domain)throw new Error("document.domain is not qq.com");var e=document.createElement("iframe");e.src="javascript:'<script>window.onload=function(){document.write(\\'<script>document.domain=\\\"qq.com\\\";<\\\\/script>\\');document.close();};<\/script>'",e.style.cssText="display:none;",document.body.appendChild(e),e.getClient=function(t){o=t;for(var e=r.shift();e;)e&&e(t),e=r.shift()},e.src="//v.qq.com/iframe/client.html"}}},460:function(t,e,r){t.exports=r(461)},461:function(t,e,r){var y=Txplayer.$,m=Txplayer.util,o=(Txplayer.apiList,r(462)),s=r(463),n=r(59),v=r(38),g=r(464);function a(t){y=Txplayer.$,this.dataset={},this.context=t,this.init()}a.prototype={init:function(){this.write(),this.addEventListerner(),this.exportsModuleApis()},write:function(){var t,e={error:"txp-ui-error",errorMsg:"txp-ui-error-msg",errorRefresh:"txp-ui-error-refresh",changePlayer:"txp-ui-error-changeplayer",openNewPage:"txp-ui-error-newpage",errorCode:"txp-ui-error-code",errorTip:"txp-ui-error-tip",clientTitle:"txp-ui-error-client-title",clientSpan:"txp-ui-error-client-span",clientBtn:"txp-ui-error-client-btn",whenCoolOpen:"txp-ui-error-when-coolopen",qqbrowserBtn:"txp-ui-error-qqbrowser-btn",playBtn:"txp-ui-error-play-btn",errorGoback:"txp-ui-error-back-btn",errorBtnWrapper:"txp-ui-error-btn-wrapper",drmErrorBtnWrapper:"txp-ui-error-drm-btn-wrapper",errorReselect:"txp-ui-error-reselect"},r=y.tmpl(m.isTouchPlayer(this.context)?s:o,e);this.context.dataset.$playermod.append(r),this.dataset.$errorGoback=this.context.dataset.$playermod.find('[data-role="'+e.errorGoback+'"]'),this.dataset.$error=this.context.dataset.$playermod.find('[data-role="'+e.error+'"]'),this.dataset.$errorMsg=this.context.dataset.$playermod.find('[data-role="'+e.errorMsg+'"]'),this.dataset.$errorRefresh=this.context.dataset.$playermod.find('[data-role="'+e.errorRefresh+'"]'),this.dataset.$changePlayer=this.context.dataset.$playermod.find('[data-role="'+e.changePlayer+'"]'),this.dataset.$openNewPage=this.context.dataset.$playermod.find('[data-role="'+e.openNewPage+'"]'),this.dataset.$errorCode=this.context.dataset.$playermod.find('[data-role="'+e.errorCode+'"]'),this.dataset.$errorTip=this.context.dataset.$playermod.find('[data-role="'+e.errorTip+'"]'),this.dataset.$clientTitle=this.context.dataset.$playermod.find('[data-role="'+e.clientTitle+'"]'),this.dataset.$clientSpan=this.context.dataset.$playermod.find('[data-role="'+e.clientSpan+'"]'),this.dataset.$clientBtn=this.context.dataset.$playermod.find('[data-role="'+e.clientBtn+'"]'),this.dataset.$coolOpenSpan=this.context.dataset.$playermod.find('[data-role="'+e.whenCoolOpen+'"]'),this.dataset.$qqbrowserBtn=this.context.dataset.$playermod.find('[data-role="'+e.qqbrowserBtn+'"]'),this.dataset.$playBtn=this.context.dataset.$playermod.find('[data-role="'+e.playBtn+'"]');var a="//vfiles.gtimg.cn/vupload/20200904/ff4d611599189703966.png";this.dataset.errorTipSrc=m.isTouchPlayer(this.context)?{offline:{src:a},ufo:{src:a}}:{offline:{src:"//i.gtimg.cn/qqlive/images/20170712/error_tip2.png",srcset:"//i.gtimg.cn/qqlive/images/20170712/error_tip2@2x.png 2x"},ufo:{src:"//i.gtimg.cn/qqlive/images/20170712/error_tip1.png",srcset:"//i.gtimg.cn/qqlive/images/20170712/error_tip1@2x.png 2x"}},this.dataset.isCoolOpen="coolOpen"===this.context.config.playerType,this.dataset.$errorBtnWrapper=this.context.dataset.$playermod.find('[data-role="'+e.errorBtnWrapper+'"]'),this.dataset.$drmErrorBtnWrapper=this.context.dataset.$playermod.find('[data-role="'+e.drmErrorBtnWrapper+'"]'),this.dataset.$errorReselect=this.context.dataset.$playermod.find('[data-role="'+e.errorReselect+'"]'),this.context.config.hideErrorReselect&&null!==(t=this.dataset.$errorReselect)&&void 0!==t&&t.hide()},remove:function(){this.dataset.$error.remove()},hide:function(){this.dataset.$error.addClass(Txplayer.dataset.hideClass)},getData:function(){var e=m.getData(Txplayer.dataset.localStorageKey.userSetting);try{e=JSON.parse(e)}catch(t){e={}}return e},setData:function(t,e){var r=this.getData(Txplayer.dataset.localStorageKey.userSetting);r[t]=e,m.setData(Txplayer.dataset.localStorageKey.userSetting,JSON.stringify(r))},report:function(t,e){this.context.msg.broadcast("reportUsrAction",{usr_action:t,usr_action_detail:e||""})},showErrorUiTips:function(t){var e=this;m.v4log("showErrorUiTips",t),t&&"object"===y.type(t.msg)&&(t.msg=t.msg.defaultMsg);var r=t.code+"",a=this.context.dataset.flowid;if(r&&-1<r.indexOf("_")&&(r=r.split("_")[0]),t&&-1<y.inArray(r,["83"])&&"function"===y.type(this.context.config.showOpenVIPGuide))return this.context.config.showOpenVIPGuide(),void(this.context.dataset.isBrowserFullscreen&&this.context.msg.broadcast("exitBrowserFullscreen"));if(this.dataset.$error.removeClass(Txplayer.dataset.hideClass),this.context.dataset.$playermod.width()<560?this.dataset.$errorCode.text("[ \u9519\u8bef\u7801:"+(t.errCode||"")+" ]"):this.dataset.$errorCode.text("[ \u9519\u8bef\u7801:"+(t.errCode||"")+", "+a+" ]"),-1<y.inArray(t.code+"",["1","2","3","4","5","444","445","10001","30","40","41","42","50","68"])){var o,s=t.msg;4!=t.code||m.isSupportMP4()||(s="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301H5\u64ad\u653e\u5668"),this.dataset.$errorMsg.html(s),o=-1<y.inArray(t.code+"",["444","445"])?this.dataset.errorTipSrc.offline:this.dataset.errorTipSrc.ufo;var n=!1;try{n=parent.window._TxpIframeInQzoneIfrme}catch(t){}m.inNewIframe()&&n?this.dataset.$changePlayer.addClass(Txplayer.dataset.hideClass):this.dataset.$changePlayer.removeClass(Txplayer.dataset.hideClass)}else this.dataset.$changePlayer.addClass(Txplayer.dataset.hideClass),m.isTouchPlayer(this.context)||this.dataset.$errorRefresh.addClass(Txplayer.dataset.hideClass),this.dataset.$errorMsg.html(t.msg||Txplayer.v4errcode.defaultMsg),o=this.dataset.errorTipSrc.ufo;var i=(this.context.dataset.$playermod||Txplayer.$&&Txplayer.$("#"+this.context.config.containerId)).find(".txp_player");(this.dataset.isCoolOpen||this.context.config.useMiniSkin||i.hasClass("txp_player_mini")||!this.context.config.showHTML5Switch)&&(this.dataset.$changePlayer.addClass(Txplayer.dataset.hideClass),this.dataset.$coolOpenSpan.removeClass(Txplayer.dataset.hideClass));(m.os.mac||-1<["ke.qq.com","fudao.qq.com"].indexOf(location.host))&&this.dataset.$clientTitle.addClass(Txplayer.dataset.hideClass),this.dataset.$errorTip.attr({src:o.src,srcset:o.srcset});var d=this.dataset.errorcodeStr=t.code+"."+t.exem;"80.14"!=d&&"69.4"!=d&&-11111!=t.code||(m.os.mac?(this.dataset.$clientTitle.removeClass(Txplayer.dataset.hideClass),this.dataset.$clientSpan.text("\u8bf7\u4f7f\u7528Mac\u5ba2\u6237\u7aef\u89c2\u770b ")):this.dataset.$clientSpan.text("\u8bf7\u4f7f\u7528PC\u5ba2\u6237\u7aef\u89c2\u770b "));var l,c,p,h,x,u="";if(-11111==t.code||"80.14"==d||"69.4"==d?(-11111==t.code&&window.TxpCreativePlayer&&window.TxpCreativePlayer.adBlockEnabled&&this.context.dataset.emeEnabled?(e.report("playererror-drm-error","blocked"),this.dataset.$errorMsg.html(Txplayer.v4errcode.adblock)):(e.report("playererror-drm-error","not_support"),l="\u7248\u6743\u65b9\u8981\u6c42\u652f\u6301DRM\u7248\u6743\u4fdd\u62a4\uff0c\u8be5\u8bbe\u5907\u6682\u4e0d\u652f\u6301\u64ad\u653e",(c=m.isTouchPlayer(e.context))&&(this.dataset.$errorBtnWrapper.hide(),this.dataset.$drmErrorBtnWrapper.css("display","flex")),"80.14"==d||"69.4"==d?(s=m.hasWidevineL3Risk()?"\u4e3a\u4fdd\u62a4\u7248\u6743\uff0c\u672c\u5185\u5bb9\u5df2\u52a0\u5bc6":Txplayer.v4errcode[d],this.dataset.$errorMsg.html(c?l:s)):this.dataset.$errorMsg.html(c?l:Txplayer.v4errcode[t.code])),u=m.os.mac?"Mac\u5ba2\u6237\u7aef\u89c2\u770b":"PC\u5ba2\u6237\u7aef\u89c2\u770b",this.dataset.$clientSpan.addClass(Txplayer.dataset.hideClass),t.showPlayBtn&&this.dataset.$playBtn.removeClass(Txplayer.dataset.hideClass),p=this.dataset.$qqbrowserBtn,(x=function(t){p.removeClass(Txplayer.dataset.hideClass),h=m.hasWidevineL3Risk()?"\u6216\u4e0b\u8f7d\u6700\u65b0 Chrome\u6d4f\u89c8\u5668(89\u5185\u6838\u53ca\u4ee5\u4e0a)\u89c2\u770b":(h=(h="\u6216${opName}\u6700\u65b0${showqq}Chrome\u6d4f\u89c8\u5668\u89c2\u770b").replace("${opName}",t?"\u4f7f\u7528":"\u4e0b\u8f7d")).replace("${showqq}",m.os.mac?"":' <a style="display:inline; margin: 16px 0 0 0;text-decoration: underline!important;">QQ\u6d4f\u89c8\u5668</a>/ '),p.html(h)})(!0),g.detect().then(function(t){x(t.exist)},function(){// that.dataset.$qqbrowserBtn.addClass(Txplayer.dataset.hideClass);
})):(this.dataset.$playBtn.addClass(Txplayer.dataset.hideClass),this.dataset.$clientSpan.removeClass(Txplayer.dataset.hideClass),this.dataset.$qqbrowserBtn.addClass(Txplayer.dataset.hideClass),m.isTouchPlayer(this.context)&&(this.dataset.$drmErrorBtnWrapper.hide(),this.dataset.$errorBtnWrapper.css("display","flex"))),"80.2"==d&&(t.showClientBtn?(this.dataset.$clientTitle.removeClass(Txplayer.dataset.hideClass),u=m.os.mac?"Mac\u5ba2\u6237\u7aef\u89c2\u770b":"PC\u5ba2\u6237\u7aef\u89c2\u770b"):this.dataset.$clientTitle.addClass(Txplayer.dataset.hideClass),this.dataset.$clientSpan.addClass(Txplayer.dataset.hideClass),u=m.os.mac?"Mac\u5ba2\u6237\u7aef\u89c2\u770b":"PC\u5ba2\u6237\u7aef\u89c2\u770b"),!this.dataset.$clientTitle.hasClass(Txplayer.dataset.hideClass)){var f="\u7acb\u5373\u4e0b\u8f7d";if(m.os.mac)u?e.dataset.$clientBtn.text("\u6253\u5f00"+u):e.dataset.$clientBtn.text(f);else try{v(function(t){t&&t.exist().done(function(){f="80.14"!=d&&"69.4"!=d?"\u7acb\u5373\u6253\u5f00":"\u7ee7\u7eed\u89c2\u770b",u?e.dataset.$clientBtn.text("\u6253\u5f00"+u):e.dataset.$clientBtn.text(f)}).fail(function(){u?e.dataset.$clientBtn.text("\u4e0b\u8f7d"+u):e.dataset.$clientBtn.text(f)})})}catch(t){u?e.dataset.$clientBtn.text("\u4e0b\u8f7d"+u):e.dataset.$clientBtn.text(f)}}61!=t.code&&62!=t.code||e.dataset.$clientSpan.addClass(Txplayer.dataset.hideClass),m.os.linux&&e.dataset.$clientTitle.addClass(Txplayer.dataset.hideClass)},addEventListerner:function(){var t,e,r=this,a=this;this.dataset.eventsList={},this.dataset.eventsList[m.getUniqueMsgKey("videoPlaying")]=function(){a.hide()},this.dataset.eventsList[m.getUniqueMsgKey("vidChange")]=function(){a.hide()},y.each(this.dataset.eventsList,function(t,e){a.context.msg.on(t,e)}),this.dataset.$errorRefresh.off("click").on("click",function(){window.location.reload()}),null!==(t=this.dataset.$errorGoback)&&void 0!==t&&t.off("click").on("click",function(){r.context.userMsg.broadcast(Txplayer.dataset.clickErrorGoback)}),null!==(e=this.dataset.$errorReselect)&&void 0!==e&&e.off("click").on("click",function(){r.context.userMsg.broadcast(Txplayer.dataset.clickErrorReselect)}),this.dataset.$changePlayer.off("click").on("click",function(){a.setData("isUseFlash",1),window.location.reload()}),this.dataset.$openNewPage.off("click").on("click",function(){var t=a.context.config.otherVideoLink;t&&window.open(t)}),this.dataset.$clientBtn.off("click").on("click",function(){a.report("playererror-clientbtn-clicked");var t=a.context.dataset.vid||"",e=a.context.dataset.cid||"",r=Math.max(a.context.dataset.currentTime-5,0);n({support:!0,atag:"playererror",sso:"qqlive://sso/vbarid="+e+"&videoid="+t+"&start="+r+"&atag=web.playererror",success:function(){a.report("playererror-clientbtn-play")},error:function(){"80.14"!==a.dataset.errorcodeStr&&"69.4"!==a.dataset.errorcodeStr||!m.os.mac?location.href="//node.video.qq.com/x/api/download_pc":window.open("https://v.qq.com/download.html#mac","_blank"),a.report("playererror-clientbtn-download")}})}),this.dataset.$qqbrowserBtn.off("click").on("click","a",function(){a.report("playererror-qqbrowser-clicked","exist="+g.exist),g.open(location.href)}),this.dataset.$playBtn.off("click").on("click",function(){a.report("playererror-playbtn-clicked"),a.context.msg.broadcast("playControl",{connectionPlayTime:a.context.dataset.connectionPlayTime,playStartTime:a.context.dataset.playStartTime,connectionPlayType:1}),a.context.msg.broadcast("userPlayPlayer"),a.hide()}),this.context.msg.on("error",function(e){e&&-1===y.inArray(e.type,["film","cgi","init","hls"])||(a.context.dataset.disableHotKey=!0,e&&94==e.code||(80===e.code&&2===e.exem?a.get80_2Status().done(function(t){e.msg=t.msg,e.showClientBtn=!!t.showClientBtn,a.showErrorUiTips(e)}).fail(function(){a.showErrorUiTips(e)}):a.showErrorUiTips(e)))}),this.context.msg.on("switchDrmDefinitionError",function(t){a.context.msg.broadcast("pause"),a.context.msg.broadcast("userPausePlayer"),t.showPlayBtn=!0,a.showErrorUiTips(t)})},get80_2Status:function(){var t=Txplayer.$.Deferred(),a=this;function e(t){var e=Txplayer.$.Deferred(),r="//h5vv.video.qq.com/getextinfo?vid=${vid}&platform=${platfrom}&srcappid=webplayer&h5flag=4&otype=json";return r=(r=r.replace("${vid}",a.context.dataset.vid)).replace("${platfrom}",t),y.ajax({url:r,dataType:"jsonp",success:function(t){t&&"o"===t.s?e.resolve():e.reject()},error:function(){e.reject()}}),e}return e(10204).done(function(){t.resolve({msg:"\u5f88\u62b1\u6b49\uff0c\u672c\u5185\u5bb9\u53d7\u7248\u6743\u65b9\u7ea6\u675f\uff0c\u6682\u4e0d\u652f\u6301\u6d4f\u89c8\u5668\u64ad\u653e\uff0c\u8bf7\u4e0b\u8f7d\u5ba2\u6237\u7aef\u89c2\u770b",showClientBtn:!0})}).fail(function(){e(10303).done(function(){t.resolve({msg:"\u5f88\u62b1\u6b49\uff0c\u5f53\u524d\u5e73\u53f0\u6682\u4e0d\u652f\u6301\u64ad\u653e\u672c\u5185\u5bb9\uff0c\u8bf7\u4f7f\u7528\u817e\u8baf\u89c6\u9891\u624b\u673a\u5ba2\u6237\u7aef\u89c2\u770b"})}).fail(function(){t.reject()})}),t},exportsModuleApis:function(){var r=this;this.dataset.privateApis={},this.dataset.privateApis.showErrorUiTips=this.showErrorUiTips.bind(this),y.each(this.dataset.privateApis,function(t,e){r.context.msg.on(t,e)})}},Txplayer.register("v4UiError",a)},462:function(t,e){t.exports='<txpdiv  data-role="<%=error%>" class="txp_video_error txp_none">\n  <img data-role="<%=errorTip%>" class="txp_error_pic" alt=""/>\n  <txpdiv class="txp_error_title">\n    <span data-role="<%=errorMsg%>">\u7f51\u7edc\u94fe\u63a5\u4f3c\u4e4e\u51fa\u73b0\u95ee\u9898\uff0c</span>\n    <span data-role="<%=errorRefresh%>">\n      \u4f60\u53ef\u4ee5 <button class="txp_btn">\u5237\u65b0</button>\n      <span data-role="<%=changePlayer%>"> \u6216 <button class="txp_btn">\u4f7f\u7528\u517c\u5bb9\u6a21\u5f0f\u64ad\u653e</button></span>\n      <span class="txp_none" data-role="<%=whenCoolOpen%>">\u8bd5\u8bd5</span>\n    </span>\n  </txpdiv >\n  <txpdiv class="txp_error_title2" data-role="<%=clientTitle%>">\n    <span data-role="<%=clientSpan%>">\u4f7f\u7528PC\u5ba2\u6237\u7aef\u64ad\u653e\u66f4\u7a33\u5b9a </span>\n    <a class="txp_link_btn" data-role="<%=clientBtn%>">\u7acb\u5373\u4e0b\u8f7d</a>\n    <txpdiv class="txp_error_title2 txp_link_btn txp_none" data-role="<%=playBtn%>" style="margin-right: 0;">\n      \u8fd4\u56de\u7ee7\u7eed\u64ad\u653e\n    </txpdiv>\n  </txpdiv>\n  <span class="txp_none" data-role="<%=qqbrowserBtn%>" style="margin: 16px 0 0 0;">\n    \u6216\u4f7f\u7528\u6700\u65b0 <a style="display:inline; margin: 16px 0 0 0;text-decoration: underline!important;">QQ\u6d4f\u89c8\u5668</a> / Chrome\u89c2\u770b\n  </span>\n  <txpdiv class="txp_error_code" ><span data-role="<%=errorCode%>">[ \u9519\u8bef\u7801: xx, xxx ]</span> <a href="//support.qq.com/products/2208" target="_blank">\u6211\u8981\u53cd\u9988</a></txpdiv >\n</txpdiv >\n'},463:function(t,e){t.exports='<txpdiv  data-role="<%=error%>" class="txp_touch_video_error txp_none">\n  <img data-role="<%=errorTip%>" class="txp_touch_error_pic" alt=""/>\n  <txpdiv class="txp_touch_error_title" data-role="<%=errorMsg%>">\u54ce\u5440\uff0c\u51fa\u4e86\u95ee\u9898</txpdiv>\n  <txpdiv class="txp_touch_error_code" ><span data-role="<%=errorCode%>">\u9519\u8bef\u4ee3\u7801(xx, xxx)</span></txpdiv>\n  <txpdiv data-role="<%=errorBtnWrapper%>" style="display: flex;justify-content: center;">\n    <txpdiv style="margin-right: 20px;" data-role="<%=errorGoback%>" class="txp_touch_btn">\u8fd4\u56de</txpdiv>\n    <txpdiv data-role="<%=errorRefresh%>" class="txp_touch_btn">\u91cd\u8bd5\u4e00\u4e0b</txpdiv>\n  </txpdiv>\n  <txpdiv data-role="<%=drmErrorBtnWrapper%>" style="display: none;justify-content: center;">\n    <txpdiv style="margin-right: 20px;" data-role="<%=errorReselect%>" class="txp_touch_btn">\u53bb\u9009\u96c6</txpdiv>\n    <txpdiv data-role="<%=errorGoback%>" class="txp_touch_btn">\u8fd4\u56de</txpdiv>\n  </txpdiv>\n</txpdiv >\n'},464:function(t,e){var r=Txplayer.$;t.exports={exist:!1,minVersion:[10,2,2101,400],isLastestChromeSupportDrm:function(){var t,e=Txplayer.util.os;return e.windows?6<(t=parseFloat(e.version,10)):e.mac?!Txplayer.util.browser.qqbrowser&&(t=(e.version||"").split("."),10.1<(t=parseFloat((t[0]||"0")+"."+(t[1]||"0"),10))):!e.linux&&void 0},compareVersion:function(t){var r=t.split("."),e=this.minVersion,a=!1;if(t===e.join("."))a=!0;else if(4===r.length){r.forEach(function(t,e){r[e]=parseInt(t,10)});for(var o=0;o<r.length;o++){if(r[o]>e[o]){a=!0;break}if(r[o]<e[o]){a=!1;break}}}return a},detect:function(){var a=this,o=r.Deferred(),s=r('<meta name="referrer" content="always" />');return r("head").prepend(s),this.isLastestChromeSupportDrm()?r.ajax({timeout:5e3,type:"POST",url:"http://127.0.0.1:28653/api/handle",dataType:"json",data:JSON.stringify({action:"GetQBVersion",cmd:""}),success:function(t){s.remove();var e=!1,r=t.result||"";a.minVersion;r&&(e=a.compareVersion(r)),e?(a.exist=!0,o.resolve({exist:!0})):(a.exist=!1,o.resolve({exist:!1}))},error:function(){s.remove(),a.exist=!1,o.resolve({exist:!1})}}):o.reject(),o},download:function(){try{location.assign("http://dldir1.qq.com/invc/tt/QQBrowser_Setup_DRM.exe")}catch(t){}},open:function(t){var e;this.exist?(e=r('<meta name="referrer" content="always" />'),r("head").prepend(e),r.ajax({type:"POST",url:"http://127.0.0.1:28653/api/handle",dataType:"json",data:JSON.stringify({action:"Open",cmd:encodeURIComponent(t)}),success:function(){e.remove()},error:function(){e.remove()}})):this.download()},text:{open:'\u6216\u4f7f\u7528\u6700\u65b0 <a style="display:inline; margin: 16px 0 0 0;text-decoration: underline!important;">QQ\u6d4f\u89c8\u5668</a> / Chrome \u89c2\u770b',download:'\u6216\u4e0b\u8f7d\u6700\u65b0 <a style="display:inline; margin: 16px 0 0 0;text-decoration: underline!important;">QQ\u6d4f\u89c8\u5668</a> / Chrome \u89c2\u770b'}}},59:function(t,e,r){var s=r(38);t.exports=function(e){if(e.support&&e.sso){try{t=e.atag,o="qqlivechannel=channel1."+t,Txplayer.util.browser.ie?((r=new Date).setTime(r.getTime()+864e5),document.cookie=o+";path=/;expires="+r.toGMTString()):(a=Txplayer.$("<input>"),Txplayer.$("body").append(a),a.css({position:"absolute",left:"-9999px"}),a.val(o),a.css({top:Txplayer.$(window).scrollTop()+"px"}),a.get(0).focus(),a.get(0).setSelectionRange(0,o.length),document.queryCommandSupported&&document.queryCommandSupported("copy")&&document.execCommand("copy",!0),a.remove())}catch(t){}s(function(t){t&&t.exist().done(function(){t.open(e.sso),e.success&&e.success()}).fail(function(){e.error&&e.error()})})}var t,r,a,o}}});!function(i){var s={};function a(t){if(s[t])return s[t].exports;var e=s[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=i,a.c=s,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=237)}({237:function(t,e,i){t.exports=i(238)},238:function(t,e,i){var s=i(239),a=i(240),o=Txplayer.$,n=Txplayer.util,l=(Txplayer.apiList,i(6).definitionMap);function d(t){o=Txplayer.$,this.dataset={},this.context=t,this.init()}d.prototype={init:function(){this.write(),this.addEventListener(),this.exportsModuleApis()},write:function(){var t={hide:Txplayer.dataset.hideClass,tips:"txp-ui-tips",text:"txp-ui-tips-text",close:"txp-ui-tips-close"},e=o.tmpl(n.isTouchPlayer(this.context)?a:s,t);this.context.dataset.$loading?this.context.dataset.$loading.before(e):this.context.dataset.$playermod.append(e),this.dataset.$tips=this.context.dataset.$playermod.find('[data-role="'+t.tips+'"]'),this.dataset.$text=this.context.dataset.$playermod.find('[data-role="'+t.text+'"]'),this.dataset.$close=this.context.dataset.$playermod.find('[data-role="'+t.close+'"]')},remove:function(){this.dataset.$tips.remove()},stopTips:function(){this.context.msg.broadcast("hideUiTips"),this.dataset.trialMovie_TIMER&&(clearInterval(this.dataset.trialMovie_TIMER),this.dataset.trialMovie_TIMER=null)},dealVipTip:function(){function t(){a.context.dataset.isUiTipsShowing||a.context.dataset.isPlayingAd||(s||!function t(){if(5<o)clearInterval(a.dataset.trialMovie_TIMER);else{o++;try{s=a.context.config.flashCallFn({type:a.context.dataset.trailerMode?"trailerMode":"getPayTip"})}catch(t){n.showInfo("[updateTrialData.getTips.error]",t)}var e,i;s?(a.dataset.getTip_TIMER&&(clearTimeout(a.dataset.getTip_TIMER),a.dataset.getTip_TIMER=null),(e=s.match(/\[.*?\]/))&&(i='<a href="javascript:;" data-action="openVIP" data-role="txp-ui-tips-openVIP">'+(e=e[0]).slice(1,-1)+"</a>",s=s.replace(e,i))):(a.dataset.getTip_TIMER&&clearTimeout(a.dataset.getTip_TIMER),a.dataset.getTip_TIMER=setTimeout(function(){s=t()},1e3))}}(),s&&a.context.msg.broadcast("showUiTips",{text:s,time:300}))}var s,a=this,o=0;t(),this.dataset.trialMovie_TIMER&&clearInterval(a.dataset.trialMovie_TIMER),this.dataset.trialMovie_TIMER=setInterval(function(){t()},5e3)},dealDujiaTip:function(){var t=this;this.context.msg.once(n.getUniqueMsgKey("videoPlaying"),function(){t.hasShownDujia||(t.hasShownDujia=!0,t.context.msg.broadcast("showUiTips",{text:"\u53ef\u8bd5\u770b1\u5206\u949f\u901f\u770b\u72ec\u5bb6\u5185\u5bb9",time:5,hideClose:!0}))}),this.context.msg.on(n.getUniqueMsgKey("vidChange"),function(){t.hasShownDujia=!1}),this.context.msg.on(n.getUniqueMsgKey("beforeVideoRePlay"),function(){t.hasShownDujia=!1})},dealAdditionTip:function(t){if(!n.isTouchPlayer(this.context)){var e=t.duration||0,i=parseInt((e-this.context.dataset.duration)/60),s='<svg class="txp_alert_img" xmlns="http://www.w3.org/2000/svg" width="78" height="64" viewBox="0 0 78 64"><defs><linearGradient id="a" x1="2.35072545%" x2="97.4004585%" y1="26.1783854%" y2="26.1783868%"><stop offset="0%" stop-color="#FF6429"/><stop offset="100%" stop-color="#F6953E"/></linearGradient></defs><g fill="none" fill-rule="evenodd"><g fill-rule="nonzero"><path fill="#F7A741" d="M42.4245008 6.6705c.131 1.189 3.367 7.386 4.917 7.94 0 0 .727-.944.7925-1.6775l.0005.001c.198-.956.2825-2.4535-.1735-4.1175-.191-.696-.7235-1.103-.7235-1.103-1.7435-1.746-3.295-2.0525-3.295-2.0525.007.0245.0165.0495.024.0745-.499-.0045-1.637.078-1.542.935z"/><path fill="#FEE3D7" d="M46.404 24.7265s-3.038 12.2955-3.619 10.059c0 0-2.935 3.1645-5.5445 4.004-2.609.839-9.5575 1.595-12.5065.3385-2.9485-1.256-8.362-3.11-9.86-6.117 0 0-1.272.3365-2.6935-1.7625 1.414 1.1025-3.5215-3.4785-.1285-4.807l1.259 1.783s-2.13-6.8165-.954-10.011c0 0 7.692-13.2145 19.6405-12.671 0 0 17.19599995 4.29 14.4065 19.184z"/><path fill="#884C43" d="M38.9999994 13.123s-.669 7.598-19.3375 6.629c-.657-.7185.7105-3.2515 1.848-6.629 0 0-3.892 3.6375-5.544 11.3805-1.253 5.874 2.7485 9.355 5.5485 12.309l-1.045 2.994c-2.1675-.453-5.9065-3.61-5.9755-.5575-.0695 3.053-4.881 1.831-8.1825-1.6545 0 0-7.817-3.132-6.052-12.192 2.179-11.187 13.0295-22.6335 20.3265-24.6475 2.4375-.673 13.331-2.424 19.398 3.7935-1.808-1.8525 11.68849998 7.179 12.01549998 22.7605.2345 11.1885-7.0345 11.9245-8.4595 11.9465-2.72299998.0415-.3695-1.6605-4.90899998-.3915 0 0-7.16 1.2405.4335-4.887 6.41899998-5.1795 3.64549998-14.7095-.065-20.854z"/><path fill="#3ABA6B" d="M14.83999976 2.1595s1.424.61 1.2785 2.25c-.146 1.64-5.59499996 13.199-7.55899996 15.332 0 0-.5385 1.4275-3.0935-1.9515l9.37399996-15.6305z"/><path fill="#68E6A4" d="M13.43799917 1.748s2.548-.312 1.417 2.1075c0 0-5.1385 11.3505-7.71199997 13.7785 0 0-.863 1.1365-1.959-.124-1.0965-1.2605-3.673-7.871-2.743-9.8695.93-1.9985 4.3255-3.608 10.99699997-5.8925z"/><path fill="#FC9542" d="M15.1465007 5.6235s2.1425.159 2.4545 1.8715c.312 1.713-2.2975 9.4055-4.9445 10.362 0 0-2.6215-.5545-3.15-1.4415-.529-.887 5.64-10.792 5.64-10.792z"/><path fill="#F7A741" d="M15.14899947 5.549s-4.1655-.194-8.08849997 2.616c0 0-1.4355.6505-1.241 1.9895.4505 3.111 2.511 5.464 3.833 6.609 0 0 5.37299997-5.644 5.49649997-11.2145z"/><path fill="#F6B1A3" d="M17.594 29.078h2.75c1.0355 0 1.875-.8395 1.875-1.875 0-1.0355-.8395-1.875-1.875-1.875h-2.75c-1.036 0-1.875.8395-1.875 1.875 0 1.0355.839 1.875 1.875 1.875zm20.437 0h2.75c1.036 0 1.875-.8395 1.875-1.875 0-1.0355-.839-1.875-1.875-1.875h-2.75c-1.0355 0-1.875.8395-1.875 1.875 0 1.0355.8395 1.875 1.875 1.875z"/><path fill="#ED735B" d="M28.25 25.9845c-.1555.456-.25.9605-.25 1.5 0 1.933 1.1195 3.5 2.5 3.5s2.5-1.567 2.5-3.5c0-.5395-.0945-1.044-.25-1.5h-4.5z"/><path fill="#563C3B" d="M37 26.9845c1.1045 0 2-1.3435 2-3 0-1.657-.8955-3-2-3s-2 1.343-2 3c0 1.6565.8955 3 2 3zm-17.4840898-.9732736c.847-.113.8905-1.807 3.1255-2.0155 2.235-.209 2.207 2.04 3.045 1.266 1.28-1.1815-1.568-4.0985-4.1245-3.031-2.537 1.059-3.115 3.923-2.046 3.7805z"/></g><path fill="#FEE3D7" d="M49.7385176 22.25932683c1.27869925.0888412 2.38833683 1.09477949 2.2614824 3.74067336 1.00990039 1.98204108 4.35228745 8.37571337 4 9.99999997-.27983373 1.29022506-1.36322008 2.719475-5.00000006 3.00000006-.81021064.0624961-3.91448611 1.24308203-5 .99999996-1.886809-.42251816-1.73352652-2.47701646-1.99999992-2.99999995-.08227506-.1614739-.87704522-1.41743542.99999993-1.8599346 1.42146503-.33509971 5.64713936.12453104 5.59203223-1e-8-1.4782699-3.34059352-1.93627422-6.91777573-3.59203225-8.14006541-.42951148-.13955674-.85021187-1.49183833-.5422386-2.6546347l-1.5458273-1.71681524c-.3695507-.41042751-.33641342-1.0427248.07401414-1.41227542.41042755-.36955062 1.04272484-.33641334 1.41227546.07401422l1.33716578 1.485073c.0201374-.0117248.04039292-.02328804.06076096-.03468616l-.41476831-1.95133108c-.11482638-.54021604.23001993-1.07123286.77023593-1.18605932.540216-.11482647 1.07123285.23001993 1.18605932.77023592l.4008403 1.8858054z"/><path fill="#FFF" d="M38 35c.9333828 0 9.6023203-.5357031 11-1 .0665032-.0220918.3998366 2.6445749 1 8-4 2-7 3.3333333-9 4s-3-.3333333-3-3c-.6666667-5.3333333-.6666667-8 0-8z"/><path fill="url(#a)" d="M37 12h6v10h-9v2h5v6H4c-2.209139 0-4-1.790861-4-4V4c0-2.209139 1.790861-4 4-4h33v12zm3-12h8v8h-8V0zm5 22h6v5h-6v-5zm5-17h6v5h-6V5zm10-2h4v3h-4V3zm0 22h4v3h-4v-3zm6-12h3v2h-3v-2zm-14 2h5v4h-5v-4z" transform="translate(9 34)"/><path fill="#FFF" d="M26.5978254 47.4222938l5.1705843 3.8560439c.442726.3301698.5339708.9567257.203801 1.3994517a1.00000198 1.00000198 0 0 1-.203801.203801l-5.1705843 3.8560439c-.442726.3301699-1.0692819.2389251-1.3994518-.2038009C25.0695774 56.3611299 25 56.1514493 25 55.936008v-7.7120879c0-.5522847.4477153-1 1-1 .2154413 0 .4251219.0695774.5978254.1983737zM16 36h5l-3 6h-5l3-6zm10 0h5l-3 6h-5l3-6zm10 0h5l-3 6h-5l3-6z" opacity=".8"/><path fill="#FEE3D7" d="M9.11524516 42C4.2635276 49.38521401 2.89177921 54.385214 5 57c3.16233118 3.922179 5.2171776 6.922179 7 3 1.2973769-2.8542071-2.88475484-4.92607-2.88475484-4.92607V42z"/><path fill="#FFF" d="M9 53l-7-3c1.86666667-6 4.2-9 7-9v12z"/></g></svg>',a="";if("end"==t.type)a=n.tpl(s+'\u53ee\u549a\uff01\u4f60\u6709\u4e00\u4e2a"\u8fdb\u5ea6\u6761\u52a0\u957f\u5305"\u5c1a\u672a\u4f7f\u7528\uff0c<a href="javascript:;" data-action="refresh" data-role="txp-ui-tips-refresh">\u3010\u70b9\u6b64\u67e5\u6536\u3011</a>',{addition:i});else{if(i<=0)return;a=n.tpl(s+'\u89c6\u9891\u8ffd\u52a0${addition}\u5206\u949f\u65b0\u5185\u5bb9\uff0c<a href="javascript:;" data-action="refresh" data-role="txp-ui-tips-refresh">\u5237\u65b0</a>\u770b\u65b0\u5185\u5bb9',{addition:i})}this.context.msg.broadcast("showUiTips",{text:'<span class="txp_alert_info_complete">'+a+"</span>",time:10,hideClose:!1})}},dealSeekTip:function(t){var e,i=this;t&&t.showTips?void 0===Txplayer.plugins["txp-history-plugin"]&&(e="<a>"+n.formatPlayTime(t.seekTime)+"</a>",i.context.msg.broadcast("showUiTips",{text:"\u60a8\u4e0a\u6b21\u89c2\u770b\u81f3 "+e+" \u5904\uff0c\u6b63\u5728\u4e3a\u60a8\u7eed\u64ad",time:3,hideClose:!0})):t.connectionPlayTime?void 0===Txplayer.plugins["txp-history-plugin"]&&(e="<a>"+n.formatPlayTime(t.connectionPlayTime)+"</a>",i.context.msg.broadcast("showUiTips",{text:"\u60a8\u4e0a\u6b21\u89c2\u770b\u81f3 "+e+" \u5904\uff0c\u6b63\u5728\u4e3a\u60a8\u7eed\u64ad",time:3,hideClose:!0})):t.playStartTime?i.dataset.hasShowTips||(e="<a>"+n.formatPlayTime(t.playStartTime)+"</a>",i.context.msg.broadcast("showUiTips",{text:"\u817e\u8baf\u89c6\u9891\u5df2\u4e3a\u60a8\u8df3\u8fc7\u7247\u5934",time:3,hideClose:!0})):t.historyTime?void 0===Txplayer.plugins["txp-history-plugin"]&&i.context.msg.broadcast("showUiTips",{text:"\u60a8\u4e0a\u6b21\u89c2\u770b\u81f3 "+t.historyTime+" \u5904\uff0c\u6b63\u5728\u4e3a\u60a8\u7eed\u64ad",time:5}):t.uiText&&(i.context.msg.broadcast("showUiTips",{text:t.uiText,time:t.time,hideClose:t.hideClose}),i.dataset.hasShowTips=!0)},dealDenitionTip:function(){var a=this;this.dataset.eventsList[n.getUniqueMsgKey("setDefinitionStart")]=function(t,e){var i,s;e?a.context.msg.broadcast("showUiTips",{text:"\u6b63\u5728\u7f13\u51b2...",time:3,hideClose:!0}):(i=l[t])&&(n.isTouchPlayer(a.context)?s="\u6b63\u5728\u4e3a\u4f60\u5207\u6362 ".concat(i," \u6e05\u6670\u5ea6\uff0c\u8bf7\u7a0d\u540e\u2026"):(s="\u6b63\u5728\u4e3a\u60a8\u5207\u6362\u6e05\u6670\u5ea6"+i,i="<a>["+i+"]</a>"),a.context.msg.broadcast("showUiTips",{text:s,time:10}))},this.dataset.eventsList[n.getUniqueMsgKey("setDefinitionDone")]=function(t){a.context.msg.broadcast("hideUiTips")},this.dataset.eventsList[n.getUniqueMsgKey("setDefinitionFail")]=function(t){a.context.msg.broadcast("showUiTips",{text:"sorry, \u5207\u6362\u6e05\u6670\u5ea6\u5931\u8d25, \u8bf7\u7a0d\u540e\u91cd\u8bd5",time:5})}},dealPlaybackRateTip:function(t){var e;this.context.dataset.isPlayingAd||(4<=t?this.context.msg.broadcast("showUiTips",{text:"\u64ad\u653e\u901f\u5ea6\u5df2\u7ecf\u8fbe\u5230\u6700\u9ad8\u503c",time:3,hideClose:!0}):t<=.4?this.context.msg.broadcast("showUiTips",{text:"\u64ad\u653e\u901f\u5ea6\u5df2\u7ecf\u8fbe\u5230\u6700\u4f4e\u503c",time:3,hideClose:!0}):(t=1.25==t?t:t.toFixed(1),e=n.isTouchPlayer(this.context)?"\u5df2\u4e3a\u4f60\u5207\u6362\u81f3 ".concat(t,"\u500d \u901f\u5ea6\u64ad\u653e"):"\u6b63\u5728<a>".concat(t,"</a>\u500d\u901f\u5ea6\u64ad\u653e"),this.context.msg.broadcast("showUiTips",{text:e,time:3,hideClose:!0})))},dealVolumeTip:function(t){!0===t.mute?this.context.msg.broadcast("showUiTips",{text:"\u89c6\u9891\u9759\u97f3",time:2,hideClose:!0}):!1===t.mute?this.context.msg.broadcast("showUiTips",{text:"\u53d6\u6d88\u89c6\u9891\u9759\u97f3",time:2,hideClose:!0}):0<=t.volume&&this.context.msg.broadcast("showUiTips",{text:"\u5f53\u524d\u97f3\u91cf: <a>"+t.volume+"</a>",time:3,hideClose:!0})},dealConsoleReportTip:function(){this.context.msg.broadcast("showUiTips",{text:"\u60a8\u7684\u53cd\u9988\u6211\u4eec\u5df2\u6536\u5230\uff0c\u611f\u8c22\u60a8\u7684\u652f\u6301~",time:5,hideClose:!0})},showVIPShareTips:function(){function i(i){(i=i||{}).tips=i.tips||"\u8be5\u8d26\u53f7\u591a\u5730\u767b\u5f55\u5b58\u5728\u5b89\u5168\u9690\u60a3\uff0c\u5df2\u6682\u505c\u4f1a\u5458\u670d\u52a1\uff0c\u8bf7\u4fee\u6539\u5bc6\u7801\u5e76\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u540e\u91cd\u8bd5\u3002";var s=0;a.context.dataset.openAccountData=[],i.buttonlist&&"array"===o.type(i.buttonlist)&&o.each(i.buttonlist,function(t,e){e&&(e.title&&e.url&&(i.tips+='&nbsp;<a href="javascript:;" data-action="shareVIP" data-click="'+s+'">'+e.title+"</a>&nbsp;",a.context.dataset.openAccountData.push(e)),s++)}),a.context.msg.broadcast("showUiTips",{text:i.tips,time:3e4})}var t=o.jsonp||o.ajax,a=this;t({url:"//vip.video.qq.com/fcgi-bin/comm_cgi?callback=?",data:{name:"attack_account",cmd:1},timeout:6e3,callback:Txplayer.util.getJsonpCallbackName("getshareviptips")}).done(function(t){i(t)}).fail(function(t,e){i()})},showUnOfficialLimitTips:function(t){var e;this.context.dataset.isUiTipsShowing||(e='\u53ef\u8bd5\u770b${min}\u5206\u949f\uff0c\u53bb\u817e\u8baf\u89c6\u9891\u89c2\u770b\u5b8c\u6574\u7248 <a target="_blank;" href="${href}">\u7acb\u5373\u524d\u5f80</a>',0<t.sec&&(e='\u53ef\u8bd5\u770b${min}\u5206\u949f${sec}\u79d2\uff0c\u53bb\u817e\u8baf\u89c6\u9891\u89c2\u770b\u5b8c\u6574\u7248 <a target="_blank;" href="${href}">\u7acb\u5373\u524d\u5f80</a>'),t.min<=0&&0<t.sec&&(e='\u53ef\u8bd5\u770b${sec}\u79d2\uff0c\u53bb\u817e\u8baf\u89c6\u9891\u89c2\u770b\u5b8c\u6574\u7248 <a target="_blank;" href="${href}">\u7acb\u5373\u524d\u5f80</a>'),this.context.msg.broadcast("showUiTips",{text:n.tpl(e,t),time:9999,hideClose:!0}))},addEventListener:function(){var t,i=this;this.dataset.$close.on("click",function(){i.context.msg.broadcast("hideUiTips",{userAction:!0,tips:i.dataset.$text.html()})}),this.dataset.eventsList={},this.dealDenitionTip(),this.dataset.eventsList[n.getUniqueMsgKey("vidChange")]=function(){i.stopTips(),i.dataset.hasShowTips=!1},this.dataset.eventsList[n.getUniqueMsgKey("error")]=function(t){i.stopTips(),t&&94==t.code&&i.showVIPShareTips()},o.each(this.dataset.eventsList,function(t,e){i.context.msg.on(t,e)}),i.context.msg.on("showUIVipGuide",function(t){i.stopTips()}),i.context.msg.on(n.getUniqueMsgKey("showDujiaDialog"),function(){i.stopTips()}),i.context.msg.on(n.getUniqueMsgKey("adblockCannotSetDef"),function(t){i.context.msg.broadcast("showUiTips",{text:'\u89c6\u9891\u6e05\u6670\u5ea6\u88ab\u8bef\u4f24\u4e86\uff0c\u6b63\u5e38\u89c2\u770b\u9700<a target="_blank;" href="javascript:;">\u5173\u95ed\u5e7f\u544a\u62e6\u622a\u63d2\u4ef6</a>',time:5,hideClose:!0})}),n.isTouchPlayer(this.context)&&(t=this.stopTips.bind(this),this.context.msg.on("UiShadownClick",t),this.context.msg.on("showTopBanner",t),this.context.userMsg.on(Txplayer.dataset.followStatusChange,function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3;i.context.msg.broadcast("showUiTips",{text:t,time:e})}))},exportsModuleApis:function(){var i=this;this.dataset.moduleApis={},this.dataset.moduleApis.showUiTips=function(t){t&&t.text&&(i.context.dataset.isSmallWindowMode||(t.time=t.time||4,"undefined"===o.type(t.hideClose)&&(t.hideClose=!1),t.hideClose?i.dataset.$close.addClass(Txplayer.dataset.hideClass):i.dataset.$close.removeClass(Txplayer.dataset.hideClass),i.dataset.$tips.removeClass(Txplayer.dataset.hideClass),i.dataset.$text.html(t.text),i.context.dataset.isUiTipsShowing=!i.dataset.$tips.hasClass(Txplayer.dataset.hideClass),i.dataset.hide_TIMER&&clearTimeout(i.dataset.hide_TIMER),i.dataset.hide_TIMER=setTimeout(function(){i.context.msg.broadcast("hideUiTips")},1e3*t.time)))},this.dataset.moduleApis.hideUiTips=function(t){i.dataset.$tips.addClass(Txplayer.dataset.hideClass),i.context.dataset.isUiTipsShowing=!i.dataset.$tips.hasClass(Txplayer.dataset.hideClass)},this.dataset.moduleApis.showUIVipTip=function(t){i.dealVipTip(t)},this.dataset.moduleApis.showUIDujiaTip=function(t){i.dealDujiaTip(t)},this.dataset.moduleApis.showAdditionTip=function(t){i.dealAdditionTip(t)},this.dataset.moduleApis.showUiSeekTip=function(t){i.dealSeekTip(t)},this.dataset.moduleApis.showUiRateTip=function(t){i.dealPlaybackRateTip(t)},this.dataset.moduleApis.showUiPlaybackRateTip=function(t){i.dealPlaybackRateTip(t)},this.dataset.moduleApis.showUiVolumeTip=function(t){i.dealVolumeTip(t)},this.dataset.moduleApis.showConsoleReportTips=function(t){i.dealConsoleReportTip(t)},this.dataset.moduleApis.showUnOfficialLimitTips=function(t){i.showUnOfficialLimitTips(t)},o.each(this.dataset.moduleApis,function(t,e){i.context.msg.on(t,e)})}},Txplayer.register("UiTips",d)},239:function(t,e){t.exports='<txpdiv data-role="<%=tips%>" class="txp_alert_info <%=hide%>">\n  <txpdiv class="txp_alert_content">\n    <txpdiv data-role="<%=text%>" class="txp_alert_text"></txpdiv>\n    <button data-role="<%=close%>" class="txp_btn txp_btn_close" title="\u5173\u95ed"></button>\n  </txpdiv>\n</txpdiv>'},240:function(t,e){t.exports='<txpdiv data-role="<%=tips%>" class="txp_touch_alert_info <%=hide%>">\n  <txpdiv class="txp_touch_alert_content">\n    <txpdiv data-role="<%=text%>" class="txp_touch_alert_text"></txpdiv>\n    \x3c!-- <button data-role="<%=close%>" class="txp_touch_btn txp_touch_btn_close" title="\u5173\u95ed"></button> --\x3e\n  </txpdiv>\n</txpdiv>'},6:function(t,e){t.exports={playerstate:{unstarted:-1,ended:0,playing:1,paused:2,buffering:3,cued:4,stop:5},definitionMap:{msd:"\u6d41\u7545180P",sd:"\u6807\u6e05270P",hd:"\u9ad8\u6e05480P",shd:"\u8d85\u6e05720P",fhd:"\u84dd\u51491080P",uhd:"4K"}}}});!function(o){var n={};function i(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return o[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=o,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=183)}({183:function(t,e,o){t.exports=o(184)},184:function(t,e,o){var n=o(185),s=Txplayer.$,a=Txplayer.util;function i(t){s=Txplayer.$,this.dataset={},this.context=t,this.init()}i.prototype={init:function(){this.dataset.controlHideClass="txp_autohide",this.context.dataset.isControlShow=!0,this.write(),this.addEventListener(),this.loadSubPlugins()},write:function(){var t={controlWrap:"txp-control-wrap",buttonsLeftRole:"txp-control-left",buttonsRightRole:"txp-control-right",buttonsCenterRole:"txp-control-center",hide:Txplayer.dataset.hideClass,autoHide:this.dataset.controlHideClass},e=s.tmpl(n,t);this.context.dataset.$playermod.append(e),this.dataset.$playermod=this.context.dataset.$playermod,this.dataset.$controlWrap=this.context.dataset.$playermod.find('[data-role="'+t.controlWrap+'"]'),this.dataset.$buttonsleftmod=this.context.dataset.$playermod.find('[data-role="'+t.buttonsLeftRole+'"]'),this.dataset.$buttonsrightmod=this.context.dataset.$playermod.find('[data-role="'+t.buttonsRightRole+'"]'),this.dataset.$buttonscentermod=this.context.dataset.$playermod.find('[data-role="'+t.buttonsCenterRole+'"]'),(this.context.config.autoplay||a.mobile)&&(this.context.dataset.$playermod.addClass(this.dataset.controlHideClass),this.uiControlVisibilityChange(!1),this.context.dataset.isControlShow=!1)},remove:function(){this.dataset.$controlWrap.remove()},loadSubPlugins:function(){var t=[];if(this.context.pluginConfig&&"array"===s.type(this.context.pluginConfig.subPlugins)&&(t=this.context.pluginConfig.subPlugins.slice(0)),!a.mobile&&"v4"==this.context.config.version)for(var e=0;e<t.length;e++)if(-1!=["UiControlPlay","UiVolume","UiDefinition"].indexOf(t[e])){if(-1!=a.inArray(this.context.config.removePluginsList,t[e]))continue;t[e]="v4"+t[e]}var o={msg:this.context.msg,adApi:this.context.adApi,userMsg:this.context.userMsg,userApi:this.context.userApi,privateApi:this.context.privateApi,dataset:this.context.dataset,config:this.context.config,$mod:{$playermod:this.dataset.$playermod,$progressmod:this.dataset.$buttonscentermod,$buttonsleftmod:this.dataset.$buttonsleftmod,$buttonsrightmod:this.dataset.$buttonsrightmod}};a.loadPlugins.call(this,t,o,this.context.config.settings)},handlerUiControlShowHide:function(){var o=this;function t(e){o.context.msg.on("ready",function(){o.context.dataset.$shadow.on("touchend",function(t){(o.context.dataset.$playermod.hasClass(o.dataset.controlHideClass)?i:n)(),e&&t.preventDefault()})})}function n(t){if((t=t||{})&&!t.force){if(1!==o.context.dataset.playState&&!o.context.dataset.isPlayingAd)return;if(o.context.dataset.isSmallWindowMode)return;if(o.context.dataset.isFocusVideoBufferIng)return;if(o.context.dataset.isVideoSeeking)return;if(o.dataset.isMouseHoverControl)return;if(o.context.dataset.isRightClickMenu)return;if(o.context.dataset.disableHideControl)return}o.context.dataset.$playermod.addClass(o.dataset.controlHideClass),o.uiControlVisibilityChange(!1),o.context.msg.broadcast("hideUiControl"),o.context.dataset.isControlShow=!1,o.dataset.hideControl_TIMER&&(clearTimeout(o.dataset.hideControl_TIMER),o.dataset.hideControl_TIMER=null)}function i(t){if((t=t||{})&&!t.force){if(o.context.dataset.isSmallWindowMode)return;if(o.dataset.errorcode)return}o.context.msg.broadcast("beforeUiControlShow"),o.context.dataset.$playermod.removeClass(o.dataset.controlHideClass),o.uiControlVisibilityChange(!0),o.context.dataset.isControlShow=!0,e()}function e(){o.dataset.hideControl_TIMER&&(clearTimeout(o.dataset.hideControl_TIMER),o.dataset.hideControl_TIMER=null),o.dataset.hideControl_TIMER=setTimeout(function(){n()},3e3)}this.dataset.hideControl_TIMER=null,a.mobile?t(!1):(t(!0),this.dataset.$playermod.on("click mouseenter",function(t){i(t)}),this.dataset.$playermod.on("mouseleave",function(t){n(t)}),this.dataset.$playermod.on("mousemove",function(t){o.dataset.screenX==t.screenX&&o.dataset.screenY==t.screenY||(o.dataset.screenX=t.screenX,o.dataset.screenY=t.screenY,i(t))})),this.dataset.eventsList[a.getUniqueMsgKey("videoPause")]=function(t){t&&t.end||o.context.dataset.isPlayingAd||i()},this.dataset.eventsList[a.getUniqueMsgKey("videoEnd")]=function(t){t&&t.isAllEnd&&i()},this.dataset.eventsList[a.getUniqueMsgKey("error")]=function(t){t&&94==t.code||(n({force:!0}),o.dataset.errorcode=t.code)},this.dataset.eventsList[a.getUniqueMsgKey("videoPlaying")]=function(){delete o.dataset.errorcode,e()},this.dataset.eventsList[a.getUniqueMsgKey("smallWindowModeChange")]=function(t){t&&t.isSmallWindow&&n({force:!0})},this.dataset.eventsList[a.getUniqueMsgKey("hideUicontrol")]=function(t){n()},s.each(this.dataset.eventsList,function(t,e){o.context.msg.on(t,e)}),this.show=i,this.hide=n},uiControlVisibilityChange:function(t){try{t!==this.dataset.uiControlVisibilityChangeState&&(this.dataset.uiControlVisibilityChangeState=t,this.context.msg.broadcast("uiControlVisibilityChange",t),this.context.userMsg.broadcast("uiControlVisibilityChange",t))}catch(t){}},addEventListener:function(){var o=this;this.dataset.eventsList={},this.handlerUiControlShowHide(),this.dataset.eventsList[a.getUniqueMsgKey("userStopVideo")]=function(t){o.show()},this.dataset.eventsList[a.getUniqueMsgKey("showUicontrol")]=function(t){o.context.dataset.isSmallWindowMode||(o.context.dataset.$playermod.removeClass(o.dataset.controlHideClass),o.uiControlVisibilityChange(!0),o.context.dataset.isControlShow=!0)},this.dataset.eventsList[a.getUniqueMsgKey("videoEnd")]=function(t){if(t&&t.isAllEnd){if(o.context.dataset.isSmallWindowMode)return;o.context.dataset.$playermod.removeClass(o.dataset.controlHideClass),o.uiControlVisibilityChange(!0),o.context.dataset.isControlShow=!0}},this.dataset.$controlWrap.on("mouseenter",function(){o.dataset.isMouseHoverControl=!0}).on("mouseleave",function(){o.dataset.isMouseHoverControl=!1}),this.dataset.eventsList[a.getUniqueMsgKey("windowFullscreenChange")]=function(t){o.dataset.isMouseHoverControl=!1,setTimeout(function(){o.dataset.isMouseHoverControl=!1,o.hide({force:!0})},1e3)},this.dataset.eventsList[a.getUniqueMsgKey("browserFullscreenChange")]=function(t){o.dataset.isMouseHoverControl=!1,setTimeout(function(){o.dataset.isMouseHoverControl=!1,o.hide({force:!0})},200)},s.each(this.dataset.eventsList,function(t,e){o.context.msg.on(t,e)})}},Txplayer.register("UiControl",i)},185:function(t,e){t.exports='<txpdiv data-role="<%=controlWrap%>" class="txp_bottom" style="overflow:initial;">\n  <txpdiv class="txp_controls">\n    <txpdiv class="txp_left_controls" data-role="<%=buttonsLeftRole%>"></txpdiv>\n    <txpdiv class="txp_progress_bar_container" data-role="<%=buttonsCenterRole%>"></txpdiv>\n    <txpdiv class="txp_right_controls" data-role="<%=buttonsRightRole%>"></txpdiv>\n  </txpdiv>\n</txpdiv>'}});!function(a){var s={};function o(t){if(s[t])return s[t].exports;var e=s[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=a,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=186)}({186:function(t,e,a){t.exports=a(187)},187:function(t,e,a){var l=Txplayer.$,u=Txplayer.util,s=(Txplayer.apiList,a(188));function o(t){l=Txplayer.$,this.dataset={},this.context=t,this.init()}o.prototype={init:function(){this.write(),this.addEventListerner()},write:function(){var t={loadedProgress:"txp-control-load-progress",playedProgress:"txp-control-play-progress",playStartTimePoint:"txp-control-play-start-time-point",playEndTimePoint:"txp-control-play-end-time-point",playedPoint:"txp-control-play-point",progressList:"txp-control-progress-list",progressIndicator:"txp-control-progress-indicator",tabindex:Txplayer.dataset.tabindex++,hideClass:Txplayer.dataset.hideClass};this.dataset.renderData=t;var e=l.tmpl(s,t);this.context.$mod.$progressmod.append(e),this.dataset.$loadedProgress=this.context.$mod.$progressmod.find('[data-role="'+t.loadedProgress+'"]'),this.dataset.$playprogress=this.context.$mod.$progressmod.find('[data-role="'+t.playedProgress+'"]'),this.dataset.$playStartTimePoint=this.context.$mod.$progressmod.find('[data-role="'+t.playStartTimePoint+'"]'),this.dataset.$playEndTimePoint=this.context.$mod.$progressmod.find('[data-role="'+t.playEndTimePoint+'"]'),this.dataset.$playpoint=this.context.$mod.$progressmod.find('[data-role="'+t.playedPoint+'"]'),this.dataset.$progressIndicator=this.context.$mod.$progressmod.find('[data-role="'+t.progressIndicator+'"]'),this.dataset.$progressList=this.context.$mod.$progressmod.find('[data-role="'+t.progressList+'"]')},remove:function(){this.dataset.$loadedProgress.remove(),this.dataset.$playprogress.remove(),this.dataset.$playpoint.remove(),this.dataset.$playStartTimePoint.remove(),this.dataset.$playEndTimePoint.remove(),this.dataset.$progressIndicator.remove(),this.dataset.$progressList.remove()},isInProgressArea:function(t){var e=this;if(1!=t.which)return!1;var a=l(t.target),s=a.data("role");return-1<u.inArray([e.dataset.renderData.progressList,e.dataset.renderData.progressIndicator,e.dataset.renderData.playedPoint,e.dataset.renderData.playedProgress,e.dataset.renderData.loadedProgress,"txp-control-progress","txp-control-center"],s)||a.hasClass("txp_interact_dot")||a.hasClass("txp_progress_role")},progressOnMouseMove:function(){function a(t){var e=r.dataset.$progressList.parent(),a=e&&e[0]&&e[0].offsetLeft||0;-1!==(i=t.pageX-r.context.$mod.$playermod.offset().left-a)&&(o<i?i=o:i<0&&(i=0),parseInt(i/o*1e4))}function s(t){var e=parseInt(i/o*1e4)/100;0===i||parseInt(i/o*1e4),r.updateProgressWidth(e+"%"),"mousedown"==t&&r.context.msg.broadcast("userSeekStart",{time:parseInt(r.context.dataset.duration*e/100)}),"mouseup"==t&&r.context.msg.broadcast("userSeekEnd",{time:parseInt(r.context.dataset.duration*e/100)})}var o,n=!1,r=this,i=-1,d=!1;this.context.$mod.$progressmod.on("mouseenter",function(){o=r.dataset.$progressList.width(),r.dataset.$progressIndicator.width();var t=r.dataset.$playStartTimePoint,e=r.dataset.$playEndTimePoint;r.context.dataset.skipPrelude?(r.context.dataset.playStartTime&&t.show(),r.context.dataset.playEndTime&&e.show()):(t.hide(),e.hide())}).on("mouseleave",function(){r.dataset.$playStartTimePoint.hide(),r.dataset.$playEndTimePoint.hide()});var p=r.context.dataset.$playermod&&r.context.dataset.$playermod.attr("id"),c="";l("body").on(u.getNSEventName("mousedown",r.context),function(t){r.context.dataset.isPlayingAd||r.isVideoCanNotPlay()||r.context.dataset.isImgAdLoadingShowing||r.isInProgressArea(t)&&(r.context.dataset.isDisableProgress||(Object.keys&&1<Object.keys(Txplayer.dataset._instance).length&&(c=l(t.target).parents(".txp_player").attr("id")),p&&c&&c!==p||(n=d=!0,r.context.dataset.isVideoSeeking=!0,r.context.msg.broadcast("pause"),a(t),s("mousedown"))))}).on(u.getNSEventName("mousemove",r.context),function(t){r.context.dataset.isPlayingAd||r.context.dataset.isImgAdLoadingShowing||r.isVideoCanNotPlay()||p&&c&&c!==p||(a(t),d&&n&&s())}).on(u.getNSEventName("mouseup",r.context),function(t){var e;r.context.dataset.duration?r.context.dataset.isPlayingAd||r.context.dataset.isImgAdLoadingShowing||d&&(p&&c&&c!==p||(c="",r.context.dataset.playState,a(t),e=parseInt(r.context.dataset.duration*(i/o)),s("mouseup"),r.context.msg.broadcast("seekTo",e),d=n=!1)):d=!1})},isVideoCanNotPlay:function(){var t=this.context.dataset.playState;return 0===t||-1===t},progressOnTouch:function(){function a(t){var e=parseInt(s/o*1e4)/100,a=parseInt((s-n/2)/o*1e4)/100;r.updateProgressWidth(a+"%"),r.context.msg.broadcast("progressUpdate",e),"touchstart"==t&&r.context.msg.broadcast("userSeekStart",{time:parseInt(r.context.dataset.duration*e/100)}),"touchend"==t&&r.context.msg.broadcast("userSeekEnd",{time:parseInt(r.context.dataset.duration*e/100)})}var e,s,o,n,r=this;this.context.$mod.$progressmod.on("touchstart",function(t){r.context.dataset.isPlayingAd||(t=t.originalEvent?t.originalEvent:t)&&t.touches&&t.touches.length&&(t=t.touches[0],e=r.dataset.$progressList.offset().left,s=t.pageX-e,o=r.dataset.$progressList.width(),n=r.dataset.$progressIndicator.width(),a("touchstart"),r.context.dataset.isControlTouch=!0,r.context.msg.broadcast("pause"))}).on("touchmove",function(t){r.context.dataset.isPlayingAd||(t=t.originalEvent?t.originalEvent:t)&&t.touches&&t.touches.length&&(t.preventDefault(),t=t.touches[0],(s=t.pageX-e)>r.dataset.$progressList.width()?s=r.dataset.$progressList.width():s<0&&(s=0),a(),r.context.dataset.isControlTouch=!0)}).on("touchend",function(t){var e;r.context.dataset.isPlayingAd||((e=parseInt(r.context.dataset.duration*(s/o)))>=r.context.dataset.duration&&(e=r.context.dataset.duration-1),a("touchend"),r.context.dataset.isControlTouch=!1,r.context.msg.broadcast("seekTo",e))})},getCanplayTimeLimit:function(){var t;return"number"==l.type(this.context.dataset.canPlayTime)&&this.context.dataset.duration&&(t=this.context.dataset.canPlayTime/this.context.dataset.duration,t*=100),t},updateBufferedBar:function(t){var e;this.context.dataset.duration&&"number"===l.type(t)&&(99<=(e=parseInt(100*t/this.context.dataset.duration))&&(e=100),this.dataset.$loadedProgress.css({width:e+"%"}))},updateProgressWidth:function(t){var e=this.getCanplayTimeLimit();e&&(e<(t=parseFloat((t+"").replace("%","")))&&(t=e),t+="%"),this.dataset.$playprogress.css("width",t),this.dataset.$playpoint.css("left",t)},updateSkipPrelude:function(){var t=this.context.dataset,e=this.dataset.$playStartTimePoint,a=this.dataset.$playEndTimePoint,s=t.playStartTime?+t.playStartTime:0,o=t.playEndTime?+t.playEndTime:0,n=this.context.dataset.duration||0;s?e.css("left",s/n*100+"%").removeClass(Txplayer.dataset.hideClass):e.addClass(Txplayer.dataset.hideClass),o?a.css("left",o/n*100+"%").removeClass(Txplayer.dataset.hideClass):a.addClass(Txplayer.dataset.hideClass)},addEventListerner:function(){var a=this;this.dataset.eventsList={},a.context.dataset.duration?a.updateSkipPrelude():this.dataset.eventsList[u.getUniqueMsgKey("getVideoUrlSuccess")]=function(){a.context.config.playEndTime&&(a.context.dataset.playEndTime=parseInt(a.context.dataset.duration)-parseInt(a.context.config.playEndTime),a.context.dataset.playEndTime<0&&(a.context.dataset.playEndTime=null)),a.updateSkipPrelude()},this.dataset.eventsList[u.getUniqueMsgKey("seekStart")]=function(t){var e;a.context.dataset.isControlShow&&(a.context.dataset.isPlayingAd||a.context.dataset.duration&&(e=100*(e=t.seekTime/a.context.dataset.duration)+"%",a.updateProgressWidth(e),t.currentTimeWhenSeekStart&&t.currentTimeWhenSeekStart>t.seekTime&&a.updateBufferedBar(t.seekTime)))};var t=u.isUseHls(this.context)?"videoTimeUpdateWithHlsAd":"videoTimeUpdate";this.dataset.eventsList[u.getUniqueMsgKey(t)]=function(){var t,e;a.context.dataset.isPlayingAd||a.context.dataset.duration&&(a.context.dataset.isVideoSeeking||(t=a.context.dataset[u.isUseHls(a.context)?"currentTimeWithHlsAd":"currentTime"],!a.context.dataset.isControlShow&&t%5!=0||(e=100*(e=t/a.context.dataset.duration)+"%",a.updateProgressWidth(e),a.updateBufferedBar(a.context.dataset.bufferedTime))))},this.context.dataset.$playermod.on("mouseenter",function(){var t;a.context.dataset.isPlayingAd||a.context.dataset.duration&&(a.context.dataset.isVideoSeeking||0!=a.context.dataset.playState&&(t=100*(t=a.context.dataset.currentTimeWithHlsAd/a.context.dataset.duration)+"%",a.updateProgressWidth(t),a.updateBufferedBar(a.context.dataset.bufferedTime)))}),this.dataset.eventsList[u.getUniqueMsgKey("videoProgress")]=function(){a.context.dataset.isControlShow&&1===a.context.dataset.playState&&a.updateBufferedBar(a.context.dataset.bufferedTime)},this.dataset.eventsList[u.getUniqueMsgKey("vidChange")]=function(){a.updateBufferedBar(0),a.updateProgressWidth(0)},this.dataset.eventsList[u.getUniqueMsgKey("videoPlaying")]=function(t){t&&"endingad"===t.playListType&&(a.context.dataset.bufferedTime=0,a.updateBufferedBar(0),a.updateProgressWidth(0))},this.dataset.eventsList[u.getUniqueMsgKey("videoEnd")]=function(t){t&&t.isAllEnd&&(a.updateBufferedBar(0),a.updateProgressWidth(0))},this.dataset.eventsList[u.getUniqueMsgKey("videoEnd")]=function(t){t&&t.isTheLastFilm&&(a.updateBufferedBar(0),a.updateProgressWidth(0))},this.dataset.eventsList[u.getUniqueMsgKey("beforeVideoPlay")]=function(t){a.updateBufferedBar(0),a.updateProgressWidth(0)},this.dataset.eventsList[u.getUniqueMsgKey("speedyTouchmove")]=function(t){a.context.dataset.duration;a.updateProgressWidth()},this.dataset.eventsList[u.getUniqueMsgKey("userStopVideo")]=function(t){a.updateBufferedBar(0),a.updateProgressWidth(0)},this.dataset.eventsList[u.getUniqueMsgKey("disableProgress")]=function(t){a.context.dataset.isDisableProgress=!0},this.dataset.eventsList[u.getUniqueMsgKey("videoPlaying")]=function(t){if(t&&"film"===t.playListType){if(a.context.dataset.isDuringZcCountdown)return;a.context.dataset.isDisableProgress=!1}},l.each(this.dataset.eventsList,function(t,e){a.context.msg.on(t,e)}),u.mobile?this.progressOnTouch():this.progressOnMouseMove()}},Txplayer.register("UiProgress",o)},188:function(t,e){t.exports='<txpdiv class="txp_progress_list" data-role="<%=progressList%>" style="background-color: transparent;">\n  <txpdiv class="txp_progress_load" style="width:0%" data-role="<%=loadedProgress%>"></txpdiv>\n  <txpdiv class="txp_progress_play" style="width:0%" data-role="<%=playedProgress%>"></txpdiv>\n  <txpdiv class="txp_interact_progress_list">\n    <txpdiv class="txp_interact_dot <%= hideClass %>" data-role="<%=playStartTimePoint%>"></txpdiv>\n    <txpdiv class="txp_interact_dot <%= hideClass %>" data-role="<%=playEndTimePoint%>"></txpdiv>\n  </txpdiv>\n</txpdiv>\n\n<txpdiv class="txp_btn_scrubber" style="left:0%" data-role="<%=playedPoint%>">\n  <txpdiv class="txp_scrubber_indicator" data-role="<%=progressIndicator%>" style="left:0;top:0;"></txpdiv>\n</txpdiv>'}});!function(a){var e={};function n(t){if(e[t])return e[t].exports;var s=e[t]={i:t,l:!1,exports:{}};return a[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=a,n.c=e,n.d=function(t,s,a){n.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(s,t){if(1&t&&(s=n(s)),8&t)return s;if(4&t&&"object"==typeof s&&s&&s.__esModule)return s;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&t&&"string"!=typeof s)for(var e in s)n.d(a,e,function(t){return s[t]}.bind(null,e));return a},n.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(s,"a",s),s},n.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},n.p="",n(n.s=465)}({465:function(t,s,a){t.exports=a(466)},466:function(t,s,a){var n=Txplayer.$,i=Txplayer.util,l=a(53),o=a(467),p=a(468),d=a(469);function e(t){n=Txplayer.$,this.dataset={},this.context=t,this.init(),i.v4log("=== v4UiControlPlay ===",this.context.config.playerType)}e.prototype={init:function(){this.write(),this.addEventListener()},write:function(){var t,s,a={playBtn:"txp-ui-control-playbtn",tips:"txp-ui-control-playbtn-tips",isUseH5Type:i.isUseH5Type(),tabindex:Txplayer.dataset.tabindex++},e=n.tmpl(i.isTouchPlayer(this.context)?p:l,a);this.context.config.enableStopButton&&(t={stopBtn:"txp-ui-control-stopbtn",tips:"txp-ui-control-stopbtn-tips"},s=n.tmpl(i.isTouchPlayer(this.context)?d:o,t),this.context.$mod.$buttonsleftmod.append(s),this.dataset.$stopbtn=this.context.$mod.$buttonsleftmod.find('[data-role="'+t.stopBtn+'"]')),this.context.$mod.$buttonsleftmod.append(e),this.dataset.$playbtn=this.context.$mod.$buttonsleftmod.find('[data-role="'+a.playBtn+'"]'),this.dataset.$tips=this.context.$mod.$buttonsleftmod.find('[data-role="'+a.tips+'"]')},remove:function(){this.dataset.$playbtn.remove()},initPlayState:function(){var t=this.context.dataset.playState;1===t||3===t?(this.dataset.$playbtn.attr("data-status","pause"),this.dataset.$tips.html("\u6682\u505c")):0===t?(this.dataset.$playbtn.attr("data-status","replay"),this.dataset.$tips.html("\u91cd\u65b0\u64ad\u653e")):(this.dataset.$playbtn.attr("data-status","play"),this.dataset.$tips.html("\u64ad\u653e"))},bindMouseEvent:function(){var t=this;this.dataset.$playbtn.on("mouseenter",function(){t.dataset.$playbtn.addClass(Txplayer.dataset.btnHoverClass)}).on("mouseleave",function(){t.dataset.$playbtn.removeClass(Txplayer.dataset.btnHoverClass)})},stopPauseTimer:function(){this.dataset.pauseTimer&&(clearTimeout(this.dataset.pauseTimer),this.dataset.pauseTimer=null)},addEventListener:function(){var a=this;this.initPlayState(),this.dataset.$stopbtn&&this.dataset.$stopbtn.on(Txplayer.dataset.clickEventName,function(){"function"==typeof a.context.userApi.stop&&(a.context.userApi.stop(),a.context.userMsg.broadcast("userClickStopBtn"))}),this.dataset.$playbtn.on(Txplayer.dataset.clickEventName,function(){n(this);if(!a.context.dataset.isPlayingAd){a.context.msg.broadcast("reportUsrAction",{usr_action:a.dataset.$playbtn.attr("data-status")});try{a.context.userMsg.broadcast("userClickPlayBtn")}catch(t){}"pause"===a.dataset.$playbtn.attr("data-status")?(a.context.msg.broadcast("pauseControl"),a.context.msg.broadcast("userPausePlayer"),a.context.userMsg.broadcast("pause")):("replay"===a.dataset.$playbtn.attr("data-status")?(a.context.dataset.connectionPlayTime=0,a.context.msg.broadcast("beforeVideoRePlay"),a.context.msg.broadcast("playControl",{vid:a.context.dataset.vid,connectionPlayType:1,playStartTime:a.context.dataset.playStartTime,playEndTime:a.context.dataset.playEndTime})):a.context.msg.broadcast("playControl",{connectionPlayType:1}),a.context.msg.broadcast("userPlayPlayer"))}}),this.dataset.eventsList={},this.dataset.eventsList[i.getUniqueMsgKey("getVideoUrlSuccess")]=function(){a.dataset.isAllEnd=!1},this.dataset.eventsList[i.getUniqueMsgKey("videoPlay")]=function(){a.dataset.isAllEnd=!1,a.dataset.$playbtn.attr("data-status","pause"),a.dataset.$tips.html("\u6682\u505c")},this.dataset.eventsList[i.getUniqueMsgKey("videoPause")]=function(t){t&&"film"!=t.playListType||a.context.dataset.isDefinitionSwitching&&!a.context.dataset.useChromeHls||(a.stopPauseTimer(),a.dataset.pauseTimer=setTimeout(function(){if(!a.context.dataset.isDefinitionSwitching||a.context.dataset.useChromeHls){if(a.dataset.isAllEnd)return a.dataset.$playbtn.attr("data-status","replay"),a.dataset.$tips.html("\u91cd\u65b0\u64ad\u653e"),void a.context.msg.broadcast("hideLoading");if(2===a.context.dataset.playState){if(a.context.dataset.canPlayTime&&a.context.dataset.currentTime>=a.context.dataset.canPlayTime)return a.dataset.isAllEnd=!0,a.dataset.$playbtn.attr("data-status","replay"),a.dataset.$playbtn.removeClass("txp_disabled"),void a.dataset.$tips.html("\u91cd\u65b0\u64ad\u653e");a.dataset.$playbtn.attr("data-status","play"),a.dataset.$tips.html("\u64ad\u653e"),a.context.msg.broadcast("hideLoading")}}},200))},this.dataset.eventsList[i.getUniqueMsgKey("seekEnd")]=function(t){"h5"!=a.context.config.playerType&&2===a.context.dataset.playState&&(!a.context.dataset.canPlayTime||a.context.dataset.currentTime<a.context.dataset.canPlayTime)&&(a.dataset.$playbtn.attr("data-status","play"),a.dataset.$tips.html("\u64ad\u653e"))},this.dataset.eventsList[i.getUniqueMsgKey("showUIVipGuide")]=function(t){t&&t.trialFinish&&(i.v4log("v4UiControlPlay-\u91cd\u65b0\u64ad\u653e\u6309\u94ae"),a.dataset.$playbtn.attr("data-status","replay"),a.dataset.$playbtn.removeClass("txp_disabled"),a.dataset.$tips.html("\u91cd\u65b0\u64ad\u653e"))},this.dataset.eventsList[i.getUniqueMsgKey("showLoginGuide")]=function(t){a.dataset.$playbtn.attr("data-status","play"),a.dataset.$tips.html("\u64ad\u653e")},this.dataset.eventsList[i.getUniqueMsgKey("videoEnd")]=function(t){t&&t.isAllEnd&&(a.dataset.isAllEnd=!0,a.context.msg.broadcast("pause"),a.dataset.$playbtn.attr("data-status","replay"),a.dataset.$playbtn.removeClass("txp_disabled"),a.dataset.$tips.html("\u91cd\u65b0\u64ad\u653e"))},this.dataset.eventsList[i.getUniqueMsgKey("vidChange")]=function(t){a.dataset.$playbtn.attr("data-status","play"),a.dataset.$tips.html("\u64ad\u653e")},this.dataset.eventsList[i.getUniqueMsgKey("beforeVideoPlay")]=function(t){a.dataset.isAllEnd=!1,a.dataset.$playbtn.attr("data-status","play"),a.dataset.$playbtn.addClass("txp_disabled")},this.dataset.eventsList[i.getUniqueMsgKey("videoPlaying")]=function(t){a.dataset.$playbtn.attr("data-status","pause"),a.dataset.$tips.html("\u6682\u505c"),setTimeout(function(){if("film"!=a.context.dataset.currentPlayListType){if(a.dataset.$playbtn.hasClass("txp_disabled"))return;a.dataset.$playbtn.addClass("txp_disabled")}else{if(a.context.dataset.isDuringZcCountdown)return;a.dataset.$playbtn.removeClass("txp_disabled")}},100)},this.dataset.eventsList[i.getUniqueMsgKey("isPlayingAdStatusChange")]=function(t){if(i.v4log("isPlayingAdStatusChange-disablePlayBtn",{isPlayingAd:t}),t){if(a.dataset.$playbtn.attr("data-status","pause"),a.dataset.$tips.html("\u6682\u505c"),a.dataset.$playbtn.hasClass("txp_disabled"))return;a.dataset.$playbtn.addClass("txp_disabled")}else a.dataset.$playbtn.removeClass("txp_disabled")},this.dataset.eventsList[i.getUniqueMsgKey("userStopVideo")]=function(t){a.initPlayState(),a.dataset.$playbtn.removeClass("txp_disabled")},this.dataset.eventsList[i.getUniqueMsgKey("disablePlayBtn")]=function(t){a.dataset.$playbtn.addClass("txp_disabled")},n.each(this.dataset.eventsList,function(t,s){a.context.msg.on(t,s)}),i.mobile||this.bindMouseEvent()}},Txplayer.register("v4UiControlPlay",e)},467:function(t,s){t.exports='<txpdiv data-role="<%=stopBtn%>" class="txp_btn txp_btn_play" data-status="stop" aria-label="\u505c\u6b62">\n    <svg class="txp_icon txp_icon_play" version="1.1" viewBox="0 0 36 36">\n    <use class="txp_svg_symbol txp_svg_stop" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="<%=svgPrefix%>#txp_svg_stop"></use>\n  </svg>\n    <txpdiv data-role="<%=tips%>" class="txp_tooltip">\u505c\u6b62</txpdiv>\n</txpdiv>'},468:function(t,s){t.exports='<txpdiv data-role="<%=playBtn%>" class="txp_touch_btn txp_touch_btn_play" data-status="play" aria-label="\u64ad\u653e/\u6682\u505c">\n  <svg class="txp_touch_icon txp_touch_icon_play" version="1.1" viewBox="0 0 36 36">\n    <use class="txp_touch_svg_symbol txp_touch_svg_play" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="<%=svgPrefix%>#txp_touch_svg_play"></use>\n    <use class="txp_touch_svg_symbol txp_touch_svg_pause" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="<%=svgPrefix%>#txp_touch_svg_pause"></use>\n    <use class="txp_touch_svg_symbol txp_touch_svg_stop" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="<%=svgPrefix%>#txp_touch_svg_stop"></use>\n    <use class="txp_touch_svg_symbol txp_touch_svg_replay" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="<%=svgPrefix%>#txp_touch_svg_replay"></use>\n  </svg>\n</txpdiv>'},469:function(t,s){t.exports='<txpdiv data-role="<%=stopBtn%>" class="txp_touch_btn txp_touch_btn_play" data-status="stop" aria-label="\u505c\u6b62">\n    <svg class="txp_touch_icon txp_touch_icon_play" version="1.1" viewBox="0 0 36 36">\n    <use class="txp_touch_svg_symbol txp_touch_svg_stop" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="<%=svgPrefix%>#txp_touch_svg_stop"></use>\n  </svg>\n    <txpdiv data-role="<%=tips%>" class="txp_touch_tooltip">\u505c\u6b62</txpdiv>\n</txpdiv>'},53:function(t,s){t.exports='<txpdiv data-role="<%=playBtn%>" class="txp_btn txp_btn_play" data-status="play" aria-label="\u64ad\u653e/\u6682\u505c">\n  <% if(isUseH5Type){ %>\n  <svg class="txp_icon txp_icon_play" viewBox="0 0 60 60" >\n\t<use class="txp_svg_play" xlink:href="<%=svgPrefix%>#txp_svg_play" />\n\t<use class="txp_svg_pause" xlink:href="<%=svgPrefix%>#txp_svg_pause" />\n\t<use class="txp_svg_stop" xlink:href="<%=svgPrefix%>#txp_svg_stop" />\n\t<use class="txp_svg_replay" xlink:href="<%=svgPrefix%>#txp_svg_replay" />\n  </svg>\n  <% }else{%>\n  <svg class="txp_icon txp_icon_play" version="1.1" viewBox="0 0 36 36">\n    <use class="txp_svg_symbol txp_svg_play" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="<%=svgPrefix%>#txp_svg_play"></use>\n    <use class="txp_svg_symbol txp_svg_pause" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="<%=svgPrefix%>#txp_svg_pause"></use>\n    <use class="txp_svg_symbol txp_svg_stop" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="<%=svgPrefix%>#txp_svg_stop"></use>\n    <use class="txp_svg_symbol txp_svg_replay" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="<%=svgPrefix%>#txp_svg_replay"></use>\n  </svg>\n  <txpdiv data-role="<%=tips%>" class="txp_tooltip">\u64ad\u653e</txpdiv>\n  <% } %>\n</txpdiv>'}});!function(a){var n={};function s(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=a,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=191)}({191:function(t,e,a){t.exports=a(192)},192:function(t,e,a){var o=Txplayer.$,d=Txplayer.util,l=a(193),x=a(194),p=a(195);Txplayer.apiList;function n(t){o=Txplayer.$,this.dataset={},this.context=t,this.init(),d.v4log("=== UiPlayNext ===",this.context.config.playerType)}n.prototype={init:function(){this.dataset.playerConfig=this.context.config,this.dataset.nextData=null,this.context.dataset.nextVideoInfo={},this.dataset.nextVideoInfoCopy={},this.context.dataset.nextVid=this.dataset.playerConfig.nextVid,this.dataset.getNextVid="function"===o.type(this.dataset.playerConfig.getNextVid)?this.dataset.playerConfig.getNextVid:o.noop,this.write(),this.addEventListerner(),this.bindBrowserEvent(),this.exportsModuleApis()},write:function(){var t={next:"txp-ui-control-play-next",hideClass:Txplayer.dataset.hideClass,tabindex:Txplayer.dataset.tabindex++,nextTip:"txp-next-tip"};this.dataset.renderData=t;var e=o.tmpl(l,t);this.context.$mod.$buttonsleftmod.append(e),this.dataset.$next=this.context.$mod.$buttonsleftmod.find('[data-role="'+t.next+'"]'),this.dataset.$nextTip=this.context.$mod.$buttonsleftmod.find('[data-role="'+t.nextTip+'"]');var a={tipMod:"txp-next-tip-mod",tipText:"txp-next-tip-text",tipPreview:"txp-next-tip-preview",hideClass:Txplayer.dataset.hideClass},n=o.tmpl(x,a);this.context.$mod.$playermod.append(n),this.dataset.$tipMod=this.context.$mod.$playermod.find('[data-role="'+a.tipMod+'"]'),this.dataset.$tipText=this.dataset.$tipMod.find('[data-role="'+a.tipText+'"]'),this.dataset.$tipPreview=this.dataset.$tipMod.find('[data-role="'+a.tipPreview+'"]');var s={tipContentMod:"txp-next-tip-content-mod",tipContentText:"txp-next-tip-content-text",tipContentCancle:"txp-next-tip-content-cancle",tipContentPlay:"txp-next-tip-content-play",tipContentPoster:"txp-next-tip-content-poster",hideClass:Txplayer.dataset.hideClass},i=o.tmpl(p,s);this.context.$mod.$playermod.append(i),this.dataset.$tipContentMod=this.context.$mod.$playermod.find('[data-role="'+s.tipContentMod+'"]'),this.dataset.$tipContentText=this.dataset.$tipContentMod.find('[data-role="'+s.tipContentText+'"]'),this.dataset.$tipContentCancle=this.dataset.$tipContentMod.find('[data-role="'+s.tipContentCancle+'"]'),this.dataset.$tipContentPlay=this.dataset.$tipContentMod.find('[data-role="'+s.tipContentPlay+'"]'),this.dataset.$tipContentPoster=this.dataset.$tipContentMod.find('[data-role="'+s.tipContentPoster+'"]'),this.initDisplay()},remove:function(){this.dataset.$next.remove(),this.dataset.$tipMod.remove(),this.dataset.$tipContentMod.remove()},initDisplay:function(){1==this.context.dataset.nextVid?(this.dataset.$next.removeClass(Txplayer.dataset.hideClass),this.dataset.$next.removeClass("txp_disabled"),this.writeTips()):0==this.context.dataset.nextVid?(this.dataset.$tipMod.addClass(Txplayer.dataset.hideClass),this.dataset.$nextTip.addClass(Txplayer.dataset.hideClass),this.dataset.$next.addClass(Txplayer.dataset.hideClass)):(this.dataset.$next.removeClass(Txplayer.dataset.hideClass),this.dataset.$next.addClass("txp_disabled"))},writeTips:function(){this.dataset.nextData&&this.dataset.nextData.title&&this.dataset.nextData.preview&&(this.dataset.$tipText.html(d.xss(this.dataset.nextData.title)),this.dataset.$tipContentText.html(d.xss(this.dataset.nextData.title)),this.dataset.$tipPreview.attr("src",this.dataset.nextData.preview)),this.dataset.nextData&&this.dataset.nextData.previewPoster&&this.dataset.$tipContentPoster.css({"background-image":"url("+this.dataset.nextData.previewPoster+")"})},canclePlayTheNext:function(){this.dataset.isCancle=!0,clearTimeout(this.dataset.timer),this.dataset.timer=null,this.dataset.$tipContentMod.addClass(Txplayer.dataset.hideClass)},doPlayTheNext:function(t,e){var a=this;if(this.dataset.$tipContentMod.addClass(Txplayer.dataset.hideClass),a.dataset.nextData.showCountdown)a.nofreshDoPlayTheNext(a.dataset.nextVideoInfo,e);else try{this.context.userMsg.broadcast("beforePlayNext",{vid:t||a.dataset.nextData.pageUrl})}catch(t){}},nofreshDoPlayTheNext:function(t,e){if(11===t.vid.length){try{this.context.userMsg.broadcast("beforePlayNext",{vid:t.vid})}catch(t){}var a={vid:t.vid,nextVid:t.nextVid,bullet:t.bullet,bulletId:t.bulletId,duration:t.duration,playStartTime:t.playStartTime,playEndTime:t.playEndTime,isNeedPay:t.isNeedPay,title:t.title,autoplay:!t.hasOwnProperty("autoplay")||t.autoplay,defaultDefinition:t.defaultDefinition};e.hasOwnProperty("connectionPlayType")&&(a.connectionPlayType=e.connectionPlayType),this.context.msg.broadcast("playControl",a)}},playTheNext:function(t){if(d.showInfo("uiPlayNext.playTheNext",t),t=t||{},1==this.context.dataset.nextVid){var e,a=this,n=this.context.dataset.vid;try{e=a.dataset.orgNextVideoInfo?a.dataset.orgNextVideoInfo:a.dataset.getNextVid(n),a.dataset.nextVideoInfo=e}catch(t){d.showInfo("[playTheNext.getNextVid.error]",t)}if(e&&e.vid){if(this.dataset.playNextOptions=t,this.dataset.isPageStopAutoPlay=!1,d.isPageSupportStopAutoPlay()&&"coolOpen"!==this.context.config.playerType){var s=d.isPageHidden(),i=d.isInScreen(this.context.dataset.$playermod);if(void 0!==s&&s||!i)return void(this.dataset.isPageStopAutoPlay=!0)}if(a.dataset.nextData&&(a.dataset.nextData.pageUrl||a.dataset.nextData.showCountdown)&&t.isAllEnd&&!d.os.ipad)return this.dataset.$tipContentMod.removeClass(Txplayer.dataset.hideClass),this.reportUserAction("play-next-float-view"),this.dataset.timer&&(clearTimeout(this.dataset.timer),this.dataset.timer=null),void(this.dataset.timer=setTimeout(function(){a.dataset.isCancle||a.doPlayTheNext(a.dataset.nextData.pageUrl,t)},1e4));if(a.dataset.nextData&&a.dataset.nextData.pageUrl&&!a.dataset.nextData.showCountdown)try{a.context.userMsg.broadcast("beforePlayNext",{vid:e.pageUrl})}catch(t){}else a.nofreshDoPlayTheNext(e,t),a.context.msg.broadcast("updateNextVideoInfo")}else d.showError("\u64ad\u653e\u4e0b\u4e2a\u89c6\u9891\u5931\u8d25","\u627e\u4e0d\u5230vid")}},toggleAutoPlayNext:function(t){if(t){if(this.dataset.isPageStopAutoPlay=!1,this.dataset.nextData&&this.dataset.nextData.pageUrl&&!this.dataset.nextData.showCountdown){try{this.context.userMsg.broadcast("beforePlayNext",{vid:this.dataset.nextVideoInfo.pageUrl})}catch(t){}return}this.nofreshDoPlayTheNext(this.dataset.nextVideoInfo,this.dataset.playNextOptions),this.context.msg.broadcast("updateNextVideoInfo")}},showTip:function(){var t=this;t.dataset.nextData&&t.dataset.nextData.title&&t.dataset.nextData.preview?t.dataset.$tipMod.removeClass(Txplayer.dataset.hideClass):t.dataset.$nextTip.removeClass(Txplayer.dataset.hideClass);// that.dataset.$next.addClass(Txplayer.dataset.btnHoverClass);
},hideTip:function(){var t=this;t.dataset.nextData&&t.dataset.nextData.title&&t.dataset.nextData.preview?t.dataset.$tipMod.addClass(Txplayer.dataset.hideClass):t.dataset.$nextTip.addClass(Txplayer.dataset.hideClass);// that.dataset.$next.removeClass(Txplayer.dataset.btnHoverClass);
},bindMouseEvent:function(){var e=this;this.dataset.$next.on("mouseenter",function(t){o(t.relatedTarget).parents().hasClass("txp_btn_next")||e.showTip()}).on("mouseleave",function(t){o(t.relatedTarget).parents().hasClass("txp_btn_next")||e.hideTip()})},addEventListerner:function(){var a=this;this.dataset.$next.on(Txplayer.dataset.clickEventName,function(){a.context.dataset.nextVid&&(a.hideTip(),a.playTheNext({connectionPlayType:3}))}),this.dataset.$tipContentCancle.on(Txplayer.dataset.clickEventName,function(){a.reportUserAction("play-next-float-cancel-click"),a.canclePlayTheNext(),a.context.msg.broadcast("showUicontrol")}),this.dataset.$tipContentPlay.on(Txplayer.dataset.clickEventName,function(){a.reportUserAction("play-next-float-play-click"),a.doPlayTheNext(a.dataset.nextData.pageUrl,{connectionPlayType:3})}),this.dataset.eventsList={},this.dataset.eventsList[d.getUniqueMsgKey("vidChange")]=function(){a.dataset.isCancle=null,a.dataset.nextData=null,a.dataset.$tipContentMod.addClass(Txplayer.dataset.hideClass)},this.dataset.eventsList[d.getUniqueMsgKey("hideUiControl")]=function(){a.hideTip()},this.dataset.eventsList[d.getUniqueMsgKey("beforeVideoPlay")]=function(){a.canclePlayTheNext(),a.dataset.isCancle=null},this.dataset.eventsList[d.getUniqueMsgKey("userStopVideo")]=function(){a.canclePlayTheNext(),a.dataset.isCancle=null},this.dataset.eventsList[d.getUniqueMsgKey("videoEnd")]=function(t){t.isAllEnd&&a.context.dataset.nextVid&&!a.context.dataset.canPlayTime&&(a.context.dataset.nextVideoInfo.vid||"v3"!=a.context.config.version||a.context.userApi.stop&&a.context.userApi.stop(),a.context.dataset.disableAutoPlayNext||a.context.dataset.isLoopPlay||a.playTheNext({connectionPlayType:2,isAllEnd:!0}))},this.dataset.eventsList[d.getUniqueMsgKey("updateNextVideoInfo")]=function(){var t=!a.context.dataset.isLoopPlay&&!a.context.dataset.disableAutoPlayNext;a.context.dataset.nextVideoInfo=t?a.dataset.nextVideoInfoCopy:{}},this.dataset.eventsList[d.getUniqueMsgKey("userPlayNext")]=function(t){a.context.dataset.nextVid&&(a.hideTip(),a.playTheNext(t))},o.each(this.dataset.eventsList,function(t,e){a.context.msg.on(t,e)}),d.mobile||this.bindMouseEvent()},bindBrowserEvent:function(){var t,e=this;d.isPageSupportStopAutoPlay()&&"coolOpen"!==e.context.config.playerType&&(d.addPageVisibilityChangeEvent(function(t){e.dataset.isPageStopAutoPlay&&!t&&d.isInScreen(e.context.dataset.$playermod)&&e.toggleAutoPlayNext(!0)}),o(window).scroll(function(){clearTimeout(t),t=setTimeout(function(){e.dataset.isPageStopAutoPlay&&d.isInScreen(e.context.dataset.$playermod)&&e.toggleAutoPlayNext(!0)},300)}))},reportUserAction:function(t){this.context.msg.broadcast("reportUsrAction",{usr_action:t})},exportsModuleApis:function(){var s=this;this.dataset.moduleApis={},this.dataset.moduleApis.getNextData=function(t,e){return s.dataset.nextData},this.dataset.moduleApis.setNextVid=function(t,e){if(s.context.dataset.nextVid=t.nextVid,1==s.context.dataset.nextVid){var a,n=s.context.dataset.vid;try{a=s.dataset.getNextVid(n)}catch(t){d.showInfo("[playTheNext.getNextVid.error]",t)}a&&(s.dataset.orgNextVideoInfo=a,s.dataset.nextData={vid:n,nextVid:a.vid},a.title&&(s.dataset.nextData.title=a.title),a.preview&&(s.dataset.nextData.preview=a.preview),a.showCountdown&&(s.dataset.nextData.showCountdown=a.showCountdown),a.pageUrl&&(s.dataset.nextData.pageUrl=a.pageUrl),a.previewPoster&&(s.dataset.nextData.previewPoster=a.previewPoster),"v.qq.com"!==location.hostname||d.os.ipad||s.dataset.nextData.pageUrl||s.context.dataset.canPlayTime||s.context.dataset.isLoopPlay?(s.context.dataset.nextVideoInfo={},s.dataset.nextVideoInfoCopy={}):(s.context.dataset.nextVideoInfo.vid=a.vid,s.context.dataset.nextVideoInfo.cid=a.cid||s.context.dataset.cid,s.dataset.nextVideoInfoCopy.vid=a.vid,s.dataset.nextVideoInfoCopy.cid=a.cid||s.context.dataset.cid))}else s.context.dataset.nextVideoInfo={},s.dataset.nextVideoInfoCopy={};s.initDisplay(),s.context.msg.broadcast("updateNextVideoInfo")},o.extend(this.context.userApi,this.dataset.moduleApis),o.each(this.dataset.moduleApis,function(t,e){s.context.msg.on(t,e)})}},Txplayer.register("UiPlayNext",n)},193:function(t,e){t.exports='<txpdiv data-role="<%=next%>" class="txp_btn txp_btn_next" data-report="play-next" aria-label="\u4e0b\u4e00\u96c6">\n  <svg class="txp_icon txp_icon_next" version="1.1" viewBox="0 0 36 36">\n    <use class="txp_svg_symbol txp_svg_next" xlink:href="<%=svgPrefix%>#txp_svg_next" />\n  </svg>\n  <txpdiv class="txp_tooltip <%=hideClass%>" data-role="<%=nextTip%>">\u4e0b\u4e00\u96c6</txpdiv>\n</txpdiv>'},194:function(t,e){t.exports='<txpdiv class="txp_hint_next <%=hideClass%>" data-role="<%=tipMod%>">\n<txpdiv class="txp_next_pic"><img data-role="<%=tipPreview%>" alt="" /></txpdiv>\n\t<txpdiv class="txp_next_wording">\n\t\t<txpdiv class="txp_label">\u4e0b\u4e00\u4e2a</txpdiv>\n\t\t<txpdiv class="txp_next_title" data-role="<%=tipText%>"></txpdiv>\n\t</txpdiv>\n</txpdiv>\n'},195:function(t,e){t.exports='<txpdiv class="txp_overlay_next <%=hideClass%>" data-role="<%=tipContentMod%>">\n<div class="txp_next_poster" data-role="<%=tipContentPoster%>" style="background-image:url()"></div>\n<txpdiv class="txp_next_content">\n\t<txpdiv class="txp_label">\u5373\u5c06\u64ad\u653e</txpdiv>\n\t<txpdiv class="txp_next_title" data-role="<%=tipContentText%>"></txpdiv>\n\t<a class="txp_cancel" href="javascript:" data-role="<%=tipContentCancle%>">\u53d6\u6d88</a>\n\t<button class="txp_btn txp_btn_play_lg" data-status="play" data-role="<%=tipContentPlay%>">\n\t\t<svg class="txp_icon txp_icon_play" viewBox="0 0 36 36" >\n\t\t\t<use class="txp_svg_symbol txp_svg_play" xlink:href="<%=svgPrefix%>#txp_svg_play" />\n\t\t</svg>\n\t\t<svg class="txp_icon_cirlce" viewBox="0 0 72 72" >\n\t\t\t<circle r="34" cy="36" cx="36"></circle>\n\t\t</svg>\n\t</button>\n</txpdiv>\n</txpdiv>'}});